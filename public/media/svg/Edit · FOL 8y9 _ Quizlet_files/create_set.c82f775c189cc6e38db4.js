(self.webpackChunkquizlet=self.webpackChunkquizlet||[]).push([["create_set","app_j_utils_AudioPlayer_ts","unconfirmed_permission_error_modal_lazy","rich_text_editor_lazy"],{"./node_modules/@vimeo/player/dist/player.js":function(e,t,s){
/*! @vimeo/player v2.10.0 | (c) 2019 Vimeo | MIT License | https://github.com/vimeo/player.js */
e.exports=function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,s,r){return s&&t(e.prototype,s),r&&t(e,r),e}var i=void 0!==s.g&&"[object global]"==={}.toString.call(s.g);function n(e,t){return 0===e.indexOf(t.toLowerCase())?e:"".concat(t.toLowerCase()).concat(e.substr(0,1).toUpperCase()).concat(e.substr(1))}function o(e){return Boolean(e&&1===e.nodeType&&"nodeName"in e&&e.ownerDocument&&e.ownerDocument.defaultView)}function a(e){return!isNaN(parseFloat(e))&&isFinite(e)&&Math.floor(e)==e}function l(e){return/^(https?:)?\/\/((player|www)\.)?vimeo\.com(?=$|\/)/.test(e)}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,s=e.url,r=t||s;if(!r)throw new Error("An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.");if(a(r))return"https://vimeo.com/".concat(r);if(l(r))return r.replace("http:","https:");if(t)throw new TypeError("“".concat(t,"” is not a valid video id."));throw new TypeError("“".concat(r,"” is not a vimeo.com url."))}var u=void 0!==Array.prototype.indexOf,c="undefined"!=typeof window&&void 0!==window.postMessage;if(!(i||u&&c))throw new Error("Sorry, the Vimeo Player API is not available in this browser.");var p="undefined"!=typeof window?window:void 0!==s.g?s.g:"undefined"!=typeof self?self:{};function h(e,t){return e(t={exports:{}},t.exports),t.exports
/*!
   * weakmap-polyfill v2.0.0 - ECMAScript6 WeakMap polyfill
   * https://github.com/polygonplanet/weakmap-polyfill
   * Copyright (c) 2015-2016 polygon planet <polygon.planet.aqua@gmail.com>
   * @license MIT
   */}!function(e){if(!e.WeakMap){var t=Object.prototype.hasOwnProperty,s=function(e,t,s){Object.defineProperty?Object.defineProperty(e,t,{configurable:!0,writable:!0,value:s}):e[t]=s};e.WeakMap=function(){function e(){if(void 0===this)throw new TypeError("Constructor WeakMap requires 'new'");if(s(this,"_id",n("_WeakMap")),arguments.length>0)throw new TypeError("WeakMap iterable is not supported")}function i(e,s){if(!r(e)||!t.call(e,"_id"))throw new TypeError(s+" method called on incompatible receiver "+typeof e)}function n(e){return e+"_"+o()+"."+o()}function o(){return Math.random().toString().substring(2)}return s(e.prototype,"delete",(function(e){if(i(this,"delete"),!r(e))return!1;var t=e[this._id];return!(!t||t[0]!==e||(delete e[this._id],0))})),s(e.prototype,"get",(function(e){if(i(this,"get"),r(e)){var t=e[this._id];return t&&t[0]===e?t[1]:void 0}})),s(e.prototype,"has",(function(e){if(i(this,"has"),!r(e))return!1;var t=e[this._id];return!(!t||t[0]!==e)})),s(e.prototype,"set",(function(e,t){if(i(this,"set"),!r(e))throw new TypeError("Invalid value used as weak map key");var n=e[this._id];return n&&n[0]===e?(n[1]=t,this):(s(e,this._id,[e,t]),this)})),s(e,"_polyfill",!0),e}()}function r(e){return Object(e)===e}}("undefined"!=typeof self?self:"undefined"!=typeof window?window:p);var g=h((function(e){
/*! Native Promise Only
      v0.8.1 (c) Kyle Simpson
      MIT License: http://getify.mit-license.org
  */
var t,s,r;r=function(){var e,t,s,r=Object.prototype.toString,i="undefined"!=typeof setImmediate?function(e){return setImmediate(e)}:setTimeout;try{Object.defineProperty({},"x",{}),e=function(e,t,s,r){return Object.defineProperty(e,t,{value:s,writable:!0,configurable:!1!==r})}}catch(_){e=function(e,t,s){return e[t]=s,e}}function n(e,r){s.add(e,r),t||(t=i(s.drain))}function o(e){var t,s=typeof e;return null==e||"object"!=s&&"function"!=s||(t=e.then),"function"==typeof t&&t}function a(){for(var e=0;e<this.chain.length;e++)l(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function l(e,t,s){var r,i;try{!1===t?s.reject(e.msg):(r=!0===t?e.msg:t.call(void 0,e.msg))===s.promise?s.reject(TypeError("Promise-chain cycle")):(i=o(r))?i.call(r,s.resolve,s.reject):s.resolve(r)}catch(_){s.reject(_)}}function d(e){var t,s=this;if(!s.triggered){s.triggered=!0,s.def&&(s=s.def);try{(t=o(e))?n((function(){var r=new p(s);try{t.call(e,(function(){d.apply(r,arguments)}),(function(){u.apply(r,arguments)}))}catch(_){u.call(r,_)}})):(s.msg=e,s.state=1,s.chain.length>0&&n(a,s))}catch(_){u.call(new p(s),_)}}}function u(e){var t=this;t.triggered||(t.triggered=!0,t.def&&(t=t.def),t.msg=e,t.state=2,t.chain.length>0&&n(a,t))}function c(e,t,s,r){for(var i=0;i<t.length;i++)!function(i){e.resolve(t[i]).then((function(e){s(i,e)}),r)}(i)}function p(e){this.def=e,this.triggered=!1}function h(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function g(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var t=new h(this);this.then=function(e,s){var r={success:"function"!=typeof e||e,failure:"function"==typeof s&&s};return r.promise=new this.constructor((function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");r.resolve=e,r.reject=t})),t.chain.push(r),0!==t.state&&n(a,t),r.promise},this.catch=function(e){return this.then(void 0,e)};try{e.call(void 0,(function(e){d.call(t,e)}),(function(e){u.call(t,e)}))}catch(_){u.call(t,_)}}s=function(){var e,s,r;function i(e,t){this.fn=e,this.self=t,this.next=void 0}return{add:function(t,n){r=new i(t,n),s?s.next=r:e=r,s=r,r=void 0},drain:function(){var r=e;for(e=s=t=void 0;r;)r.fn.call(r.self),r=r.next}}}();var m=e({},"constructor",g,!1);return g.prototype=m,e(m,"__NPO__",0,!1),e(g,"resolve",(function(e){var t=this;return e&&"object"==typeof e&&1===e.__NPO__?e:new t((function(t,s){if("function"!=typeof t||"function"!=typeof s)throw TypeError("Not a function");t(e)}))})),e(g,"reject",(function(e){return new this((function(t,s){if("function"!=typeof t||"function"!=typeof s)throw TypeError("Not a function");s(e)}))})),e(g,"all",(function(e){var t=this;return"[object Array]"!=r.call(e)?t.reject(TypeError("Not an array")):0===e.length?t.resolve([]):new t((function(s,r){if("function"!=typeof s||"function"!=typeof r)throw TypeError("Not a function");var i=e.length,n=Array(i),o=0;c(t,e,(function(e,t){n[e]=t,++o===i&&s(n)}),r)}))})),e(g,"race",(function(e){var t=this;return"[object Array]"!=r.call(e)?t.reject(TypeError("Not an array")):new t((function(s,r){if("function"!=typeof s||"function"!=typeof r)throw TypeError("Not a function");c(t,e,(function(e,t){s(t)}),r)}))})),g},(s=p)[t="Promise"]=s[t]||r(),e.exports&&(e.exports=s[t])})),m=new WeakMap;function _(e,t,s){var r=m.get(e.element)||{};t in r||(r[t]=[]),r[t].push(s),m.set(e.element,r)}function f(e,t){return(m.get(e.element)||{})[t]||[]}function v(e,t,s){var r=m.get(e.element)||{};if(!r[t])return!0;if(!s)return r[t]=[],m.set(e.element,r),!0;var i=r[t].indexOf(s);return-1!==i&&r[t].splice(i,1),m.set(e.element,r),r[t]&&0===r[t].length}function S(e,t){var s=f(e,t);if(s.length<1)return!1;var r=s.shift();return v(e,t,r),r}function C(e,t){var s=m.get(e);m.set(t,s),m.delete(e)}var b=["autopause","autoplay","background","byline","color","controls","dnt","height","id","loop","maxheight","maxwidth","muted","playsinline","portrait","responsive","speed","texttrack","title","transparent","url","width"];function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return b.reduce((function(t,s){var r=e.getAttribute("data-vimeo-".concat(s));return(r||""===r)&&(t[s]=""===r?1:r),t}),t)}function E(e,t){var s=e.html;if(!t)throw new TypeError("An element must be provided");if(null!==t.getAttribute("data-vimeo-initialized"))return t.querySelector("iframe");var r=document.createElement("div");return r.innerHTML=s,t.appendChild(r.firstChild),t.setAttribute("data-vimeo-initialized","true"),t.querySelector("iframe")}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;return new Promise((function(r,i){if(!l(e))throw new TypeError("“".concat(e,"” is not a vimeo.com url."));var n="https://vimeo.com/api/oembed.json?url=".concat(encodeURIComponent(e));for(var o in t)t.hasOwnProperty(o)&&(n+="&".concat(o,"=").concat(encodeURIComponent(t[o])));var a="XDomainRequest"in window?new XDomainRequest:new XMLHttpRequest;a.open("GET",n,!0),a.onload=function(){if(404!==a.status)if(403!==a.status)try{var t=JSON.parse(a.responseText);if(403===t.domain_status_code)return E(t,s),void i(new Error("“".concat(e,"” is not embeddable.")));r(t)}catch(n){i(n)}else i(new Error("“".concat(e,"” is not embeddable.")));else i(new Error("“".concat(e,"” was not found.")))},a.onerror=function(){var e=a.status?" (".concat(a.status,")"):"";i(new Error("There was an error fetching the embed code from Vimeo".concat(e,".")))},a.send()}))}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=[].slice.call(e.querySelectorAll("[data-vimeo-id], [data-vimeo-url]")),s=function(e){"console"in window&&console.error&&console.error("There was an error creating an embed: ".concat(e))};t.forEach((function(e){try{if(null!==e.getAttribute("data-vimeo-defer"))return;var t=y(e);j(d(t),t,e).then((function(t){return E(t,e)})).catch(s)}catch(r){s(r)}}))}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;if(!window.VimeoPlayerResizeEmbeds_){window.VimeoPlayerResizeEmbeds_=!0;var t=function(t){if(l(t.origin)&&t.data&&"spacechange"===t.data.event)for(var s=e.querySelectorAll("iframe"),r=0;r<s.length;r++)if(s[r].contentWindow===t.source){s[r].parentElement.style.paddingBottom="".concat(t.data.data[0].bottom,"px");break}};window.addEventListener?window.addEventListener("message",t,!1):window.attachEvent&&window.attachEvent("onmessage",t)}}function I(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){return console.warn(t),{}}return e}function w(e,t,s){if(e.element.contentWindow&&e.element.contentWindow.postMessage){var r={method:t};void 0!==s&&(r.value=s);var i=parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\d+).*$/,"$1"));i>=8&&i<10&&(r=JSON.stringify(r)),e.element.contentWindow.postMessage(r,e.origin)}}function A(e,t){var s,r=[];if((t=I(t)).event)"error"===t.event&&f(e,t.data.method).forEach((function(s){var r=new Error(t.data.message);r.name=t.data.name,s.reject(r),v(e,t.data.method,s)})),r=f(e,"event:".concat(t.event)),s=t.data;else if(t.method){var i=S(e,t.method);i&&(r.push(i),s=t.value)}r.forEach((function(t){try{if("function"==typeof t)return void t.call(e,s);t.resolve(s)}catch(r){}}))}var O=new WeakMap,R=new WeakMap,D=function(){function t(s){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e(this,t),window.jQuery&&s instanceof jQuery&&(s.length>1&&window.console&&console.warn&&console.warn("A jQuery object with multiple elements was passed, using the first element."),s=s[0]),"undefined"!=typeof document&&"string"==typeof s&&(s=document.getElementById(s)),!o(s))throw new TypeError("You must pass either a valid element or a valid id.");var n=s.ownerDocument.defaultView;if("IFRAME"!==s.nodeName){var a=s.querySelector("iframe");a&&(s=a)}if("IFRAME"===s.nodeName&&!l(s.getAttribute("src")||""))throw new Error("The player element passed isn’t a Vimeo embed.");if(O.has(s))return O.get(s);this.element=s,this.origin="*";var u=new g((function(e,t){var o=function(s){if(l(s.origin)&&r.element.contentWindow===s.source){"*"===r.origin&&(r.origin=s.origin);var i=I(s.data);if(i&&"error"===i.event&&i.data&&"ready"===i.data.method){var n=new Error(i.data.message);return n.name=i.data.name,void t(n)}var o=i&&"ready"===i.event,a=i&&"ping"===i.method;if(o||a)return r.element.setAttribute("data-ready","true"),void e();A(r,i)}};if(n.addEventListener?n.addEventListener("message",o,!1):n.attachEvent&&n.attachEvent("onmessage",o),"IFRAME"!==r.element.nodeName){var a=y(s,i);j(d(a),a,s).then((function(e){var t=E(e,s);return r.element=t,r._originalElement=s,C(s,t),O.set(r.element,r),e})).catch(t)}}));return R.set(this,u),O.set(this.element,this),"IFRAME"===this.element.nodeName&&w(this,"ping"),this}return r(t,[{key:"callMethod",value:function(e){var t=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new g((function(r,i){return t.ready().then((function(){_(t,e,{resolve:r,reject:i}),w(t,e,s)})).catch(i)}))}},{key:"get",value:function(e){var t=this;return new g((function(s,r){return e=n(e,"get"),t.ready().then((function(){_(t,e,{resolve:s,reject:r}),w(t,e)})).catch(r)}))}},{key:"set",value:function(e,t){var s=this;return new g((function(r,i){if(e=n(e,"set"),null==t)throw new TypeError("There must be a value to set.");return s.ready().then((function(){_(s,e,{resolve:r,reject:i}),w(s,e,t)})).catch(i)}))}},{key:"on",value:function(e,t){if(!e)throw new TypeError("You must pass an event name.");if(!t)throw new TypeError("You must pass a callback function.");if("function"!=typeof t)throw new TypeError("The callback must be a function.");0===f(this,"event:".concat(e)).length&&this.callMethod("addEventListener",e).catch((function(){})),_(this,"event:".concat(e),t)}},{key:"off",value:function(e,t){if(!e)throw new TypeError("You must pass an event name.");if(t&&"function"!=typeof t)throw new TypeError("The callback must be a function.");v(this,"event:".concat(e),t)&&this.callMethod("removeEventListener",e).catch((function(e){}))}},{key:"loadVideo",value:function(e){return this.callMethod("loadVideo",e)}},{key:"ready",value:function(){var e=R.get(this)||new g((function(e,t){t(new Error("Unknown player. Probably unloaded."))}));return g.resolve(e)}},{key:"addCuePoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.callMethod("addCuePoint",{time:e,data:t})}},{key:"removeCuePoint",value:function(e){return this.callMethod("removeCuePoint",e)}},{key:"enableTextTrack",value:function(e,t){if(!e)throw new TypeError("You must pass a language.");return this.callMethod("enableTextTrack",{language:e,kind:t})}},{key:"disableTextTrack",value:function(){return this.callMethod("disableTextTrack")}},{key:"pause",value:function(){return this.callMethod("pause")}},{key:"play",value:function(){return this.callMethod("play")}},{key:"unload",value:function(){return this.callMethod("unload")}},{key:"destroy",value:function(){var e=this;return new g((function(t){R.delete(e),O.delete(e.element),e._originalElement&&(O.delete(e._originalElement),e._originalElement.removeAttribute("data-vimeo-initialized")),e.element&&"IFRAME"===e.element.nodeName&&e.element.parentNode&&e.element.parentNode.removeChild(e.element),t()}))}},{key:"getAutopause",value:function(){return this.get("autopause")}},{key:"setAutopause",value:function(e){return this.set("autopause",e)}},{key:"getBuffered",value:function(){return this.get("buffered")}},{key:"getColor",value:function(){return this.get("color")}},{key:"setColor",value:function(e){return this.set("color",e)}},{key:"getCuePoints",value:function(){return this.get("cuePoints")}},{key:"getCurrentTime",value:function(){return this.get("currentTime")}},{key:"setCurrentTime",value:function(e){return this.set("currentTime",e)}},{key:"getDuration",value:function(){return this.get("duration")}},{key:"getEnded",value:function(){return this.get("ended")}},{key:"getLoop",value:function(){return this.get("loop")}},{key:"setLoop",value:function(e){return this.set("loop",e)}},{key:"setMuted",value:function(e){return this.set("muted",e)}},{key:"getMuted",value:function(){return this.get("muted")}},{key:"getPaused",value:function(){return this.get("paused")}},{key:"getPlaybackRate",value:function(){return this.get("playbackRate")}},{key:"setPlaybackRate",value:function(e){return this.set("playbackRate",e)}},{key:"getPlayed",value:function(){return this.get("played")}},{key:"getSeekable",value:function(){return this.get("seekable")}},{key:"getSeeking",value:function(){return this.get("seeking")}},{key:"getTextTracks",value:function(){return this.get("textTracks")}},{key:"getVideoEmbedCode",value:function(){return this.get("videoEmbedCode")}},{key:"getVideoId",value:function(){return this.get("videoId")}},{key:"getVideoTitle",value:function(){return this.get("videoTitle")}},{key:"getVideoWidth",value:function(){return this.get("videoWidth")}},{key:"getVideoHeight",value:function(){return this.get("videoHeight")}},{key:"getVideoUrl",value:function(){return this.get("videoUrl")}},{key:"getVolume",value:function(){return this.get("volume")}},{key:"setVolume",value:function(e){return this.set("volume",e)}}]),t}();return i||(x(),T()),D}()},"./app/j/assembly/AssemblyCheckbox.tsx":(e,t,s)=>{"use strict";s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./app/j/assembly/foundations/Spacing.ts"),i=s("./app/j/components/UIBaseControl.tsx"),n=s("./node_modules/polished/dist/polished.cjs.js"),o=s("./node_modules/react/index.js"),a=s("./node_modules/react/jsx-runtime.js");(0,n.hO)(18),r.Ki.Medium;function l(e){return(0,a.jsx)(i.Z,Object.assign({},e,{baseClassName:"AssemblyCheckbox",type:"checkbox"}))}t.Z=o.memo(l),s("./.linaria-cache/app/j/assembly/AssemblyCheckbox.linaria.css")},"./app/j/assembly/AssemblyNotice.tsx":(e,t,s)=>{"use strict";s.d(t,{e:()=>r,Z:()=>a});var r,i=s("./node_modules/classnames/index.js"),n=s.n(i),o=(s("./node_modules/react/index.js"),s("./node_modules/react/jsx-runtime.js"));function a(e){var{children:t,variant:s=r.ERROR}=e,i=n()("AssemblyNotice",{"AssemblyNotice-error":s===r.ERROR});return(0,o.jsx)("div",{className:i,children:t})}!function(e){e.ERROR="error"}(r||(r={})),s("./.linaria-cache/app/j/assembly/AssemblyNotice.linaria.css")},"./app/j/assembly/AssemblyTextarea.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>T});var r=s("./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js"),i=(s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/@linaria/core/lib/index.js")),n=s("./node_modules/@linaria/react/lib/index.js"),o=s("./app/j/assembly/foundations/Spacing.ts"),a=s("./node_modules/polished/dist/polished.cjs.js"),l=s("./node_modules/react/index.js"),d=s("./node_modules/keycode-js/dist/keycode.cjs.js"),u=s("./node_modules/react/jsx-runtime.js"),c=(e,t)=>{var s=-1,r=-1,i=!1,n=!1,o=()=>t?t.current:null,a=(e,s)=>{var{current:r}=t;null!=r&&r.setSelectionRange&&r.setSelectionRange(e,s)},l=function(e){void 0===e&&(e=r);var t,i,n=o();n&&(-1!==e&&(i=e,(t=n).focus(),"number"==typeof t.selectionStart&&t.setSelectionRange(i,i)),s=e,r=e)};return(0,u.jsx)("textarea",Object.assign({},e,{onFocus:t=>{n||(i=!0,-1!==s?window.setTimeout((()=>{a(s,r),i=!1})):window.setTimeout((()=>{var t;l(null==(t=e.value)?void 0:t.length),i=!1}))),e.onFocus&&e.onFocus(t)},onMouseDown:()=>{n=!0},onSelect:t=>{n=!1,(()=>{if(!i){var e=o();if(e){var{selectionStart:t,selectionEnd:n}=e;s=t,r=n}}})(),e.onSelect&&e.onSelect(t)},ref:t}))},p=l.forwardRef(c),h=["label","minHeight"],g=(0,n.z)("div")({name:"AutoExpandTextareaMain",class:"asc1vt2"}),m=(0,n.z)("div")({name:"AutoExpandTextareaWrapper",class:"a1fcz3cu"}),_=(0,n.z)("span")({name:"AssemblyTextareaHeading",class:"ah6785x"}),f=(0,n.z)("div")({name:"AutoExpandTextareaSizer",class:"a17bzrsx",vars:{"a17bzrsx-0":[e=>{var t;return null!=(t=e.minHeight)?t:"auto"}]}}),v=(e,t)=>{var s=e.defaultValue?void 0:e.value,{label:n,minHeight:o}=e,a=(0,r.Z)(e,h),l=s?(0,u.jsx)(_,{children:n}):null;return(0,u.jsxs)(g,{children:[(0,u.jsx)(f,{minHeight:o,children:e.value+"\n"}),(0,u.jsxs)(m,{children:[l,(0,u.jsx)(p,Object.assign({ref:t},a,{"aria-label":n,className:(0,i.cx)("a161zioz",e.className),onBlur:t=>{e.onBlur&&e.onBlur(t)},onChange:t=>{e.onChange&&e.onChange(t)},onFocus:t=>{e.onFocus&&e.onFocus(t)},onKeyDown:s=>{var r;e.onKeyDown&&e.onKeyDown(s),s.keyCode===d.AC&&(e.singleLine||s.metaKey)&&(null==(r=t.current)||r.blur())},value:s}))]})]})},S=l.forwardRef(v);s("./.linaria-cache/app/j/assembly/AssemblyAutoExpandTextarea.linaria.css");var C=["invalid","label","type"],b="bxtl8jy",y=(0,n.z)("div")({name:"AssemblyTextareaContent",class:"as2ws6i"}),E=(0,n.z)("textarea")({name:"Textarea",class:"t1k2umqi",vars:{"t1k2umqi-0":[e=>e.hasLabel?"0 "+o.Ki.Small+" "+o.Ki.Xxsmall:(0,a.hO)(14)+" "+o.Ki.Small]}}),j=(0,n.z)("span")({name:"LabelHeading",class:"l1205mkx"}),x=(e,t)=>{var{invalid:s,label:n,type:o}=e,a=(0,r.Z)(e,C),l=Object.assign({},a,{defaultValue:e.onChange?void 0:e.value,label:n,value:e.onChange?e.value:void 0}),d=!!(e.defaultValue?void 0:e.value)&&!!n,c=d?(0,u.jsx)(j,{children:n}):null,p="autoExpand"===o?(0,u.jsx)(S,Object.assign({},l,{className:(0,i.cx)(b,"ad7k3b5"),ref:t})):(0,u.jsxs)(u.Fragment,{children:[c,(0,u.jsx)(E,Object.assign({hasLabel:d},l,{"aria-label":n,className:b,ref:t,rows:1}))]});return(0,u.jsx)("label",{"aria-disabled":e.disabled||void 0,"aria-invalid":s||void 0,"aria-readonly":e.readOnly||void 0,"aria-required":e.required||void 0,className:"ll0f14n",htmlFor:e.id,children:(0,u.jsx)(y,{children:p})})},T=l.forwardRef(x);s("./.linaria-cache/app/j/assembly/AssemblyTextarea.linaria.css")},"./app/j/authentication/components/AuthModalFullPage.tsx":(e,t,s)=>{"use strict";s.d(t,{u:()=>r,Z:()=>E});var r,i=s("./node_modules/@linaria/react/lib/index.js"),n=s("./app/j/assembly/foundations/Color.ts"),o=s("./app/j/assembly/foundations/Primitives.tsx"),a=s("./app/j/assembly/modals/components/AssemblyModal.tsx"),l=s("./app/j/compatibility/logger/useLogger.ts"),d=s("./app/j/components/SiteLogo.tsx"),u=s("./app/j/context/RouteContext.tsx"),c=s("./app/j/i18n/useTranslation.ts"),p=s("./node_modules/polished/dist/polished.cjs.js"),h=s("./node_modules/react/index.js"),g=s("./node_modules/react/jsx-runtime.js"),m=(0,i.z)(o.H1)({name:"ImageText",class:"i1dxxsrk",vars:{"i1dxxsrk-1":[e=>e.isLogin?(0,p.hO)(300):(0,p.hO)(500)],"i1dxxsrk-3":[e=>e.isLogin?(0,p.hO)(250):(0,p.hO)(365)]}}),_=(0,i.z)("div")({name:"SiteLogoContainer",class:"srk79j3"}),f=(0,i.z)("section")({name:"Content",class:"cosdz4w"}),v=(0,i.z)("div")({name:"SidebarRebrand",class:"s1oaxobu"}),S=(0,i.z)("div")({name:"AuthForm",class:"avsxyiq"}),C=(0,i.z)("div")({name:"AuthFormContent",class:"a1pcnvbg"}),b=(0,i.z)("div")({name:"AuthFormTabs",class:"auu3mjs"}),y=(0,i.z)(o.H3)({name:"AuthFormTab",class:"a1cdxe01",vars:{"a1cdxe01-0":[e=>e.isActive?n.Kz.$200:n.i_.$500]}});function E(e){var{logPageAction:t}=(0,l.wL)(),{t:s}=(0,c.Z)(),i=(0,h.useContext)(u.jj).actionString||void 0,{currentTab:n,includeCloseButton:o,redir:p,onOpenLoginFromSignup:E,onOpenSignupFromLogin:j}=e;var x,T=(0,g.jsxs)("svg",{className:"anqpypq",children:[(0,g.jsx)("noscript",{}),(0,g.jsx)("use",{xlinkHref:"#accents_underline"}),(0,g.jsx)("noscript",{})]}),I=(0,g.jsxs)(b,{role:"tablist",children:[(0,g.jsxs)(y,{isActive:n===r.Signup,onClick:()=>{n!==r.Signup&&(t("auth-modal-tab-click",r.Signup),j({redir:p,screenName:i,signupOrigin:"signup-tab-on-login-modal"}))},role:"tab",children:[s("global.header.sign_up.button"),n===r.Signup?T:null]}),(0,g.jsxs)(y,{isActive:n===r.Login,onClick:()=>{n!==r.Login&&(t("auth-modal-tab-click",r.Login),E())},role:"tab",children:[s("global.header.log_in.button"),n===r.Login?T:null]})]}),w=(0,g.jsxs)(f,{children:[(0,g.jsxs)(v,{children:[(0,g.jsx)(m,{isLogin:n===r.Login,children:(x=n===r.Login,s(x?"global.login_modal.image_text":"global.sign_up_modal.image_text"))}),(0,g.jsx)(_,{children:(0,g.jsx)(d.Z,{})})]}),(0,g.jsx)(S,{children:(0,g.jsxs)(C,{children:[I,e.children]})})]});return(0,g.jsx)(a.Z,{body:w,desktopVariant:"fullPage",disableScrolling:!0,enableMargin:!1,includeCloseButton:o,isOpen:e.isOpen,onClose:e.onClose,shouldCloseOnOverlayClick:e.shouldCloseOnOverlayClick})}!function(e){e.Signup="signup",e.Login="login"}(r||(r={})),s("./.linaria-cache/app/j/authentication/components/AuthModalFullPage.linaria.css")},"./app/j/authentication/components/ValidationErrors.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s("./node_modules/@linaria/react/lib/index.js"),i=s("./app/j/assembly/AssemblyNotice.tsx"),n=(s("./node_modules/react/index.js"),s("./node_modules/react/jsx-runtime.js")),o=(0,r.z)("ul")({name:"ValidationErrorsList",class:"v1acagku"});function a(e){var{messages:t}=e;return(0,n.jsx)(i.Z,{children:t.length>1?(0,n.jsx)(o,{children:t.map(((e,t)=>(0,n.jsx)("li",{children:e},t)))}):t[0]})}s("./.linaria-cache/app/j/authentication/components/ValidationErrors.linaria.css")},"./app/j/authentication/styles.tsx":(e,t,s)=>{"use strict";s.d(t,{W:()=>i,i:()=>n});var r=s("./node_modules/@linaria/react/lib/index.js"),i=(0,r.z)("div")({name:"FormField",class:"f1a80i9z"}),n=(0,r.z)("div")({name:"Divider",class:"d73uzhc"});s("./.linaria-cache/app/j/authentication/styles.linaria.css")},"./app/j/components/AddSetToClassList.tsx":(e,t,s)=>{"use strict";s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.promise.js");var r=s("./app/j/compatibility/hoc/withLoggerConfig.tsx"),i=s("./app/j/compatibility/logger/classComponentLoggers.ts"),n=s("./app/j/components/T.tsx"),o=s("./app/j/components/ToggleList.tsx"),a=s("./app/j/components/UIParagraph.tsx"),l=s("./app/j/config/enums.ts"),d=s("./node_modules/react/index.js"),u=s("./app/j/utils/FetchWith.ts"),c=s("./app/j/utils/ImmutableHelpers.ts"),p=s("./node_modules/react/jsx-runtime.js"),h="/webapi/3.2/class-sets";class g extends d.Component{constructor(){super(...arguments),this.state={classesMap:this.initOrderedClassesMap(this.props.classesToAddSetTo)},this.handleToggleClass=e=>{var t=e.id,s=this.props.set.id,r={classId:t,setId:s},n=e.isAlreadyAdded?h:h+"/save";(e.isAlreadyAdded?u.HL:u.cZ)(n,{data:[r]}).then((e=>e.responses[0])).then((r=>{if(r.error)throw new Error(r.error);return e.isAlreadyAdded?this.logRemovedSetFromClass({classId:t,setId:s}):this.logAddedSetToClass({classId:t,setId:s}),r})).then((()=>{var t=this.state.classesMap.update(e.id,(e=>Object.assign({},e,{isAlreadyAdded:!e.isAlreadyAdded})));this.setState({classesMap:t})})).then((()=>{var{shouldRedirectToClassProgressTab:e=!1}=this.props;e&&window.location.assign("/class/"+r.classId+"/progress/"+r.setId+"/activity")})).catch((e=>{(0,i.Pv)(this.props.loggerConfig,"set_page_add_to_class_error",e)}))},this.logAddedSetToClass=e=>{var{classId:t,setId:s}=e;(0,i.Pv)(this.props.loggerConfig,"added_set_to_class",{classId:t,setId:s,context:"set_page_add_to_class_or_folder_modal"})},this.logRemovedSetFromClass=e=>{var{classId:t,setId:s}=e;(0,i.Pv)(this.props.loggerConfig,"removed_set_from_class",{classId:t,setId:s,context:"set_page_add_to_class_or_folder_modal"})}}getClassesAsListItems(){return this.state.classesMap.valueSeq().toArray().map((e=>({heading:e.title,isChecked:e.isAlreadyAdded,isDisabled:!e.canModifyClassSet,item:e})))}renderEmptyClassesComponent(){var e,{shouldRedirectToClassProgressTab:t=!1}=this.props;return t?(0,p.jsx)(p.Fragment,{}):(e=this.props.hasClasses?this.isSetPublic()?(0,p.jsx)(n.Z,{id:"global.add_set_to_class_list.empty.cannot_add"}):(0,p.jsx)(n.Z,{id:"global.add_set_to_class_list.empty.creator_only"}):(0,p.jsx)(n.Z,{id:"global.add_set_to_class_list.empty.not_in_any_classes"}),(0,p.jsx)(a.Z,{children:e}))}render(){return(0,p.jsx)(o.Z,{emptyComponent:this.renderEmptyClassesComponent(),handleToggleItem:this.handleToggleClass,listItems:this.getClassesAsListItems()})}initOrderedClassesMap(e){return(0,c.QJ)(e,"id")}isSetPublic(){return l.iQw.PUBLIC_ACCESS===this.props.set.accessType}}g.defaultProps={shouldRedirectToClassProgressTab:!1},t.Z=(0,r.Z)(g)},"./app/j/components/AutosuggestWithAssembly.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>u});s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./app/j/assembly/AssemblyInput.tsx"),i=s("./node_modules/invariant/browser.js"),n=s.n(i),o=s("./node_modules/react/index.js"),a=s("./node_modules/react-autosuggest/dist/index.js"),l=s.n(a),d=s("./node_modules/react/jsx-runtime.js");class u extends o.Component{constructor(){super(...arguments),this.renderInputComponent=e=>{var t=o.createRef();return(0,d.jsx)(r.Z,Object.assign({ref:t},e,{label:e.label,variant:e.variant}))}}render(){var e=Object.assign({},this.props.inputAttributes,{onBlur:this.props.onInputBlur,onChange:this.props.onInputChange,value:this.props.inputValue,label:this.props.label,placeholder:this.props.placeholder||this.props.label,variant:this.props.variant||r.q.Standard});return(0,d.jsx)("div",{className:"UIAutosuggest",children:(0,d.jsx)(l(),Object.assign({ref:e=>{this.autosuggest=e},renderInputComponent:this.renderInputComponent},this.props,{getSuggestionValue:this.props.getSuggestionValueForInput,inputProps:e,onSuggestionsClearRequested:this.props.onSuggestionsClearRequested,onSuggestionsFetchRequested:this.props.onSuggestionsFetchRequested,suggestions:this.props.suggestions}))})}focus(){var e;n()(this.autosuggest,"Missing autosuggest during focus() in AutosuggestWithAssembly"),null==(e=this.autosuggest.input)||e.focus()}}},"./app/j/components/DeprecatedSpecialCharacterTextarea.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>C});var r=s("./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js"),i=(s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/@quizlet/legacy-css-transition-group/dist/index.js")),n=s("./node_modules/classnames/index.js"),o=s.n(n),a=s("./app/j/components/UIBreakpoint.tsx"),l=s("./app/j/components/UISpecialCharacterButtonGroup.tsx"),d=s("./app/j/components/UITextarea.tsx"),u=s("./node_modules/nullthrows/nullthrows.js"),c=s.n(u),p=s("./node_modules/react/index.js"),h=s("./app/j/utils/AccentHelper.ts"),g=s("./app/j/utils/arraysHaveSameElements.ts"),m=s("./app/j/utils/EventListener.ts"),_=s("./app/j/utils/getScrollbarWidth.ts"),f=s("./app/j/utils/shallow-equal.ts"),v=s("./node_modules/react/jsx-runtime.js"),S=["languageCodes","onFocus","specificAccents","variant","textAreaVariant"];class C extends p.Component{constructor(){super(...arguments),this.state={isClicking:!1,isComponentFocused:!1},this.handleBlur=e=>{this.state.isClicking||this.setState({isComponentFocused:!1}),this.props.onBlur&&this.props.onBlur(e)},this.handleComponentFocus=e=>{this.setState({isComponentFocused:!0}),this.props.onFocus&&this.props.onFocus(e)},this.handleMouseUp=e=>{this.setState({isClicking:!1}),this.props.onMouseUp&&this.props.onMouseUp(e)},this.handleMouseDown=e=>{this.setState({isClicking:!0}),this.props.onNativeMouseDown&&this.props.onNativeMouseDown(e)},this.handleAccent=e=>{var t=c()(this.textareaRef.current,"Could not find text area component"),s=this.getSelectionStart(),r=this.getSelectionEnd();if(-1!==r){var i=this.getTextarea();if(i){var n=i.value||"",o=n.slice(0,s)+e+n.slice(r),a=window.document.createEvent("Event");a.initEvent("input",!0,!0);var l=i,d=Object.getOwnPropertyDescriptor(l.constructor.prototype,"value");null!=d&&d.set?d.set.call(l,o):l.value=o,l.dispatchEvent(a),this.setState({},(()=>t.setCaretPosition(s+e.length)))}}},this.wrapperRef=p.createRef(),this.textareaRef=p.createRef()}componentDidMount(){this.wrapperRef.current&&(this.wrapperMouseDownListener=m.Z.listen(this.wrapperRef.current,"mousedown",this.handleMouseDown))}shouldComponentUpdate(e,t){return!(0,f.Z)(this.props,e,["languageCodes"])||(!(0,f.Z)(this.state,t)||!(0,g.Z)(this.props.languageCodes,e.languageCodes))}componentWillUnmount(){this.wrapperMouseDownListener&&(this.wrapperMouseDownListener.remove(),this.wrapperMouseDownListener=null)}getCharactersByLang(){var e=h.Z.getCharactersByLangForLangs(this.props.languageCodes);this.props.specificAccents.length>0&&this.props.languageCodes.length>0&&(e[this.props.languageCodes[0]]=this.props.specificAccents);return e}getSelectionStart(){return this.textareaRef.current?this.textareaRef.current.getSelectionStart():-1}getSelectionEnd(){return this.textareaRef.current?this.textareaRef.current.getSelectionEnd():-1}getTextarea(){return this.textareaRef.current?this.textareaRef.current.getTextarea():null}renderAccentsBar(){var e=o()("SpecialCharacterTextarea-accentsBar",{["SpecialCharacterTextarea-accentsBar--"+this.props.textAreaVariant]:this.props.textAreaVariant&&"default"!==this.props.textAreaVariant});return(0,v.jsx)("div",{className:e,children:(0,v.jsx)("div",{className:"SpecialCharacterTextarea-accentsBarInner",children:(0,v.jsx)("div",{className:"SpecialCharacterTextarea-accentBarWrap",style:{marginRight:(0,_.Z)()},children:(0,v.jsx)(l.Z,{allowToggleUppercase:!0,charactersByLang:this.getCharactersByLang(),onClickButton:this.handleAccent,variant:"small"})})})})}renderAccentButtonsInline(){return(0,v.jsx)(l.Z,{allowToggleUppercase:!0,charactersByLang:this.getCharactersByLang(),onClickButton:this.handleAccent,showUppercaseButtonInline:!0,variant:"small"})}renderAccentsDropdown(){return(0,v.jsx)(i.uH,{transitionEnterTimeout:120,transitionLeaveTimeout:120,transitionName:"SpecialCharacterTextarea-animateAccentsBar",children:this.state.isComponentFocused&&this.containsAccentLanguage()?this.renderAccentsBar():null})}render(){var e=this.props,{textAreaVariant:t}=e,s=(0,r.Z)(e,S),i=o()("SpecialCharacterTextarea",{"is-focused":this.state.isComponentFocused});return(0,v.jsxs)("div",{className:i,onMouseUp:this.handleMouseUp,ref:this.wrapperRef,children:[(0,v.jsx)(d.Z,Object.assign({},s,{onBlur:this.handleBlur,onFocus:this.handleComponentFocus,ref:this.textareaRef,variant:t})),(0,v.jsx)(a.Z,{above:"s",children:"inline"===this.props.variant?this.renderAccentButtonsInline():this.renderAccentsDropdown()})]})}focus(e){var t=c()(this.textareaRef.current,"Missing textareaRef in focus(number)");this.setState({isComponentFocused:!0}),t.focus(e)}blur(){var e=c()(this.textareaRef.current,"Missing textareaRef in blur()");this.setState({isComponentFocused:!1}),e.blur()}select(){c()(this.textareaRef.current,"Missing textareaRef in select()").select()}setCaretPosition(e){c()(this.textareaRef.current,"Missing textareaRef in setCaretPosition(number)").setCaretPosition(e)}setSelectionRange(e,t){c()(this.textareaRef.current,"Missing textarea in setSelectionRange(start, end)").setSelectionRange(e,t)}containsAccentLanguage(){return h.Z.containsAccentLanguage(this.props.languageCodes)}}C.defaultProps=Object.assign({},d.Z.defaultProps,{languageCodes:[],specificAccents:[],type:"autoExpand",variant:"dropdown"})},"./app/j/components/Ellipsis.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var r=s("./node_modules/react/index.js"),i=s("./node_modules/react/jsx-runtime.js");class n extends r.PureComponent{render(){return(0,i.jsx)("div",{className:"Ellipsis",children:this.props.children})}}},"./app/j/components/FacebookIcon.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s("./node_modules/classnames/index.js"),i=s.n(r),n=s("./app/j/components/UIIcon.tsx"),o=(s("./node_modules/react/index.js"),s("./node_modules/react/jsx-runtime.js"));function a(e){var{className:t}=e;return(0,o.jsx)(n.Z,{className:i()("FacebookIcon",t),icon:"facebook-inverse"})}},"./app/j/components/FacebookLoginButton.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var r=s("./app/j/components/FacebookIcon.tsx"),i=s("./app/j/components/UISocialButton.tsx"),n=(s("./node_modules/react/index.js"),s("./node_modules/react/jsx-runtime.js"));function o(e){var{icon:t,label:s,facebookLoginUrl:o,variant:a,onClick:l}=e;return(0,n.jsx)(i.Z,{icon:null!=t?t:(0,n.jsx)(r.Z,{}),label:s,linkTo:o,onClick:l,variant:a})}},"./app/j/components/GoogleLoginButton.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var r=s("./node_modules/classnames/index.js"),i=s.n(r),n=s("./app/j/components/UIIcon.tsx"),o=(s("./node_modules/react/index.js"),s("./node_modules/react/jsx-runtime.js"));function a(e){var{className:t}=e;return(0,o.jsx)(n.Z,{className:i()("GoogleIcon",t),icon:"google-multicolor"})}var l=s("./app/j/components/UISocialButton.tsx");function d(e){var{label:t,googleLoginUrl:s,variant:r,onClick:i}=e;return(0,o.jsx)(l.Z,{icon:(0,o.jsx)(a,{}),label:t,linkTo:s,onClick:i,variant:r})}},"./app/j/components/LegacyTermText.tsx":(e,t,s)=>{"use strict";s.d(t,{dR:()=>g,go:()=>m});s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.string.match.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/classnames/index.js"),i=s.n(r),n=s("./app/j/constants/TermConstants.ts"),o=s("./node_modules/react/index.js"),a=s("./node_modules/react-textfit/lib/index.js"),l=s("./app/j/rich_text/components/PMDocument.tsx"),d=s("./app/j/utils/ellipsis.ts"),u=s("./node_modules/react/jsx-runtime.js"),c=/\*([^*\n\r]+)\*/g,p=/\*[^*\n\r]+\*/g,h=/(\r\n|\n\r|\r|\n)/,g=n.E.WORD_SIDE,m=n.E.DEFINITION_SIDE;class _ extends o.PureComponent{constructor(){super(...arguments),this.getJsxFromStr=e=>{var t=e;this.props.maxLength&&(t=(0,d.Z)(t,this.props.maxLength));var s=0;return t.split(h).map((e=>e.match(h)?(0,u.jsx)("br",{},"key-"+s++):"math"!==this.props.lang&&"chem"!==this.props.lang?function(e){var t=e.split(p),s=[],r=0;t[r]&&s.push(t[r]),r+=1;for(var i=c.exec(e);i;)s.push((0,u.jsx)("b",{children:i[1]},"md-"+r)),t[r]&&s.push(t[r]),r++,i=c.exec(e);return s}(e):e))},this.renderRichText=e=>(0,u.jsx)(l.Z,{allowRtl:this.props.allowRtl,lang:this.props.lang,pmJson:e}),this.renderText=()=>{if(this.props.side===g)return this.props.shouldShowRichText&&this.props.term.wordRichText?this.renderRichText(this.props.term.wordRichText):this.getJsxFromStr(this.props.term.word||"...");if(this.props.shouldShowRichText&&this.props.term.definitionRichText)return this.renderRichText(this.props.term.definitionRichText);var{definition:e}=this.props.term;return e||this.props.term._imageUrl||(e="..."),this.getJsxFromStr(e)}}render(){var e=i()("TermText","notranslate",this.props.className,"lang-"+this.props.lang);if(this.props.textfit){var t="boolean"==typeof this.props.textfit?{}:this.props.textfit;return(0,u.jsx)(a.ZP,Object.assign({className:e},t,{children:this.renderText()}))}return(0,u.jsx)("span",{className:e,children:this.renderText()})}}t.ZP=_},"./app/j/components/MagicLinkPromptModal.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>b});s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@linaria/react/lib/index.js"),i=s("./app/j/assembly/AssemblyInput.tsx"),n=s("./app/j/assembly/AssemblyLink.tsx"),o=s("./app/j/assembly/AssemblyNotice.tsx"),a=s("./app/j/assembly/modals/index.ts"),l=s("./app/j/authentication/styles.tsx"),d=s("./app/j/components/UIInput.tsx"),u=s("./app/j/components/UILoadingButton.tsx"),c=s("./app/j/components/UIModal.tsx"),p=s("./app/j/components/UINotice.tsx"),h=s("./app/j/global/Rollbar.ts"),g=s("./app/j/hooks/useQMeasure.ts"),m=s("./app/j/i18n/useTranslation.ts"),_=s("./node_modules/react/index.js"),f=s("./app/j/signup/components/assemblified/utils.tsx"),v=s("./app/j/utils/FetchWith.ts"),S=s("./node_modules/react/jsx-runtime.js"),C=(0,r.z)("div")({name:"SuccessMessage",class:"s1ggsb6v"});function b(e){var t,{t:s}=(0,m.Z)(),r=(0,g.Z)(),[b,y]=_.useState(e.username),[E,j]=_.useState(),[x,T]=_.useState(!1),[I,w]=_.useState(!1),[A,O]=_.useState({});if((0,_.useEffect)((()=>{y(e.username)}),[e.username]),!e.isOpen)return null;var R=e=>{null==e||e.preventDefault(),w(!0),(0,v.cZ)("/magic-login",{username:b}).then((e=>{w(!1),e.success?(T(!0),j(e.email)):O(e.errors||{})})).catch((e=>{w(!1),O({generic:s("errors.generic.request_failed")}),h.Z.error("magic_link_form_generic_error",e)}))},D=t=>{y(void 0),j(null),T(!1),O({}),e.onClose&&e.onClose(t)},L=()=>(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("p",{children:s("global.magic_link_modal.description")}),(0,S.jsxs)("form",{className:"MagicLinkPromptModal-form",method:"post",onSubmit:R,children:[!(0,f.W0)(r)&&A.generic&&(0,S.jsx)(p.Z,{boxed:!0,uppercaseDeprecated:!0,variant:"alert",children:A.generic}),(0,S.jsx)(l.W,{children:(0,f.W0)(r)?(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(i.Z,{autoComplete:"username",autoCorrect:"off",autoFocus:!0,errorMessage:A.username,invalid:!!A.username||void 0,label:s("global.magic_link_modal.form.username_placeholder"),onChange:e=>y(e.target.value),spellCheck:!1,value:b})}):(0,S.jsx)(d.Z,{autoComplete:"username",autoCorrect:"off",autoFocus:!0,invalid:!!A.username||void 0,label:A.username||(0,S.jsx)(S.Fragment,{children:s("global.magic_link_modal.form.username_label")}),onChange:e=>y(e.target.value),placeholder:s("global.magic_link_modal.form.username_placeholder"),spellCheck:!1,type:"text",value:b||""})}),(0,f.W0)(r)&&A.generic&&(0,S.jsx)(l.W,{children:(0,S.jsx)(o.Z,{children:A.generic})}),!(0,f.W0)(r)&&(0,S.jsx)(l.W,{children:(0,S.jsx)(u.Z,{"aria-label":s("global.magic_link_modal.form.submit_button"),hero:!0,loading:I,type:"submit",width:"fill",children:s("global.magic_link_modal.form.submit_button")})})]})]}),P=()=>(0,S.jsxs)(C,{children:[E&&(0,S.jsx)("p",{children:s("global.magic_link_modal.success_message",{email:E})}),(0,S.jsx)("p",{children:s("global.magic_link_modal.spam_message")}),(0,S.jsx)("p",{children:(0,S.jsx)(n.ZP,{linkTo:"/help",target:"help",text:s("global.magic_link_modal.help_message")})})]});return(0,f.W0)(r)?(0,S.jsx)(a.g,{body:x?P():L(),includeCloseButton:e.includeCloseButton,isOpen:e.isOpen,limitHeight:!1,onClose:D,primaryAction:x?void 0:{text:s("global.magic_link_modal.form.submit_button"),loading:I,onClick:()=>R()},shouldCloseOnOverlayClick:e.includeCloseButton,title:s("global.magic_link_modal.forgot_password")}):(0,S.jsx)(c.Z,Object.assign({},e,{headerContent:null!=(t=e.headerContent)?t:s("global.magic_link_modal.title"),onClose:D,children:x?P():L()}))}b.defaultProps={includeCloseButton:!0},s("./.linaria-cache/app/j/components/MagicLinkPromptModal.linaria.css")},"./app/j/components/MediaVideo.tsx":(e,t,s)=>{"use strict";s.d(t,{RY:()=>d,$f:()=>u,ZP:()=>c});s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/web.url.js"),s("./node_modules/core-js/modules/web.url-search-params.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@vimeo/player/dist/player.js"),i=s.n(r),n=s("./app/j/components/Rectangle.tsx"),o=s("./app/j/config/enums.ts"),a=s("./node_modules/react/index.js"),l=s("./node_modules/react/jsx-runtime.js"),d=(e,t)=>{if(!e)return null;var s={clipEndSeconds:t||1,clipStartSeconds:0},r=new URL(e),i=r.pathname.replace("/","");return i?r.host.includes(o.G6J.VIMEO)?Object.assign({},s,{provider:o.G6J.VIMEO,providerVideoId:i,code:null}):r.host.includes(o.G6J.YOUTUBE)?Object.assign({},s,{provider:o.G6J.YOUTUBE,providerVideoId:i.replace("watch?v=",""),code:null}):null:null},u=e=>{switch(e.provider){case o.G6J.VIMEO:return"https://vimeo.com/"+e.providerVideoId;case o.G6J.YOUTUBE:return"https://www.youtube.com/watch?v="+e.providerVideoId;default:return""}};class c extends a.PureComponent{constructor(){super(...arguments),this.currentTimeData={seconds:0,percent:0}}componentDidMount(){var{provider:e}=this.props.media;e===o.G6J.VIMEO&&this.setupVimeoPlayer(),e===o.G6J.YOUTUBE&&this.setupYouTubePlayer()}componentDidUpdate(e){e.media.providerVideoId!==this.props.media.providerVideoId&&this.setupVimeoPlayer()}componentWillUnmount(){this.videoPlayer&&this.videoPlayer.destroy(),this.props.onUnmount&&this.props.onUnmount(this.currentTimeData)}render(){return(0,l.jsx)("div",{className:"MediaVideo",children:(0,l.jsx)(n.Z,{aspectRatio:[16,9],children:(0,l.jsx)("div",{className:"MediaVideo-player",id:""+this.props.media.providerVideoId})})})}setupVimeoPlayer(){var{isPreview:e,media:t}=this.props;this.videoPlayer&&this.videoPlayer.destroy(),null!==t.providerVideoId&&(this.videoPlayer=new(i())(t.providerVideoId,{autoplay:!1,loop:!1,controls:!e,id:Number(t.providerVideoId)}),this.videoPlayer.on("play",(()=>{this.props.onVideoPlaybackStart&&this.props.onVideoPlaybackStart()})),this.videoPlayer.on("loaded",(()=>{var{onGetDuration:e}=this.props;this.props.isPreview&&e&&this.videoPlayer.getDuration().then((t=>{e(t)}))})),this.videoPlayer.on("ended",(()=>{this.props.onVideoPlaybackEnd&&this.props.onVideoPlaybackEnd(this.currentTimeData),document.exitFullscreen()})),this.videoPlayer.on("timeupdate",(e=>{var{seconds:t,percent:s}=e;this.currentTimeData={seconds:t,percent:s}})),this.props.isPreview||(this.videoPlayer.getVideoTitle().then((e=>{e&&this.props.onGetVideoTitle&&this.props.onGetVideoTitle(e)})),this.videoPlayer.setColor("#3ccfcf")))}setupYouTubePlayer(){throw new Error("Support for YouTube not yet implemented")}}c.defaultProps={isPreview:!1}},"./app/j/components/MenuIconWithTooltip.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>p});s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.replace.js");var r=s("./node_modules/classnames/index.js"),i=s.n(r),n=s("./app/j/components/UIIconButton.tsx"),o=s("./app/j/components/UIOverlayTrigger.tsx"),a=s("./app/j/components/UIPopover.tsx"),l=s("./app/j/components/UITooltip.tsx"),d=s("./node_modules/react/index.js"),u=s("./app/j/utils/UserAgentHelper.ts"),c=s("./node_modules/react/jsx-runtime.js");class p extends d.Component{constructor(e){super(e),this.handleClick=e=>{this.props.onClick&&this.props.onClick(e)},this.handleOpenPopover=()=>{this.setState({isPopoverOpen:!0})},this.handleClosePopover=()=>{this.setState({isPopoverOpen:!1})},this.shouldOpenTooltip=()=>!this.state.isPopoverOpen,this.state={isPopoverOpen:!1,menuTriggerActionOn:e.menuTriggerActionOn||((0,u.b1)()?"click":"hover"),tooltipTriggerActionOn:e.tooltipTriggerActionOn||((0,u.b1)()?"click":"hover")}}UNSAFE_componentWillReceiveProps(e){this.props.menuTriggerActionOn!==e.menuTriggerActionOn&&this.setState({menuTriggerActionOn:e.menuTriggerActionOn}),this.props.tooltipTriggerActionOn!==e.tooltipTriggerActionOn&&this.setState({tooltipTriggerActionOn:e.tooltipTriggerActionOn})}renderPopover(e){var t=this,s=d.Children.toArray(e.props.children).map((e=>e.props&&e.props.onClick?d.cloneElement(e,{onClick:function(){t.popoverTrigger&&t.popoverTrigger.close(),e.props.onClick(...arguments)}}):e));return(0,c.jsx)(a.Z,{arrow:this.props.arrow,extraClassNames:this.props.extraClassNames,includeArrowInBounds:!0,spacing:this.props.popoverSpacing,variant:this.props.popoverVariant,children:d.cloneElement(e,{children:s})})}renderIconButton(){var e,t=i()("MenuIconWithTooltip",{"is-opened":this.state.isPopoverOpen});return e=this.props.linkTo?(0,c.jsx)(n.Z,Object.assign({icon:this.props.icon},this.props.iconProps,{linkTo:this.props.linkTo,title:this.props.tooltipText})):(0,c.jsx)(n.Z,Object.assign({icon:this.props.icon},this.props.iconProps,{onClick:this.handleClick,title:this.props.tooltipText})),(0,c.jsx)("span",{className:t,children:e})}renderButton(){var e=i()("MenuIconWithTooltip","is-"+this.props.popoverPosition.replace(/ /g,""),{"MenuIconWithTooltip--isHigherZIndex":this.props.isHigherZIndex}),{menu:t}=this.props;return t?(0,c.jsx)(o.Z,{beforeClose:this.handleClosePopover,beforeOpen:this.handleOpenPopover,className:e,constrainToWindow:!1,overlay:this.renderPopover(t),position:this.props.popoverPosition,ref:e=>{this.popoverTrigger=e},triggerAction:this.state.menuTriggerActionOn,children:this.renderIconButton()}):this.renderIconButton()}render(){var e=(0,u.s2)()||(0,u.b1)(),t="always"===this.state.tooltipTriggerActionOn,{tooltipText:s}=this.props,r=i()(this.props.tooltipOverlayClassName,{"MenuIconWithTooltip--isHigherZIndex":this.props.isHigherZIndex});return!s||e&&!t?this.renderButton():(0,c.jsx)(o.Z,{afterOpen:this.props.afterOpenTooltip,beforeOpen:this.shouldOpenTooltip,className:r,overlay:(0,c.jsx)(l.Z,{children:s}),position:this.props.tooltipPosition,ref:e=>{this.tooltipTrigger=e},triggerAction:this.state.tooltipTriggerActionOn,children:this.renderButton()})}}p.defaultProps={arrow:!0,iconProps:{},isHigherZIndex:!1,popoverPosition:"bottom left",popoverSpacing:"regular",popoverVariant:"none",tooltipPosition:"bottom",tooltipTriggerActionOn:"hover"}},"./app/j/components/MenuItemWithIcon.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>u});var r=s("./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js"),i=(s("./node_modules/core-js/modules/es.object.assign.js"),s("./app/j/components/UIBadge.tsx")),n=s("./app/j/components/UIIcon.tsx"),o=s("./app/j/components/UIMenuItem.tsx"),a=s("./node_modules/react/index.js"),l=s("./node_modules/react/jsx-runtime.js"),d=["icon","iconPosition","iconSize","text"];class u extends a.PureComponent{renderBadge(){return"yellow"===this.props.badgeColor?(0,l.jsx)("div",{className:"MenuItemWithIcon-UIBadge",children:(0,l.jsx)(i.Z,{menu:!0,variant:"yellow",children:this.props.badgeText})}):"indigo"===this.props.badgeColor?(0,l.jsx)("div",{className:"MenuItemWithIcon-featureBadge",children:this.props.badgeText}):null}render(){var e=this.props,{icon:t,iconPosition:s,iconSize:i,text:a}=e,u=(0,r.Z)(e,d);return(0,l.jsx)(o.Z,Object.assign({},u,{children:(0,l.jsxs)("span",{className:"MenuItemWithIcon-inner",children:[t?(0,l.jsx)(n.Z,{className:"MenuItemWithIcon-"+s,icon:t,size:i}):null,this.props.badgeText?this.renderBadge():null,(0,l.jsx)("span",{className:"MenuItemWithIcon-text",children:a})]})}))}}u.defaultProps={iconPosition:"left",iconSize:"medium"}},"./app/j/components/Rectangle.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s("./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js"),i=(s("./node_modules/core-js/modules/es.parse-float.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/react/index.js"),s("./node_modules/react/jsx-runtime.js")),n=["aspectRatio","children","style"],o=e=>{if(isFinite(e))return 1/e;if(Array.isArray(e)&&void 0!==e[0]&&void 0!==e[1])return e[1]/e[0];if(void 0!==e.width&&void 0!==e.height)return e.height/e.width;if("string"==typeof(s=e)||s instanceof String){var t=parseFloat(e);if(Number.isNaN(t))throw new Error("Cannot parse input string: "+e);return 1/parseFloat(e)}var s;throw new Error("Cannot parse props.aspectRatio: "+e)};function a(e){var{aspectRatio:t=1,children:s,style:a}=e,l=(0,r.Z)(e,n);return(0,i.jsxs)("div",Object.assign({style:Object.assign({position:"relative"},a)},l,{children:[(0,i.jsx)("div",{style:{display:"block",paddingTop:100*o(t)+"%"}}),(0,i.jsx)("div",{style:{position:"absolute",bottom:0,left:0,top:0,right:0},children:s})]}))}},"./app/j/components/SaveSetModal.tsx":(e,t,s)=>{"use strict";s.d(t,{x:()=>m,Z:()=>y});s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./app/j/components/AddSetToClassList.tsx"),i=(s("./node_modules/core-js/modules/es.promise.js"),s("./app/j/compatibility/hoc/withLoggerConfig.tsx")),n=s("./app/j/compatibility/logger/classComponentLoggers.ts"),o=s("./app/j/components/T.tsx"),a=s("./app/j/components/ToggleList.tsx"),l=s("./app/j/components/UIParagraph.tsx"),d=s("./node_modules/react/index.js"),u=s("./app/j/utils/FetchWith.ts"),c=s("./app/j/utils/ImmutableHelpers.ts"),p=s("./node_modules/react/jsx-runtime.js"),h="/webapi/3.2/folder-sets";class g extends d.Component{constructor(e){super(e),this.handleToggleFolder=e=>{var t={folderId:e.id,setId:this.props.set.id},s=e.isAlreadyAdded?h:h+"/save";(e.isAlreadyAdded?u.HL:u.cZ)(s,{data:[t]}).then((e=>e.responses[0])).then((e=>{if(e.error)throw new Error(e.error);return e})).then((()=>{var{foldersMap:t}=this.state,s=t.update(e.id,(e=>Object.assign({},e,{isAlreadyAdded:!e.isAlreadyAdded})));this.setState({foldersMap:s})})).catch((e=>{(0,n.Pv)(this.props.loggerConfig,"set_page_add_to_folder_error",e)}))},this.state={foldersMap:this.initOrderedFoldersMap(e.foldersToAddSetTo)}}getFoldersAsListItems(){return this.state.foldersMap.valueSeq().toArray().map((e=>({heading:e.title,isChecked:e.isAlreadyAdded,item:e})))}renderEmptyFoldersComponent(){return(0,p.jsx)(l.Z,{children:(0,p.jsx)(o.Z,{id:"global.add_set_to_folder_list.empty"})})}render(){return(0,p.jsx)(a.Z,{emptyComponent:this.renderEmptyFoldersComponent(),handleToggleItem:this.handleToggleFolder,listItems:this.getFoldersAsListItems()})}initOrderedFoldersMap(e){return(0,c.QJ)(e,"id")}}var m,_=(0,i.Z)(g),f=s("./app/j/components/UIDiv.tsx"),v=s("./app/j/components/UILinkButton.tsx"),S=s("./app/j/components/UIModal.tsx"),C=s("./app/j/components/UIToggle.tsx"),b=s("./app/j/i18n/$t.ts");!function(e){e.CLASS="class",e.FOLDER="folder"}(m||(m={}));class y extends d.Component{constructor(){super(...arguments),this.state={currentTab:this.props.initialTab||m.CLASS},this.handleChangeClassOrFolder=e=>{this.setState({currentTab:e})}}renderAddToClassList(){return(0,p.jsx)(r.Z,{classesToAddSetTo:this.props.classesToAddSetTo,hasClasses:this.props.hasClasses,set:this.props.set})}renderAddToFolderList(){return(0,p.jsx)(_,{foldersToAddSetTo:this.props.foldersToAddSetTo,set:this.props.set})}renderCreateClassButton(){return this.props.user._isUnderAge?null:(0,p.jsx)(f.Z,{className:"SaveSetModal-createButton",children:(0,p.jsx)(v.Z,{"aria-label":(0,b.Z)("set_page.add_to_class_or_folder_modal.create_class_button"),onClick:this.props.actions.onCreateClass,children:(0,p.jsx)(o.Z,{id:"set_page.add_to_class_or_folder_modal.create_class_button"})})})}renderCreateFolderButton(){return(0,p.jsx)(f.Z,{className:"SaveSetModal-createButton",children:(0,p.jsx)(v.Z,{"aria-label":(0,b.Z)("set_page.add_to_class_or_folder_modal.create_folder_button"),onClick:this.props.actions.onCreateFolder,children:(0,p.jsx)(o.Z,{id:"set_page.add_to_class_or_folder_modal.create_folder_button"})})})}render(){var{onClose:e}=this.props.actions,t=(0,b.Z)("set_page.add_to_class_or_folder_modal.title");return(0,p.jsx)(S.Z,Object.assign({},this.props,{background:"gray",headerContent:t,onClose:e,children:(0,p.jsxs)("div",{className:"SaveSetModal-main",children:[(0,p.jsx)(f.Z,{children:(0,p.jsxs)(C.Z,{onChange:this.handleChangeClassOrFolder,value:this.state.currentTab,children:[(0,p.jsx)(C.A,{value:m.CLASS,children:(0,p.jsx)(o.Z,{id:"set_page.add_to_class_or_folder_modal.add_to_class_option"})}),(0,p.jsx)(C.A,{value:m.FOLDER,children:(0,p.jsx)(o.Z,{id:"set_page.add_to_class_or_folder_modal.add_to_folder_option"})})]})}),this.isShowingClass()?this.renderCreateClassButton():this.renderCreateFolderButton(),(0,p.jsx)(f.Z,{children:this.isShowingClass()?this.renderAddToClassList():this.renderAddToFolderList()})]})}))}isShowingClass(){return this.state.currentTab===m.CLASS}}},"./app/j/components/SchoolSelectorWithAssembly.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>ie});var r,i=s("./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js"),n=(s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/@linaria/react/lib/index.js")),o=s("./app/j/assembly/AssemblyLink.tsx"),a=s("./app/j/assembly/buttons/index.ts"),l=s("./app/j/assembly/buttons/types.ts"),d=s("./node_modules/lodash/throttle.js"),u=s.n(d),c=s("./node_modules/lodash/keyBy.js"),p=s.n(c),h=(s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/core-js/modules/es.promise.finally.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/@linaria/core/lib/index.js")),g=s("./app/j/assembly/AssemblySpinner.tsx"),m=s("./app/j/assembly/foundations/Color.ts"),_=s("./app/j/compatibility/fetch.ts"),f=s("./app/j/compatibility/logger/useLogger.ts"),v=s("./app/j/components/AutosuggestWithAssembly.tsx"),S=s("./app/j/config/enums.ts"),C=s("./app/j/constants/SearchEventConstants.ts"),b=s("./app/j/global/Rollbar.ts"),y=s("./app/j/i18n/useTranslation.ts"),E=s("./node_modules/react/index.js"),j=s("./app/j/utils/schools.ts"),x=s("./app/j/utils/SearchEventLogger.ts"),T=s("./app/j/utils/VisibilityTracker.tsx"),I=s("./node_modules/react/jsx-runtime.js"),w=(0,n.z)("div")({name:"FauxSuggestion",class:"f189jzco"}),A=(0,n.z)("p")({name:"SchoolName",class:"st2khe"}),O=(0,n.z)("p")({name:"SchoolLocation",class:"sf4g3zi"}),R=(0,n.z)("div")({name:"SchoolContainer",class:"s1u9yj97",vars:{"s1u9yj97-0":[e=>e.isHighlighted?m.fY.Ink200Neutral400:m.fY.Ink100Neutral400]}}),D=(0,n.z)("div")({name:"AddNewSchoolPrompt",class:"avu1ef"}),L=(0,n.z)("div")({name:"AddNewSchoolButtonWrapper",class:"a10agjk5"}),P=(0,n.z)("div")({name:"Loading",class:"l1elmsp2"}),M=10,Z=0;function k(e){var t,s,{initialValue:i,inputAttributes:n,numSuggestionsToShow:o=M,onBlurSchool:l,onSelectAddSchool:d,onSelectSchool:c,useAutoFocus:m,label:k}=e,{logEvent:U,logPageAction:N}=(0,f.wL)(),F={loggers:{logEvent:U,logPageAction:N}},{t:B}=(0,y.Z)(),[H,V]=(0,E.useState)(!1),[G,W]=(0,E.useState)(i||""),[z,q]=(0,E.useState)([]),[K,Y]=(0,E.useState)(!1),Q=(0,E.useRef)(null),$=(0,E.useCallback)(u()((e=>{var{value:t}=e;""!==t&&(Y(!0),(0,_.lN)("/webapi/3.4/schools/search",{params:{query:t,perPage:o}}).then((e=>{var{models:t,scores:s}=e.body.responses[0];r=p()(s,"id"),q(t.school),Z=0})).catch((e=>b.Z.error("Error retrieving schools.",e))).finally((()=>Y(!1))))}),300,{trailing:!0}),[]),X=()=>{x.ZP.logSelectAddOwnSchool(F),d(G)},J=Object.assign({placeholder:B("global.school_autosuggest.input.placeholder"),autoFocus:m,onFocus:()=>V(!0)},n);return(0,I.jsxs)("div",{children:[(0,I.jsx)(v.Z,{alwaysRenderSuggestions:H,getSuggestionValueForInput:e=>e.name,inputAttributes:J,inputValue:H?G:"",label:k,onInputBlur:e=>{l&&l(e),V(!1)},onInputChange:(e,t)=>{var{newValue:s}=t;W(s),""===s&&q([])},onSuggestionsClearRequested:()=>{""===G&&q([])},onSuggestionSelected:(e,t)=>{x.ZP.logSelectSuggestion(C.Z.events.HIT_SELECT_SCHOOL,t.suggestion.id,C.Z.targetTypes.SCHOOL,t.suggestionIndex,F),c&&c(e,t)},onSuggestionsFetchRequested:$,ref:Q,renderSuggestion:(e,t)=>{var{isHighlighted:s}=t;return(0,I.jsx)(T.Z,{once:!0,onIntersect:()=>((e,t)=>{var s;x.ZP.logSearchImpression({modelId:e.id,modelType:S.BYJ.SCHOOL,pageDepth:Z++,pageNumber:1,relevanceScore:(s=e.id,r[s]&&r[s].score||0),purchasableType:S.Uo4.FREE},t)})(e,F),threshold:.5,children:()=>(0,I.jsxs)(R,{isHighlighted:s,children:[(0,I.jsx)(A,{children:e.name}),(0,I.jsx)(O,{children:(0,j.L)(e,!1,B)})]})},e.id)},renderSuggestionsContainer:e=>{var t,s,{children:r,containerProps:n}=e,o=(0,h.cx)(n.className,"s1ncx8s");return(0,I.jsxs)("div",Object.assign({},n,{className:o,style:{top:48,zIndex:100},children:[r,G.length>3&&G!==i&&(null==Q||null==(t=Q.current)||null==(s=t.autosuggest)?void 0:s.state.isFocused)&&!K?(0,I.jsxs)(w,{children:[(0,I.jsx)(D,{children:B("global.school_autosuggest.add_new_school_prompt")}),(0,I.jsx)(L,{children:(0,I.jsx)(a.B0,{onClick:X,text:B("global.school_autosuggest.add_new_school_button")})})]}):null]}))},suggestions:z}),H&&K&&G.length>0&&(null==Q||null==(t=Q.current)||null==(s=t.autosuggest)?void 0:s.state.isFocused)&&(0,I.jsx)(P,{children:(0,I.jsx)(g.Z,{})})]})}s("./.linaria-cache/app/j/components/SchoolAutosuggestWithAssembly.linaria.css");var U=s("./app/j/assembly/AssemblyIcon.tsx"),N=s("./app/j/assembly/AssemblyInput.tsx"),F=s("./app/j/config/countries.ts"),B=s("./app/j/config/us-states.ts"),H=s("./app/j/i18n/getLocalizedCountry.ts"),V=["validationErrors"],G=(0,n.z)("div")({name:"FormField",class:"fkj582r"}),W=(0,n.z)("div")({name:"LocationWrapper",class:"l1owmc7n"}),z=(0,n.z)("label")({name:"CountryWrapper",class:"c19h5f5b"}),q=(0,n.z)(z)({name:"StateWrapper",class:"sfwevtf"}),K=(0,n.z)("span")({name:"DropdownHeading",class:"dgwbqep"}),Y=(0,n.z)("select")({name:"DropdownInput",class:"d15dqdef"}),Q=(0,n.z)("div")({name:"DropdownIcon",class:"d1i3drgl"});function $(e){var{validationErrors:t={}}=e,s=(0,i.Z)(e,V),{t:r}=(0,y.Z)(),n="us"===s.school.countryCode,o=e=>{if(e in t)return!0},a=e=>o(e)?t[e]:null;return(0,I.jsxs)("div",{children:[(0,I.jsx)(G,{children:(0,I.jsx)(N.Z,{invalid:o("name"),label:a("name")||r("global.school_creator.fields.name.label"),onChange:s.onUpdateName,placeholder:r("global.school_creator.fields.name.placeholder"),value:s.school.name})}),(0,I.jsx)(G,{children:(0,I.jsx)(N.Z,{invalid:o("city"),label:a("city")||r("global.school_creator.fields.city.label"),onChange:s.onUpdateCity,placeholder:r("global.school_creator.fields.city.placeholder"),value:s.school.city})}),(0,I.jsxs)(W,{children:[(0,I.jsxs)(z,{children:[(0,I.jsx)(K,{children:r("global.school_creator.fields.country.label")}),(0,I.jsx)(Y,{onChange:s.onUpdateCountryCode,value:s.school.countryCode,children:Object.keys(F.rS).map((e=>(0,I.jsx)("option",{value:e,children:(0,H.Z)(e,r)},e)))}),(0,I.jsx)(Q,{children:(0,I.jsx)(U.ZP,{alt:"country",icon:"chevron-down",size:U.i.Small})})]}),n?(0,I.jsxs)(q,{children:[(0,I.jsx)(K,{children:r("global.school_creator.fields.state.label")}),(0,I.jsxs)(Y,{onChange:s.onUpdateState,value:s.school.state,children:[(0,I.jsx)("option",{disabled:!0,value:"",children:r("global.school_creator.fields.state.select_prompt")}),Object.keys(B.Y).map((e=>(0,I.jsx)("option",{value:e,children:B.Y[e]},e)))]}),(0,I.jsx)(Q,{children:(0,I.jsx)(U.ZP,{alt:"state",icon:"chevron-down",size:U.i.Small})})]}):null]})]})}s("./.linaria-cache/app/j/components/SchoolCreator.linaria.css");var X=s("./app/j/edgy-data/types.ts"),J=s("./app/j/utils/FetchWith.ts"),ee=["removeVariant","validationErrors"],te=(0,n.z)("div")({name:"RemoveSchooolAssemblyLink",class:"r1lhaaik"}),se=(0,n.z)("span")({name:"SchoolLocation",class:"sc0teab"}),re=(0,n.z)("div")({name:"SelectExistingSchoolWrapper",class:"s1l2crs1"});function ie(e){var t,s,{removeVariant:r=X.K1.text,validationErrors:n={}}=e,d=(0,i.Z)(e,ee),{t:u}=(0,y.Z)(),[c,p]=(0,E.useState)(!1),h=()=>0===d.schools.size,g=()=>!d.isAddingNewSchool&&(h()||c),m=()=>d.schools.first(),_=()=>{d.onClickSelectAnotherSchoolPrompt(),p(!0)},f=(e,t)=>{var{suggestion:s}=t;d.onSelectAnotherSchool(s)},v=e=>{var t=r===X.K1.text?u("global.school_selector.remove_school"):void 0,s=r===X.K1.text?void 0:"x";return(0,I.jsx)(te,{className:s?"rkmuzu7":void 0,children:(0,I.jsx)(o.ZP,{onClick:t=>{t.preventDefault(),(e=>{d.preventRemoval?d.onRemoveSchool(e):(0,J.cZ)("/schools/unassociate",{schoolId:e.id}).then((t=>{null!=t&&t.success&&d.onRemoveSchool(e)}))})(e)},rightIcon:s,text:t,variant:o.U_.Secondary})})};return(0,I.jsxs)("div",{className:"SchoolSelector",children:[d.isAddingNewSchool?(0,I.jsxs)("div",{className:"SchoolSelector-schoolCreate",children:[d.newSchool?(0,I.jsx)("div",{children:(0,I.jsx)($,{onUpdateCity:e=>d.onUpdateNewSchoolField("city",e.target.value),onUpdateCountryCode:e=>d.onUpdateNewSchoolField("countryCode",e.target.value),onUpdateName:e=>d.onUpdateNewSchoolField("name",e.target.value),onUpdateState:e=>d.onUpdateNewSchoolField("state",e.target.value),school:d.newSchool,validationErrors:n})}):null,(0,I.jsx)(re,{children:(0,I.jsx)(a.GV,{onClick:_,text:u("global.school_selector.select_another_school_prompt"),variant:l.vT.PRIMARY})})]}):null,g()?(()=>{var e=m(),{label:t}=d,s=(()=>{var{tooltip:e}=d;return e?{tooltipText:e}:void 0})();return(0,I.jsx)("div",{className:"",children:(0,I.jsx)("div",{children:(0,I.jsx)(k,{initialValue:null==e?void 0:e.name,inputAttributes:{contextualInfo:s,placeholder:t},label:t,numSuggestionsToShow:5,onSelectAddSchool:d.onSelectAddSchool,onSelectSchool:f,useAutoFocus:!h()})})})})():null,g()||d.isAddingNewSchool?null:(s=m(),(0,I.jsx)("div",{className:"SchoolSelector-schoolOptions",children:(t=s,(0,I.jsxs)("div",{className:"AssemblyInput AssemblyInput--active",children:[(0,I.jsx)("span",{className:"AssemblyInput-heading",children:d.label}),(0,I.jsxs)(se,{children:[(0,j.L)(t,!0,u),v(t)]})]}))}))]})}s("./.linaria-cache/app/j/components/SchoolSelectorWithAssembly.linaria.css")},"./app/j/components/SignupPromptModalNew.tsx":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>It});s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./app/j/assembly/modals/components/AssemblyModal.tsx"),i=s("./app/j/authentication/components/AuthModalFullPage.tsx"),n=s("./app/j/compatibility/logger/useLogger.ts"),o=(s("./node_modules/core-js/modules/es.symbol.description.js"),s("./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js")),a=s("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),l=s("./node_modules/lodash/uniq.js"),d=s.n(l),u=s("./node_modules/lodash/padStart.js"),c=s.n(u),p=(s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/@linaria/react/lib/index.js")),h=s("./app/j/assembly/AssemblyInput.tsx"),g=s("./app/j/assembly/buttons/index.ts"),m=s("./app/j/authentication/components/ValidationErrors.tsx"),_=s("./app/j/authentication/styles.tsx"),f=s("./app/j/compatibility/userAgentHelper.ts"),v=s("./app/j/components/T.tsx"),S=s("./app/j/components/UIList.tsx"),C=s("./app/j/components/UIListItem.tsx"),b=s("./app/j/components/UILoadingButton.tsx"),y=s("./app/j/components/UINotice.tsx"),E=s("./app/j/config/constants.ts"),j=s("./app/j/config/enums.ts"),x=s("./app/j/context/RequestContext.ts"),T=s("./app/j/i18n/useTranslation.ts"),I=s("./node_modules/react/index.js"),w=(s("./node_modules/core-js/modules/es.array.reduce.js"),s("./app/j/assembly/menus/index.ts")),A=s("./app/j/utils/keyReflect.ts"),O=s("./app/j/i18n/LocalizationConstants.ts"),R=(0,A.Z)("DATE_ORDERS",{DAY_MONTH_YEAR:null,MONTH_DAY_YEAR:null,YEAR_MONTH_DAY:null});function D(e){void 0===e&&(e=O.Bj);var t=new Date(2016,10,22).toLocaleDateString(e);return 0===t.indexOf("2016")?R.YEAR_MONTH_DAY:0===t.indexOf("22")?R.DAY_MONTH_YEAR:R.MONTH_DAY_YEAR}D();function L(e,t){return new Date(2016,e,5).toLocaleDateString(t,{month:"long"})}var P=s("./node_modules/lodash/range.js"),M=s.n(P),Z=s("./app/j/assembly/AssemblyTooltip.tsx"),k=s("./app/j/assembly/buttons/types.ts"),U=s("./app/j/assembly/foundations/Color.ts"),N=s("./node_modules/react/jsx-runtime.js"),F=(0,p.z)("div")({name:"Legend",class:"l368e1g"}),B=(0,p.z)("span")({name:"LegendText",class:"lc3c92w",vars:{"lc3c92w-1":[e=>e.invalid?U.fY.ErrorRed:"unset"]}});function H(e){return(0,N.jsx)(_.W,{children:(0,N.jsxs)("fieldset",{"aria-labelledby":"birthdate-legend",children:[(0,N.jsxs)(F,{children:[(0,N.jsx)(B,{id:"birthdate-legend",invalid:e.invalid,children:e.label}),(0,N.jsx)(Z.Z,{placement:"right",text:(0,N.jsx)(v.Z,{id:"global.sign_up_modal.birthday_law_info"}),children:(0,N.jsx)(g.JZ,{alt:"info",icon:"info",size:"small",variant:k.IQ.TERTIARY})})]}),e.children]})})}s("./.linaria-cache/app/j/signup/components/assemblified/BirthdateLegend.linaria.css");s("./node_modules/core-js/modules/es.parse-int.js");var V,G=s("./app/j/config/i18n.ts"),W=s("./app/j/hooks/useQMeasure.ts");!function(e){e.BIRTH_DATE="birth_date",e.BIRTH_DAY="birth_day",e.BIRTH_MONTH="birth_month",e.BIRTH_YEAR="birth_year",e.EMAIL="email",e.PASSWORD="password1",e.SELF_IDENTIFIED_USER_TYPE="is_free_teacher",e.IS_PARENT="is_parent",e.TERMS_OF_SERVICE="TOS",e.USERNAME="username",e.MARKETING_OPT_OUT="marketing_opt_out"}(V||(V={}));var z=s("./app/j/utils/parseAge.ts"),q="-1",K=500,Y=["nl","za","jp","no","tr","cn","kr","au","nz","fr","at","it","be","bg","hr","cz","dk","ee","fi","gr","hu","ie","lv","lt","lu","mt","pl","pt","ro","sk","si","se"],Q=["ca","de","ch"],$="generic";function X(){return"experiment"===(0,W.Z)().getVariationAndEnroll("SignupNoUsernameUS13PlusAndINTL[default,growth]")}var J=e=>e.reduce(((e,t)=>(t.field?e[(e=>{switch(e){case"birthDay":return V.BIRTH_DAY;case"birthMonth":return V.BIRTH_MONTH;case"birthYear":return V.BIRTH_YEAR;default:return e}})(t.field)]=t.message:e[$].push(t),e)),{[$]:[]}),ee=e=>G.RP[e]||13,te=e=>{var{birthDay:t,birthMonth:s,birthYear:r}=e,i=parseInt(t,10),n=parseInt(s,10),o=parseInt(r,10);return{age:(0,z.Z)(o,n,i),parsedBirthYear:o,parsedBirthMonth:n,parsedBirthDay:i}},se="top-nav",re={NO_REDIRECT_TO_UPSELL:["checkout-modal","partner-login-prompt-banner","purchasable-content-folder-signup-modal","purchasable-content-sets-signup-modal"]},ie=e=>{var{invalid:t,label:s,selectedValue:r,options:i,onAction:n}=e;return(0,N.jsx)(g.PP,{invalid:t,menu:(0,N.jsx)(w.sD,{"aria-label":s,children:Array.from(i.keys()).map((e=>(0,N.jsx)(w.jJ,{elementType:"button",onAction:n,text:""+i.get(e),value:e},e)))}),text:r&&r!==q?""+i.get(r):s})},ne=(0,p.z)("div")({name:"Dropdowns",class:"d1do43"});function oe(e){var t,{t:s,i18n:r}=(0,T.Z)(),{days:i,months:n,years:o}=(e=>{var t=(e,t)=>e.set(t,t),s=M()(1,32).reduce(t,new Map),r=M()(12).reduce(((t,s)=>t.set(s+1,e(s))),new Map),i=(new Date).getFullYear();return{days:s,months:r,years:M()(i,i-130,-1).reduce(t,new Map)}})((e=>L(e,r.language))),a=(0,N.jsx)(ie,{invalid:e.yearInputInvalid,label:s("global.sign_up_modal.labels.year"),onAction:t=>e.onChange(t,e.yearInputName),options:o,selectedValue:e.yearInputValue},"years"),l=(0,N.jsx)(ie,{invalid:e.monthInputInvalid,label:s("global.sign_up_modal.labels.month"),onAction:t=>e.onChange(t,e.monthInputName),options:n,selectedValue:e.monthInputValue},"months"),d=(0,N.jsx)(ie,{invalid:e.dayInputInvalid,label:s("global.sign_up_modal.labels.day"),onAction:t=>e.onChange(t,e.dayInputName),options:i,selectedValue:e.dayInputValue},"days");switch(D(r.language)){case R.DAY_MONTH_YEAR:t=[d,l,a];break;case R.MONTH_DAY_YEAR:t=[l,d,a];break;case R.YEAR_MONTH_DAY:default:t=[a,l,d]}var u=e.yearInputInvalid||e.monthInputInvalid||e.dayInputInvalid;return(0,N.jsx)(H,{invalid:u,label:e.label,children:(0,N.jsx)(ne,{children:t})})}s("./.linaria-cache/app/j/signup/components/assemblified/BirthdateDropdowns.linaria.css");var ae=s("./app/j/components/MagicLinkPromptModal.tsx"),le=s("./app/j/models/ApiValidateEmail.ts"),de=s("./app/j/utils/html-escape.ts"),ue=s("./app/j/utils/trim.ts");function ce(e){var{birthDay:t,birthMonth:s,birthYear:r,name:i,onBlur:o,onChange:a,onFocus:l,onOpenLogin:d,onValidationError:u,invalid:c,label:p,value:m}=e,_=(0,I.useRef)(m||""),[f,v]=(0,I.useState)(null),[S,C]=(0,I.useState)(!1),{logPageAction:b}=(0,n.wL)(),{t:y}=(0,T.Z)(),E=()=>(v(null),m?le.Z.validate(m,t,s,r).then((e=>{var t=null;e&&(e.existingAccount?(t=(0,N.jsxs)(N.Fragment,{children:[y("signup_validator.existing"),(0,N.jsx)(g.GV,{leftIcon:"system-arrowhead-right",onClick:d,text:y("signup_validator.existing_login_link")}),(0,N.jsx)(g.GV,{leftIcon:"system-arrowhead-right",onClick:()=>C(!0),text:y("signup_validator.existing_magic_link")})]}),b("signup_form_error",{error:"existing_email"})):e.didYouMean?t=y("signup_validator.potential_email_typo",{emailAddress:(0,de.Z)(e.didYouMean)}):e.isValid?(t=!1,b("signup_form_success_email")):(t=y("signup_validator.invalid_email"),b("signup_form_error",{error:"invalid_email"}))),_.current||(t=null),v(t),null==u||u({field:i,message:t})})):null==u?void 0:u({field:i,message:null}));return(0,I.useEffect)((()=>{E()}),[t,s,r]),(0,I.useEffect)((()=>{_.current=m||""}),[m]),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(h.Z,{errorMessage:f,id:i,invalid:c,label:p,name:i,onBlur:e=>{E(),o&&o(e)},onChange:e=>{var t=e.currentTarget.value;t=(0,ue.Z)(t),_.current=t,a&&a(e)},onFocus:e=>{l&&l(e)},type:"email",value:_.current}),(0,N.jsx)(ae.Z,{isOpen:S,onClose:()=>C(!1),username:_.current})]})}var pe=s("./node_modules/lodash/debounce.js"),he=s.n(pe),ge=s("./app/j/compatibility/fetch.ts");function me(e){var{username:t,email:s,password:r}=e;return(0,ge.cZ)("/users/check-password",{body:{username:t,email:s,password:r}}).then((e=>{var{body:t}=e;return t}))}function _e(e){var{dependency:t,invalid:s,label:r,name:i,onBlur:o,onChange:a,onFocus:l,onValidationError:d,value:u}=e,[c,p]=(0,I.useState)(u||""),[g,m]=(0,I.useState)(null),{logPageAction:_}=(0,n.wL)(),f=e=>{null==d||d(e)},v=t&&!1!==t.invalid,S=(e,s)=>{if(m(null),!e||s)return f({field:i,message:null});var r,n;"username"===(null==t?void 0:t.name)?(r=null==t?void 0:t.value,n=null):(n=null==t?void 0:t.value,r=null),me({username:r,email:n,password:e}).then((e=>{var t=null;e.success?(t=!1,_("signup_form_success_password")):(t=e.error,_("signup_form_error",{error:"bad_password"})),m(t),f({field:i,message:t})}))},C=(0,I.useCallback)(he()(S,K),[]);(0,I.useEffect)((()=>{S(c,v)}),[v]),(0,I.useEffect)((()=>{C(c,v)}),[c]);return(0,N.jsx)(h.Z,{autoComplete:"new-password",errorMessage:g,id:i,invalid:s,label:r,name:i,onBlur:o,onChange:e=>{var t=e.currentTarget.value;p(t),a&&a(e)},onFocus:l,type:"password",value:u},i)}function fe(e){var{username:t,shouldAutoGenerateUsernames:s}=e;return(0,ge.lN)("/webapi/3.2/users/check-username",{params:{username:t,shouldAutoGenerateUsernames:s}}).then((e=>{var{body:t}=e;return t}))}var ve=(0,p.z)("div")({name:"Suggestions",class:"s11hjuo0"}),Se=(0,p.z)("div")({name:"Suggestion",class:"s18m3jze"});function Ce(e){var{forOauth:t,invalid:s,isUnderage:r,label:i,name:o,onBlur:a,onChange:l,onClickSuggestedUsername:d,onFocus:u,onValidationError:c,value:p}=e,[m,_]=(0,I.useState)(p||""),[f,v]=(0,I.useState)(null),[S,C]=(0,I.useState)(null),{logPageAction:b}=(0,n.wL)(),{t:y}=(0,T.Z)(),E=e=>{c&&c(e)},j=e=>{v(null),C(null);var t=e||m;return t&&""!==t?fe({username:t,shouldAutoGenerateUsernames:!1}).then((e=>{var t,{data:s,error:r}=e,i=null;(r&&(i=r.message,b("signup_form_error",{error:"username_error"})),null!=s&&s.checkUsername)&&(s.checkUsername.success?(i=!1,b("signup_form_success_username")):null!=(t=s.checkUsername.suggestions)&&t.length&&(i=y("signup_validator.username_taken_experiment"),C(s.checkUsername.suggestions)));v(i),E({field:o,message:i})})):E({field:o,message:null})},x=(0,I.useCallback)(he()(j,K),[]);(0,I.useEffect)((()=>{t&&j()}),[]),(0,I.useEffect)((()=>{_(p)}),[p]),(0,I.useEffect)((()=>{x(m)}),[m]);var w=(0,N.jsx)(h.Z,{autoComplete:"username",errorMessage:f,id:o,infoMessage:r?y("global.sign_up_modal.validation.no_real_name"):void 0,invalid:s,label:i,name:o,onBlur:e=>{a&&a(e)},onChange:e=>{var t=e.currentTarget.value;t=(0,ue.Z)(t),C(null),_(t),l&&l(e)},onFocus:e=>{u&&u(e)},value:p}),A=S?(0,N.jsx)(ve,{children:S.map((e=>(0,N.jsx)(Se,{children:(0,N.jsx)(g.GV,{onClick:()=>(e=>{b("signup_form_username_suggestion_clicked"),_(e),d&&d(e)})(e),text:e,variant:k.vT.SECONDARY})},e)))}):null;return(0,N.jsxs)("div",{children:[w,A]})}s("./.linaria-cache/app/j/signup/components/assemblified/UsernameField.linaria.css");var be=s("./app/j/signup/components/assemblified/utils.tsx"),ye=s("./node_modules/classnames/index.js"),Ee=s.n(ye),je=s("./app/j/components/UIDiv.tsx"),xe=s("./app/j/components/UIDropdown.tsx"),Te=s("./app/j/components/UIFieldset.tsx"),Ie=s("./app/j/components/UIRow.tsx"),we=s("./app/j/components/UIColumn.tsx");function Ae(e){var{children:t,defaultValue:s="-1",invalid:r,name:i,onChange:n,value:o,width:a=1}=e,[l,d]=(0,I.useState)(r||!1);(0,I.useEffect)((()=>{d(r||!1)}),[r]);var u=Ee()("SignupDropdown",{"is-selected":o!==s});return(0,N.jsx)(we.Z,{mobileWidth:a,width:a,children:(0,N.jsx)("div",{className:u,children:(0,N.jsx)(xe.Z,{invalid:l,name:i,onChange:n||(e=>null),value:o,children:t})})})}function Oe(e){var{dayInputInvalid:t,dayInputName:s,dayInputOnChange:r,dayInputValue:i,label:n,monthInputInvalid:o,monthInputName:a,monthInputOnChange:l,monthInputValue:d,variant:u="boxed",yearInputInvalid:c,yearInputName:p,yearInputOnChange:h,yearInputValue:m}=e,{t:_,i18n:f}=(0,T.Z)(),S="boxed"===u,C="underline"===u,b=M()(1,32).map((e=>(0,N.jsx)("option",{value:e,children:e},e)));b.unshift((0,N.jsx)("option",{value:-1,children:_("global.sign_up_modal.labels.day")},-1));var y=M()(12).map((e=>(0,N.jsx)("option",{value:e+1,children:L(e,f.language)},e+1)));y.unshift((0,N.jsx)("option",{value:-1,children:_("global.sign_up_modal.labels.month")},-1));var E,j,x,I,w=(new Date).getFullYear(),A=M()(w,w-130,-1).map((e=>(0,N.jsx)("option",{children:e},e)));switch(A.unshift((0,N.jsx)("option",{value:-1,children:_("global.sign_up_modal.labels.year")},-1)),"underline"===u?(E=(0,N.jsx)(Ae,{"aria-label":p,defaultValue:q,invalid:c,name:p,onChange:h,value:m,width:1/3,children:A},p),j=(0,N.jsx)(Ae,{"aria-label":a,defaultValue:q,invalid:o,name:a,onChange:l,value:d,width:1/3,children:y},a),x=(0,N.jsx)(Ae,{"aria-label":s,defaultValue:q,invalid:t,name:s,onChange:r,value:i,width:1/3,children:b},s)):(E=(0,N.jsx)(xe.Z,{"aria-label":p,invalid:c,name:p,onChange:h,value:m,variant:u,children:A},p),j=(0,N.jsx)(xe.Z,{"aria-label":a,invalid:o,name:a,onChange:l,value:d,variant:u,children:y},a),x=(0,N.jsx)(xe.Z,{"aria-label":s,invalid:t,name:s,onChange:r,value:i,variant:u,children:b},s)),D(f.language)){case R.DAY_MONTH_YEAR:I=[x,j,E];break;case R.MONTH_DAY_YEAR:I=[j,x,E];break;case R.YEAR_MONTH_DAY:default:I=[E,j,x]}var O="underline"===u?(0,N.jsx)(Ie.Z,{children:I}):I,P=S?n:null,U=C?n:null,F=Ee()("BirthDateDropdownGroup",{"BirthDateDropdownGroup--underline":"underline"===u});return(0,N.jsx)(je.Z,{className:F,children:(0,N.jsxs)(Te.Z,{invalid:t||o||c,legend:P,legendBelow:U,turnLegendIntoLabel:!0,children:[O,"boxed"===u?(0,N.jsx)("div",{className:"BirthDateDropdownGroup-helpWrap",children:(0,N.jsx)(Z.Z,{delay:0,offset:8,placement:"right",text:(0,N.jsx)(v.Z,{id:"global.sign_up_modal.birthday_law_info"}),children:(0,N.jsx)(g.JZ,{alt:"Question",icon:"question",size:"medium",variant:k.IQ.TERTIARY})})}):null]})})}var Re=s("./node_modules/@linaria/core/lib/index.js"),De=s("./app/j/components/UIIcon.tsx"),Le=s("./app/j/components/UIInput.tsx"),Pe=s("./app/j/components/UILink.tsx"),Me=(0,N.jsx)(De.Z,{icon:"check"});function Ze(e){var{birthDay:t,birthMonth:s,birthYear:r,onBlur:i,onChange:o,onFocus:a,onOpenLogin:l,onValidationError:d,invalid:u,name:c,label:p,placeholder:h,value:g,variant:m}=e,_=(0,I.useRef)(g||""),[f,v]=(0,I.useState)(null),[S,C]=(0,I.useState)(!1),{logPageAction:b}=(0,n.wL)(),{t:y}=(0,T.Z)(),E=()=>{if(v(null),!g)return null==d?void 0:d({field:c,message:null});le.Z.validate(g,t,s,r).then((e=>{var t=null;e&&(e.existingAccount?(t=(0,N.jsxs)(N.Fragment,{children:[y("signup_validator.existing"),(0,N.jsx)("li",{children:(0,N.jsx)(Pe.Z,{onClick:()=>l(),children:y("signup_validator.existing_login_link")})}),(0,N.jsx)("li",{children:(0,N.jsx)(Pe.Z,{onClick:()=>C(!0),children:y("signup_validator.existing_magic_link")})})]}),b("signup_form_error",{error:"existing_email"})):e.didYouMean?t=y("signup_validator.potential_email_typo",{emailAddress:(0,de.Z)(e.didYouMean)}):e.isValid?(t=!1,b("signup_form_success_email")):(t=y("signup_validator.invalid_email"),b("signup_form_error",{error:"invalid_email"}))),_.current||(t=null),v(t),null==d||d({field:c,message:t})}))};(0,I.useEffect)((()=>E()),[t,s,r]),(0,I.useEffect)((()=>{_.current=g||""}),[g]);var j=(0,Re.cx)(!!_.current&&"p15jw6r9");return(0,N.jsxs)(je.Z,{className:j,children:[(0,N.jsx)(Le.Z,{addOnContent:!1===f?Me:null,id:c,invalid:u,label:p,name:c,onBlur:e=>{E(),i&&i(e)},onChange:e=>{var t=e.currentTarget.value;t=(0,ue.Z)(t),_.current=t,null==o||o(e)},onFocus:e=>{a&&a(e)},placeholder:h,role:"textbox",type:"email",value:_.current,variant:m}),(0,N.jsx)(ae.Z,{isOpen:S,onClose:()=>C(!1),username:_.current})]})}s("./.linaria-cache/app/j/signup/components/EmailField.linaria.css");var ke=s("./app/j/signup/components/LoginLink.tsx");function Ue(e){var{dependency:t,invalid:s,label:r,name:i,onBlur:o,onChange:a,onFocus:l,onValidationError:d,placeholder:u,value:c,variant:p}=e,[h,g]=(0,I.useState)(c||""),[m,_]=(0,I.useState)(null),{logPageAction:f}=(0,n.wL)(),v=e=>{null==d||d(e)},S=t&&!1!==t.invalid,C=(e,s)=>{if(_(null),!e||s)return v({field:i,message:null});var r,n;"username"===(null==t?void 0:t.name)?(r=null==t?void 0:t.value,n=null):(n=null==t?void 0:t.value,r=null),me({username:r,email:n,password:e}).then((e=>{var t=null;e.success?(t=!1,f("signup_form_success_password")):(t=e.error,f("signup_form_error",{error:"bad_password"})),_(t),v({field:i,message:t})}))},b=(0,I.useCallback)(he()(C,K),[]);(0,I.useEffect)((()=>{C(h,S)}),[S]),(0,I.useEffect)((()=>{b(h,S)}),[h]);var y=!1===m?(0,N.jsx)(De.Z,{icon:"check"}):null,E=Ee()("PasswordField",{"is-populated":!!h});return(0,N.jsx)(je.Z,{className:E,children:(0,N.jsx)(Le.Z,{addOnContent:y,autoComplete:"new-password",id:i,invalid:s,label:r,name:i,onBlur:o,onChange:e=>{var t=e.currentTarget.value;g(t),null==a||a(e)},onFocus:l,placeholder:u,role:"textbox",type:"password",value:c,variant:p},i)})}function Ne(e){var{checked:t,name:s,onBlur:r,onChange:i,onFocus:o,onValidationError:a,value:l}=e,[d,u]=(0,I.useState)(l||""+j.IXc.TEACHER),{logPageAction:c}=(0,n.wL)(),p=(0,be.vV)(),{t:h}=(0,T.Z)();(0,I.useEffect)((()=>{(()=>{if(d!==""+j.IXc.TEACHER&&d!==""+j.IXc.STUDENT)return null==a?void 0:a({field:s,message:null});c("signup_form_success_is_teacher"),null==a||a({field:s,message:!1})})()}),[d]);var g=(0,be.My)(),m=(0,N.jsx)(g,{checked:t,label:h("global.sign_up_modal.i_am_a_teacher"),name:s,onBlur:r,onChange:e=>{var t=e.currentTarget.checked?""+j.IXc.TEACHER:""+j.IXc.UNKNOWN;null==i||i(e),u(t)},onFocus:o,value:d});return p?m:(0,N.jsx)(je.Z,{children:m})}var Fe=s("./app/j/assembly/AssemblyCheckbox.tsx"),Be=s("./app/j/assembly/AssemblyLink.tsx"),He=s("./app/j/components/UICheckbox.tsx"),Ve=["shouldValidate"],Ge=["shouldValidate"],We=(0,p.z)("div")({name:"PolicyLabel",class:"pkiexjn"});function ze(e){var{checked:t,invalid:s,name:r,onBlur:i,onChange:o,onFocus:a,onValidationError:l}=e,{logPageAction:d}=(0,n.wL)(),{t:u}=(0,T.Z)(),{countryCode:c}=(0,I.useContext)(x.Z),p=(0,be.vV)(),h={checked:t,invalid:s,name:r,onBlur:i,onChange:e=>{var t=e.currentTarget.checked;o&&o(e),(e=>{e?(d("signup_form_success_tos"),null==l||l({field:r,message:!1})):null==l||l({field:r,message:u(p?"signup_validator.tos_required_lowercase":"signup_validator.tos_required")})})(t)},onFocus:a,shouldValidate:"us"!==c};return p?(0,N.jsx)(qe,Object.assign({},h)):(0,N.jsx)(Ke,Object.assign({},h))}function qe(e){var{shouldValidate:t}=e,s=(0,o.Z)(e,Ve),r=(0,f.YQ)(),{t:i}=(0,T.Z)(),n={privacyPolicyLink:(0,N.jsx)(Be.ZP,{linkTo:"/privacy",shouldOpenInNewTab:!0,text:i("global.sign_up_modal.policy_agreement_privacy_policy_link"),variant:Be.U_.Secondary}),tosLink:(0,N.jsx)(Be.ZP,{linkTo:"/tos",shouldOpenInNewTab:!0,text:i("global.sign_up_modal.policy_agreement_tos_link"),variant:Be.U_.Secondary})},a=r?(0,N.jsx)(v.Z,Object.assign({id:"global.sign_up_modal.policy_agreement_mobile_cta"},n)):(0,N.jsx)(v.Z,Object.assign({id:"global.sign_up_modal.policy_agreement_desktop_cta"},n)),l=(0,N.jsx)(We,{children:a}),d=(0,N.jsx)(v.Z,Object.assign({id:"global.sign_up_modal.policy_agreement"},n)),u=(0,N.jsx)(Fe.Z,Object.assign({label:d},s));return t?u:l}function Ke(e){var{shouldValidate:t}=e,s=(0,o.Z)(e,Ge),{t:r}=(0,T.Z)(),i=(0,N.jsx)(Pe.Z,{newTab:!0,title:r("global.sign_up_modal.policy_agreement_tos_popout_description"),to:"/tos",children:r("global.sign_up_modal.policy_agreement_tos_link")}),n={privacyPolicyLink:(0,N.jsx)(Pe.Z,{newTab:!0,title:r("global.sign_up_modal.policy_agreement_privacy_policy_popout_description"),to:"/privacy",children:r("global.sign_up_modal.policy_agreement_privacy_policy_link")}),tosLink:i},a=(0,f.YQ)()?(0,N.jsx)(v.Z,Object.assign({id:"global.sign_up_modal.policy_agreement_mobile_cta"},n)):(0,N.jsx)(v.Z,Object.assign({id:"global.sign_up_modal.policy_agreement_desktop_cta"},n)),l=(0,N.jsx)(v.Z,Object.assign({id:"global.sign_up_modal.policy_agreement"},n)),d=(0,N.jsx)(He.Z,Object.assign({label:l},s));return(0,N.jsx)(je.Z,{className:Ee()("TosCheckbox",{"is-invalid":s.invalid,"is-prechecked":t}),children:t?d:a})}s("./.linaria-cache/app/j/signup/components/TosCheckbox.linaria.css");var Ye=(0,N.jsx)(De.Z,{icon:"check"});function Qe(e){var{forOauth:t,invalid:s,label:r,name:i,onBlur:o,onChange:a,onClickSuggestedUsername:l,onFocus:d,onValidationError:u,placeholder:c,variant:p,value:h}=e,[g,m]=(0,I.useState)(h||""),[_,f]=(0,I.useState)(null),[v,S]=(0,I.useState)(null),{logPageAction:C}=(0,n.wL)(),{t:b}=(0,T.Z)(),y=e=>{u&&u(e)},E=e=>{f(null),S(null);var t=e||g;return t?fe({username:t,shouldAutoGenerateUsernames:!1}).then((e=>{var t,{data:s,error:r}=e,n=null;(r&&(n=r.message,C("signup_form_error",{error:"username_error"})),null!=s&&s.checkUsername)&&(s.checkUsername.success?(n=!1,C("signup_form_success_username")):null!=(t=s.checkUsername.suggestions)&&t.length&&(n=b("signup_validator.username_taken"),S(s.checkUsername.suggestions)));f(n),y({field:i,message:n})})):y({field:i,message:null})},j=(0,I.useCallback)(he()(E,K),[]);(0,I.useEffect)((()=>{t&&E()}),[]),(0,I.useEffect)((()=>{m(h)}),[h]),(0,I.useEffect)((()=>{j(g)}),[g]);var x=!1===_?Ye:null,w=Ee()("UsernameField",{"is-populated":!!g}),A=(0,N.jsx)(je.Z,{className:w,children:(0,N.jsx)(Le.Z,{addOnContent:x,autoComplete:"username",id:i,invalid:s,label:r,name:i,onBlur:e=>{o&&o(e)},onChange:e=>{var t=e.currentTarget.value;t=(0,ue.Z)(t),S(null),m(t),a&&a(e)},onFocus:e=>{d&&d(e)},placeholder:c,value:g,variant:p})}),O=v?(0,N.jsx)("div",{className:"UsernameField-suggestions",children:v.map((e=>(0,N.jsx)("div",{className:"UsernameField-suggestion",children:(0,N.jsx)(Pe.Z,{onClick:()=>(e=>{C("signup_form_username_suggestion_clicked"),m(e),l&&l(e)})(e),children:e})},e)))}):null;return(0,N.jsxs)("div",{className:"UsernameField",children:[A,O]})}var $e=s("./app/j/utils/DateHelper.ts");function Xe(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var Je=(0,p.z)("div")({name:"CTAs",class:"ctqvbhl"}),et=(0,p.z)("span")({name:"LoginMessage",class:"lghzn8f"}),tt=(0,p.z)("div")({name:"BelowForm",class:"bpceo8d"}),st=[V.BIRTH_DAY,V.BIRTH_MONTH,V.BIRTH_YEAR];function rt(e){var{dispatchError:t,dispatchFormUpdate:s,dispatchGenericErrors:r,errorState:i,form:l,forOauth:u=!1,genericErrors:p,isFormComplete:w,isSubmitting:A,marketingOptInEnabled:O,onComplete:R,onOpenLogin:D,onSubmit:L,onValidatableFieldChange:P,requiredFields:M,shouldRenderUsername:Z,suggestedUsername:k,withSubmitButton:U=!0}=e,{countryCode:F}=(0,I.useContext)(x.Z),B=X(),{logPageAction:G}=(0,n.wL)(),W=(0,be.vV)(),{t:z}=(0,T.Z)(),K=(0,be.j_)(),se=(0,be.My)(),re=(0,f.p3)(),[ie,ne]=(0,I.useState)(""),[ae,le]=(0,I.useState)(!1),[de,ue]=(0,I.useState)(!1),{[V.USERNAME]:pe,[V.EMAIL]:he,[V.PASSWORD]:ge,[V.SELF_IDENTIFIED_USER_TYPE]:me,[V.IS_PARENT]:fe,[V.TERMS_OF_SERVICE]:ve,[V.BIRTH_YEAR]:Se,[V.BIRTH_MONTH]:ye,[V.BIRTH_DAY]:Ee}=l,je=c()(ye,2,"0"),xe=c()(Ee,2,"0"),{age:Te,parsedBirthYear:Ie,parsedBirthMonth:we,parsedBirthDay:Ae}=te({birthDay:Ee,birthMonth:ye,birthYear:Se}),Re=Te<ee(F),De=Te>=E.nw&&Te<=E.cD,Le=!!O&&[...Y,...Q].includes(F),Pe=function(){var e=(0,a.Z)((function*(e){var s=J(e),{[$]:i}=s,n=(0,o.Z)(s,[$].map(Xe));r(i),t(n)}));return function(t){return e.apply(this,arguments)}}(),Me=e=>Pe([e]);function Fe(e){var t=i[e];return!!t||(!1!==t||ie!==e)&&void 0}(0,I.useEffect)((()=>{var e;e=Te!==1/0,!B&&u&&e&&!Re&&""===pe&&s({[V.USERNAME]:k}),e&&(G("signup_form_success_birthday"),Pe(st.map((e=>({field:e,message:!1})))),(!(0,$e.Rp)(Ie,we-1,Ae)||Te<0)&&Pe(st.map((e=>({field:e,message:z("errors.model_validation.user.invalid_birth_date")})))))}),[Se,ye,Ee]),(0,I.useEffect)((()=>{w&&(null==R||R())}),[w]),(0,I.useEffect)((()=>{Re&&(s({[V.EMAIL]:""}),t({[V.EMAIL]:null}))}),[Re]),(0,I.useEffect)((()=>{De||s({[V.SELF_IDENTIFIED_USER_TYPE]:""+j.IXc.UNKNOWN,[V.IS_PARENT]:!1})}),[De]),(0,I.useEffect)((()=>{!st.some((e=>i[e]))&&(pe||he||ge)&&st.forEach((e=>{l[e]===q&&Me({field:e,message:z("errors.model_validation.user.requires_birthday")})}))}));var Be=!0===Z?V.USERNAME:V.EMAIL,He={name:Be,value:l[Be],invalid:i[Be]},Ve=e=>{var r=e.currentTarget.name,i=e.currentTarget.value;M.includes(r)&&(null==P||P()),"checkbox"===e.currentTarget.type&&(i=((e,t)=>{if(V.TERMS_OF_SERVICE===e||V.IS_PARENT===e)return t;if(V.MARKETING_OPT_OUT===e)return!t;if(e===V.SELF_IDENTIFIED_USER_TYPE)return t?""+j.IXc.TEACHER:""+j.IXc.UNKNOWN;throw new TypeError("Invalid checkbox name: "+e)})(r,e.currentTarget.checked)),s({[r]:i}),t({[r]:null})},Ge=e=>{var r=e.currentTarget.value,i=e.currentTarget.name;M.includes(i)&&(null==P||P()),s({[i]:r}),t({[i]:null})},We={onBlur:()=>{ne("")},onChange:Ve,onFocus:e=>{ne(e.currentTarget.name)},onValidationError:Me},qe=i[V.BIRTH_DAY]||i[V.BIRTH_MONTH]||i[V.BIRTH_YEAR]||z("global.sign_up_modal.birthday_label"),Ke=Ee!==q&&ye!==q&&Se!==q?Se+"-"+je+"-"+xe:void 0,Ye=(0,N.jsx)(H,{label:qe,children:(0,N.jsx)(h.Z,{errorMessage:i[V.BIRTH_DAY],invalid:Fe(V.BIRTH_YEAR)||Fe(V.BIRTH_MONTH)||Fe(V.BIRTH_DAY),label:qe,onChange:e=>{var r=e.target.value;null==P||P();var i,[n,o,a]=[(i=r.split("-"))[0],i[1],i[2]];s({[V.BIRTH_YEAR]:n,[V.BIRTH_MONTH]:o,[V.BIRTH_DAY]:a}),t({[V.BIRTH_YEAR]:null,[V.BIRTH_MONTH]:null,[V.BIRTH_DAY]:null})},persistLabel:!1,type:"date",value:Ke})}),rt=re?Ye:(0,N.jsx)(oe,{dayInputInvalid:Fe(V.BIRTH_DAY),dayInputName:V.BIRTH_DAY,dayInputValue:Ee,label:qe,monthInputInvalid:Fe(V.BIRTH_MONTH),monthInputName:V.BIRTH_MONTH,monthInputValue:ye,onChange:(e,r)=>{M.includes(r)&&(null==P||P()),s({[r]:e}),t({[r]:null})},yearInputInvalid:Fe(V.BIRTH_YEAR),yearInputName:V.BIRTH_YEAR,yearInputValue:Se}),it=W?rt:(0,N.jsx)(Oe,{dayInputInvalid:Fe(V.BIRTH_DAY),dayInputName:V.BIRTH_DAY,dayInputOnChange:Ge,dayInputValue:Ee,label:qe,monthInputInvalid:Fe(V.BIRTH_MONTH),monthInputName:V.BIRTH_MONTH,monthInputOnChange:Ge,monthInputValue:ye,yearInputInvalid:Fe(V.BIRTH_YEAR),yearInputName:V.BIRTH_YEAR,yearInputOnChange:Ge,yearInputValue:Se}),nt=z(!de&&ae?"global.sign_up_modal.labels.suggested_username":"global.sign_up_modal.labels.username"),ot=Object.assign({},We,{forOauth:u,invalid:Fe(V.USERNAME),key:"username-field",name:V.USERNAME,onChange:e=>{Ve(e),de||ue(!0)},onClickSuggestedUsername:e=>{s({[V.USERNAME]:e})},value:pe}),at=W?(0,N.jsx)(_.W,{children:(0,N.jsx)(Ce,Object.assign({},ot,{isUnderage:Re,label:z(!de&&ae?"global.sign_up_modal.labels.suggested_username_lowercase":"global.sign_up_modal.labels.username")}))}):(0,N.jsx)(Qe,Object.assign({},ot,{label:i[V.USERNAME]||nt,name:V.USERNAME,placeholder:z(Re?"global.sign_up_modal.validation.no_real_name":"global.sign_up_modal.placeholder_username"),variant:"boxed"})),lt=Object.assign({},We,{birthDay:Ee===q?void 0:Ee,birthMonth:ye===q?void 0:ye,birthYear:Se===q?void 0:Se,invalid:Fe(V.EMAIL),key:"email-field",label:z(Re?"global.sign_up_modal.labels.parent_email":"global.sign_up_modal.labels.email"),name:V.EMAIL,onChange:e=>{Ve(e);var t=e.currentTarget.value;if(!B&&!Re&&!de&&t.indexOf("@")>=3){var r=t.split("@")[0].replace(/[^0-9a-zA-Z\-_]/g,"");s({[V.USERNAME]:r}),le(!0)}},onOpenLogin:D,value:he}),dt=W?(0,N.jsx)(_.W,{children:(0,N.jsx)(ce,Object.assign({},lt))}):(0,N.jsx)(Ze,Object.assign({},lt,{label:i[V.EMAIL]||lt.label,placeholder:z("global.sign_up_modal.placeholder_email"),variant:"boxed"})),ut=Object.assign({},We,{dependency:He,invalid:Fe(V.PASSWORD),name:V.PASSWORD,value:ge}),ct=W?(0,N.jsx)(_.W,{children:(0,N.jsx)(_e,Object.assign({},ut,{label:z("global.sign_up_modal.labels.password")}))}):(0,N.jsx)(Ue,Object.assign({},ut,{label:i[V.PASSWORD]||z("global.sign_up_modal.labels.password"),placeholder:"●●●●●●●●",variant:"boxed"})),pt=K((0,N.jsx)(ze,Object.assign({},We,{checked:ve,invalid:Fe(V.TERMS_OF_SERVICE),name:V.TERMS_OF_SERVICE}))),ht=K((0,N.jsx)(Ne,Object.assign({},We,{checked:me===""+j.IXc.TEACHER,name:V.SELF_IDENTIFIED_USER_TYPE,value:""+j.IXc.TEACHER}))),gt=K((0,N.jsx)(se,Object.assign({},We,{checked:fe,label:z("global.sign_up_modal.i_am_a_parent"),name:V.IS_PARENT,value:fe}))),mt=K((0,N.jsx)(se,Object.assign({},We,{checked:!l[V.MARKETING_OPT_OUT],label:z("global.sign_up_modal.marketing_opt_in"),name:V.MARKETING_OPT_OUT}))),_t=p.map((e=>e.message)),ft=i[V.TERMS_OF_SERVICE];ft&&_t.unshift(ft);var vt=d()(_t),St=W?(0,N.jsx)(m.Z,{messages:vt}):(0,N.jsx)(y.Z,{boxed:!0,uppercaseDeprecated:!0,variant:"alert",children:(0,N.jsx)(S.Z,{children:vt.map(((e,t)=>(0,N.jsx)(C.Z,{children:e},t)))})}),Ct=vt.length?K(St):null,bt=u?null:(0,N.jsx)(tt,{children:(0,N.jsx)("div",{className:W?"a1dq3pdm":"a1cs70vk",children:(0,N.jsx)(et,{children:(0,N.jsx)(ke.Z,{cta:(0,N.jsx)(v.Z,{id:"global.sign_up_modal.already_have_account"}),link:(0,N.jsx)(v.Z,{id:"global.sign_up_modal.log_in_link"}),onClickLogin:D})})})}),yt=W?(0,N.jsx)(Je,{children:(0,N.jsxs)(_.W,{children:[(0,N.jsx)(g.wI,{disabled:!w,isFullWidth:!0,loading:A,text:z("global.sign_up_modal.button_text"),type:"submit"}),bt]})}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(b.Z,{disabled:!w,loading:A,type:"submit",width:"fill",children:(0,N.jsx)("span",{children:z("global.sign_up_modal.button_text")})}),bt]});return(0,N.jsxs)("form",{className:"f4qlfzs","data-testid":"login-form-test-id",onSubmit:L,children:[it,!u||Re?dt:null,Z?at:null,u?null:ct,De?ht:null,De?gt:null,Le?mt:null,u?null:pt,Ct,U?yt:null]})}s("./.linaria-cache/app/j/components/SignupWithEmailForm.linaria.css");var it=s("./app/j/components/UIModal.tsx"),nt=s("./app/j/context/RouteContext.tsx"),ot=s("./app/j/assembly/buttons/components/AssemblySocialButton.tsx"),at=s("./app/j/components/FacebookLoginButton.tsx"),lt=s("./app/j/components/GoogleLoginButton.tsx");class dt extends I.PureComponent{render(){var{children:e,variant:t}=this.props,s=Ee()("UIDivider-label",{["UIDivider--"+t]:"default"!==t});return(0,N.jsxs)("div",{className:"UIDivider",children:[(0,N.jsx)("div",{className:"UIDivider-separator",children:(0,N.jsx)("hr",{className:"UIDivider-separatorLine"})}),(0,N.jsx)("div",{className:s,children:e}),(0,N.jsx)("div",{className:"UIDivider-separator",children:(0,N.jsx)("hr",{className:"UIDivider-separatorLine"})})]})}}dt.defaultProps={variant:"default"};var ut=s("./app/j/utils/LoginHelper.ts"),ct=(0,p.z)("div")({name:"Buttons",class:"b1r6bd1m"}),pt=(0,p.z)("div")({name:"Button",class:"bq40tjb"});function ht(e){var{shouldRenderFacebookLoginButton:t,socialLoginParams:s}=e,{logPageAction:r}=(0,n.wL)(),{t:i}=(0,T.Z)(),o=(0,be.vV)(),a=e=>{r("signup_form_"+e+"_button_clicked")},l=o?(0,N.jsx)(ot.ZP,{onClick:()=>a("facebook"),provider:ot.MC.FACEBOOK,urlParams:s}):(0,N.jsx)(at.Z,{facebookLoginUrl:(0,ut.Lt)(s),label:i("global.sign_up_modal.sign_up_cta.continue_with_facebook"),onClick:()=>a("facebook"),variant:"small"}),d=o?(0,N.jsx)(ot.ZP,{onClick:()=>a("google"),provider:ot.MC.GOOGLE,urlParams:s}):(0,N.jsx)(lt.Z,{googleLoginUrl:(0,ut.k9)(s),label:i("global.sign_up_modal.sign_up_cta.continue_with_google"),onClick:()=>a("google"),variant:"small"}),u=o?(0,N.jsx)(_.i,{children:(0,N.jsx)(v.Z,{id:"global.sign_up_modal.email_divider_label"})}):(0,N.jsx)(dt,{children:(0,N.jsx)(v.Z,{id:"global.sign_up_modal.email_divider_label"})},"divider");return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(ct,{children:[(0,N.jsx)(pt,{children:d}),t?(0,N.jsx)(pt,{children:l}):null]}),u]})}s("./.linaria-cache/app/j/signup/components/SignupWithCtas.linaria.css");s("./node_modules/core-js/modules/es.json.stringify.js");var gt=s("./node_modules/@status/codes/build/http.js"),mt=s("./app/j/context/SubscriptionsContext.tsx"),_t=s("./app/j/global/Rollbar.ts"),ft=s("./app/j/utils/FetchWith.ts");var vt=s("./app/j/utils/Cookie.ts"),St=s("./app/j/utils/redirect.ts");function Ct(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var bt=(e,t)=>Object.assign({},e,t),yt=(e,t)=>Object.assign({},e,t),Et=(e,t)=>t.length?[...e,...t]:[];function jt(e){var{signupFormData:t,onSubmit:s,onSubmitError:r}=e,{t:i}=(0,T.Z)(),{actionString:n}=(0,I.useContext)(nt.jj),a=(0,be.vV)(),{countryCode:l}=(0,I.useContext)(x.Z),d=X(),{upgradeData:u}=(0,I.useContext)(mt.Z),[c,p]=(0,I.useState)(!1),{birthDay:h,birthMonth:g,birthYear:m,couponCode:_,data:f,email:S,forOauth:C,redir:b,selfIdentifiedTeacherStatus:y,suggestedUsername:w,signupMetadata:A,signupOrigin:O}=t||{},R=(0,ut.GG)(n),D={couponCode:_,[V.TERMS_OF_SERVICE]:!1,[V.BIRTH_DAY]:h||q,[V.BIRTH_MONTH]:g||q,[V.BIRTH_YEAR]:m||q,data:f,[V.EMAIL]:S||"",[V.SELF_IDENTIFIED_USER_TYPE]:y||""+j.IXc.UNKNOWN,[V.IS_PARENT]:!1,[V.PASSWORD]:"",redir:b,signupOrigin:O,screenName:R,[V.USERNAME]:w||"",[V.MARKETING_OPT_OUT]:null!=t&&t.marketingOptInEnabled?[...Y,...Q].includes(l):void 0},[L,P]=(0,I.useReducer)(bt,D),[M,Z]=(0,I.useReducer)(yt,{}),[k,U]=(0,I.useReducer)(Et,[]),F=!C,B="us"!==l,{age:H}=te({birthDay:L[V.BIRTH_DAY],birthMonth:L[V.BIRTH_MONTH],birthYear:L[V.BIRTH_YEAR]}),G=H<ee(l),W=!(d||"us"===l&&G),z=[V.BIRTH_DAY,V.BIRTH_MONTH,V.BIRTH_YEAR];W&&z.push(V.USERNAME),C&&G?z.push(V.EMAIL):C||(z.push(V.EMAIL),z.push(V.PASSWORD)),F&&B&&z.push(V.TERMS_OF_SERVICE);var K=z.every((e=>!1===M[e])),ie=a?(0,N.jsx)(Be.ZP,{linkTo:"/cookies",shouldOpenInNewTab:!0,size:"small",text:i("global.sign_up_modal.validation.cookies_disabled_link")}):(0,N.jsx)(Pe.Z,{newTab:!0,to:"/cookies",children:(0,N.jsx)(v.Z,{id:"global.sign_up_modal.validation.cookies_disabled_link"})}),ne=a?(0,N.jsx)(Be.ZP,{linkTo:"/login",shouldOpenInNewTab:!0,size:"small",text:i("global.sign_up_modal.validation.email_already_associated_link")}):(0,N.jsx)(Pe.Z,{newTab:!0,to:"/login",children:(0,N.jsx)(v.Z,{id:"global.sign_up_modal.validation.email_already_associated_link"})}),oe=e=>U([{field:null,message:e}]),ae=(e,t)=>{switch(null==r||r(),p(!1),e.identifier){case"invalid_oauth_data":case"exception_client_cookies_broken":oe((0,N.jsx)(v.Z,{emoji:"🍪",id:"global.sign_up_modal.validation.cookies_disabled",link:ie}));break;case"another_oauth_id_already_associated":oe((0,N.jsx)(v.Z,{emoji:"🤔",id:"global.sign_up_modal.validation.email_already_associated",link:ne}));break;default:if(oe((0,N.jsx)(v.Z,{emoji:"😅",id:"global.sign_up_modal.validation.general_error"})),"generic_error"===e.identifier&&"Encountered an unexpected error"===e.message&&e.status===gt.eV.Forbidden)break;if(t){var{rollbarMessage:s,rollbarExtraArgs:i}=t;_t.Z.info(s,Object.assign({error:e},i))}}},le=e=>{try{var s;if(e.error)return void ae(e.error);var i=e.responses[0];if(i.error&&"validation_errors"===i.error.identifier){var n=J(e.responses[0].validationErrors),{[$]:a}=n,l=(0,o.Z)(n,[$].map(Ct));U(a),Z(l),null==r||r(),p(!1)}else((e,t)=>{var s=re.NO_REDIRECT_TO_UPSELL;return s.push(se),!(null==t||!t.willUpgradeThroughPartner)||!!e&&s.includes(e)})(O,u)?(A&&O&&vt.ZP.write(O,JSON.stringify(A),{duration:.0006944444444444444,secure:!0}),(0,St.ZP)((null==t?void 0:t.redir)||window.location.href)):null!=(s=i.data)&&s.authentication.redirect&&(0,St.ZP)(i.data.authentication.redirect)}catch(d){ae(d,{rollbarMessage:"Failed signup/oauth POST inner",rollbarExtraArgs:{data:e}})}};return{clearForm:()=>{P(D)},dispatchError:Z,dispatchFormUpdate:P,dispatchGenericErrors:U,errorState:M,form:L,genericErrors:k,isFormComplete:K,isSubmitting:c,onSubmit:e=>{if(null==e||e.preventDefault(),null==s||s(),U([]),p(!0),F&&B&&!L[V.TERMS_OF_SERVICE]&&(null==r||r(),Z({[V.TERMS_OF_SERVICE]:(0,N.jsx)(v.Z,{id:"signup_validator.tos_required"})})),K&&!C&&M[V.TERMS_OF_SERVICE])null==r||r();else{var t=L[V.SELF_IDENTIFIED_USER_TYPE];t===""+j.IXc.UNKNOWN&&H>=E.nw&&H<=E.cD&&(t=""+j.IXc.STUDENT);var i=Object.assign({},L,{signupOrigin:O,[V.SELF_IDENTIFIED_USER_TYPE]:t,[V.BIRTH_DAY]:L[V.BIRTH_DAY],[V.BIRTH_MONTH]:L[V.BIRTH_MONTH],[V.BIRTH_YEAR]:L[V.BIRTH_YEAR]}),n=C?function(e,t){var s=e?"3.2":"3.8";return(0,ft.cZ)("/webapi/"+s+"/oauth-extra-info",t)}(W,i):function(e,t){var s=e?"3.2":"3.8";return(0,ge.cZ)("/webapi/"+s+"/direct-signup",{body:t}).then((e=>{var{body:t}=e;return t}))}(W,i);n.then(le).catch((e=>ae(e,{rollbarMessage:"Failed signup/oauth POST",rollbarExtraArgs:{forOauth:C}})))}},requiredFields:z,shouldRenderUsername:W}}var xt=s("./app/j/tracking/isFacebookBlocked.ts");function Tt(e){var{body:t,handleFormSubmit:s,handleOpenLogin:i,includeCloseButton:n,isContinuingOauth:o,isOpen:a,onClose:l,shouldCloseOnOverlayClick:d,submitDisabled:u,submitLoading:c,title:p}=e,{t:h}=(0,T.Z)(),g={text:h("global.sign_up_modal.button_text"),disabled:u,loading:c,onClick:s},m=o?void 0:{text:h("global.sign_up_modal.already_have_account_log_in"),onClick:i};return(0,N.jsx)(r.Z,{body:t,includeCloseButton:n,isOpen:a,limitHeight:!1,onClose:l,primaryAction:g,secondaryAction:m,shouldCloseOnOverlayClick:d,title:p})}function It(e){var{actions:t,couponCode:s,header:r,includeCloseButton:o=!0,isOpen:a,marketingOptInEnabled:l,signupMetadata:d,preventCloseOnOverlayClick:u,redir:c,signupFormData:p,signupOrigin:h,excludeFromFullpageExperiment:g=!1}=e,{logPageAction:m}=(0,n.wL)(),{actionString:_}=(0,I.useContext)(nt.jj),f=(0,be.vV)(),[v,S]=(0,I.useState)(!1),[C,b]=(0,I.useState)(!0),[y,E]=(0,I.useState)(!1);(0,I.useEffect)((()=>{a&&m("sign_up_modal_opened")}),[a]);var j=(0,ut.GG)(_);(0,I.useEffect)((()=>{(0,xt.Z)().then((e=>{S(e)}))}),[]);var x=h?{customParams:{screenName:j,signupOrigin:h},redirect:c}:{},T=null==p?void 0:p.forOauth,w=o&&!T,A=u||T,O=()=>{b(!0),t.onOpenLogin()},{clearForm:R,dispatchError:D,dispatchFormUpdate:L,dispatchGenericErrors:P,errorState:M,form:Z,genericErrors:k,isFormComplete:U,isSubmitting:F,onSubmit:B,requiredFields:H,shouldRenderUsername:V}=jt({onSubmit:()=>E(!0),onSubmitError:()=>E(!1),signupFormData:Object.assign({redir:c,couponCode:s,signupOrigin:h,marketingOptInEnabled:l,signupMetadata:d},p)}),G=()=>{R(),b(!0),T||null==t.onClose||t.onClose()};if(!a)return null;var W=!T&&!g,z=(0,N.jsx)(ht,{shouldRenderFacebookLoginButton:!v,socialLoginParams:x}),q=(0,N.jsx)(rt,{dispatchError:D,dispatchFormUpdate:L,dispatchGenericErrors:P,errorState:M,form:Z,forOauth:T,genericErrors:k,isFormComplete:U,isSubmitting:F,marketingOptInEnabled:l,onComplete:()=>b(!1),onOpenLogin:O,onSubmit:B,onValidatableFieldChange:()=>b(!0),requiredFields:H,shouldRenderUsername:V,withSubmitButton:W||!f}),K=(0,N.jsxs)(N.Fragment,{children:[T?null:z,q]});return W?(0,N.jsx)(i.Z,{currentTab:i.u.Signup,includeCloseButton:o,isOpen:a,onClose:G,onOpenLoginFromSignup:O,onOpenSignupFromLogin:t.onOpenSignup,redir:c,shouldCloseOnOverlayClick:!A,children:K}):f?(0,N.jsx)(Tt,{body:K,handleFormSubmit:()=>B(),handleOpenLogin:O,includeCloseButton:o,isContinuingOauth:T,isOpen:a,onClose:G,shouldCloseOnOverlayClick:!A,submitDisabled:C,submitLoading:y,title:r}):(0,N.jsx)("div",{className:"SignupPromptModalNew",children:(0,N.jsx)(it.Z,{headerContent:r,headerContentSize:r?4:3,headerContentVariant:r?"thin":null,includeCloseButton:w,isOpen:a,onClose:G,preventCloseOnOverlayClick:A,children:K})})}},"./app/j/components/ToggleList.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>m});var r=s("./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js"),i=(s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/classnames/index.js")),n=s.n(i),o=s("./app/j/components/UIHeading.tsx"),a=s("./app/j/components/UIIcon.tsx"),l=s("./app/j/components/UISwitch.tsx"),d=s("./node_modules/react/index.js"),u=s("./node_modules/react/jsx-runtime.js");class c extends d.Component{render(){var e=this.props.isChecked?"minus":"plus",t=n()("ToggleInclusionCard",{"is-disabled":this.props.isDisabled});return(0,u.jsxs)("div",{className:t,children:[(0,u.jsxs)("div",{className:"ToggleInclusionCard-heading",children:[(0,u.jsx)(o.Z,{deprecatedStyle:!0,size:4,children:this.props.heading}),this.props.additionalContent?(0,u.jsx)("div",{className:"ToggleInclusionCard-additionalContent",children:this.props.additionalContent}):null]}),(0,u.jsx)("div",{className:"ToggleInclusionCard-toggle",children:(0,u.jsx)(l.Z,{checked:this.props.isChecked,disabled:this.props.isDisabled,onChange:this.props.onChange,children:(0,u.jsx)(a.Z,{icon:e})})})]})}}c.defaultProps={isChecked:!1,isDisabled:!1};var p=s("./node_modules/lodash/debounce.js"),h=s.n(p),g=["item"];class m extends d.Component{renderItems(){return this.props.listItems.map(((e,t)=>{var{item:s}=e,i=(0,r.Z)(e,g);return(0,d.createElement)(c,Object.assign({},i,{key:t,onChange:h()(this.props.handleToggleItem.bind(this,s),200)}))}))}render(){return(0,u.jsx)("div",{className:"ToggleList",children:this.isEmpty()?this.props.emptyComponent:this.renderItems()})}isEmpty(){return 0===this.props.listItems.length}}},"./app/j/components/UIFileChooser.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js");var r=s("./app/j/i18n/$t.ts"),i=s("./node_modules/react/index.js"),n=s("./app/j/utils/UserAgentHelper.ts"),o=s("./node_modules/react/jsx-runtime.js"),a=1;class l extends i.Component{constructor(){super(...arguments),this.handleFileInputChange=e=>{var t,s=e.target.form,r=null==s||null==(t=s[this.name])?void 0:t.files;s&&r&&r.length&&this.props.onChooseFiles(r,s)},this.handleChildrenClick=e=>{e.preventDefault(),e.stopPropagation(),this.handleOpenFileDialog()},this.handleFileInputRef=e=>{this.input=e},this.handleFileInputClick=e=>{e.stopPropagation()},this.handleOpenFileDialog=()=>{this.input.click()},this.name="UIFileChooser"+a++}render(){return(0,o.jsxs)("div",{className:"UIFileChooser",children:[(0,o.jsx)("form",{className:"UIFileChooser-form",children:(0,o.jsx)("input",{accept:this.props.mimeTypes.join(",")||"*/*","aria-label":(0,r.Z)("global.file_chooser_aria_label"),capture:(0,n.au)()?void 0:"environment",className:"UIFileChooser-input js-keymaster-allow",multiple:this.props.multiple,name:this.name,onChange:this.handleFileInputChange,onClick:this.handleFileInputClick,ref:this.handleFileInputRef,type:"file"})}),(0,o.jsx)("div",{className:"UIFileChooser-contents",onClick:"function"==typeof this.props.children?void 0:this.handleChildrenClick,children:"function"==typeof this.props.children?this.props.children(this.handleOpenFileDialog):this.props.children})]})}}l.defaultProps={mimeTypes:[],multiple:!1}},"./app/j/components/UIFloatedCard.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s("./node_modules/classnames/index.js"),i=s.n(r),n=s("./node_modules/react/index.js"),o=s("./node_modules/react/jsx-runtime.js");class a extends n.PureComponent{render(){var e=i()("UIFloatedCard","UIFloatedCard--"+this.props.background);return(0,o.jsx)("div",{className:e,children:this.props.children})}}a.defaultProps={background:"white"}},"./app/j/components/UIKbd.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var r=s("./node_modules/classnames/index.js"),i=s.n(r),n=s("./node_modules/react/index.js"),o=s("./node_modules/react/jsx-runtime.js"),a="UIKeyboardInput--large";class l extends n.PureComponent{render(){var e=this.props.type?i()("UIKeyboardInput",a):"UIKeyboardInput";return(0,o.jsx)("kbd",{className:e,children:this.props.children})}}},"./app/j/components/UIList.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var r=s("./node_modules/classnames/index.js"),i=s.n(r),n=s("./node_modules/react/index.js");class o extends n.PureComponent{render(){var{children:e,ordered:t,unstyled:s}=this.props,r=i()("UIList",{"UIList--ordered":t,"UIList--unstyled":s});return n.createElement(t?"ol":"ul",{className:r},e)}}o.defaultProps={ordered:!1,unstyled:!1}},"./app/j/components/UIListItem.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var r=s("./node_modules/react/index.js"),i=s("./node_modules/react/jsx-runtime.js");class n extends r.PureComponent{render(){return(0,i.jsx)("li",{className:"UIListItem",children:this.props.children})}}},"./app/j/components/UILoadingButton.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var r=s("./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js"),i=(s("./node_modules/core-js/modules/es.object.assign.js"),s("./app/j/components/UIButton.tsx")),n=s("./app/j/components/UILoadingIndicator.tsx"),o=s("./node_modules/react/index.js"),a=s("./node_modules/react/jsx-runtime.js"),l=["children","loading","disabled"];class d extends o.Component{render(){var e=this.props,{children:t,loading:s,disabled:o}=e,d=(0,r.Z)(e,l);return(0,a.jsx)(i.Z,Object.assign({disabled:o||s},d,{children:(0,a.jsxs)("div",{className:"UILoadingButton",children:[s&&(0,a.jsx)(n.Z,{}),t]})}))}}d.defaultProps={disabled:!1,loading:!1}},"./app/j/components/UIMenuItem.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>u});var r=s("./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js"),i=(s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/classnames/index.js")),n=s.n(i),o=s("./app/j/components/UILink.tsx"),a=s("./node_modules/react/index.js"),l=s("./node_modules/react/jsx-runtime.js"),d=["children","variant"];class u extends a.PureComponent{render(){var e=this.props,{children:t,variant:s}=e,i=(0,r.Z)(e,d),a=n()("UIMenuItem",{["UIMenuItem--"+s]:s});return(0,l.jsx)("span",{className:a,children:(0,l.jsx)(o.Z,Object.assign({},i,{children:(0,l.jsx)("span",{className:"UIMenuItem-inner",children:t})}))})}}},"./app/j/components/UIRadioGroup.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var r=s("./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js"),i=(s("./node_modules/core-js/modules/es.object.assign.js"),s("./app/j/components/UIDiv.tsx")),n=s("./node_modules/react/index.js"),o=s("./node_modules/react-radio-group/lib/index.js"),a=s("./node_modules/react/jsx-runtime.js"),l=["children","value"];class d extends n.PureComponent{render(){var e=this.props,{children:t,value:s}=e,d=(0,r.Z)(e,l);return(0,a.jsx)(o.Ee,Object.assign({},d,{className:"UIRadioGroup",Component:i.Z,selectedValue:s,children:n.Children.map(t,(e=>n.isValidElement(e)?n.cloneElement(e,{Component:o.Y8}):null))}))}}},"./app/j/components/UISocialButton.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var r=s("./node_modules/classnames/index.js"),i=s.n(r),n=s("./app/j/components/UIButton.tsx"),o=s("./node_modules/react/index.js"),a=s("./node_modules/react/jsx-runtime.js");class l extends o.PureComponent{render(){var{icon:e,label:t,linkTo:s,onClick:r,source:l}=this.props,d=o.cloneElement(e,{className:i()("UISocialButton-icon",e.props.className)});return(0,a.jsx)("div",{className:i()("UISocialButton",{"UISocialButton--default":"default"===this.props.variant,"UISocialButton--small":"small"===this.props.variant}),children:(0,a.jsxs)(n.Z,{hero:"default"===this.props.variant,linkTo:s,onClick:r,source:l,variant:"social",width:"fill",children:[d,(0,a.jsx)("div",{className:"UISocialButton-labelWrapper",children:t})]})})}}l.defaultProps={variant:"default"}},"./app/j/components/UISpecialCharacterButtonGroup.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>m});s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.array.sort.js");var r=s("./node_modules/classnames/index.js"),i=s.n(r),n=s("./app/j/components/UIIcon.tsx"),o=s("./node_modules/react/index.js"),a=s("./node_modules/react/jsx-runtime.js");class l extends o.PureComponent{constructor(){super(...arguments),this.handleClick=e=>{this.props.onClick(this.props.character,e)}}render(){return(0,a.jsx)("button",{className:"UISpecialCharacterButton UISpecialCharacterButton--"+this.props.variant+" TermText lang-"+this.props.lang,disabled:this.props.disabled,lang:this.props.lang,onClick:this.handleClick,type:"button",value:this.props.character,children:this.props.character})}}l.defaultProps={disabled:!1,variant:"default"};var d=s("./app/j/components/UISwitch.tsx"),u=s("./app/j/i18n/$t.ts"),c=s("./app/j/i18n/localeCompare.ts"),p=s("./node_modules/immer/dist/immer.cjs.production.min.js"),h=s("./app/j/utils/shallow-equal.ts");function g(e,t){return(0,c.Z)(e.character,t.character)}class m extends o.Component{constructor(){super(...arguments),this.state={isUppercase:!1},this.handleToggleUppercase=()=>{this.setState({isUppercase:!this.state.isUppercase})}}shouldComponentUpdate(e,t){if(!(0,h.Z)(this.props,e,["charactersByLang"]))return!0;if(!(0,h.Z)(this.state,t))return!0;if(Object.keys(this.props.charactersByLang).length!==Object.keys(e.charactersByLang).length)return!0;var s=!1;return Object.keys(this.props.charactersByLang).forEach((t=>{if(!s){var r=this.props.charactersByLang[t],i=e.charactersByLang[t];if(i){r.length!==i.length&&(s=!0);var n=(0,p.default)((e=>e.sort()));r=n(r),i=n(i),r.forEach(((e,t)=>{s||e!==i[t]&&(s=!0)}))}else s=!0}})),s}getCharactersByLangToRender(){var e=[],t=[];return Object.keys(this.props.charactersByLang).forEach((s=>{this.props.charactersByLang[s].forEach((r=>{var i=this.state.isUppercase?r.toUpperCase():r;-1!==e.indexOf(i)||(e.push(i),t.push({character:i,lang:s}))}))})),t.sort(g)}renderAccents(){return this.getCharactersByLangToRender().map(((e,t)=>{var{character:s,lang:r}=e;return(0,a.jsx)("span",{className:"UISpecialCharacterButtonGroup-button",children:(0,a.jsx)(l,{character:s,lang:r,variant:this.props.variant,onClick:this.props.onClickButton})},t)}))}renderUppercaseToggle(){return this.props.showUppercaseButtonInline?this.renderInlineUppercaseSwitch():this.renderUppercaseIcon()}renderInlineUppercaseSwitch(){return(0,a.jsx)("div",{className:"UISpecialCharacterButtonGroup-uppercaseSwitch",children:(0,a.jsx)(d.Z,{"aria-label":(0,u.Z)("global.caps_lock"),checked:this.state.isUppercase,onChange:this.handleToggleUppercase,children:(0,a.jsx)(n.Z,{alt:(0,u.Z)("global.caps_lock"),className:"UISpecialCharacterButton-uppercaseIcon",icon:"chevron-up-underline"})})})}renderUppercaseIcon(){var e=i()("UISpecialCharacterButtonGroup-button","UISpecialCharacterButtonGroup-uppercaseButton","UISpecialCharacterButtonGroup-uppercaseButton--"+this.props.variant,{"is-enabled":this.state.isUppercase});return(0,a.jsx)("span",{className:e,onClick:this.handleToggleUppercase,children:(0,a.jsx)(n.Z,{className:"UISpecialCharacterButton-uppercaseIcon",icon:"chevron-up-underline"})})}render(){return(0,a.jsxs)("div",{className:"UISpecialCharacterButtonGroup",children:[this.renderAccents(),this.props.allowToggleUppercase&&this.hasDifferentUppercaseCharacters()?this.renderUppercaseToggle():null]})}hasDifferentUppercaseCharacters(){var e=!1;return Object.keys(this.props.charactersByLang).forEach((t=>{e||this.props.charactersByLang[t].forEach((t=>{e||t!==t.toUpperCase()&&(e=!0)}))})),e}}m.defaultProps={allowToggleUppercase:!1,showUppercaseButtonInline:!1,variant:"default"}},"./app/j/components/UnconfirmedPermissionErrorModal.tsx":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js");var r=s("./app/j/assembly/buttons/index.ts"),i=s("./app/j/components/T.tsx"),n=s("./app/j/components/UIButton.tsx"),o=s("./app/j/components/UIDiv.tsx"),a=s("./app/j/components/UILoadingButton.tsx"),l=s("./app/j/components/UIModal.tsx"),d=s("./app/j/core/superagent-with-csrf.ts"),u=s("./app/j/i18n/$t.ts"),c=s("./node_modules/react/index.js"),p=s("./node_modules/react/jsx-runtime.js");class h extends c.Component{constructor(){super(...arguments),this.state={isResendingConfirmation:!1,wasEmailResent:!1},this.getHeaderContent=()=>this.state.wasEmailResent?this.props.isUnderageUser?(0,p.jsx)(i.Z,{id:"classes.page_header_new.permission_error_modal.email_confirmation_sent_header"}):(0,p.jsx)(i.Z,{id:"classes.page_header_new.permission_error_modal.check_inbox_header"}):this.props.headerContent,this.getSubheaderContent=()=>this.state.wasEmailResent?this.props.isUnderageUser?(0,p.jsx)(i.Z,{id:"classes.page_header_new.permission_error_modal.email_confirmation_sent_underage_subheader"}):(0,p.jsx)(i.Z,{id:"classes.page_header_new.permission_error_modal.email_confirmation_sent_subheader"}):this.props.subheaderContent,this.onEmailResendSuccess=()=>this.setState({wasEmailResent:!0}),this.handleSendEmailConfirmation=()=>{this.setState({isResendingConfirmation:!0}),d.Z.post("/settings/resend-confirmation").credentials().end(this.onEmailResendSuccess)}}renderEmailCtas(){var e=this.state.isResendingConfirmation,t=this.props.googleClassroomModalHandler;return(0,p.jsxs)(o.Z,{className:"UnconfirmedPermissionErrorModal-Ctas",children:[(0,p.jsx)(a.Z,{"aria-label":(0,u.Z)("classes.page_header_new.permission_error_modal.resend_email_confirmation_cta"),disabled:e,loading:e,onClick:this.handleSendEmailConfirmation,width:"fill",children:(0,p.jsx)(i.Z,{id:"classes.page_header_new.permission_error_modal.resend_email_confirmation_cta"})}),this.props.googleClassroomModalHandler?(0,p.jsx)("div",{children:(0,p.jsx)(r.B0,{isFullWidth:!0,onClick:t,text:(0,u.Z)("classes.page_header_new.permission_error_modal.connect_google_classroom_cta")})}):null,this.props.googleClassroomModalHandler||this.props.isUnderageUser?null:(0,p.jsx)("div",{children:(0,p.jsx)(n.Z,{"aria-label":(0,u.Z)("classes.page_header_new.permission_error_modal.update_email_address_cta"),onClick:()=>{window.location.assign("/settings#email-change-setting")},variant:"basic",width:"fill",children:(0,p.jsx)(i.Z,{id:"classes.page_header_new.permission_error_modal.update_email_address_cta"})})})]})}renderEmailResendSuccess(){return(0,p.jsx)(o.Z,{className:"UnconfirmedPermissionErrorModal-emailSentImage"})}render(){return(0,p.jsxs)(l.Z,{headerContent:this.getHeaderContent(),includeCloseButton:!0,isOpen:this.props.isOpen,onClose:this.props.onClose,children:[(0,p.jsx)(o.Z,{children:this.getSubheaderContent()}),this.state.wasEmailResent?this.renderEmailResendSuccess():this.renderEmailCtas()]})}}},"./app/j/components/VimeoEmbed.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var r=s("./app/j/components/Rectangle.tsx"),i=s("./node_modules/react/index.js"),n=s("./node_modules/react/jsx-runtime.js");class o extends i.PureComponent{render(){var{autoplay:e,height:t,videoId:s,width:i}=this.props;return(0,n.jsx)(r.Z,{aspectRatio:this.props.aspectRatio,children:(0,n.jsx)("iframe",{allowFullScreen:!0,frameBorder:"0",height:t,scrolling:"no",src:"https://player.vimeo.com/video/"+s+"?autoplay="+String(e)+"&muted="+String(e),title:o.titleGenerator.next().value,width:i})})}}o.titleGenerator=function*(){for(var e=0;;e+=1)yield"vimeo-"+e}(),o.defaultProps={aspectRatio:[16,9],autoplay:!1,height:"100%",width:"100%"}},"./app/j/config/constants.ts":(e,t,s)=>{"use strict";s.d(t,{I3:()=>r,HW:()=>i,cD:()=>n,nw:()=>o,oA:()=>a}),t.ZP={EMAIL_MAX_LENGTH:127,fallbackTimeZone:"America/Los_Angeles",IMPRESSED_PERCENTAGE_THRESHOLD:10,MAX_TERMS_FOR_PRINT:500,NETWORK_CODE:"6396803",ONE_TRUST_KEY:"c477f242-a93f-4a62-9585-05c0f39fc61d",ONE_TRUST_TEST_KEY:"cdb8b302-c332-452d-aa57-157909d81d26-test",TEACHER_MAX_AGE:80,TEACHER_MIN_AGE:20,SEARCH_QUERY_MAX_CHARS:100};var r=500,i="6396803",n=80,o=20,a=100},"./app/j/config/countries.ts":(e,t,s)=>{"use strict";s.d(t,{rS:()=>r});var r={af:"Afghanistan",al:"Albania",dz:"Algeria",as:"American Samoa",ad:"Andorra",ao:"Angola",ai:"Anguilla",aq:"Antarctica",ag:"Antigua and Barbuda",ar:"Argentina",am:"Armenia",aw:"Aruba",au:"Australia",at:"Austria",az:"Azerbaijan",bs:"Bahamas",bh:"Bahrain",bd:"Bangladesh",bb:"Barbados",by:"Belarus",be:"Belgium",bz:"Belize",bj:"Benin",bm:"Bermuda",bt:"Bhutan",bo:"Bolivia",bq:"Bonaire, Sint Eustatius and Saba",ba:"Bosnia and Herzegovina",bw:"Botswana",bv:"Bouvet Island",br:"Brazil",io:"British Indian Ocean Territory",bn:"Brunei Darussalam",bg:"Bulgaria",bf:"Burkina Faso",bi:"Burundi",kh:"Cambodia",cm:"Cameroon",ca:"Canada",cv:"Cape Verde",ky:"Cayman Islands",cf:"Central African Republic",td:"Chad",cl:"Chile",cn:"China",cx:"Christmas Island",cc:"Cocos (Keeling) Islands",co:"Colombia",km:"Comoros",cg:"Congo",cd:"Congo (Democratic Republic of the)",ck:"Cook Islands",cr:"Costa Rica",hr:"Croatia",cu:"Cuba",cw:"Curaçao",cy:"Cyprus",cz:"Czech Republic",ci:"Côte d'Ivoire",dk:"Denmark",dj:"Djibouti",dm:"Dominica",do:"Dominican Republic",ec:"Ecuador",eg:"Egypt",sv:"El Salvador",gq:"Equatorial Guinea",er:"Eritrea",ee:"Estonia",et:"Ethiopia",fk:"Falkland Islands (Malvinas)",fo:"Faroe Islands",fj:"Fiji",fi:"Finland",fr:"France",gf:"French Guiana",pf:"French Polynesia",tf:"French Southern Territories",ga:"Gabon",gm:"Gambia",ge:"Georgia",de:"Germany",gh:"Ghana",gi:"Gibraltar",gr:"Greece",gl:"Greenland",gd:"Grenada",gp:"Guadeloupe",gu:"Guam",gt:"Guatemala",gg:"Guernsey",gn:"Guinea",gw:"Guinea-Bissau",gy:"Guyana",ht:"Haiti",hm:"Heard Island and McDonald Islands",va:"Holy See",hn:"Honduras",hk:"Hong Kong",hu:"Hungary",is:"Iceland",in:"India",id:"Indonesia",ir:"Iran",iq:"Iraq",ie:"Ireland",im:"Isle of Man",il:"Israel",it:"Italy",jm:"Jamaica",jp:"Japan",je:"Jersey",jo:"Jordan",kz:"Kazakhstan",ke:"Kenya",ki:"Kiribati",kp:"Korea (Democratic People's Republic of)",kr:"Korea (Republic of)",xk:"Kosovo",kw:"Kuwait",kg:"Kyrgyzstan",la:"Lao People's Democratic Republic",lv:"Latvia",lb:"Lebanon",ls:"Lesotho",lr:"Liberia",ly:"Libya",li:"Liechtenstein",lt:"Lithuania",lu:"Luxembourg",mo:"Macao",mk:"Macedonia",mg:"Madagascar",mw:"Malawi",my:"Malaysia",mv:"Maldives",ml:"Mali",mt:"Malta",mh:"Marshall Islands",mq:"Martinique",mr:"Mauritania",mu:"Mauritius",yt:"Mayotte",mx:"Mexico",fm:"Micronesia",md:"Moldova",mc:"Monaco",mn:"Mongolia",me:"Montenegro",ms:"Montserrat",ma:"Morocco",mz:"Mozambique",mm:"Myanmar",na:"Namibia",nr:"Nauru",np:"Nepal",nl:"Netherlands",an:"Netherlands Antilles",nc:"New Caledonia",nz:"New Zealand",ni:"Nicaragua",ne:"Niger",ng:"Nigeria",nu:"Niue",nf:"Norfolk Island",mp:"Northern Mariana Islands",no:"Norway",om:"Oman",pk:"Pakistan",pw:"Palau",ps:"Palestine",pa:"Panama",pg:"Papua New Guinea",py:"Paraguay",pe:"Peru",ph:"Philippines",pn:"Pitcairn",pl:"Poland",pt:"Portugal",pr:"Puerto Rico",qa:"Qatar",ro:"Romania",ru:"Russia",rw:"Rwanda",re:"Réunion",bl:"Saint Barthélemy",sh:"Saint Helena",kn:"Saint Kitts and Nevis",lc:"Saint Lucia",mf:"Saint-Martin (FR)",pm:"Saint Pierre and Miquelon",vc:"Saint Vincent and the Grenadines",ws:"Samoa",sm:"San Marino",st:"Sao Tome and Principe",sa:"Saudi Arabia",sn:"Senegal",rs:"Serbia",cs:"Serbia and Montenegro",sc:"Seychelles",sl:"Sierra Leone",sg:"Singapore",sx:"Sint Maarten (NL)",sk:"Slovakia",si:"Slovenia",sb:"Solomon Islands",so:"Somalia",za:"South Africa",gs:"South Georgia and the South Sandwich Islands",ss:"South Sudan",es:"Spain",lk:"Sri Lanka",sd:"Sudan",sr:"Suriname",sj:"Svalbard and Jan Mayen",sz:"Swaziland",se:"Sweden",ch:"Switzerland",sy:"Syrian Arab Republic",tw:"Taiwan",tj:"Tajikistan",tz:"Tanzania",th:"Thailand",tl:"Timor-Leste",tg:"Togo",tk:"Tokelau",to:"Tonga",tt:"Trinidad and Tobago",tn:"Tunisia",tr:"Turkey",tm:"Turkmenistan",tc:"Turks and Caicos Islands",tv:"Tuvalu",ug:"Uganda",ua:"Ukraine",ae:"United Arab Emirates",gb:"United Kingdom",us:"United States",um:"United States Minor Outlying Islands",uy:"Uruguay",uz:"Uzbekistan",vu:"Vanuatu",ve:"Venezuela",vn:"Viet Nam",vg:"Virgin Islands (British)",vi:"Virgin Islands (U.S.)",wf:"Wallis and Futuna",eh:"Western Sahara",ye:"Yemen",zm:"Zambia",zw:"Zimbabwe",ax:"Åland Islands"}},"./app/j/config/i18n.ts":(e,t,s)=>{"use strict";s.d(t,{e:()=>r,RP:()=>i});var r={de:{defaultCountryCodeSubfolder:"de",englishName:"German",localeStringConversions:{desk:"de",paypal:"de_DE",setLanguages:"de",smartling:"de-DE",prismic:"de-de"},localizedImagesStrictMode:!0,localizedName:"Deutsch",visibleToGroups:["all"],alwaysDisplayLongFormatDates:!1,displayTimesIn24HourFormat:!0,noSpaceBetweenCharacters:!1,hasDedicatedHomepage:!0},"en-gb":{additionalCountries:["au","ie","nz","vg","za","in","pk","mt"],defaultCountryCodeSubfolder:"gb",defaultLocaleForLanguage:!0,englishName:"English (UK)",localeStringConversions:{desk:"en",paypal:"en_GB",setLanguages:"en",smartling:"en-GB",prismic:"en-gb"},localizedImagesStrictMode:!0,localizedName:"English (UK)",visibleToGroups:["all"],alwaysDisplayLongFormatDates:!1,displayTimesIn24HourFormat:!1,noSpaceBetweenCharacters:!1,hasDedicatedHomepage:!0},"en-us":{additionalCountries:["ca","pr","vi","gu","ws","um"],defaultCountryCodeSubfolder:"",defaultLocaleForLanguage:!1,englishName:"English (USA)",localeStringConversions:{desk:"en",paypal:"en_US",setLanguages:"en",smartling:"en-US",prismic:"en-us"},localizedImagesStrictMode:!0,localizedName:"English (USA)",visibleToGroups:["all"],alwaysDisplayLongFormatDates:!1,displayTimesIn24HourFormat:!1,noSpaceBetweenCharacters:!1},es:{defaultCountryCodeSubfolder:"es",englishName:"Spanish",localeStringConversions:{desk:"es",paypal:"es_XC",setLanguages:"es",smartling:"es",prismic:"es-es"},localizedImagesStrictMode:!0,localizedName:"Español",visibleToGroups:["all"],alwaysDisplayLongFormatDates:!1,displayTimesIn24HourFormat:!0,noSpaceBetweenCharacters:!1,hasDedicatedHomepage:!0},"fr-fr":{additionalCountries:["ch","be","lu","mc","ma"],defaultCountryCodeSubfolder:"fr",defaultLocaleForLanguage:!0,englishName:"French (France)",localeStringConversions:{desk:"fr_fr",paypal:"fr_FR",setLanguages:"fr",smartling:"fr-FR",prismic:"fr-fr"},localizedImagesStrictMode:!0,localizedName:"Français (FR)",visibleToGroups:["all"],alwaysDisplayLongFormatDates:!1,displayTimesIn24HourFormat:!0,noSpaceBetweenCharacters:!1,hasDedicatedHomepage:!0},"fr-ca":{defaultCountryCodeSubfolder:"ca",defaultLocaleForLanguage:!1,englishName:"French (Canada)",localeStringConversions:{desk:"fr_ca",paypal:"fr_CA",setLanguages:"fr",smartling:"fr-CA",prismic:"fr-ca"},localizedImagesStrictMode:!0,localizedName:"Français (QC/CA)",visibleToGroups:["all"],alwaysDisplayLongFormatDates:!1,displayTimesIn24HourFormat:!0,noSpaceBetweenCharacters:!1,hasDedicatedHomepage:!0},id:{defaultCountryCodeSubfolder:"id",englishName:"Indonesian",localeStringConversions:{desk:"id",paypal:"id_ID",setLanguages:"id",smartling:"id-ID",prismic:"id"},localizedImagesStrictMode:!1,localizedName:"Bahasa Indonesia",additionalLanguages:["in"],visibleToGroups:["all"],alwaysDisplayLongFormatDates:!1,displayTimesIn24HourFormat:!0,noSpaceBetweenCharacters:!1,hasDedicatedHomepage:!0},it:{defaultCountryCodeSubfolder:"it",englishName:"Italian",localeStringConversions:{desk:"it",paypal:"it_IT",setLanguages:"it",smartling:"it-IT",prismic:"it-it"},localizedImagesStrictMode:!1,localizedName:"Italiano",visibleToGroups:["all"],alwaysDisplayLongFormatDates:!1,displayTimesIn24HourFormat:!0,noSpaceBetweenCharacters:!1,hasDedicatedHomepage:!0},nl:{defaultCountryCodeSubfolder:"nl",englishName:"Dutch",localeStringConversions:{desk:"nl",paypal:"nl_NL",setLanguages:"nl",smartling:"nl-NL",prismic:"nl-nl"},localizedImagesStrictMode:!0,localizedName:"Nederlands",visibleToGroups:["all"],minimumMobileVersions:{android:"2.20",iOS:"2.14"},alwaysDisplayLongFormatDates:!1,displayTimesIn24HourFormat:!0,noSpaceBetweenCharacters:!1,hasDedicatedHomepage:!0},pl:{defaultCountryCodeSubfolder:"pl",englishName:"Polish",localeStringConversions:{desk:"pl",paypal:"pl_PL",setLanguages:"pl",smartling:"pl-PL",prismic:"pl"},localizedImagesStrictMode:!0,localizedName:"polski",visibleToGroups:["all"],alwaysDisplayLongFormatDates:!0,displayTimesIn24HourFormat:!0,noSpaceBetweenCharacters:!0,hasDedicatedHomepage:!0},"pt-br":{defaultCountryCodeSubfolder:"br",defaultLocaleForLanguage:!0,englishName:"Portuguese (Brazil)",localeStringConversions:{desk:"pt_br",paypal:"pt_BR",setLanguages:"pt",smartling:"pt-BR",prismic:"pt-br"},localizedImagesStrictMode:!0,localizedName:"Português (BR)",visibleToGroups:["all"],alwaysDisplayLongFormatDates:!1,displayTimesIn24HourFormat:!0,noSpaceBetweenCharacters:!1,hasDedicatedHomepage:!0},ru:{defaultCountryCodeSubfolder:"ru",englishName:"Russian",localeStringConversions:{desk:"ru",paypal:"ru_RU",setLanguages:"ru",smartling:"ru-RU",prismic:"ru"},localizedImagesStrictMode:!0,localizedName:"Русский",visibleToGroups:["all"],alwaysDisplayLongFormatDates:!1,displayTimesIn24HourFormat:!0,noSpaceBetweenCharacters:!1,hasDedicatedHomepage:!0},tr:{defaultCountryCodeSubfolder:"tr",englishName:"Turkish",localeStringConversions:{desk:"tr",paypal:"en_US",setLanguages:"tr",smartling:"tr-TR",prismic:"tr"},localizedImagesStrictMode:!0,localizedName:"Türkçe",visibleToGroups:["all"],minimumMobileVersions:{android:"2.20",iOS:"2.14"},alwaysDisplayLongFormatDates:!1,displayTimesIn24HourFormat:!0,noSpaceBetweenCharacters:!1,hasDedicatedHomepage:!0},uk:{defaultCountryCodeSubfolder:"uk",englishName:"Ukrainian",localeStringConversions:{desk:"uk",paypal:"en_US",setLanguages:"uk",smartling:"uk-UA",prismic:"uk-ua"},localizedImagesStrictMode:!1,localizedName:"Українська",visibleToGroups:["admin","translator"],minimumMobileVersions:{android:"2.99",iOS:"2.99"},alwaysDisplayLongFormatDates:!1,displayTimesIn24HourFormat:!0,noSpaceBetweenCharacters:!1,hasDedicatedHomepage:!0},vi:{defaultCountryCodeSubfolder:"vn",englishName:"Vietnamese",localeStringConversions:{desk:"sv_fi",paypal:"en_US",setLanguages:"vi",smartling:"vi-VN",prismic:"vi"},localizedImagesStrictMode:!0,localizedName:"Tiếng Việt",visibleToGroups:["all"],minimumMobileVersions:{android:"2.20",iOS:"2.14"},alwaysDisplayLongFormatDates:!1,displayTimesIn24HourFormat:!0,noSpaceBetweenCharacters:!1,hasDedicatedHomepage:!0},ko:{defaultCountryCodeSubfolder:"kr",englishName:"Korean",localeStringConversions:{desk:"ko",paypal:"ko_KR",setLanguages:"ko",smartling:"ko-KR",prismic:"ko-kr"},localizedImagesStrictMode:!0,localizedName:"한국어",visibleToGroups:["all"],alwaysDisplayLongFormatDates:!0,displayTimesIn24HourFormat:!0,noSpaceBetweenCharacters:!0,hasDedicatedHomepage:!0},"zh-cn":{additionalCountries:["sg","my"],defaultCountryCodeSubfolder:"cn",defaultLocaleForLanguage:!0,englishName:"Chinese (Simplified)",localeStringConversions:{desk:"zh_cn",paypal:"zh_CN",setLanguages:"zh-CN",smartling:"zh-CN",prismic:"zh-cn"},localizedImagesStrictMode:!0,localizedName:"中文 (简体)",visibleToGroups:["all"],alwaysDisplayLongFormatDates:!0,displayTimesIn24HourFormat:!1,noSpaceBetweenCharacters:!0,hasDedicatedHomepage:!0},"zh-tw":{additionalCountries:["hk","mo"],defaultCountryCodeSubfolder:"tw",defaultLocaleForLanguage:!1,englishName:"Chinese (Traditional)",localeStringConversions:{desk:"zh_tw",paypal:"zh_TW",setLanguages:"zh-TW",smartling:"zh-TW",prismic:"zh-tw"},localizedImagesStrictMode:!0,localizedName:"中文 (繁體)",visibleToGroups:["all"],alwaysDisplayLongFormatDates:!0,displayTimesIn24HourFormat:!1,noSpaceBetweenCharacters:!0,hasDedicatedHomepage:!0},ja:{defaultCountryCodeSubfolder:"jp",englishName:"Japanese",localeStringConversions:{desk:"ja",paypal:"ja_JP",setLanguages:"ja",smartling:"ja-JP",prismic:"ja-jp"},localizedImagesStrictMode:!0,localizedName:"日本語",visibleToGroups:["all"],alwaysDisplayLongFormatDates:!0,displayTimesIn24HourFormat:!0,noSpaceBetweenCharacters:!0,hasDedicatedHomepage:!0}},i={at:14,bg:16,cy:16,cz:15,de:16,ee:16,fr:16,gr:15,hr:16,hu:16,is:16,it:14,li:16,lt:16,lu:16,mt:16,nl:16,no:16,pt:13,ro:16,si:16,sk:16}},"./app/j/config/us-states.ts":(e,t,s)=>{"use strict";s.d(t,{Y:()=>r});var r={AL:"Alabama",AK:"Alaska",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",DC:"District Of Columbia",FL:"Florida",GA:"Georgia",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"}},"./app/j/constants/MimeTypeConstants.ts":(e,t,s)=>{"use strict";s.d(t,{b2:()=>r,HT:()=>i,k4:()=>n,lD:()=>o});var r=["text/csv"],i=["image/bmp","image/jpeg","image/png"],n=["image/bmp","image/gif","image/jpeg","image/png","image/tiff"],o=["text/plain","Text"]},"./app/j/constants/TermConstants.ts":(e,t,s)=>{"use strict";var r;s.d(t,{E:()=>r}),function(e){e.WORD_SIDE="word",e.DEFINITION_SIDE="definition"}(r||(r={}))},"./app/j/containers/CreateSetLanguageEditorContainer.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>I});var r=s("./app/j/core/legacy_store/LegacyStoreProvider.tsx"),i=s("./app/j/components/LegacyTermText.tsx"),n=(s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/classnames/index.js")),o=s.n(n),a=s("./app/j/components/UIBreakpoint.tsx"),l=s("./app/j/components/UILink.tsx"),d=s("./app/j/components/UIOverlayTrigger.tsx"),u=s("./app/j/components/UIPopover.tsx"),c=s("./app/j/config/languages.ts"),p=s("./app/j/create_set/actions/SetWithTermActionCreators.ts"),h=s("./app/j/create_set/components/LanguageSelect.tsx"),g=s("./app/j/i18n/$t.ts"),m=s("./app/j/i18n/getLocalizedLanguage.ts"),_=s("./node_modules/invariant/browser.js"),f=s.n(_),v=s("./node_modules/react/index.js"),S=s("./app/j/utils/UserAgentHelper.ts"),C=s("./node_modules/react/jsx-runtime.js");function b(e){e.stopPropagation()}class y extends v.PureComponent{constructor(){super(...arguments),this.handleOpenLanguageSelect=()=>{f()(this.languageSelect,"Missing languageSelect in LanguageBarSide"),this.languageSelect.openSelect()},this.handleHideLangSelect=()=>{this.selectLanguageTrigger&&this.selectLanguageTrigger.close()},this.handleSelectLang=(e,t)=>{t.preventDefault(),this.props.shouldUpdateStore&&p.Z.updateLang(this.props.setLuid,this.props.side,e,this.props.otherSideLang),this.props.onSelectLang&&this.props.onSelectLang(this.props.side,e)}}renderQuickSwitch(){return this.props.recentLanguages.filter((e=>c.YN.indexOf(e)<0)).slice(0,2).map((e=>{var t=this.handleSelectLang.bind(this,e);return(0,C.jsx)("span",{className:"LanguageBarSide-quickSwitch",children:(0,C.jsx)(l.Z,{onClick:t,children:(0,m.Z)(e)})},e)}))}renderSelectLanguageLink(){var e=this.props.lang?(0,m.Z)(this.props.lang):(0,g.Z)("create_set.language_bar.choose_language");return(0,C.jsx)(d.Z,{afterOpen:this.handleOpenLanguageSelect,constrainToWindow:!1,overlay:(0,C.jsx)(u.Z,{children:this.renderLanguageSelect()}),position:"bottom right",ref:e=>{this.selectLanguageTrigger=e?e.overlay:null},triggerAction:"click",children:(0,C.jsx)(l.Z,{onClick:b,tabIndex:-1,children:e})})}renderLanguageSelect(){var e=c.YN.indexOf(this.props.lang)>=0;return(0,C.jsx)("div",{className:"LanguageBarSide-languageSelect",children:(0,C.jsx)(h.Z,{disabled:this.props.viewOnly,lang:this.props.lang,onHideLangSelect:this.handleHideLangSelect,onSelectLang:this.props.onSelectLang,otherSideLang:this.props.otherSideLang,recentLanguages:this.props.recentLanguages,ref:e=>{this.languageSelect=e},setLuid:this.props.setLuid,shouldUpdateStore:this.props.shouldUpdateStore,showInvisibleLangs:e,side:this.props.side})})}render(){var e=o()("LanguageBarSide",{"has-error":this.props.hasError});return(0,C.jsxs)("div",{className:e,children:[!this.props.lang&&0!==this.props.recentLanguages.length&&this.props.hasCreatedSets?this.renderQuickSwitch():null,(0,C.jsx)(a.Z,{below:"m",children:e=>e||(0,S.b1)()?this.renderLanguageSelect():this.renderSelectLanguageLink()})]})}}y.defaultProps={shouldUpdateStore:!0};class E extends v.PureComponent{render(){return(0,C.jsx)(y,{hasCreatedSets:!1,hasError:this.props.side===i.dR?this.props.hasWordLangError:this.props.hasDefLangError,lang:this.props.side===i.dR?this.props.wordLang:this.props.defLang,otherSideLang:this.props.side===i.dR?this.props.defLang:this.props.wordLang,recentLanguages:this.props.recentLanguages,setLuid:this.props.setLuid,shouldUpdateStore:!0,side:this.props.side,viewOnly:!1})}}var j=s("./app/j/create_set/diagrams.ts"),x=s("./node_modules/react-redux/lib/index.js"),T=(0,s("./app/j/utils/createScopedSelector.ts").Z)("createSet",{defLang:j.Ed,hasDefLangError:j._,hasWordLangError:j.En,recentLanguages:j.xx,setLuid:j.S6,wordLang:j.dj}),I=(0,x.connect)(T,null,null,{context:r.tC})(E)},"./app/j/core/index.ts":(e,t,s)=>{"use strict";s.d(t,{jZ:()=>o,iO:()=>u,f:()=>c,uX:()=>p,ZP:()=>h});s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.cjs.production.min.js"),i=s("./app/j/core/default_store/DefaultStore.ts"),n=s("./app/j/utils/Visitor.ts"),o="core",a=Object.assign({},{acknowledgedOnboardingSteps:{},hasRegisteredAds:!1,shouldShowAd:!1,user:null},{isBrowseNavOpen:!1,isSearchExpanded:!1}),l=(0,r.createSlice)({name:o,initialState:a,reducers:{hydrate(e,t){var{payload:s}=t,{acknowledgedOnboardingSteps:r,hasRegisteredAds:i,shouldShowAd:n,user:o}=s;e.acknowledgedOnboardingSteps=r,e.hasRegisteredAds=i,e.shouldShowAd=n,e.user=o},acknowledgeOnboardingStep(e,t){var{payload:s}=t;n.Z.writeData({[s]:!0}),e.acknowledgedOnboardingSteps[s]=!0},updateIsSiteBrowseNavOpen(e,t){var{payload:s}=t;e.isBrowseNavOpen=s},updateIsSearchExpanded(e,t){var{payload:s}=t;e.isSearchExpanded=s}}}),{hydrate:d,acknowledgeOnboardingStep:u,updateIsSiteBrowseNavOpen:c,updateIsSearchExpanded:p}=l.actions;l.reducer;function h(e,t){void 0===e&&(e=void 0),void 0===t&&(t=(0,i.bh)()),t.registerReducerIfUnregistered(o,l.reducer),e&&t.dispatch(l.actions.hydrate(e))}},"./app/j/core/selectors.ts":(e,t,s)=>{"use strict";s.d(t,{vo:()=>d,B0:()=>u,Hl:()=>c,Cr:()=>p,PR:()=>h,n5:()=>g,Iq:()=>m});var r=s("./app/j/config/enums.ts"),i=s("./app/j/core/index.ts"),n=s("./app/j/core/default_store/DefaultStore.ts"),o=s("./node_modules/reselect/lib/index.js"),a=(0,n.iu)(i.jZ),l=(e,t)=>t,d=(0,o.createSelector)(a,l,((e,t)=>e.acknowledgedOnboardingSteps[t.name])),u=(0,o.createSelector)(a,(e=>e.isBrowseNavOpen)),c=((0,o.createSelector)(a,(e=>e.isSearchExpanded)),(0,o.createSelector)(a,(e=>e.hasRegisteredAds))),p=(0,o.createSelector)(a,l,((e,t)=>!1!==t.shouldShowAd&&e.shouldShowAd)),h=(0,o.createSelector)(a,(e=>e.user)),g=(0,o.createSelector)(h,(e=>null==e?void 0:e.id)),m=((0,o.createSelector)(h,(e=>null==e?void 0:e._isUnderAge)),(0,o.createSelector)(h,(e=>(null==e?void 0:e.selfIdentifiedTeacherStatus)===r.IXc.TEACHER)));(0,o.createSelector)(h,(e=>null==e?void 0:e.email))},"./app/j/create_set/actions/ClassSetActionCreators.ts":(e,t,s)=>{"use strict";s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js");var r=s("./app/j/dispatchers/AppDispatcher.ts"),i=s("./app/j/create_set/constants/ClassSetConstants.ts"),n={classSetSyncer:s("./app/j/syncers/ClassSetSyncer.ts").Z,bulkDel(e){return r.Z.viewAction(i.Z.actions.BULK_DELETE,{luids:e}),this.classSetSyncer.bulkDel(e).then(n.bulkDeleteSuccess).catch(n.bulkDeleteFailure)},bulkUpdate(e){return r.Z.viewAction(i.Z.actions.BULK_UPDATE,{luidToProps:e}),this.classSetSyncer.bulkSave(e).then(n.bulkUpdateSuccess).catch(n.bulkUpdateFailure)},bulkUpdateSuccess(e){var[t]=e;r.Z.serverAction(i.Z.actions.BULK_UPDATE_SUCCESS,{models:t})},bulkUpdateFailure(e){var[t,s]=e;r.Z.serverAction(i.Z.actions.BULK_UPDATE_FAILURE,{models:s,error:t})},bulkDeleteSuccess(e){var[t]=e;r.Z.serverAction(i.Z.actions.BULK_DELETE_SUCCESS,{models:t})},bulkDeleteFailure(e){var[t,s]=e;r.Z.serverAction(i.Z.actions.BULK_DELETE_FAILURE,{error:t,models:s})}};t.Z=n},"./app/j/create_set/actions/SetActionCreators.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>S});s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.reduce.js"),s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/core-js/modules/es.symbol.description.js");var r=s("./app/j/create_set/actions/SetPermissionActionCreators.ts"),i=s("./app/j/create_set/constants/SetConstants.ts"),n=s("./app/j/create_set/stores/UserStore.ts"),o=s("./app/j/dispatchers/AppDispatcher.ts"),a=s("./app/j/models/ApiData.ts"),l=s("./app/j/global/Quizlet.ts"),d=e=>e[0]&&e[0].data&&e[0].data.suggestions&&e[0].data.suggestions.languages[0],u=e=>Object.assign({},e,{languageCode:e.language_code});class c extends a.Z{static detect(e){return c.post({strings:e,clientId:l.Z.uid}).then(d).then(u)}}c.URL_BASE="suggestions/language",c.API_VERSION="3.2";var p=s("./app/j/models/ApiDetectProfanity.ts"),h=s("./app/j/syncers/SetSyncer.ts"),g=s("./app/j/utils/property.ts"),m=s("./app/j/utils/trim.ts"),_=s("./app/j/utils/unix-timestamp.ts"),f=()=>{},v={setSyncer:h.Z,update(e,t,s,r){void 0===s&&(s=f),void 0===r&&(r=!0),r&&(v.maybeDetectProfanity(e,t),this.setSyncer.save(e,t).then((e=>{var[t,r]=e;v.updateSuccess([t,r]),s(t,r.getProperties())})).catch(v.updateFailure)),o.Z.viewAction(i.Nw.UPDATE,{luid:e,props:t})},updateLang(e,t,s){var r="word"===t?"wordLang":"defLang",i=(0,g.Z)(r,s);return v.update(e,i)},updateSuccess(e){var[t,s]=e;o.Z.serverAction(i.Nw.UPDATE_SUCCESS,{luid:t,model:s})},updateFailure(e){var[t,s,r]=e;o.Z.serverAction(i.Nw.UPDATE_FAILURE,{luid:s,model:r,error:t})},discard(e){return o.Z.viewAction(i.Nw.DISCARD,{luid:e}),this.setSyncer.del(e).then(v.discardSuccess).catch(v.discardFailure)},discardSuccess(e){var[t,s]=e;o.Z.serverAction(i.Nw.DISCARD_SUCCESS,{luid:t,model:s})},discardFailure(e){var[t,s,r]=e;o.Z.serverAction(i.Nw.DISCARD_FAILURE,{luid:s,model:r,error:t})},publish(){o.Z.viewAction(i.Nw.PUBLISH)},publishSync(e,t){void 0===t&&(t={});var s=Math.max((0,_.S0)(),1),i=this.setSyncer.getModel(e).get("publishedTimestamp")||s,n=Object.assign({},t,{publishedTimestamp:i});return this.setSyncer.save(e,n).then((e=>{var[t,s]=e;r.Z.persistClassSetsForPermissions(t).then((()=>v.publishSuccess([t,s])))})).catch(v.publishFailure)},publishSuccess(e){var[t,s]=e;o.Z.serverAction(i.Nw.PUBLISH_SUCCESS,{luid:t,model:s})},publishFailure(e){var[t,s,r]=e;o.Z.serverAction(i.Nw.PUBLISH_FAILURE,{luid:s,model:r,error:t})},focusTitle(){o.Z.viewAction(i.Nw.FOCUS_TITLE)},blurTitle(){o.Z.viewAction(i.Nw.BLUR_TITLE)},showTerms(){o.Z.viewAction(i.Nw.SHOW_TERMS)},hideTerms(){o.Z.viewAction(i.Nw.HIDE_TERMS)},detectLanguage(e,t,s){void 0===s&&(s=[]);var r=s.reduce(((e,t)=>{var s=(0,m.Z)(t);return s.length>=i.ej.MIN_LENGTH&&e.add(s),e}),new Set([])),n=Array.from(r);return 0===n.length?Promise.resolve():(o.Z.viewAction(i.Nw.DETECT_LANGUAGE,{text:n,side:t,luid:e}),c.detect(n).then((s=>{s.confidence>i.ej.CONFIDENCE_THRESHOLD&&v.updateLang(e,t,s.languageCode)})).catch((s=>o.Z.serverAction(i.Nw.DETECT_LANGUAGE_FAILURE,{luid:e,side:t,error:s}))))},showLangSelect(e,t,s,r){void 0===r&&(r=!1),o.Z.viewAction(i.Nw.SHOW_LANG_SELECT,{side:t,luid:e,row:s,triggerAutodefine:r})},hideLangSelect(){o.Z.viewAction(i.Nw.HIDE_LANG_SELECT)},maybeDetectProfanity:(e,t)=>!t.title&&!t.description||n.Z.getUser().isVerified?Promise.resolve():new Promise((()=>{var s="",r="";return void 0!==t.title?(s="title",r=t.title):void 0!==t.description&&(s="description",r=t.description),p.Z.get({text:r}).then((t=>o.Z.serverAction(i.Nw.DETECT_PROFANITY_SUCCESS,{luid:e,field:s,results:t[0]}))).catch((t=>o.Z.serverAction(i.Nw.DETECT_PROFANITY_FAILURE,{luid:e,error:t})))})),maybeCreateSet(e){return new Promise(((t,s)=>{var r=this.setSyncer.getModel(e);return r.isNewRecord()?(r.clientValidationsHaveRun=!1,this.setSyncer.save(e,{}).then((e=>{var[s,r]=e,i=r.get("id");return t(i),v.updateSuccess([s,r])})).catch((e=>{var[t,r,i]=e;return s(t),v.updateFailure([t,r,i])}))):t(r.get("id"))}))},updateStickyHeaderHeight(e){o.Z.viewAction(i.Nw.UPDATE_STICKY_HEADER_HEIGHT,{heightInPx:e})}},S=v},"./app/j/create_set/actions/SetPermissionActionCreators.ts":(e,t,s)=>{"use strict";s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js");var r=s("./app/j/dispatchers/AppDispatcher.ts"),i=s("./app/j/create_set/constants/SetPermissionConstants.ts"),n=s("./app/j/syncers/SetSyncer.ts"),o=s("./app/j/syncers/ClassSetSyncer.ts"),a=s("./app/j/create_set/stores/SetPermissionStore.ts"),l=s("./app/j/create_set/stores/ClassStore.ts"),d=s("./app/j/create_set/stores/ClassSetStore.ts"),u=s("./app/j/create_set/actions/ClassSetActionCreators.ts"),c={setSyncer:n.Z,toggleClass(e){r.Z.viewAction(i.Nw.TOGGLE_CLASS,{luid:e})},toggleClassPermissions(e){r.Z.viewAction(i.Nw.TOGGLE_CLASS_PERMISSIONS,{luid:e})},changePermission(e,t){r.Z.viewAction(i.Nw.CHANGE_PERMISSION,{side:e,newPermission:t})},persistClassSetsForPermissions(e){if(!a.Z.canEditPermissions())return Promise.resolve();var t=this.setSyncer.getModel(e);if(!t.get("id"))return Promise.resolve();var s=a.Z.getPermissions(),r=a.Z.getSelectedClassLuids(),i=a.Z.getSelectedEditableByClassLuids(),n=d.Z.getAll(),o=Object.keys(n),l=Object.keys(a.Z.getPersistedClassSets());return this._shouldDeleteAllClassSets(s)&&o.length?u.Z.bulkDel(o):this._shouldPersistSelectedClasses(s,r)?this._saveSelectedClasses(e,t,s,r,i).then((()=>{if(this._shouldDeleteNonSelectedClassSets(s))return this._deleteNonSelectedClassSets(r,n)})):this._shouldRemoveAllClassSetsEditPermissions(s)&&l.length?this._removeEditPermissionsOnExistingClassSets(l):Promise.resolve()},_shouldDeleteAllClassSets:e=>e.viewableBy!==i.mk.CLASSES&&e.viewableBy!==i.mk.EVERYONE,_shouldRemoveAllClassSetsEditPermissions:e=>e.editableBy!==i.mk.CLASSES&&e.editableBy!==i.mk.EVERYONE,_shouldDeleteNonSelectedClassSets:e=>e.viewableBy!==i.mk.EVERYONE,_shouldPersistSelectedClasses(e,t){return!this._shouldDeleteAllClassSets(e)&&(0!==t.length&&(i.mk.CLASSES===e.viewableBy||i.mk.CLASSES===e.editableBy))},_deleteNonSelectedClassSets(e,t){var s=d.Z.getClassMap(),r=Object.keys(t).filter((t=>-1===e.indexOf(s[t])));r.length>0&&u.Z.bulkDel(r)},_removeEditPermissionsOnExistingClassSets(e){var t={};for(var s of e)t[s]={canEdit:!1};return u.Z.bulkUpdate(t)},_saveSelectedClasses(e,t,s,r,n){var o=l.Z.getAll(),a=s.editableBy===i.mk.CLASSES,d={};for(var c of r){var p=o[c];d[this._getLuidForClassAndSet(c)]={classId:p.id,setId:t.get("id"),canEdit:a&&n.indexOf(c)>-1}}return u.Z.bulkUpdate(d)},_getLuidForClassAndSet(e){var t=d.Z.getClassMap(),s=null;for(var r in t){if(t[r]===e){s=r;break}}return s||o.Z.add()}};t.Z=c},"./app/j/create_set/actions/SetWithTermActionCreators.ts":(e,t,s)=>{"use strict";var r=s("./app/j/create_set/actions/SetActionCreators.ts"),i=s("./app/j/create_set/actions/TermActionCreators.ts"),n=s("./node_modules/lodash/size.js"),o=s.n(n),a={updateLang(e,t,s,n){r.Z.updateLang(e,t,s);var o="word"===t?s:n,a="word"===t?n:s;return i.Z.transformAllTermsText(e,o,a)},bulkUpdateAndPublish:(e,t,s)=>(r.Z.publish(),0===o()(s)?r.Z.publishSync(e,t):i.Z._saveUpdatesWithoutChain(e,s,!0).then(i.Z.bulkUpdateSuccess).then((()=>r.Z.publishSync(e,t))).catch(i.Z.bulkUpdateFailure))};t.Z=a},"./app/j/create_set/actions/TermActionCreators.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>x});var r=s("./node_modules/lodash/capitalize.js"),i=s.n(r),n=(s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/core-js/modules/es.promise.finally.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./app/j/create_set/actions/SetActionCreators.ts")),o=s("./app/j/create_set/constants/TermConstants.ts"),a=s("./app/j/create_set/stores/TermStore.ts"),l=s("./app/j/dispatchers/AppDispatcher.ts"),d=s("./app/j/global/Rollbar.ts"),u=s("./node_modules/lodash/size.js"),c=s.n(u),p=s("./app/j/models/ApiData.ts");class h extends p.Z{}h.URL_BASE="suggestions/definition",h.API_VERSION="3.2";var g=h,m=s("./app/j/global/Quizlet.ts"),_=e=>e[0]&&e[0].data?e[0].data.suggestions:null;class f extends p.Z{static autosuggest(e){return this.get(Object.assign({clientId:m.Z.uid},e)).then(_)}}f.URL_BASE="suggestions/definition",f.API_VERSION="3.2";class v extends p.Z{static autosuggest(e){return this.get(Object.assign({clientId:m.Z.uid},e)).then(_)}}v.URL_BASE="suggestions/distractors",v.API_VERSION="3.2";class S extends p.Z{static autosuggest(e){return this.get(Object.assign({clientId:m.Z.uid},e)).then(_)}}S.URL_BASE="suggestions/word",S.API_VERSION="3.2";var C=s("./app/j/syncers/TermSyncer.ts"),b=s("./app/j/utils/property.ts"),y=/[\.,;!#\$\/:\'\(\)\[\]_\\\"¡]/g;var E=s("./app/j/utils/transformTermText.ts"),j=s("./app/j/utils/trim.ts");var x=new class{constructor(){var e=this;this.termSyncer=C.Z,this.previousWordSuggestionQueryString=null,this.previousWordSuggestionResult=null,this.previousDefinitionSuggestionQueryString=null,this.previousDefinitionSuggestionResult=null,this.shouldLogForRichTextDebugging=!1,this.activateRow=e=>{l.Z.viewAction(o.Nw.ACTIVATE_ROW,{luid:e})},this.activateSide=(e,t)=>{l.Z.viewAction(o.Nw.ACTIVATE_SIDE,{luid:e,activeSide:t})},this.activateRowSide=(e,t)=>{l.Z.viewAction(o.Nw.ACTIVATE_ROW_SIDE,{luid:e,activeSide:t})},this.activateOffsetRowContext=(e,t,s)=>{l.Z.viewAction(o.Nw.ACTIVATE_OFFSET_ROW_CONTEXT,{fromLuid:e,offset:t,context:s})},this.toggleContext=(e,t)=>{l.Z.viewAction(o.Nw.CONTEXT_TOGGLE,{luid:e,context:t})},this.resetContext=e=>{l.Z.viewAction(o.Nw.CONTEXT_RESET,{luid:e})},this.bulkCreate=e=>{var t;if(!e.length)return[];var s=a.ZP.getIndicesToAdd(e),r=s.map((()=>this.termSyncer.add({}))),i=a.ZP.hasPhantomRow()&&s.length<e.length;return i&&(t=a.ZP.getPhantomRow()),l.Z.viewAction(o.Nw.LOCAL_BULK_CREATE,{luids:r,indices:s,activatePhantom:i}),i&&r.push(t),this.harmonizeRanks(),r},this.update=e=>{var{setLuid:t,luid:s,props:r,wordLang:i,defLang:n,persist:o=!0,syncDelayOverride:a=!1,shouldLogForRichTextDebugging:l=!1}=e,d=(0,b.Z)(s,r);return this.shouldLogForRichTextDebugging=l,this.bulkUpdate({setLuid:t,luidToProps:d,wordLang:i,defLang:n,persist:o,syncDelayOverride:a})},this.bulkUpdate=e=>{var{setLuid:t,luidToProps:s,wordLang:r,defLang:i,persist:n=!0,syncDelayOverride:a=!1}=e;return l.Z.viewAction(o.Nw.UPDATE,{luidToProps:s,wordLang:r,defLang:i}),n?this.saveUpdates(t,s,a):Promise.resolve()},this.saveUpdates=function(t,s,r){return void 0===r&&(r=!1),e._saveUpdatesWithoutChain(t,s,r).then(e.bulkUpdateSuccess).catch(e.bulkUpdateFailure).finally(e.harmonizeRanks)},this._saveUpdatesWithoutChain=function(t,s,r){return void 0===r&&(r=!1),n.Z.maybeCreateSet(t).then((t=>{for(var i in s){var n=s[i];Object.assign(n,{setId:t})}return e.termSyncer.bulkSave(s,r)}))},this.bulkUpdateSuccess=e=>{var[t]=e;if(this.shouldLogForRichTextDebugging){var s=[];for(var r in t){var i=t[r];s.push({id:i.get("id"),setId:i.get("setId"),wordRichText:i.get("wordRichText"),definitionRichText:i.get("definitionRichText")})}d.Z.debug("[RT debug]: term models in server response in TermActionCreators.bulkUpdateSuccess",s)}l.Z.serverAction(o.Nw.UPDATE_SUCCESS,{models:t})},this.bulkUpdateFailure=e=>{if(e instanceof Array){var[t,s]=e;l.Z.serverAction(o.Nw.UPDATE_FAILURE,{models:s,error:t})}else d.Z.error("TermActionCreators: Error with update",e)},this.flipColumns=(e,t)=>(l.Z.viewAction(o.Nw.FLIP_COLUMNS,{luidToProps:t}),this.saveUpdates(e,t,!0)),this.import=e=>{var{setLuid:t,luidToPropsToReplace:s,arrayOfPropsToAdd:r,wordLang:i,defLang:n}=e,a=this.termSyncer.bulkAdd(r);return Object.assign(a,s),l.Z.viewAction(o.Nw.UPDATE,{luidToProps:a,wordLang:i,defLang:n}),this.saveUpdates(t,a,!0)},this.del=e=>(l.Z.viewAction(o.Nw.DELETE,{luid:e}),this.termSyncer.del(e).then(this.deleteSuccess).catch(this.deleteFailure).finally(this.harmonizeRanks)),this.deleteSuccess=e=>{var[t,s]=e;l.Z.serverAction(o.Nw.DELETE_SUCCESS,{luid:t,model:s})},this.deleteFailure=e=>{var[t,s,r]=e;l.Z.serverAction(o.Nw.DELETE_FAILURE,{luid:s,model:r,error:t})},this.ignoreDuplicates=e=>{l.Z.viewAction(o.Nw.IGNORE_DUPLICATE_WORD,{word:e})},this.move=(e,t,s,r)=>(l.Z.viewAction(o.Nw.MOVE,{luid:t,oldIndex:s,newIndex:r}),this._saveUpdatesWithoutChain(e,(0,b.Z)(t,{rank:r}),!0).then(this.moveSuccess).catch(this.moveFailure).finally(this.harmonizeRanks)),this.moveSuccess=e=>{var[t,s]=e;l.Z.serverAction(o.Nw.MOVE_SUCCESS,{luid:t,model:s})},this.moveFailure=e=>{var[t,s,r]=e;l.Z.serverAction(o.Nw.MOVE_FAILURE,{luid:s,model:r,error:t})},this.maybeCreateTerm=(e,t)=>new Promise(((s,r)=>{var i=this.termSyncer.getModel(e);if(!i.isNewRecord())return s(i.get("id"));var n=(0,b.Z)(e,{setId:t});return this.termSyncer.bulkSave(n,!0).then((t=>{var[r]=t,i=r[e].get("id");return s(i),this.bulkUpdateSuccess([r])})).catch((e=>{var[t,s]=e;return r(t),this.bulkUpdateFailure([t,s])}))})),this.autodefine=(e,t,s,r,i)=>{var n=(0,j.Z)(t.replace(/[\*]/g,"").replace(y,"")),a=n.length?n:t;l.Z.viewAction(o.Nw.AUTODEFINE,{term:a,luid:e});var d={corroboration:o.e_.MIN_CORROBORATION,defLang:r,limit:o.e_.RESULT_LIMIT,localTermId:-1,userId:i,word:t,wordLang:s};return g.get(d).then((t=>l.Z.serverAction(o.Nw.AUTODEFINE_SUCCESS,{luid:e,autodefineResults:t[0]}))).catch((t=>l.Z.serverAction(o.Nw.AUTODEFINE_FAILURE,{luid:e,error:t})))},this.shouldSendNextAutosuggestionRequest=(e,t,s)=>!t||!s||(s.suggestions.length>0||0!==e.indexOf(t)),this.autosuggestWord=e=>e.prefix?e.prefix.length>o.Au.PAYLOAD_LIMIT?this.autosuggestClear():this.shouldSendNextAutosuggestionRequest(e.prefix,this.previousWordSuggestionQueryString,this.previousWordSuggestionResult)?S.autosuggest(Object.assign({limit:o.Au.RESULTS_LIMIT},e)).then((t=>{this.previousWordSuggestionQueryString=e.prefix,this.previousWordSuggestionResult=t,l.Z.serverAction(o.Nw.AUTO_SUGGEST_SUCCESS,{suggestions:t,side:"word"})})).catch((e=>l.Z.serverAction(o.Nw.AUTO_SUGGEST_FAILURE,e))):this.autosuggestClear():this.autosuggestClear(),this.autosuggestDistractors=e=>{if(!e.definition)return this.autosuggestClear("distractor");if(e.definition.length>o.Au.PAYLOAD_LIMIT)return this.autosuggestClear("distractor");var t=e.definition;return this.shouldSendNextAutosuggestionRequest(t,this.previousDefinitionSuggestionQueryString,this.previousDefinitionSuggestionResult)?v.autosuggest({limit:o.Au.RESULTS_LIMIT,definition:e.definition}).then((s=>{this.previousDefinitionSuggestionQueryString=t,this.previousDefinitionSuggestionResult=s;var r=s;null!=r&&r.suggestions.length&&i()(e.definition)===e.definition&&(r.suggestions=r.suggestions.map((e=>(e.text=i()(e.text),e)))),l.Z.serverAction(o.Nw.AUTO_SUGGEST_SUCCESS,{suggestions:r,side:"distractors"})})).catch((e=>l.Z.serverAction(o.Nw.AUTO_SUGGEST_FAILURE,e))):this.autosuggestClear("distractor")},this.autosuggestDefinition=e=>{if(!e.word)return this.autosuggestClear();if(e.word=e.word||"",e.prefix=e.prefix||"",e.word.length>o.Au.PAYLOAD_LIMIT||e.prefix.length>o.Au.PAYLOAD_LIMIT)return this.autosuggestClear();var t=e.word+"//"+e.prefix;return this.shouldSendNextAutosuggestionRequest(t,this.previousDefinitionSuggestionQueryString,this.previousDefinitionSuggestionResult)?f.autosuggest(Object.assign({limit:o.Au.RESULTS_LIMIT},e)).then((e=>{this.previousDefinitionSuggestionQueryString=t,this.previousDefinitionSuggestionResult=e,l.Z.serverAction(o.Nw.AUTO_SUGGEST_SUCCESS,{suggestions:e,side:"definition"})})).catch((e=>l.Z.serverAction(o.Nw.AUTO_SUGGEST_FAILURE,e))):this.autosuggestClear()},this.autosuggestClear=e=>{l.Z.serverAction(o.Nw.AUTO_SUGGEST_CLEAR,e)},this.transformAllTermsText=(e,t,s)=>{var r={},i=a.ZP.getAll();for(var n of Object.keys(i)){var o=i[n],l=(0,E.Z)(o.word,t,s),d=(0,E.Z)(o.definition,s,t);l===o.word&&d===o.definition||(r[n]={word:l,definition:d})}if(c()(r)>0)return this.bulkUpdate({setLuid:e,luidToProps:r,wordLang:t,defLang:s})},this.harmonizeRanks=()=>{a.ZP.getOrder().forEach(((e,t)=>{this.termSyncer.models[e].properties.rank=t}))}}deleteImageSuccess(e){var{luid:t,termLuid:s,imageLuid:r}=e;l.Z.serverAction(o.Nw.DELETE_IMAGE_SUCCESS,{luid:t,termLuid:s,imageLuid:r})}createImageSuccess(e){var{luid:t,termLuid:s,imageLuid:r}=e;l.Z.serverAction(o.Nw.CREATE_IMAGE_SUCCESS,{luid:t,termLuid:s,imageLuid:r})}createImageFailure(e){var{error:t,luid:s,termLuid:r,imageLuid:i}=e;l.Z.serverAction(o.Nw.CREATE_IMAGE_FAILURE,{error:t,luid:s,termLuid:r,imageLuid:i})}deleteImageFailure(e){var{error:t,luid:s,termLuid:r,imageLuid:i}=e;l.Z.serverAction(o.Nw.DELETE_IMAGE_FAILURE,{error:t,luid:s,termLuid:r,imageLuid:i})}}},"./app/j/create_set/components/AutodefineContext.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>m});s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js");var r=s("./node_modules/classnames/index.js"),i=s.n(r),n=s("./app/j/components/TSpan.tsx"),o=s("./app/j/create_set/constants/KeyboardConstants.ts"),a=s("./node_modules/keymaster/keymaster.js"),l=s.n(a),d=s("./node_modules/react/index.js"),u=s("./app/j/utils/bound-index.ts"),c=s("./app/j/utils/ellipsis.ts"),p=s("./app/j/utils/FontSize.ts"),h=s("./node_modules/react/jsx-runtime.js"),g=(0,p.k)(200);class m extends d.PureComponent{constructor(){super(...arguments),this.state={activeResultIndex:0},this.handleClickDefinition=(e,t)=>{t.preventDefault(),this.props.onSelectAutodefineResult(e)},this.handleDefinitionHover=(e,t)=>{t.preventDefault(),this.setActiveResultIndex(e)},this.definitionRefs={},this._hasOverflowingResults=!1}componentDidMount(){this.props.enabled&&this.onOpen()}UNSAFE_componentWillReceiveProps(e){!this.props.enabled&&e.enabled&&this.onOpen(),this.props.enabled&&!e.enabled&&this.onClose()}componentDidUpdate(e,t){if(t.activeResultIndex!==this.state.activeResultIndex){var s=this.definitionRefs["definition-"+this.state.activeResultIndex];s.focus(),s.blur()}e.results!==this.props.results&&(this._hasOverflowingResults=this.resultsContainer.scrollHeight>g)}componentWillUnmount(){this.onClose()}onClose(){l().unbind(o.Z.autodefine.prevResult,this.props.termLuid),l().unbind(o.Z.autodefine.nextResult,this.props.termLuid),l().unbind(o.Z.autodefine.selectResult,this.props.termLuid),this.props.onClose&&this.props.onClose()}onOpen(){this.setState({activeResultIndex:0}),l().setScope(this.props.termLuid),l()(o.Z.autodefine.prevResult,this.props.termLuid,(()=>{if(this.setActiveResultIndex(this.state.activeResultIndex-1))return!1})),l()(o.Z.autodefine.nextResult,this.props.termLuid,(()=>{if(this.setActiveResultIndex(this.state.activeResultIndex+1))return!1})),l()(o.Z.autodefine.selectResult,this.props.termLuid,(()=>{var e=this.props.results[this.state.activeResultIndex];if(e)return this.props.onSelectAutodefineResult&&this.props.onSelectAutodefineResult(e),!1}))}renderResults(){if(this.props.isLoading)return(0,h.jsx)("div",{className:"AutodefineContext-resultWrapper",children:(0,h.jsx)(n.Z,{id:"create_set.term_context.autodefine.loading"})});if(!this.props.results.length)return(0,h.jsx)("div",{className:"AutodefineContext-resultWrapper",children:(0,h.jsx)(n.Z,{id:"create_set.term_context.autodefine.no_results"})});var{activeResultIndex:e}=this.state,t=this.props.results.map(((t,s)=>{var r=i()("AutodefineContext-result","lang-"+this.props.resultLang,{"is-active":s===e}),n="definition-"+s;return(0,h.jsxs)("div",{className:"AutodefineContext-resultWrapper",children:[(0,h.jsx)("a",{className:r,href:"#",onClick:this.handleClickDefinition.bind(null,t),onMouseOver:this.handleDefinitionHover.bind(null,s),children:this.props.resultRenderer(t)}),(0,h.jsx)("input",{"aria-label":t,className:"AutodefineContext-resultCover",readOnly:!0,ref:e=>{this.definitionRefs[n]=e}})]},n)}));return(0,h.jsx)("div",{className:"AutodefineContext-results",children:t})}render(){var e=i()("AutodefineContext",{"has-results":this.props.results.length>0,"is-loading":this.props.isLoading,"has-overflowingResults":this._hasOverflowingResults});return(0,h.jsx)("div",{className:e,children:(0,h.jsx)("div",{className:"AutodefineContext-wrapper",children:(0,h.jsx)("div",{className:"AutodefineContext-resultsContainer",ref:e=>{this.resultsContainer=e},children:this.renderResults()})})})}setActiveResultIndex(e){return!!this.props.results.length&&(this.setState({activeResultIndex:(0,u.Z)(e,this.props.results.length)}),!0)}}m.defaultProps={resultRenderer:e=>(0,c.Z)(e,300)}},"./app/j/create_set/components/CreateSetDiagramWrapper.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var r=s("./app/j/components/UIContainer.tsx"),i=s("./app/j/components/UIFloatedCard.tsx"),n=s("./node_modules/react/index.js"),o=s("./node_modules/react/jsx-runtime.js");class a extends n.PureComponent{render(){var e=100-50/this.props.rowCount+"%";return(0,o.jsxs)("div",{className:"UIFloatedCardBackdrop",children:[(0,o.jsx)("div",{className:"UIFloatedCardBackdrop-content",children:this.props.children}),(0,o.jsx)("div",{className:"UIFloatedCardBackdrop-bottom",style:{height:e}})]})}}a.defaultProps={rowCount:1};class l extends n.Component{render(){var e=(0,o.jsx)(r.Z,{children:(0,o.jsx)(i.Z,{children:this.props.children})});return this.props.shouldRenderCardBackdrop?(0,o.jsx)(a,{children:e}):e}}l.defaultProps={shouldRenderCardBackdrop:!0}},"./app/j/create_set/components/LanguageSelect.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>y});s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.sort.js");var r=s("./app/j/i18n/$t.ts"),i=s("./app/j/components/UIBreakpoint.tsx"),n=s("./app/j/components/UIHeading.tsx"),o=s("./app/j/components/UIInput.tsx"),a=s("./app/j/config/languages.ts"),l=s("./app/j/create_set/actions/SetWithTermActionCreators.ts"),d=s("./app/j/i18n/getLocalizedLanguage.ts"),u=s("./app/j/i18n/localeCompare.ts"),c=s("./node_modules/react/index.js"),p=s("./node_modules/react-select/lib/index.js"),h=s("./app/j/utils/log-page-action.ts"),g=s("./app/j/utils/UserAgentHelper.ts"),m=s("./node_modules/react/jsx-runtime.js");function _(e){e.stopPropagation(),e.preventDefault()}var f=Object.keys(a.o7),v=null,S=null,C=null;function b(e,t){if(a.o7[e]){var s=(0,d.Z)(e),r=(0,d.Z)(t);return(0,u.Z)(s,r)}return-1}class y extends c.PureComponent{constructor(){super(...arguments),this.onChosenLang=e=>{if(e)return this.selectLang(e.value)},this.onMobileSelectLang=e=>this.selectLang(e.currentTarget.value),this.inputRenderer=e=>(delete e.onBlur,(0,m.jsx)("div",{className:"LanguageSelect-input",children:(0,m.jsx)(o.Z,Object.assign({},e,{disabled:!1,placeholder:(0,r.Z)("create_set.language_prompt.search_placeholder"),type:"text"}))}))}componentDidUpdate(){this.props.disableAutofocus||this.openSelect()}getPlaceholderKey(){return this.props.side+"-placeholder"}getAllLangKeyPrefix(){return this.props.side+"-all"}getFrequentLangKeyPrefix(){return this.props.side+"-frequent"}getYourLangKeyPrefix(){return this.props.side+"-yours"}renderFrequentLang(e){return S||(S=a._1.slice(0).sort(b).filter((e=>this.props.recentLanguages.indexOf(e)<0&&this.shouldShowLang(e))).map((t=>({label:(0,d.Z)(t),value:t,key:e+"-"+t})))),S}renderHtmlOptions(e){return e.map((e=>{var{key:t,label:s,value:r}=e;return(0,m.jsx)("option",{value:r,children:s},t)}))}renderAllLang(e){return v||(v=f.sort(b).filter((e=>this.props.recentLanguages.indexOf(e)<0&&a._1.indexOf(e)<0&&this.shouldShowLang(e))).map((t=>({label:(0,d.Z)(t),value:t,key:e+"-"+t})))),v}renderYourLang(e){return C||(C=this.props.recentLanguages.slice(0).sort(b).filter((e=>this.shouldShowLang(e))).map((t=>({label:(0,d.Z)(t),value:t,key:e+"-"+t})))),C}render(){var e=this.getYourLangKeyPrefix(),t=this.getFrequentLangKeyPrefix(),s=this.getAllLangKeyPrefix(),n=this.getPlaceholderKey(),o=this.renderYourLang(e),a=this.renderFrequentLang(t),l=this.renderAllLang(s),d=this.props.lang||"",u=[];return u.push({label:(0,r.Z)("create_set.language_prompt.your_languages_title"),type:"header"}),(u=u.concat(o)).push({label:(0,r.Z)("create_set.language_prompt.top_quizlet_languages_title"),type:"header"}),(u=u.concat(a)).push({label:(0,r.Z)("create_set.language_prompt.all_languages_title"),type:"header"}),u=u.concat(l),(0,m.jsx)("div",{className:"LanguageSelect",children:(0,m.jsx)(i.Z,{above:"m",children:i=>i&&!(0,g.b1)()?(0,m.jsx)("div",{className:"LanguageSelect-reactSelect",children:(0,m.jsx)(p.ZP,{autofocus:!0,clearable:!1,disabled:this.props.disabled,inputRenderer:this.inputRenderer,noResultsText:(0,r.Z)("create_set.language_prompt.no_results_found"),onChange:this.onChosenLang,openAfterFocus:!0,openOnFocus:!0,optionRenderer:this.optionRenderer,options:u,placeholder:(0,m.jsx)(m.Fragment,{}),ref:e=>{this.select=e},searchable:!0,value:d,valueRenderer:this.valueRenderer})}):(0,m.jsxs)("select",{"aria-label":(0,r.Z)("create_set.language_prompt.choose_language"),className:"LanguageSelect-mobileSelect",disabled:this.props.disabled,onChange:this.onMobileSelectLang,onClick:_,tabIndex:-1,value:d,children:[(0,m.jsx)("option",{value:"",children:(0,r.Z)("create_set.language_prompt.choose_language")},n),(0,m.jsx)("option",{disabled:!0,children:(0,r.Z)("create_set.language_prompt.your_languages_title")},e),this.renderHtmlOptions(o),(0,m.jsx)("option",{disabled:!0,children:(0,r.Z)("create_set.language_prompt.top_languages_title")},t),this.renderHtmlOptions(a),(0,m.jsx)("option",{disabled:!0,children:(0,r.Z)("create_set.language_prompt.all_languages_title")},s),this.renderHtmlOptions(l)]})})})}shouldShowLang(e){return this.props.showInvisibleLangs||a.YN.indexOf(e)<0}valueRenderer(){return null}optionRenderer(e){var{key:t,label:s,type:r}=e;return"header"===r?(0,m.jsx)("div",{className:"LanguageSelect-optionGroupHeader",children:(0,m.jsx)(n.Z,{deprecatedStyle:!0,size:6,children:s})},t):(0,m.jsx)("div",{className:"LanguageSelect-option",children:s},t)}openSelect(){return this.select&&this.select.focus()}selectLang(e){e&&e!==this.props.lang&&(this.props.shouldUpdateStore&&l.Z.updateLang(this.props.setLuid,this.props.side,e,this.props.otherSideLang),(0,h.Z)("create_set_lang_detect_select",{langCode:e}),this.props.onSelectLang&&this.props.onSelectLang(this.props.side,e)),this.props.onHideLangSelect()}}y.defaultProps={disableAutofocus:!1,shouldUpdateStore:!0,showInvisibleLangs:!1,width:"100%"}},"./app/j/create_set/constants.ts":(e,t,s)=>{"use strict";s.d(t,{a:()=>i,u:()=>n});var r=s("./app/j/utils/keyReflect.ts"),i=(0,r.Z)("CREATE_SET",{DELETE_DIAGRAM_SHAPE_SUCCESS:null,DIAGRAM_IMAGE_CANCEL_EDIT:null,DIAGRAM_IMAGE_DELETE:null,DIAGRAM_IMAGE_DELETE_SUCCESS:null,DIAGRAM_IMAGE_EDIT:null,DIAGRAM_IMAGE_SAVE:null,DIAGRAM_IMAGE_START_EDIT:null,DIAGRAM_IMAGE_UNDO:null,EDIT_DIAGRAM_SHAPE:null,EDIT_TERM:null,LEGACY_SET_STORE_UPDATE:null,LEGACY_TERM_STORE_UPDATE:null,NEW_DIAGRAM_SHAPE:null,NEW_DIAGRAM_SHAPE_CANCEL:null,SEARCH_DIAGRAMS:null,SEARCH_DIAGRAMS_FAILURE:null,SEARCH_DIAGRAMS_RESET:null,SEARCH_DIAGRAMS_SUCCESS:null,UPLOAD_IMAGE:null,UPLOAD_IMAGE_FAILURE:null,UPLOAD_IMAGE_SUCCESS:null,UPSELL_MODAL_CLOSE:null,UPSELL_MODAL_OPEN:null}),n=(0,r.Z)("CREATE_SET_DIAGRAM_CONTAINERS",{EDIT:null,UPLOAD:null})},"./app/j/create_set/constants/ClassSetConstants.ts":(e,t,s)=>{"use strict";var r=s("./app/j/utils/keyReflectDeep.ts");t.Z=(0,r.Z)("ClassSetConstants",{actions:{BULK_UPDATE:null,BULK_UPDATE_SUCCESS:null,BULK_UPDATE_FAILURE:null,BULK_DELETE:null,BULK_DELETE_SUCCESS:null,BULK_DELETE_FAILURE:null}})},"./app/j/create_set/constants/CustomAudioConstants.ts":(e,t,s)=>{"use strict";var r=(0,s("./app/j/utils/keyReflectDeep.ts").Z)("CustomAudioConstants",{actions:{CANCEL:null,CANCEL_SUCCESS:null,CREATE:null,CREATE_FAILURE:null,CREATE_SUCCESS:null,DELETE:null,DISMISS_UPSELL:null,ERROR:null,GET_VOLUME:null,IMPLEMENTATION_UPDATE:null,INIT:null,NEEDS_PERMISSION:null,PERMISSION_UPDATE:null,RECORD:null,SAVE:null,STOP:null,STOP_SUCCESS:null,UPLOAD_FINISH:null}});r.actions;t.Z=r},"./app/j/create_set/constants/ImageConstants.ts":(e,t,s)=>{"use strict";s.d(t,{Nw:()=>i,_O:()=>n,Rj:()=>o});var r=(0,s("./app/j/utils/keyReflectDeep.ts").Z)("ImageConstants",{actions:{BULK_CREATE:null,CREATE_PLACEHOLDER:null,CREATE_RICH_PLACEHOLDER:null,CREATE_SUCCESS:null,CREATE_FAILURE:null,CREATE_PROGRESS:null,MOVE:null,MOVE_SUCCESS:null,MOVE_FAILURE:null,DELETE:null,DELETE_SUCCESS:null,DELETE_FAILURE:null,PRELOAD:null,REPLACE:null,SEARCH:null,SEARCH_SUCCESS:null,SEARCH_FAILURE:null,STORE:null,DROP_FAILURE:null,BULK_UPLOAD_FAILURE:null},placeholders:{PLAIN:null,RICH:null}}),i=r.actions,n=r.placeholders,o={MAX_NUM_IMAGES_FREE:8,MAX_NUM_IMAGES_UPGRADED:40}},"./app/j/create_set/constants/KeyboardConstants.ts":(e,t)=>{"use strict";t.Z={studiableItem:{moveUp:"alt+up",moveDown:"alt+down",toggleAutosuggest:"command+shift+a, ctrl+shift+a",toggleImages:"command+shift+i, ctrl+shift+i",toggleUpload:"command+shift+u, ctrl+shift+u",toggleRecord:"command+shift+o, ctrl+shift+o",closeContext:"escape",addItemBelowCurrent:"command+shift+r, ctrl+shift+r",tab:"tab",backspace:"Backspace",delete:"Delete"},richText:{bold:"command+b, ctrl+b",italicize:"command+i, ctrl+i",underline:"command+u, ctrl+u"},autodefine:{prevResult:"up, shift+tab",nextResult:"down, tab",selectResult:"enter"},autosuggestions:{nextItem:"down",previousItem:"up",selectItem:"enter"},imageCarousel:{prevImage:"left",nextImage:"right",nextElement:"tab",prevElement:"shift+tab",selectImage:"enter"},recording:{recordWord:"left",recordDefinition:"right",nextRow:"down",prevRow:"up",playOrRestoreRecording:"enter",deleteRecording:"backspace"},modal:{exit:"esc",tab:"tab"}}},"./app/j/create_set/constants/SetConstants.ts":(e,t,s)=>{"use strict";s.d(t,{Nw:()=>i,qF:()=>n,Rj:()=>o,v7:()=>r,ej:()=>l,_B:()=>a});var r,i=(0,s("./app/j/utils/keyReflectDeep.ts").Z)("SetConstants",{actions:{BLUR_TITLE:null,DETECT_LANGUAGE_FAILURE:null,DETECT_LANGUAGE:null,DETECT_PROFANITY_FAILURE:null,DETECT_PROFANITY_SUCCESS:null,DISCARD_FAILURE:null,DISCARD_SUCCESS:null,DISCARD:null,FOCUS_TITLE:null,HIDE_LANG_SELECT:null,HIDE_TERMS:null,PUBLISH_FAILURE:null,PUBLISH_SUCCESS:null,PUBLISH:null,SHOW_LANG_SELECT:null,SHOW_TERMS:null,UPDATE_FAILURE:null,UPDATE_STICKY_HEADER_HEIGHT:null,UPDATE_SUCCESS:null,UPDATE:null}}).actions,n={UP:-1,DOWN:1},o={MAX_TERMS:2e3,MIN_TERMS:2,MIN_TERMS_BLANK_SET:5};!function(e){e[e.UNLOCKED=0]="UNLOCKED",e[e.DMCA=1]="DMCA",e[e.PROPRIETARY=2]="PROPRIETARY",e[e.TESTBANK=3]="TESTBANK",e[e.TESTBANK_RELAXED=4]="TESTBANK_RELAXED",e[e.REVIEW=5]="REVIEW"}(r||(r={}));var a,l={CONFIDENCE_THRESHOLD:.99,DEBOUNCE_TIME:400,MIN_LENGTH:1};!function(e){e[e.HEADER=0]="HEADER",e[e.FOOTER=1]="FOOTER"}(a||(a={}))},"./app/j/create_set/constants/SetPermissionConstants.ts":(e,t,s)=>{"use strict";s.d(t,{Nw:()=>i,mk:()=>n,mA:()=>o});var r=(0,s("./app/j/utils/keyReflectDeep.ts").Z)("SetPermissionConstants",{actions:{TOGGLE_CLASS:null,TOGGLE_CLASS_PERMISSIONS:null,CHANGE_PERMISSION:null},permissions:{EVERYONE:null,CLASSES:null,PASSWORD:null,JUST_ME:null},sides:{VIEWING:null,EDITING:null}}),i=r.actions,n=r.permissions,o=r.sides},"./app/j/create_set/constants/TermConstants.ts":(e,t,s)=>{"use strict";s.d(t,{Nw:()=>i,Sb:()=>n,Do:()=>o,eE:()=>a,wg:()=>l,W2:()=>d,dG:()=>u,yF:()=>c,e_:()=>p,Au:()=>h});var r=(0,s("./app/j/utils/keyReflectDeep.ts").Z)("TermConstants",{actions:{ACTIVATE_OFFSET_ROW_CONTEXT:null,ACTIVATE_ROW:null,ACTIVATE_ROW_SIDE:null,ACTIVATE_SIDE:null,AUTODEFINE:null,AUTODEFINE_FAILURE:null,AUTODEFINE_SUCCESS:null,AUTO_SUGGEST_CLEAR:null,AUTO_SUGGEST_FAILURE:null,AUTO_SUGGEST_SUCCESS:null,CONTEXT_RESET:null,CONTEXT_TOGGLE:null,CREATE_IMAGE_FAILURE:null,CREATE_IMAGE_SUCCESS:null,DEACTIVATE_ROW:null,DELETE:null,DELETE_FAILURE:null,DELETE_IMAGE_FAILURE:null,DELETE_IMAGE_SUCCESS:null,DELETE_SUCCESS:null,FLIP_COLUMNS:null,IGNORE_DUPLICATE_WORD:null,LOCAL_BULK_CREATE:null,MOVE:null,MOVE_FAILURE:null,MOVE_SUCCESS:null,UPDATE:null,UPDATE_FAILURE:null,UPDATE_SUCCESS:null},contexts:{IMAGE:null,RECORDING:null,AUTODEFINE:null,CUSTOM_DISTRACTORS:null},PLACEHOLDER_LUID:null,statuses:{INACTIVE_DUPLICATE:null,ACTIVE_DUPLICATE:null},dropLocations:{AFTER:null,BEFORE:null}}),i=r.actions,n=r.contexts,o=r.statuses,a=r.PLACEHOLDER_LUID,l=r.dropLocations,d={TERM_ROW_MIN_HEIGHT:104},u={TAB_INDEX:7},c={DISABLE_TOOLTIPS:5},p={RESULT_LIMIT:10,MIN_CORROBORATION:1},h={DEBOUNCE_TIME:200,RESULTS_LIMIT:3,PAYLOAD_LIMIT:50}},"./app/j/create_set/create-set.entry.tsx":(e,t,s)=>{"use strict";var r=s("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),i=(s("./node_modules/core-js/modules/es.object.assign.js"),s("./app/j/config/enums.ts")),n=s("./app/j/core/legacy_store/LegacyStoreProvider.tsx"),o=(s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.symbol.description.js"),s("./node_modules/core-js/modules/es.object.from-entries.js"),s("./app/j/assembly/toasts/index.ts")),a=s("./node_modules/classnames/index.js"),l=s.n(a),d=s("./app/j/compatibility/hoc/withLoggerConfig.tsx"),u=s("./app/j/compatibility/logger/classComponentLoggers.ts"),c=s("./app/j/components/MenuIconWithTooltip.tsx"),p=s("./app/j/components/SignupPromptModalNew.tsx"),h=s("./node_modules/react/index.js"),g=s("./node_modules/react/jsx-runtime.js");class m extends h.PureComponent{render(){var{className:e,children:t}=this.props;return(0,g.jsx)(g.Fragment,{children:this.props.children?(0,g.jsx)("div",{className:l()("StudiableItems",e),children:t}):null})}}var _=s("./app/j/components/TSpan.tsx"),f=s("./app/j/components/UIBreakpoint.tsx"),v=s("./app/j/components/UIButton.tsx"),S=s("./app/j/components/UIContainer.tsx"),C=s("./app/j/components/UIIcon.tsx"),b=s("./app/j/components/UILoadingIndicator.tsx"),y=s("./app/j/components/UIOverlayTrigger.tsx"),E=s("./app/j/components/UISwitch.tsx"),j=s("./app/j/components/UITooltip.tsx"),x=s("./node_modules/@linaria/react/lib/index.js"),T=s("./app/j/components/UIHeading.tsx"),I=s("./app/j/components/UILink.tsx"),w=s("./app/j/components/UIModal.tsx");class A extends h.PureComponent{render(){var{size:e,badgeContent:t}=this.props;return(0,g.jsx)("div",{className:"UIModalBadge",children:(0,g.jsx)(T.Z,{deprecatedStyle:!0,size:e,children:t})})}}var O=s("./app/j/components/UIParagraph.tsx"),R=s("./app/j/components/VimeoEmbed.tsx");class D extends h.PureComponent{render(){var{badgeContent:e,buttonContent:t,buttonLinkTo:s,buttonOnClick:r,headingContent:i,isOpen:n,linkContent:o,linkTo:a,linkOnClick:l,onClose:d,paragraphContent:u,videoId:c}=this.props;return(0,g.jsxs)(w.Z,{fullWidthBody:!0,isOpen:n,onClose:d,children:[(0,g.jsx)(A,{badgeContent:e,size:6}),(0,g.jsxs)("div",{className:"DiscoverModal",children:[(0,g.jsx)("div",{className:"DiscoverModal-heading",children:(0,g.jsx)(T.Z,{deprecatedStyle:!0,size:2,children:i})}),(0,g.jsx)("div",{className:"DiscoverModal-paragraph",children:(0,g.jsx)(O.Z,{children:u})}),(0,g.jsx)("div",{className:"DiscoverModal-vimeoEmbed",children:(0,g.jsx)(R.Z,{videoId:c})}),(0,g.jsx)("div",{className:"DiscoverModal-button",onClick:this.props.buttonOnClick,children:(0,g.jsx)(v.Z,{hero:!0,linkTo:s,onClick:s?void 0:r,width:"fill",children:t})}),(0,g.jsx)("div",{className:"DiscoverModal-link",children:o?(0,g.jsx)(I.Z,{newTab:!!a,onClick:l,to:a,children:o}):null})]})]})}}var L=s("./app/j/components/FeatureHighlightPopover.tsx"),P=e=>{var{children:t,featurePopoverVariant:s,isVisible:r,shouldShowOverlay:i,variant:n}=e,[o,a]=(0,h.useState)(r),d=l()("FeatureHighlightPopoverBackdrop",{"is-hidden":!o,"has-overlay":i}),u=l()("FeatureHighlightPopoverBackdrop-content",{["FeatureHighlightPopoverBackdrop-content--"+n]:void 0!==n});return(0,g.jsxs)("div",{className:d,children:[(0,g.jsx)(y.Z,{overlay:(0,g.jsx)(L.Z,{includeArrowInBounds:!0,onClick:()=>a(!1),position:"bottom left",variant:s}),position:"bottom center",tetherOptions:{offset:"0 91px"},triggerAction:o?"always":"never",children:(0,g.jsx)("div",{className:u,children:t})}),i?(0,g.jsx)("div",{className:"FeatureHighlightPopoverBackdrop-overlay"}):null]})},M=s("./app/j/components/PremiumBrandingBadge.tsx"),Z=s("./app/j/components/UIFileChooser.tsx"),k=s("./app/j/components/UIIconButton.tsx");class U extends h.PureComponent{render(){var e=l()("UIUploadTarget",{"UIUploadTarget--small":"small"===this.props.size,"UIUploadTarget--large":"large"===this.props.size});return(0,g.jsx)("div",{className:e,children:(0,g.jsx)("div",{className:"UIUploadTarget-container",children:this.props.children})})}}var N=s("./app/j/constants/MimeTypeConstants.ts"),F=(s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/core-js/modules/es.json.stringify.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.search.js"),s("./app/j/create_set/actions/SetActionCreators.ts")),B=s("./app/j/create_set/actions/TermActionCreators.ts"),H=s("./app/j/create_set/constants/ImageConstants.ts"),V=s("./app/j/create_set/stores/TermStore.ts"),G=s("./app/j/dispatchers/AppDispatcher.ts");class W extends(function(e){function t(){e.apply(this,arguments)}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error)){constructor(){super(),this.name="InvalidImageError",this.message="Please try again."}}class z extends(function(e){function t(){e.apply(this,arguments)}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error)){constructor(e){super(),this.name="InvalidTermError",this.message=e||"Please try again."}}var q=s("./app/j/syncers/ImageSyncer.ts"),K=s("./app/j/syncers/TermSyncer.ts"),Y=s("./app/j/utils/log-page-action.ts"),Q=s("./app/j/utils/mapWithKeys.ts"),$=s("./app/j/utils/UserAgentHelper.ts"),X={bulkCreate(e){var t=[];for(var s of e)s.imageLuid=q.Z.add(),t.push({imageLuid:s.imageLuid,termLuid:s.termLuid});for(var r of(G.Z.viewAction(H.Nw.BULK_CREATE,t),e))X.upload(r.file,r.imageLuid,r.setLuid,r.termLuid,r.termImageLuid);return e.map((e=>e.imageLuid))},upload(e,t,s,r,i){void 0===i&&(i=null);var n=q.Z.save(t,e,{onProgress:X.createProgress}).then(X.createSuccess).catch(X.createFailure),o=F.Z.maybeCreateSet(s).then((e=>B.Z.maybeCreateTerm(r,e))),a=null,l=null;return Promise.all([n,o]).then((e=>{var[[t,s],r]=e;return new Promise(((e,i)=>{var n=!1;return null!=s&&s.isValid()?(a=s.get("id"),l=s.get("code"),a&&l||(n=!0)):n=!0,n?((0,Y.Z)("new_create_set_bad_uploaded_image",{message:JSON.stringify(s)}),i([new W,t,s])):e([[t,s],r])}))})).then((()=>{if(!V.ZP.hasTermLuid(r))throw new z("Term LUID "+r+" not found")})).then((()=>{if(i){return K.Z.save(r,{definitionImageId:null,definitionImageCode:null},!0)}})).then((()=>{var e={definitionImageId:a,definitionImageCode:l};return K.Z.save(r,e,!0)})).then((e=>{var[s]=e;return B.Z.createImageSuccess({luid:s,termLuid:r,imageLuid:t})})).catch((e=>{if(!(e instanceof z)){var[s,i]=Array.from(e);if(!(s instanceof W))return B.Z.createImageFailure({error:s,luid:i,termLuid:r,imageLuid:t})}})),X.createPlaceholder(t,e)},createSuccess(e){var[t,s]=e;G.Z.serverAction(H.Nw.CREATE_SUCCESS,{luid:t,model:s});var r=new Image;return r.onload=()=>X.createPreload(t),r.src=s.get("_secureLegacyUrlSquare"),[t,s]},createFailure(e){var[t,s,r]=e;return G.Z.serverAction(H.Nw.CREATE_FAILURE,{error:t,luid:s,model:r}),[s,r,t]},createProgress(e){var[t,s]=e;return G.Z.serverAction(H.Nw.CREATE_PROGRESS,{luid:t,progress:s})},createPreload:e=>G.Z.viewAction(H.Nw.PRELOAD,{luid:e}),createPlaceholder(e,t){if(!(0,$.b1)()&&["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t))>-1){var s=new FileReader;return s.onload=t=>X.createRichPlaceholder(e,t.target.result),s.readAsDataURL(t)}return G.Z.viewAction(H.Nw.CREATE_PLACEHOLDER,{luid:e})},createRichPlaceholder:(e,t)=>G.Z.viewAction(H.Nw.CREATE_RICH_PLACEHOLDER,{luid:e,placeholderUrl:t}),dropFailure:e=>G.Z.viewAction(H.Nw.DROP_FAILURE,{error:e}),bulkUploadFailure:e=>G.Z.viewAction(H.Nw.BULK_UPLOAD_FAILURE,{error:e}),replace(e,t,s,r){void 0===r&&(r=null),G.Z.viewAction(H.Nw.REPLACE,{luid:e,termLuid:s});var i=q.Z.getModel(e),n=i.get("id"),o=i.get("code"),a=K.Z.getModel(s);n&&o?F.Z.maybeCreateSet(t).then((e=>{B.Z.maybeCreateTerm(s,e)})).then((()=>{if(r){return K.Z.save(s,{definitionImageId:null,definitionImageCode:null},!0)}})).then((()=>{var e={definitionImageId:n,definitionImageCode:o};return K.Z.save(s,e,!0)})).then((t=>{var[r]=t;return B.Z.createImageSuccess({luid:r,imageLuid:e,termLuid:s})})).catch((t=>{var[r,i]=t;return B.Z.createImageFailure({error:r,luid:i,termLuid:s,imageLuid:e})})):B.Z.bulkUpdateFailure([new W,a])},search(e,t,s,r){void 0===s&&(s=null),G.Z.viewAction(H.Nw.SEARCH,{query:t,luid:e,langs:s});var i={perPage:Math.round(1.3*r),languages:null};return s&&(i.languages=s),q.Z.search(t,i).then((e=>{var t=(0,Q.Z)(Object.keys(e).map((t=>[t,e[t].properties])));return G.Z.serverAction(H.Nw.STORE,t),e})).then((t=>G.Z.serverAction(H.Nw.SEARCH_SUCCESS,{luid:e,imageLuids:Object.keys(t)}))).catch((t=>G.Z.serverAction(H.Nw.SEARCH_FAILURE,{luid:e,error:t})))},del(e,t,s,r){if(void 0===r&&(r=null),s&&r){return K.Z.save(s,{definitionImageId:null,definitionImageCode:null},!0).then((r=>{var[i]=r;i&&B.Z.deleteImageSuccess({luid:e,termLuid:s,imageLuid:t})})).catch((e=>{var[r,i]=e;return B.Z.deleteImageFailure({error:r,luid:i,termLuid:s,imageLuid:t})}))}return null}},J=X,ee=s("./app/j/create_set/components/CreateSetDiagramWrapper.tsx"),te=s("./app/j/create_set/utils/SetContentTypeHelper.ts"),se=s("./app/j/i18n/$t.ts"),re=s("./app/j/utils/DataTransferHelper.ts"),ie=s("./app/j/utils/logNavigationEvent.ts"),ne=(0,x.z)("div")({name:"PremiumBrandingBadgeContainer",class:"p170xyrl"});class oe extends h.PureComponent{constructor(){super(...arguments),this.state={isShowingInfoModal:!1},this.handleOpenInfoModal=e=>{e.stopPropagation(),(0,ie.Z)("create_set_page",i.Qje.INFO,"diagrams_add_image"),this.setState({isShowingInfoModal:!0})},this.handleClickInfoModalLearnMore=()=>{(0,ie.Z)("create_set_page_modal",i.Qje.MLP_REDIRECT,"diagrams_more_info")},this.handleClickInfoModalButton=()=>{(0,ie.Z)("create_set_page_modal",i.Qje.CREATE,"diagrams_more_info"),this.setState({isShowingInfoModal:!1})},this.handleCloseInfoModal=()=>{(0,ie.Z)("create_set_page_modal",i.Qje.DISMISS,"diagrams_more_info"),this.setState({isShowingInfoModal:!1})},this.handleUploadDiagram=e=>{this.props.actions.uploadImage({fileList:e})},this.handleDrop=e=>{(0,re.U5)(e.dataTransfer)?J.dropFailure({message:(0,se.Z)("create_set.term_context.image.drag_from_other_website")}):this.props.actions.uploadImage({fileList:e.dataTransfer.files})}}UNSAFE_componentWillReceiveProps(e){e.dragDropEvent&&this.handleDrop(e.dragDropEvent)}renderLoadingIndicator(){return(0,g.jsx)("div",{className:"CreateSetDiagramUploader-bannerLoadingIndicator",children:(0,g.jsx)(b.Z,{})})}renderBannerContent(){return this.props.isDropTarget?this.renderUploadTargetContent():this.renderBannerText()}renderUploadTargetContent(){return(0,g.jsx)("div",{className:"CreateSetDiagramUploader-uploadTarget",children:(0,g.jsx)(U,{size:"large",children:(0,g.jsx)(T.Z,{deprecatedStyle:!0,size:3,children:(0,g.jsx)(_.Z,{id:"create_set.diagram_header.drop_to_upload"})})})})}renderBannerText(){var e=(0,g.jsx)(I.Z,{to:"#",children:(0,g.jsx)(_.Z,{id:"create_set.diagram_header.add_diagram_instructions_link"})});return(0,g.jsxs)("div",{className:"CreateSetDiagramUploader-bannerText",children:[(0,g.jsx)(T.Z,{deprecatedStyle:!0,size:4,children:(0,g.jsx)(_.Z,{id:"create_set.diagram_header.add_diagram"})}),(0,g.jsx)(O.Z,{children:(0,g.jsx)(_.Z,{addDiagramInstructionsLink:e,id:"create_set.diagram_header.add_diagram_instructions"})})]})}renderInfoIcon(e,t){return(0,g.jsx)(k.Z,{icon:e,onClick:this.handleOpenInfoModal,variant:t})}renderInfoIconInverseWhite(){return this.renderInfoIcon("info-inverse","white")}renderInfoIconBorderless(){return this.renderInfoIcon("info","borderless")}renderBanner(){var e=(0,te.P)(this.props.setContentType),t=l()("CreateSetDiagramUploader-banner",{"CreateSetDiagramUploader--cleanDesign":e,"is-dropTarget":this.props.isDropTarget}),s=l()("CreateSetDiagramUploader-bannerImage",{"CreateSetDiagramUploader-bannerImage--cleanDesign":e,"is-dropTarget":this.props.isDropTarget}),r=l()("CreateSetDiagramUploader-bannerInfoIcon",{"CreateSetDiagramUploader-bannerInfoIcon--inverted":!(0,te.P)(this.props.setContentType)});return(0,g.jsx)(Z.Z,{mimeTypes:N.HT,onChooseFiles:this.handleUploadDiagram,children:e=>(0,g.jsxs)("div",{className:t,onClick:e,onDragEnter:this.props.onDragEnter,onDragLeave:this.props.onDragLeave,onDrop:this.props.onDrop,children:[(0,g.jsx)("div",{className:r,children:(0,te.P)(this.props.setContentType)?this.renderInfoIconBorderless():this.renderInfoIconInverseWhite()}),(0,g.jsx)("div",{className:s}),this.props.isUploading?this.renderLoadingIndicator():this.renderBannerContent(),(0,g.jsx)(ne,{children:(0,g.jsx)(M.ZP,{logActionName:"advanced_creation_diagram_premium_branding_badge_view"})})]})})}renderInfoModal(){return(0,g.jsx)(D,{badgeContent:(0,g.jsx)(_.Z,{id:"create_set.diagram_header.discover_diagrams_modal.modal_new_badge"}),buttonContent:(0,g.jsx)(_.Z,{id:"create_set.diagram_header.discover_diagrams_modal.modal_button_text"}),buttonOnClick:this.handleClickInfoModalButton,headingContent:(0,g.jsx)(_.Z,{id:"create_set.diagram_header.discover_diagrams_modal.modal_heading_text"}),isOpen:this.state.isShowingInfoModal,linkContent:(0,g.jsx)(_.Z,{id:"create_set.diagram_header.discover_diagrams_modal.modal_link_text"}),linkOnClick:this.handleClickInfoModalLearnMore,linkTo:"/features/diagrams",onClose:this.handleCloseInfoModal,paragraphContent:(0,g.jsx)(_.Z,{id:"create_set.diagram_header.discover_diagrams_modal.modal_paragraph_text"}),videoId:"229221764"})}render(){var e=l()("CreateSetDiagramUploader");return(0,g.jsx)(f.Z,{above:"m",children:(0,g.jsxs)("div",{className:e,children:[(0,g.jsx)(ee.Z,{shouldRenderCardBackdrop:!(0,te.P)(this.props.setContentType),children:this.props.shouldShowTooltipDiagram?(0,g.jsx)(P,{featurePopoverVariant:"diagram",isVisible:!0,children:this.renderBanner()}):this.renderBanner()}),this.renderInfoModal()]})})}}s("./.linaria-cache/app/j/create_set/components/CreateSetDiagramUploader.linaria.css");var ae=s("./app/j/create_set/diagrams.ts"),le=s("./app/j/hocs/dragDropDecorator.tsx"),de=s("./node_modules/react-redux/lib/index.js"),ue=s("./node_modules/redux/lib/redux.js"),ce=s("./app/j/utils/createScopedSelector.ts"),pe=(0,ce.Z)("createSet",{isUploading:e=>!(!e.get("diagramImageLuid")||e.get("diagramImage")),setContentType:ae.dn,shouldShowTooltipDiagram:ae.xy}),he=(0,ue.compose)((0,de.connect)(pe,(e=>({actions:(0,ue.bindActionCreators)({uploadImage:ae.Ix},e)})),null,{context:n.tC}),(0,le.Z)())(oe),ge=s("./app/j/create_set/constants.ts"),me=s("./app/j/hocs/lazilyLoadComponent.tsx"),_e=(0,me.Z)((()=>Promise.all([s.e("leaflet"),s.e("common"),s.e("diagram_editor_container_lazy")]).then(s.bind(s,"./app/j/containers/CreateSetDiagramEditorContainer.ts"))),{withSpinner:!0});_e.preload();var fe=(0,ce.Z)("createSet",{container:ae.ZO,setContentType:ae.dn,shouldShowTooltipDiagram:ae.xy}),ve=(0,de.connect)(fe,null,null,{context:n.tC})((e=>{var{container:t}=e;return t===ge.u.EDIT?(0,g.jsx)(_e,{}):(0,g.jsx)(he,{})})),Se=s("./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js"),Ce=s("./app/j/core/default_store/DefaultStoreProvider.tsx"),be=s("./node_modules/lodash/isEmpty.js"),ye=s.n(be),Ee=s("./node_modules/@linaria/core/lib/index.js"),je=s("./node_modules/@quizlet/legacy-css-transition-group/dist/index.js"),xe=s("./app/j/ads/components/Ad.tsx"),Te=s("./app/j/ads/enums/AdsNames.ts"),Ie=s("./app/j/assembly/AssemblyLink.tsx"),we=s("./app/j/assembly/AssemblyNotice.tsx"),Ae=s("./app/j/assembly/buttons/index.ts"),Oe=s("./app/j/components/MenuItemWithIcon.tsx"),Re=s("./app/j/components/SchoolSelectorWithAssembly.tsx"),De=s("./app/j/assembly/AssemblyTextarea.tsx"),Le=s("./node_modules/nullthrows/nullthrows.js"),Pe=s.n(Le),Me=s("./app/j/study-modes/common/components/SpecialCharacterButtonGroup.tsx"),Ze=s("./app/j/utils/AccentHelper.ts"),ke=["hideSpecialChars","languageCodes","specificAccents","textareaRef"],Ue=(0,x.z)("div")({name:"Container",class:"cnufec0"}),Ne=(0,x.z)("div")({name:"Collapsible",class:"c89bze8"});function Fe(e){var t,{hideSpecialChars:s=!1,languageCodes:r=[],specificAccents:i=[],textareaRef:n}=e,o=(0,Se.Z)(e,ke),a=e=>{var t=Pe()(n.current,"Could not find text area component"),s=n.current?n.current.selectionStart:-1,r=n.current?n.current.selectionEnd:-1;if(-1!==r){var i=t.value||"",o=i.slice(0,s)+e+i.slice(r),a=window.document.createEvent("Event");a.initEvent("input",!0,!0);var l=n.current;if(l){var d,u,c=Object.getOwnPropertyDescriptor(l.constructor.prototype,"value");null!=c&&c.set?c.set.call(l,o):l.value=o,l.dispatchEvent(a),d=s+e.length,u=s+e.length,Pe()(n.current,"Missing textarea in setSelectionRange(start, end)").setSelectionRange(d,u)}}};return(0,g.jsxs)(Ue,{children:[(0,g.jsx)(De.Z,Object.assign({},o,{ref:n})),(0,g.jsx)(f.Z,{above:"s",children:(t=(()=>{var e=Ze.Z.getCharactersByLangForLangs(r);return i.length>0&&r.length>0&&(e[r[0]]=i),e})(),ye()(t)?null:(0,g.jsx)(Ne,{className:s?"collapsed":"",children:(0,g.jsx)(Me.Z,{charactersByLang:t,onClickButton:a})}))})]})}s("./.linaria-cache/app/j/components/SpecialCharacterTextarea.linaria.css");var Be=s("./app/j/components/UIDiv.tsx"),He=s("./app/j/components/UILinkButton.tsx"),Ve=s("./app/j/assembly/buttons/types.ts"),Ge=s("./app/j/assembly/modals/index.ts"),We=s("./app/j/i18n/useTranslation.ts");function ze(e){var{currentSchool:t,isModalOpen:s,newSchool:r,onChangeSchool:i,onClose:n,onRemoveSchool:o}=e,{t:a}=(0,We.Z)();return(0,g.jsx)(Ge.g,{isOpen:s,onClose:n,primaryAction:{onClick:()=>{t&&o&&o(t),r&&i&&i(r),n()},text:a("create_set.header.change_school_modal.confirm_btn"),type:"submit",variant:Ve.dN.DANGER},secondaryAction:{onClick:n,text:a("create_set.header.change_school_modal.cancel_btn")},subtitle:a("create_set.header.change_school_modal.description",{currentSchool:null==t?void 0:t.name,newSchool:null==r?void 0:r.name}),title:a("create_set.header.change_school_modal.title")})}function qe(e){var{handleRemoveCourse:t,handleRemoveSchool:s,isModalOpen:r,onClose:i,selectedCourse:n,selectedSchool:o}=e,{t:a}=(0,We.Z)();return(0,g.jsx)(Ge.g,{isOpen:r,onClose:i,primaryAction:{onClick:()=>{n&&o&&(t(n),s(o)),i()},text:a("create_set.header.remove_school_modal.remove_btn"),type:"submit",variant:Ve.dN.DANGER},secondaryAction:{onClick:i,text:a("create_set.header.remove_school_modal.cancel_btn")},subtitle:a("create_set.header.remove_school_modal.description"),title:a("create_set.header.remove_school_modal.title")})}var Ke=s("./app/j/create_set/actions/SetPermissionActionCreators.ts"),Ye=s("./app/j/create_set/constants/SetPermissionConstants.ts");function Qe(e){var{handleClickEditingPermissions:t,handleClickViewablePermissions:s,isUserUnderAge:r,permissions:n,setLuid:o}=e,{t:a}=(0,We.Z)(),d=(0,h.useMemo)((()=>{var{editableBy:e}=n;switch(e){case Ye.mk.EVERYONE:return a("create_set.permissions.editable_by.everyone");case Ye.mk.CLASSES:return a("create_set.permissions.editable_by.certain_classes");case Ye.mk.PASSWORD:return a("create_set.permissions.editable_by.password");case Ye.mk.JUST_ME:return a("create_set.permissions.editable_by.me");default:return null}}),[n,a]),u=(0,h.useMemo)((()=>{var{viewableBy:e}=n;switch(e){case Ye.mk.EVERYONE:return a("create_set.permissions.viewable_by.everyone");case Ye.mk.CLASSES:return a("create_set.permissions.viewable_by.certain_classes");case Ye.mk.PASSWORD:return a("create_set.permissions.viewable_by.password");case Ye.mk.JUST_ME:return a("create_set.permissions.viewable_by.me");default:return null}}),[n,a]),c=(0,h.useMemo)((()=>{var{viewableBy:e}=n;return e===Ye.mk.JUST_ME}),[n]);(0,h.useEffect)((()=>{if(r&&!c){Ke.Z.changePermission(Ye.mA.VIEWING,Ye.mk.JUST_ME),Ke.Z.changePermission(Ye.mA.EDITING,Ye.mk.JUST_ME);var e={accessType:i.iQw.NOT_PUBLIC};F.Z.update(o,e),Ke.Z.persistClassSetsForPermissions(o)}}),[]);var p=(e,t)=>{var s=l()({"CreateSetHeader-permissionWrap":!0,c3pb5pi:r});return(0,g.jsxs)("div",{className:s,children:[(0,g.jsx)("div",{className:"CreateSetHeader-permissionsLink",children:e}),!r&&(0,g.jsx)(Ie.ZP,{onClick:t,text:a("create_set.permissions.change_link")})]})};return(0,g.jsxs)(g.Fragment,{children:[p(u,s),c?null:p(d,t)]})}s("./.linaria-cache/app/j/create_set/components/CreateSetPermissionsControls.linaria.css");s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.string.split.js");var $e=class{constructor(e){void 0===e&&(e=!1),this.isMac=e}getKeyDisplayText(e){switch(e.toLowerCase()){case"command":case"ctrl":case"control":return this.isMac?(0,se.Z)("keyboard_keys.mac.command"):(0,se.Z)("keyboard_keys.control");case"option":case"alt":return this.isMac?(0,se.Z)("keyboard_keys.mac.option"):(0,se.Z)("keyboard_keys.alt");case"shift":return(0,se.Z)("keyboard_keys.shift");case"tab":return(0,se.Z)("keyboard_keys.tab");default:return e.toUpperCase()}}getKeys(e){var t=e;return(t=(t=t.replace(/\s/g,"")).split(",")[0]).split("+").map((e=>this.getKeyDisplayText(e)))}},Xe=s("./app/j/components/UIKbd.tsx"),Je=s("./app/j/create_set/constants/KeyboardConstants.ts");class et extends h.PureComponent{constructor(e){super(e),this.renderRichTextShortcuts=()=>(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"KeyboardShortcuts-shortcut",children:[(0,g.jsx)("span",{className:"KeyboardShortcuts-desc",children:(0,g.jsx)(_.Z,{id:"create_set.keyboard_shortcuts.bold_text"})}),this.renderShortcut(Je.Z.richText.bold)]}),(0,g.jsxs)("div",{className:"KeyboardShortcuts-shortcut",children:[(0,g.jsx)("span",{className:"KeyboardShortcuts-desc",children:(0,g.jsx)(_.Z,{id:"create_set.keyboard_shortcuts.italicize_text"})}),this.renderShortcut(Je.Z.richText.italicize)]}),(0,g.jsxs)("div",{className:"KeyboardShortcuts-shortcut",children:[(0,g.jsx)("span",{className:"KeyboardShortcuts-desc",children:(0,g.jsx)(_.Z,{id:"create_set.keyboard_shortcuts.underline_text"})}),this.renderShortcut(Je.Z.richText.underline)]})]}),this.h=new $e(e.isMac)}renderKey(e,t){return void 0===t&&(t={}),(0,g.jsx)(Xe.Z,Object.assign({},t,{children:e}))}renderSymbol(e,t){return void 0===t&&(t={}),(0,g.jsx)("span",Object.assign({className:"KeyboardShortcuts-symbol"},t,{children:e}))}renderShortcut(e){for(var t,s=this.h.getKeys(e),r=[],i=0;i<s.length;i++)t=s[i],r.push(this.renderKey(t,{key:"key-"+i})),i!==s.length-1&&r.push(this.renderSymbol("+",{key:"key-"+i+"-plus"}));return(0,g.jsx)("span",{className:"KeyboardShortcuts-keyGroup",children:r})}render(){var e=this.renderKey(this.h.getKeyDisplayText("alt"));return(0,g.jsxs)("div",{className:"KeyboardShortcuts-content",children:[(0,g.jsxs)("div",{className:"KeyboardShortcuts-shortcut",children:[(0,g.jsxs)("span",{className:"KeyboardShortcuts-desc",children:[(0,g.jsx)(_.Z,{id:"create_set.keyboard_shortcuts.add_row"}),(0,g.jsx)("small",{className:"KeyboardShortcuts-descSubtext",children:(0,g.jsx)(_.Z,{id:"create_set.keyboard_shortcuts.add_row_hint"})})]}),this.renderShortcut(Je.Z.studiableItem.addItemBelowCurrent)]}),(0,g.jsxs)("div",{className:"KeyboardShortcuts-shortcut",children:[(0,g.jsx)("span",{className:"KeyboardShortcuts-desc",children:(0,g.jsx)(_.Z,{id:"create_set.keyboard_shortcuts.next_side"})}),this.renderShortcut(Je.Z.studiableItem.tab)]}),(0,g.jsxs)("div",{className:"KeyboardShortcuts-shortcut",children:[(0,g.jsx)("span",{className:"KeyboardShortcuts-desc",children:(0,g.jsx)(_.Z,{id:"create_set.keyboard_shortcuts.move_row_up_down"})}),(0,g.jsxs)("span",{className:"KeyboardShortcuts-keyGroup",children:[e,this.renderSymbol("+"),this.renderKey("↑")," / ",this.renderKey("↓")]})]}),(0,g.jsxs)("div",{className:"KeyboardShortcuts-shortcut",children:[(0,g.jsxs)("span",{className:"KeyboardShortcuts-desc",children:[(0,g.jsx)(_.Z,{id:"create_set.keyboard_shortcuts.open_image_gallery"}),(0,g.jsx)("small",{className:"KeyboardShortcuts-descSubtext",children:(0,g.jsx)(_.Z,{id:"create_set.keyboard_shortcuts.open_image_gallery_hint"})})]}),this.renderShortcut(Je.Z.studiableItem.toggleImages)]}),(0,g.jsxs)("div",{className:"KeyboardShortcuts-shortcut",children:[(0,g.jsx)("span",{className:"KeyboardShortcuts-desc",children:(0,g.jsx)(_.Z,{id:"create_set.keyboard_shortcuts.upload_image"})}),this.renderShortcut(Je.Z.studiableItem.toggleUpload)]}),(0,g.jsxs)("div",{className:"KeyboardShortcuts-shortcut",children:[(0,g.jsx)("span",{className:"KeyboardShortcuts-desc",children:(0,g.jsx)(_.Z,{id:"create_set.keyboard_shortcuts.toggle_autosuggest"})}),this.renderShortcut(Je.Z.studiableItem.toggleAutosuggest)]}),(0,g.jsxs)("div",{className:"KeyboardShortcuts-shortcut",children:[(0,g.jsx)("span",{className:"KeyboardShortcuts-desc",children:(0,g.jsx)(_.Z,{id:"create_set.keyboard_shortcuts.open_voice_recording"})}),this.renderShortcut(Je.Z.studiableItem.toggleRecord)]}),this.props.canEditRichText?this.renderRichTextShortcuts():null]})}}var tt,st=s("./node_modules/lodash/throttle.js"),rt=s.n(st),it=s("./node_modules/lodash/keyBy.js"),nt=s.n(it),ot=s("./app/j/assembly/AssemblyInput.tsx"),at=s("./app/j/compatibility/fetch.ts"),lt=s("./app/j/compatibility/logger/useLogger.ts"),dt=s("./app/j/components/AutosuggestWithAssembly.tsx"),ut=s("./app/j/components/T.tsx"),ct=s("./app/j/constants/SearchEventConstants.ts"),pt=s("./app/j/edgy-data/utils.ts"),ht=s("./app/j/global/Rollbar.ts"),gt=s("./app/j/utils/SearchEventLogger.ts"),mt=s("./app/j/utils/VisibilityTracker.tsx"),_t=(0,x.z)("span")({name:"ExistingCourse",class:"e29yge6"}),ft=(0,x.z)("div")({name:"InputWrapper",class:"i1g8wmc7"}),vt=0;function St(e){var{codeEnrollments:t=null,course:s,disabled:r=!1,hasRemove:n=!1,initialSuggestions:o,label:a,onAddCourse:l,onRemoveCourse:d,onSelectCourse:u,placeholder:c,tooltip:p}=e,m=s?(0,pt.WS)(s.name,s.code,null==t?void 0:t.showCourseCode):"",[_,f]=(0,h.useState)(m),[v,S]=(0,h.useState)(!1),[b,y]=(0,h.useState)(!1),[E,j]=(0,h.useState)(o||[]),x=(0,h.useRef)(null),{t:T}=(0,We.Z)(),{logEvent:I,logNavigationEvent:w,logPageAction:A}=(0,lt.wL)(),O={loggers:{logEvent:I,logPageAction:A}};(0,h.useEffect)((()=>{""===_&&E!==o&&j(o||[])}),[o]);var R=e=>e.name,D=()=>{if(p)return{tooltipText:p}},L=(0,h.useCallback)(rt()((e=>{(0,at.lN)("/webapi/3.4/courses/search",{params:{query:e,perPage:5,edgyDataSearch:1}}).then((t=>{var{models:s,scores:r}=t.body.responses[0];tt=nt()(r,"id");var i=!1,n=s.course.map((t=>{var{id:s,code:r,name:n}=t;return i||n.toLowerCase()!==e.toLowerCase()||(i=!0),{id:s,code:r,name:n}}));j(n),y(0===n.length||!i),vt=0})).catch((e=>{ht.Z.error("Error retrieving courses.",e)}))}),300,{trailing:!0}),[]),P=(e,s)=>{gt.ZP.logSelectSuggestion(ct.Z.events.HIT_SELECT_COURSE,s.suggestion.id,ct.Z.targetTypes.COURSE,s.suggestionIndex,O),S(!1),f((0,pt.WS)(s.suggestion.name,s.suggestion.code,null==t?void 0:t.showCourseCode)),u(s.suggestion)},M=(e,t)=>{var{newValue:s}=t;f(s),""===s&&o&&j(o)},Z=()=>{j(o||[])},k=e=>{var{value:t}=e;y(!1),t&&L(t)},U=()=>{w("edgy_data",i.Qje.CREATE,"edgy_data_school_screen_added_new_course"),gt.ZP.logAddNewCourse(O),l(_),f("")},N=()=>{S(!0)},F=e=>{e.preventDefault(),S(!0)},B=e=>{e.preventDefault(),s&&d&&(d(s),S(!1),f(""))},H=()=>{S(!1),""===_&&s&&d&&d(s)},V=e=>{var t,s,{children:r,containerProps:i}=e,n="EdgyDataCourseSelector-suggestionsContainer "+i.className;return(0,g.jsxs)("div",Object.assign({},i,{className:n,children:[r,b&&_&&null!=x&&null!=(t=x.current)&&null!=(s=t.autosuggest)&&s.state.isFocused?(0,g.jsxs)("div",{className:"EdgyDataCourseSelector-addYourOwn",onClick:U,children:[(0,g.jsx)(C.Z,{icon:"plus-thin",size:"small"}),(0,g.jsx)(ut.Z,{id:"edgy_data.collect_courses.form.add_your_own"})]}):null]}))},G=e=>{var s=!!e.code&&(null==t?void 0:t.showCourseCode);return(0,g.jsx)(mt.Z,{once:!0,onIntersect:()=>((e,t)=>{var s;gt.ZP.logSearchImpression({modelId:e.id,modelType:i.BYJ.COURSE,pageDepth:vt++,pageNumber:1,relevanceScore:(s=e.id,tt&&tt[s]&&tt[s].score||0),purchasableType:i.Uo4.FREE},t)})(e,O),threshold:.5,children:()=>(0,g.jsxs)("div",{className:"EdgyDataCourseSelector-suggestion",children:[s?(0,g.jsx)("span",{className:"EdgyDataCourseSelector-suggestionCode",children:e.code}):null,(0,g.jsx)("span",{className:"EdgyDataCourseSelector-suggestionName",children:e.name})]})},e.id)};return s&&!v?void 0===s?null:(0,g.jsxs)(_t,{children:[(0,g.jsx)(ft,{onClick:N,children:(0,g.jsx)(ot.Z,{label:a,value:(0,pt.WS)(s.name,s.code,null==t?void 0:t.showCourseCode)})}),n&&s?(0,g.jsx)(Ie.ZP,{onClick:B,rightIcon:"x",variant:Ie.U_.Secondary}):null]}):r?(0,g.jsx)(ot.Z,{contextualInfo:D(),disabled:!0,label:a}):(0,g.jsx)("div",{className:"EdgyDataCourseSelector",children:(0,g.jsx)(dt.Z,{getSuggestionValueForInput:R,inputAttributes:{autoFocus:v,contextualInfo:D(),onFocus:F},inputValue:v||s?_:"",label:a||T("edgy_data.collect_courses.search.placeholder"),onInputBlur:H,onInputChange:M,onSuggestionsClearRequested:Z,onSuggestionSelected:P,onSuggestionsFetchRequested:k,placeholder:c,ref:x,renderSuggestion:G,renderSuggestionsContainer:V,shouldRenderSuggestions:()=>!!E,suggestions:E})})}s("./.linaria-cache/app/j/edgy-data/components/EdgyDataCourseSelector.linaria.css");var Ct=s("./app/j/edgy-data/hooks/useEdgyScreen.ts"),bt=s("./app/j/edgy-data/types.ts"),yt=s("./app/j/global/Quizlet.ts"),Et=s("./app/j/hocs/stickyHeaderStateDecorator.tsx"),jt=s("./app/j/i18n/displayHumanTime.ts"),xt=s("./node_modules/immutable/dist/immutable.js"),Tt=s("./node_modules/polished/dist/polished.cjs.js"),It=s("./app/j/study-modes/common/components/SpecialCharacterInput.tsx"),wt=s("./app/j/utils/FontSize.ts"),At=s("./app/j/utils/getDimensions.ts"),Ot=s("./app/j/utils/LogCreateSetNavigationClick.ts"),Rt=(0,x.z)("div")({name:"Content",class:"c1ob9zsr"}),Dt=(0,x.z)("div")({name:"HeaderInput",class:"h173eb8f"}),Lt=window.document.querySelector(".SiteHeader")?(0,wt.k)(104):(0,wt.k)(24),Pt=(0,wt.k)(50);class Mt extends h.PureComponent{constructor(e){var t;super(e),t=this,this.titleInput=h.createRef(),this.descriptionTextarea=h.createRef(),this.handleImportClick=e=>{(0,Ot.Z)("import",{loggerConfig:this.props.loggerConfig}),this.props.onOpenImport&&this.props.onOpenImport(e)},this.handleFlipTermsDefinitionsClick=e=>{(0,Ot.Z)("flip_terms_definitions",{loggerConfig:this.props.loggerConfig}),this.props.onFlipColumn&&this.props.onFlipColumn(e)},this.handleToggleAutosuggest=()=>{var{isAutosuggestionEnabled:e,onToggleAutosuggest:t}=this.props,s=e?"autosuggest_off":"autosuggest_on";(0,Ot.Z)(s,{loggerConfig:this.props.loggerConfig}),t()},this.handleAddNewCourse=()=>{(0,u.Pv)(this.props.loggerConfig,"create_set_course_clicked_add_new",{set_id:this.props.set.id}),this.props.actions.setEdgyDataModalOptions({startScreen:Ct.Ql.COLLECT_COURSES,shouldRedirectOnEnd:!1}),this.props.actions.setEdgyDataModalOpen(!0)},this.handleRemoveCourse=e=>{if((0,u.Pv)(this.props.loggerConfig,"create_set_course_removed",{course_id:e.id,set_id:this.props.set.id}),this.state.preselectedCourse)this.setState({preselectedCourse:null});else{var{actions:t,set:s}=this.props,r={courseId:e.id,setId:s.id};t.removeCourseTagFeedback(r)}},this.handleSelectCourse=e=>{var{actions:t,set:s}=this.props;(0,u.Pv)(this.props.loggerConfig,"create_set_course_added",{course_id:e.id,set_id:this.props.set.id}),t.selectCourse(e),s.id?this.tagSetWithCourse(e):this.setState({preselectedCourse:e})},this.tagSetWithCourse=function(e,s){void 0===s&&(s=t.props.set);var{actions:r}=t.props,i={tagId:e.id,setId:s.id,user:yt.Z.user||null};r.saveAndRefreshTagFeedback(i)},this.handleConfirmSelectSchool=e=>{var{selectedSchool:t}=this.props;t?(null==t?void 0:t.id)!==e.id?this.setState({isConfirmChangeSchoolModal:!0,newSchool:e}):this.setState({preselectedSchool:t}):this.handleSelectSchool(e)},this.handleCloseConfirmSelectSchool=()=>{this.setState({isConfirmChangeSchoolModal:!1,newSchool:null})},this.handleSelectSchool=e=>{(0,u.Pv)(this.props.loggerConfig,"create_set_school_added",{school_id:e.id,set_id:this.props.set.id}),this.props.actions.selectSchool(e),this.tagSet(),this.props.actions.setCourseEnrollments()},this.handleAddNewSchool=()=>{(0,u.Pv)(this.props.loggerConfig,"create_set_school_clicked_add_new",{set_id:this.props.set.id}),this.props.actions.setEdgyDataModalOptions({startScreen:Ct.Ql.COLLECT_SCHOOL,shouldRedirectOnEnd:!1}),this.props.actions.setEdgyDataModalOpen(!0)},this.handleRemoveSchool=e=>{this.getCourse()?this.setState({isConfirmRemoveSchoolModal:!0}):this.removeSelectedSchool(e)},this.handleCloseConfirmRemoveSchoolModal=()=>{this.setState({isConfirmRemoveSchoolModal:!1})},this.getSetUrl=()=>"/"+this.props.set.id,this.handleFocusDescription=()=>{this.setState({isDescriptionActive:!0})},this.handleChangeDescription=e=>{this.setState({description:e.currentTarget.value})},this.handleBlurDescription=e=>{var t=e.currentTarget.value;(t||this.props.set.description)&&t!==this.props.set.description&&(this.updateAction({description:t}),(0,u.Pv)(this.props.loggerConfig,"create_set_description_added",{description:t,set_id:this.props.set.id})),this.setState({isDescriptionActive:!1})},this.handleFocusTitle=()=>{F.Z.focusTitle(),this.setState({isTitleActive:!0})},this.handleChangeTitle=e=>{this.setState({title:e.currentTarget.value})},this.handleBlurTitle=e=>{var t=e.currentTarget.value;!t&&this.props.set.isPublished()||((t||this.props.set.title)&&t!==this.props.set.title&&this.updateAction({title:t},((e,t)=>{var s=this.state.preselectedCourse;s&&this.tagSetWithCourse(s,t)})),this.setState({isTitleActive:!1}))},this.handleOpenViewablePermissions=()=>this.props.onOpenPermissions(Ye.mA.VIEWING),this.handleOpenEditingPermissions=()=>this.props.onOpenPermissions(Ye.mA.EDITING),this.renderPageTitle=()=>{if(!this.props.isPublished)return(0,g.jsx)(_.Z,{id:"create_set.header.title"});var e=this.getSetUrl();return this.props.shouldShowAd?(0,g.jsx)(Ie.ZP,{leftIcon:"wedge-left",linkTo:e,text:(0,se.Z)("create_set.header.back_to_set")}):(0,g.jsx)(He.Z,{"aria-label":(0,se.Z)("create_set.header.back_to_set"),linkTo:e,children:(0,g.jsx)(_.Z,{id:"create_set.header.back_to_set"})})},this.renderDescriptionError=()=>this.hasDescriptionProfanityError()?(0,g.jsx)(_.Z,{id:"create_set.header.set_description.profanity_error"}):null,this.renderTitleError=()=>this.hasTitleError()?this.hasTitleRequiredError()?(0,se.Z)("create_set.header.set_title_error.missing"):this.hasTitleProfanityError()?(0,se.Z)("create_set.header.set_title_error.profane"):(0,se.Z)("create_set.header.set_title_error.unknown"):null,this.renderStatus=()=>{var e;if(this.props.isSyncing)e=(0,g.jsx)(_.Z,{id:"create_set.header.saving"});else{if(!this.props.lastSavedTimestamp)return null;e=(0,g.jsx)(_.Z,{id:"create_set.header.last_saved_terms",numTermsSaved:this.props.numTermsSaved,timeAgo:(0,jt.Z)(se.Z,Math.floor(this.props.lastSavedTimestamp/1e3))})}return(0,g.jsx)("div",{className:"CreateSetHeader-status",children:e})},this.renderCreateSetValidationErrors=()=>(0,g.jsx)("div",{className:"CreateSetHeader-setValidationErrors",children:(0,g.jsxs)(we.Z,{children:[this.props.setValidationBoxedErrors,this.hasDiagramImageUploadError()?(0,g.jsx)("div",{children:this.props.diagramImageUploadError}):null]})}),this.updateAction=function(e,s,r){return void 0===s&&(s=()=>{}),void 0===r&&(r=!0),F.Z.update(t.props.setLuid,e,s,r)},this.handleClickTitleInput=()=>{var e,t;null==(e=this.titleInput)||null==(t=e.current)||t.focus()},this.handleClickDescriptionTextarea=()=>{var e,t,s;null!=(e=this.descriptionTextarea)&&e.current&&(null==(t=this.descriptionTextarea)||null==(s=t.current)||s.focus())},this.hasDescriptionProfanityError=()=>!!this.props.setProfanityErrors.description,this.hasTitleRequiredError=()=>!!this.props.setValidationErrors.requires_title,this.hasTitleProfanityError=()=>this.props.setProfanityErrors.title,this.hasTitleError=()=>this.hasTitleRequiredError()||this.hasTitleProfanityError(),this.hasDiagramImageUploadError=()=>!!this.props.diagramImageUploadError,this.removeSelectedSchool=e=>{this.setState({preselectedSchool:null}),(0,u.Pv)(this.props.loggerConfig,"create_set_school_removed",{school_id:e.id,set_id:this.props.set.id})},this.state={description:this.props.set.description,isConfirmChangeSchoolModal:!1,isConfirmRemoveSchoolModal:!1,isDescriptionActive:!1,isTitleActive:!1,newSchool:null,preselectedCourse:this.props.preselectedCourse,preselectedSchool:this.props.selectedSchool,shouldAnimateHeader:!1,title:this.props.set.title},this.props.set.id&&this.props.actions.fetchEdgyTagFeedback(this.props.set.id)}tagSet(){var e=this.getCourse();e&&this.tagSetWithCourse(e)}componentDidMount(){this.updateLastSyncedTimer=null,this.stickyHeaderRef&&F.Z.updateStickyHeaderHeight((0,At.Z)(this.stickyHeaderRef).height),this.maybeFocusTitle(),this.props.actions.setCourseEnrollments()}componentDidUpdate(e){var t,s;this.props.selectedSchool&&(null==(t=e.selectedSchool)?void 0:t.id)!==(null==(s=this.props.selectedSchool)?void 0:s.id)&&this.setState({preselectedSchool:this.props.selectedSchool}),this.state.preselectedCourse&&ye()(e.edgySetTags)&&!ye()(this.props.edgySetTags)&&this.setState({preselectedCourse:null})}UNSAFE_componentWillReceiveProps(e){this.setState({shouldAnimateHeader:this.props.isSticky&&this.props.hasFocusedInput&&!e.hasFocusedInput}),e.lastSavedTimestamp&&(null!==this.updateLastSyncedTimer&&clearInterval(this.updateLastSyncedTimer),this.updateLastSyncedTimer=window.setInterval((()=>this.forceUpdate()),6e4))}componentWillUnmount(){null!==this.updateLastSyncedTimer&&clearInterval(this.updateLastSyncedTimer)}shouldShowHeaderAd(){return this.props.isSticky}renderCreateSetHeaderStaticAd(){return(0,g.jsx)(xe.Z,{id:Te.h.CREATE_SET_HEADER})}renderCreateSetHeaderAd(){return(0,g.jsx)("div",{className:"CreateSetHeader-adz",children:(0,g.jsx)(f.Z,{above:"m",children:(0,g.jsx)("div",{className:"CreateSetHeader-adzContainer",children:(0,g.jsx)("div",{className:"CreateSetHeader-adzWrapper",children:this.shouldShowHeaderAd()?this.renderCreateSetHeaderStaticAd():null})})})})}renderHeadingContent(){return(0,g.jsx)(S.Z,{children:(0,g.jsxs)(Rt,{children:[(0,g.jsx)(Dt,{className:(0,Ee.cx)("t1m1tupm"),onClick:this.handleClickTitleInput,children:this.renderTitleTextField()}),(0,g.jsx)(Dt,{className:(0,Ee.cx)("d1v2q8ty"),onClick:this.handleClickDescriptionTextarea,children:this.renderDescriptionTextField()}),this.renderEdgyData()]})})}renderHeader(e){return(0,g.jsxs)("div",{className:e,onDragOver:this.props.onDragOver,children:[(0,g.jsx)("div",{className:"CreateSetHeader-stickyPlaceholder",children:(0,g.jsx)("div",{className:"CreateSetHeader-sticky",ref:e=>{this.stickyHeaderRef=e},children:this.renderHeading()})}),this.renderHeadingContent(),this.renderBottomActionBar(),(0,g.jsx)(S.Z,{children:(0,g.jsx)(je.uH,{transitionEnterTimeout:500,transitionLeaveTimeout:500,transitionName:"CreateSetHeader-animateSetValidationErrors",children:this.props.setValidationBoxedErrors||this.hasDiagramImageUploadError()?this.renderCreateSetValidationErrors():null})})]})}renderMoreMenu(){return(0,g.jsxs)("div",{className:"CreateSetHeader-moreMenu",children:[(0,g.jsx)(Oe.Z,{icon:"system-upload",iconSize:"xlarge",onClick:this.handleImportClick,text:(0,g.jsx)(_.Z,{id:"create_set.header.actions.more.import"})},"import"),(0,g.jsx)("div",{className:"CreateSetHeader-menuDivider"}),this.props.shouldShowFlipTermsMenu?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(Oe.Z,{disabled:!this.props.canFlipColumns,icon:"system-flip",iconSize:"xlarge",onClick:this.handleFlipTermsDefinitionsClick,text:(0,g.jsx)(_.Z,{id:"create_set.header.actions.more.flip_terms"})},"flipTerms"),(0,g.jsx)("div",{className:"CreateSetHeader-menuDivider"})]}):null,(0,g.jsx)(Oe.Z,{icon:this.props.isAutosuggestionEnabled?"system-toggle-on":"system-toggle-off",iconSize:"xlarge",onClick:this.handleToggleAutosuggest,text:this.props.isAutosuggestionEnabled?(0,se.Z)("create_set.term_context.tooltips.auto_suggestions_off"):(0,se.Z)("create_set.term_context.tooltips.auto_suggestions_on")},"autosuggestion")]})}renderMobileOptions(){return this.props.isUserUnderAge?null:(0,g.jsx)(Ae.JZ,{alt:"options",icon:"options",onClick:this.props.onOpenMobileOptionsModal,shape:"circle"})}renderHeading(){return(0,g.jsx)(S.Z,{children:(0,g.jsxs)("div",{className:"CreateSetHeader-heading",children:[(0,g.jsxs)("div",{className:"CreateSetHeader-headingText",children:[(0,g.jsx)("div",{className:"CreateSetHeader-title",children:this.renderPageTitle()}),this.renderStatus()]}),this.props.shouldShowAd?this.renderCreateSetHeaderAd():null,(0,g.jsx)("div",{className:"CreateSetHeader-infoButtonWrap",children:(0,g.jsx)(f.Z,{above:"s",children:e=>e||this.props.isSticky?this.props.publishButton:this.renderMobileOptions()})})]})})}renderTitleTextField(){return(0,g.jsx)(It.Z,{disabled:this.props.viewOnly,hideSpecialChars:!this.state.isTitleActive,inputRef:this.titleInput,invalid:this.hasTitleRequiredError()||this.hasTitleProfanityError()||void 0,label:this.renderTitleError()||(0,se.Z)("create_set.header.set_title"),languageCodes:[this.props.set.wordLang,this.props.set.defLang],maxLength:255,onBlur:this.handleBlurTitle,onChange:this.handleChangeTitle,onFocus:this.handleFocusTitle,placeholder:(0,se.Z)("create_set.header.set_title_placeholder"),specificAccents:[],value:this.state.title})}renderEdgyData(){var e=this.getCourse(),{selectedSchool:t}=this.props,{isConfirmChangeSchoolModal:s,isConfirmRemoveSchoolModal:r,newSchool:i,preselectedSchool:n}=this.state;return(0,g.jsxs)("div",{className:(0,Ee.cx)("e1aqfemz"),children:[this.renderSchoolField(),this.renderCourseField(),(0,g.jsx)(qe,{handleRemoveCourse:this.handleRemoveCourse,handleRemoveSchool:this.removeSelectedSchool,isModalOpen:r,onClose:this.handleCloseConfirmRemoveSchoolModal,selectedCourse:e,selectedSchool:n}),(0,g.jsx)(ze,{currentSchool:t,isModalOpen:s,newSchool:i,onChangeSchool:this.handleSelectSchool,onClose:this.handleCloseConfirmSelectSchool,onRemoveSchool:this.props.actions.removeSchool})]})}getCourse(){var{preselectedCourse:e}=this.state;if(e)return e;var{edgySetTags:t}=this.props;return t&&0!==t.length?t[0].course:null}getCoursePlaceholder(){var{courseEnrollments:e,courses:t}=this.props;return null!=e&&e.showCourseCode&&t.length>0?(0,se.Z)("create_set.header.course.placeholder_with_code_and_courses"):t.length>0?(0,se.Z)("create_set.header.course.placeholder_with_courses"):null!=e&&e.showCourseCode?(0,se.Z)("create_set.header.course.placeholder_with_code"):(0,se.Z)("create_set.header.course.placeholder")}renderCourseField(){var e=this.getCourse(),{courseEnrollments:t}=this.props,{preselectedSchool:s}=this.state;return(0,g.jsx)(Dt,{className:"cia7d2e",children:(0,g.jsx)(St,{codeEnrollments:t,course:e||void 0,disabled:!s&&!e,hasRemove:!0,initialSuggestions:this.props.courses,label:(0,se.Z)("create_set.header.course.label"),onAddCourse:this.handleAddNewCourse,onRemoveCourse:this.handleRemoveCourse,onSelectCourse:this.handleSelectCourse,placeholder:this.getCoursePlaceholder(),tooltip:(0,se.Z)("create_set.header.course.tooltip")})})}getSchools(e){return(0,xt.OrderedMap)(e?[[e.id,e]]:[])}renderSchoolField(){var{preselectedSchool:e}=this.state;return(0,g.jsx)(Dt,{className:"s12ui71j",children:(0,g.jsx)(Re.Z,{isAddingNewSchool:!1,label:(0,se.Z)("create_set.header.school.placeholder"),newSchool:null,onClickSelectAnotherSchoolPrompt:()=>{},onClickSelectExistingSchoolPrompt:()=>{},onRemoveSchool:this.handleRemoveSchool,onSelectAddSchool:this.handleAddNewSchool,onSelectAnotherSchool:this.handleConfirmSelectSchool,onUpdateNewSchoolField:()=>{},preventRemoval:!0,removeVariant:bt.K1.icon,schools:this.getSchools(e),tooltip:(0,se.Z)("create_set.header.school.tooltip")})})}renderDescriptionTextField(){return(0,g.jsx)(Fe,{hideSpecialChars:!this.state.isDescriptionActive,invalid:this.hasDescriptionProfanityError()||void 0,label:(0,se.Z)("create_set.header.set_description.label"),languageCodes:[this.props.set.wordLang,this.props.set.defLang],minHeight:(0,Tt.hO)(120),onBlur:this.handleBlurDescription,onChange:this.handleChangeDescription,onFocus:this.handleFocusDescription,placeholder:(0,se.Z)("create_set.header.set_description.placeholder"),specificAccents:[],textareaRef:this.descriptionTextarea,type:"autoExpand",value:this.state.description})}renderBottomActionBar(){return(0,g.jsx)(S.Z,{children:(0,g.jsxs)(Be.Z,{className:"CreateSetHeader-permissionsAndImport",children:["practice-questions"===this.props.setContentType?null:(0,g.jsx)(Ie.ZP,{onClick:this.props.onOpenImport,text:(0,se.Z)("create_set.header.import_link")}),(0,g.jsxs)("div",{className:"CreateSetHeader-permissionsWrap",children:[(0,g.jsx)(Qe,{handleClickEditingPermissions:this.handleOpenEditingPermissions,handleClickViewablePermissions:this.handleOpenViewablePermissions,isUserUnderAge:this.props.isUserUnderAge,permissions:this.props.permissions,setLuid:this.props.setLuid}),(0,g.jsx)(f.Z,{above:"s",children:(0,g.jsx)("div",{className:"CreateSetHeader-permissionWrap",children:"practice-questions"===this.props.setContentType?null:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.Z,{icon:"switch",iconProps:{disabled:!this.props.canFlipColumns},onClick:this.props.onFlipColumn,tooltipPosition:"bottom right",tooltipText:(0,se.Z)("create_set.header.flip_columns_tooltip")}),(0,g.jsx)(c.Z,{icon:"keyboard",menu:(0,g.jsx)(et,{canEditRichText:this.props.canEditRichText,isMac:this.props.isMac}),popoverPosition:"bottom right",tooltipPosition:"bottom right",tooltipText:(0,se.Z)("create_set.header.keyboard_shortcuts_tooltip")})]})})})]})]})})}render(){var e=l()("CreateSetHeader",{"is-fadingIn":this.state.shouldAnimateHeader,"is-sticky":this.props.isSticky}),t=e+" has-adz";return(0,g.jsx)(f.Z,{above:"m",children:s=>s&&this.props.shouldShowAd?this.renderHeader(t):this.renderHeader(e)})}isSetPrivate(){return this.props.permissions.viewableBy!==Ye.mk.EVERYONE}maybeFocusTitle(){var e,t;this.props.isPublished||this.props.isResumingCreate||(null==(e=this.titleInput)||null==(t=e.current)||t.focus())}}var Zt=(0,Et.Z)({headerOffsetTop:Lt,headerOffsetTopMobile:Pt})(Mt);s("./.linaria-cache/app/j/create_set/components/CreateSetHeader.linaria.css");var kt=s("./app/j/components/DeprecatedSpecialCharacterTextarea.tsx"),Ut=s("./app/j/components/UINotice.tsx"),Nt=window.document.querySelector(".SiteHeader")?(0,wt.k)(104):(0,wt.k)(24),Ft=(0,wt.k)(50);class Bt extends h.PureComponent{constructor(){var e;super(...arguments),e=this,this.state={description:this.props.set.description,shouldAnimateHeader:!1,title:this.props.set.title},this.handleCloseCreateSet=()=>(0,Ot.Z)("create_set_close",{loggerConfig:this.props.loggerConfig}),this.handleMoreMenuClick=()=>(0,Ot.Z)("more_menu",{loggerConfig:this.props.loggerConfig}),this.handleKeyboardClick=()=>(0,Ot.Z)("keyboard",{loggerConfig:this.props.loggerConfig}),this.handleImportClick=e=>{(0,Ot.Z)("import",{loggerConfig:this.props.loggerConfig}),this.props.onOpenImport&&this.props.onOpenImport(e)},this.handleFlipTermsDefinitionsClick=e=>{(0,Ot.Z)("flip_terms_definitions",{loggerConfig:this.props.loggerConfig}),this.props.onFlipColumn&&this.props.onFlipColumn(e)},this.handleToggleAutosuggest=()=>{var{isAutosuggestionEnabled:e,onToggleAutosuggest:t}=this.props,s=e?"autosuggest_off":"autosuggest_on";(0,Ot.Z)(s,{loggerConfig:this.props.loggerConfig}),t()},this.handleLockClick=()=>{(0,Ot.Z)("lock",{loggerConfig:this.props.loggerConfig}),this.onOpenViewablePermissions()},this.getSetUrl=()=>"/"+this.props.set.id,this.onChangeDescription=e=>{this.setState({description:e.currentTarget.value})},this.onBlurDescription=e=>{var t=e.currentTarget.value;(t||this.props.set.description)&&t!==this.props.set.description&&(this.updateAction({description:t}),(0,u.Pv)(this.props.loggerConfig,"create_set_description_added",{description:t,set_id:this.props.set.id}))},this.onFocusTitle=()=>{F.Z.focusTitle()},this.onChangeTitle=e=>{this.setState({title:e.currentTarget.value})},this.onBlurTitle=e=>{var t=e.currentTarget.value;if(t||!this.props.set.isPublished())return(t||this.props.set.title)&&t!==this.props.set.title?this.updateAction({title:t}):void 0},this.onOpenViewablePermissions=()=>this.props.onOpenPermissions(Ye.mA.VIEWING),this.onOpenEditingPermissions=()=>this.props.onOpenPermissions(Ye.mA.EDITING),this.onClickEditDescription=e=>(e.preventDefault(),this.props.onOpenSetDescription()),this.renderPageTitle=()=>{if(!this.props.isPublished)return(0,g.jsx)(_.Z,{id:"create_set.header.title"});var e=this.getSetUrl();return this.props.shouldShowAd?(0,g.jsxs)(I.Z,{to:e,children:[(0,g.jsx)(C.Z,{className:"CreateSetHeader-backIcon",icon:"wedge-left"}),(0,g.jsx)("span",{className:"CreateSetHeader-backText",children:(0,g.jsx)(_.Z,{id:"create_set.header.back_to_set"})})]}):(0,g.jsx)(He.Z,{"aria-label":(0,se.Z)("create_set.header.back_to_set"),linkTo:e,children:(0,g.jsx)(_.Z,{id:"create_set.header.back_to_set"})})},this.renderDescriptionError=()=>this.hasDescriptionProfanityError()?(0,g.jsx)(_.Z,{id:"create_set.header.set_description.profanity_error"}):null,this.renderTitleError=()=>this.hasTitleError()?this.hasTitleRequiredError()?(0,g.jsx)(_.Z,{id:"create_set.header.set_title_error.missing"}):this.hasTitleProfanityError()?(0,g.jsx)(_.Z,{id:"create_set.header.set_title_error.profane"}):(0,g.jsx)(_.Z,{id:"create_set.header.set_title_error.unknown"}):null,this.renderStatus=()=>{var e;if(this.props.isSyncing)e=(0,g.jsx)(_.Z,{id:"create_set.header.saving"});else{if(!this.props.lastSavedTimestamp)return null;e=(0,te.P)(this.props.setContentType)?(0,g.jsx)(_.Z,{id:"create_set.header.all_changes_saved"}):(0,g.jsx)(_.Z,{id:"create_set.header.last_saved_terms",numTermsSaved:this.props.numTermsSaved,timeAgo:(0,jt.Z)(se.Z,Math.floor(this.props.lastSavedTimestamp/1e3))})}return(0,g.jsx)("div",{className:"CreateSetHeader-status",children:e})},this.renderCreateSetValidationErrors=()=>(0,g.jsx)("div",{className:"CreateSetHeader-setValidationErrors",children:(0,g.jsxs)(Ut.Z,{boxed:!0,icon:(0,te.P)(this.props.setContentType)?(0,g.jsx)(C.Z,{icon:"system-report",size:"xlarge"}):null,uppercaseDeprecated:!0,variant:(0,te.P)(this.props.setContentType)?"alertClean":"alert",children:[this.props.setValidationBoxedErrors,this.hasDiagramImageUploadError()?(0,g.jsx)("div",{children:this.props.diagramImageUploadError}):null]})}),this.updateAction=function(t,s,r){return void 0===s&&(s=()=>{}),void 0===r&&(r=!0),F.Z.update(e.props.setLuid,t,s,r)},this.focusTitleTextarea=()=>{this.titleTextarea.focus()},this.focusDescriptionTextarea=()=>{this.descriptionTextarea&&this.descriptionTextarea.focus()},this.hasDescriptionProfanityError=()=>!!this.props.setProfanityErrors.description,this.hasTitleRequiredError=()=>!!this.props.setValidationErrors.requires_title,this.hasTitleProfanityError=()=>this.props.setProfanityErrors.title,this.hasTitleError=()=>this.hasTitleRequiredError()||this.hasTitleProfanityError(),this.hasDiagramImageUploadError=()=>!!this.props.diagramImageUploadError}componentDidMount(){this.updateLastSyncedTimer=null,this.stickyHeaderRef&&F.Z.updateStickyHeaderHeight((0,At.Z)(this.stickyHeaderRef).height)}UNSAFE_componentWillReceiveProps(e){this.setState({shouldAnimateHeader:this.props.isSticky&&this.props.hasFocusedInput&&!e.hasFocusedInput}),e.lastSavedTimestamp&&(null!==this.updateLastSyncedTimer&&clearInterval(this.updateLastSyncedTimer),this.updateLastSyncedTimer=window.setInterval((()=>this.forceUpdate()),6e4))}componentWillUnmount(){null!==this.updateLastSyncedTimer&&clearInterval(this.updateLastSyncedTimer)}shouldShowHeaderAd(){return this.props.isSticky}renderCreateSetHeaderStaticAd(){return(0,g.jsx)(xe.Z,{id:Te.h.CREATE_SET_HEADER})}renderCreateSetHeaderAd(){return(0,g.jsx)("div",{className:"CreateSetHeader-adz",children:(0,g.jsx)(f.Z,{above:"m",children:(0,g.jsx)("div",{className:"CreateSetHeader-adzContainer",children:(0,g.jsx)("div",{className:"CreateSetHeader-adzWrapper",children:this.shouldShowHeaderAd()?this.renderCreateSetHeaderStaticAd():null})})})})}renderHeadingContent(){return(0,g.jsx)(S.Z,{children:(0,g.jsxs)("div",{className:"CreateSetHeader-headingContent",children:[(0,g.jsx)("div",{className:"CreateSetHeader-textarea CreateSetHeader-title",onClick:this.focusTitleTextarea,children:(0,te.P)(this.props.setContentType)?this.renderTitleTextFieldWithTooltip():this.renderTitleTextField()}),(0,g.jsx)("div",{className:"CreateSetHeader-textarea CreateSetHeader-description",onClick:this.focusDescriptionTextarea,children:this.renderDescriptionTextField()}),(0,te.P)(this.props.setContentType)?this.renderCleanBottomActionBar():null]})})}renderHeader(e){return(0,g.jsxs)("div",{className:e,onDragOver:this.props.onDragOver,children:[(0,g.jsx)("div",{className:"CreateSetHeader-stickyPlaceholder",children:(0,g.jsx)("div",{className:"CreateSetHeader-sticky",ref:e=>{this.stickyHeaderRef=e},children:this.renderHeading()})}),this.renderHeadingContent(),(0,te.P)(this.props.setContentType)?null:this.renderBottomActionBar(),(0,g.jsx)(S.Z,{children:(0,g.jsx)(je.uH,{transitionEnterTimeout:500,transitionLeaveTimeout:500,transitionName:"CreateSetHeader-animateSetValidationErrors",children:this.props.setValidationBoxedErrors||this.hasDiagramImageUploadError()?this.renderCreateSetValidationErrors():null})})]})}renderHeading(){return(0,te.P)(this.props.setContentType)?this.renderCleanHeading():this.renderDefaultHeading()}renderMoreMenu(){return(0,g.jsxs)("div",{className:"CreateSetHeader-moreMenu",children:[(0,g.jsx)(Oe.Z,{icon:"system-upload",iconSize:"xlarge",onClick:this.handleImportClick,text:(0,g.jsx)(_.Z,{id:"create_set.header.actions.more.import"})},"import"),(0,g.jsx)("div",{className:"CreateSetHeader-menuDivider"}),this.props.shouldShowFlipTermsMenu?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(Oe.Z,{disabled:!this.props.canFlipColumns,icon:"system-flip",iconSize:"xlarge",onClick:this.handleFlipTermsDefinitionsClick,text:(0,g.jsx)(_.Z,{id:"create_set.header.actions.more.flip_terms"})},"flipTerms"),(0,g.jsx)("div",{className:"CreateSetHeader-menuDivider"})]}):null,(0,g.jsx)(Oe.Z,{icon:this.props.isAutosuggestionEnabled?"system-toggle-on":"system-toggle-off",iconSize:"xlarge",onClick:this.handleToggleAutosuggest,text:this.props.isAutosuggestionEnabled?(0,se.Z)("create_set.term_context.tooltips.auto_suggestions_off"):(0,se.Z)("create_set.term_context.tooltips.auto_suggestions_on")},"autosuggestion")]})}renderCleanHeading(){return(0,g.jsx)(S.Z,{isFullBleed:!0,children:(0,g.jsxs)("div",{className:"CreateSetHeader-cleanHeading",children:[(0,g.jsxs)("div",{className:"CreateSetHeader-cleanHeadingActionsClose",children:[(0,g.jsx)(I.Z,{onClick:this.handleCloseCreateSet,to:this.props.isPublished?this.getSetUrl():"/",variant:"revert",children:(0,g.jsx)(C.Z,{alt:this.props.isPublished?(0,se.Z)("create_set.header.back_to_set"):(0,se.Z)("create_set.header.close"),icon:"system-x",size:"xlarge"})}),this.renderStatus()]}),this.props.shouldShowAd&&this.renderCreateSetHeaderAd(),(0,g.jsxs)("div",{className:"CreateSetHeader-cleanHeadingActionsControls",children:[(0,g.jsx)(c.Z,{extraClassNames:"UIPopover--clean",icon:"system-more-vertical",iconProps:{variant:"borderless",size:"xlarge"},isHigherZIndex:!0,menu:this.renderMoreMenu(),menuTriggerActionOn:"click",onClick:this.handleMoreMenuClick,popoverPosition:"bottom right",tooltipText:(0,se.Z)("folders.specific_folder.page_header_new.action_tooltips.more")}),(0,g.jsx)(f.Z,{above:"s",children:(0,g.jsx)(c.Z,{extraClassNames:"UIPopover--clean",icon:"system-keyboard",iconProps:{variant:"borderless",size:"xlarge"},isHigherZIndex:!0,menu:(0,g.jsx)(et,{canEditRichText:this.props.canEditRichText,isMac:this.props.isMac}),menuTriggerActionOn:"click",onClick:this.handleKeyboardClick,popoverPosition:"bottom right",tooltipText:(0,se.Z)("create_set.header.keyboard_shortcuts_tooltip")})}),this.props.publishButton]})]})})}renderDefaultHeading(){return(0,g.jsx)(S.Z,{children:(0,g.jsxs)("div",{className:"CreateSetHeader-heading",children:[(0,g.jsxs)("div",{className:"CreateSetHeader-headingText",children:[(0,g.jsx)("div",{className:"CreateSetHeader-title",children:this.renderPageTitle()}),this.renderStatus()]}),this.props.shouldShowAd?this.renderCreateSetHeaderAd():null,(0,g.jsx)("div",{className:"CreateSetHeader-infoButtonWrap",children:(0,g.jsx)(f.Z,{above:"s",children:e=>e||this.props.isSticky?this.props.publishButton:!this.props.isUserUnderAge&&(0,g.jsx)(k.Z,{icon:"options",onClick:this.props.onOpenMobileOptionsModal})})})]})})}renderTitleTextFieldWithTooltip(){return(0,g.jsx)(y.Z,{beforeOpen:this.hasTitleRequiredError,overlay:(0,g.jsx)(j.Z,{variant:"microBlack",children:(0,g.jsx)(_.Z,{id:"create_set.header.title_tooltip"})}),position:"top left",triggerAction:"hover",children:this.renderTitleTextField()})}renderTitleTextField(){return(0,g.jsx)(kt.Z,{autoFocus:!this.props.isPublished&&!this.props.isResumingCreate,disabled:this.props.viewOnly,invalid:this.hasTitleRequiredError()||this.hasTitleProfanityError()||void 0,label:this.renderTitleError()||(0,g.jsx)(_.Z,{id:"create_set.header.set_title"}),languageCodes:[this.props.set.wordLang,this.props.set.defLang],maxLength:255,onBlur:this.onBlurTitle,onChange:this.onChangeTitle,onFocus:this.onFocusTitle,placeholder:(0,te.P)(this.props.setContentType)?(0,se.Z)("create_set.header.set_title_placeholder_start_typing"):(0,se.Z)("create_set.header.set_title_placeholder"),ref:e=>{e&&(this.titleTextarea=e)},singleLine:!0,tabIndex:5,textAreaVariant:(0,te.P)(this.props.setContentType)?"cleanTextHeading":"default",type:"autoExpand",value:this.state.title})}renderDescriptionTextField(){return(0,g.jsx)(kt.Z,{invalid:this.hasDescriptionProfanityError()||void 0,label:this.renderDescriptionError()||(0,g.jsx)(_.Z,{id:"create_set.set_description_modal.title"}),languageCodes:[this.props.set.wordLang,this.props.set.defLang],onBlur:this.onBlurDescription,onChange:this.onChangeDescription,placeholder:(0,se.Z)("create_set.header.set_description.placeholder"),ref:e=>{e&&(this.descriptionTextarea=e)},singleLine:!0,tabIndex:6,textAreaVariant:(0,te.P)(this.props.setContentType)?"cleanTextBody":"default",type:"autoExpand",value:this.state.description})}renderCleanBottomActionBar(){var e=this.isSetPrivate()?(0,g.jsx)(_.Z,{id:"create_set.permissions.privacy_state.private"}):(0,g.jsx)(_.Z,{id:"create_set.permissions.privacy_state.public"}),t=this.isSetPrivate()?"system-lock":"system-unlock";return(0,g.jsx)("div",{className:"CreateSetHeader-cleanBottomActionBar",children:(0,g.jsxs)(I.Z,{onClick:this.handleLockClick,tabIndex:0,variant:"revert",children:[(0,g.jsx)(C.Z,{className:"CreateSetHeader-cleanBottomActionBarIcon",icon:t,size:"xlarge"}),(0,g.jsx)(f.Z,{above:"s",children:(0,g.jsx)("span",{className:"CreateSetHeader-cleanBottomActionBarText",children:e})})]})})}renderBottomActionBar(){return(0,g.jsx)(S.Z,{children:(0,g.jsxs)(Be.Z,{className:"CreateSetHeader-permissionsAndImport",children:["practice-questions"===this.props.setContentType?null:(0,g.jsx)(I.Z,{onClick:this.props.onOpenImport,children:(0,g.jsx)(_.Z,{id:"create_set.header.import_link"})}),(0,g.jsxs)("div",{className:"CreateSetHeader-permissionsWrap",children:[(0,g.jsx)(Qe,{handleClickEditingPermissions:this.onOpenEditingPermissions,handleClickViewablePermissions:this.onOpenViewablePermissions,isUserUnderAge:this.props.isUserUnderAge,permissions:this.props.permissions,setLuid:this.props.setLuid}),(0,g.jsx)(f.Z,{above:"s",children:(0,g.jsx)("div",{className:"CreateSetHeader-permissionWrap",children:"practice-questions"===this.props.setContentType?null:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.Z,{icon:"switch",iconProps:{disabled:!this.props.canFlipColumns},onClick:this.props.onFlipColumn,tooltipPosition:"bottom right",tooltipText:(0,se.Z)("create_set.header.flip_columns_tooltip")}),(0,g.jsx)(c.Z,{icon:"keyboard",menu:(0,g.jsx)(et,{canEditRichText:this.props.canEditRichText,isMac:this.props.isMac}),popoverPosition:"bottom right",tooltipPosition:"bottom right",tooltipText:(0,se.Z)("create_set.header.keyboard_shortcuts_tooltip")})]})})})]})]})})}render(){var e=l()("CreateSetHeader",{"is-fadingIn":this.state.shouldAnimateHeader,"is-sticky":this.props.isSticky,"is-cleanDesign":(0,te.P)(this.props.setContentType)}),t=e+" has-adz";return(0,g.jsx)(f.Z,{above:"m",children:s=>s&&this.props.shouldShowAd?this.renderHeader(t):this.renderHeader(e)})}isSetPrivate(){return this.props.permissions.viewableBy!==Ye.mk.EVERYONE}}var Ht=(0,Et.Z)({headerOffsetTop:Nt,headerOffsetTopMobile:Ft})(Bt),Vt=s("./app/j/edgy-data/index.ts"),Gt=s("./app/j/edgy-data/actions.ts"),Wt=s("./app/j/edgy-data/enrollment.ts"),zt=s("./app/j/edgy-data/selectors.ts"),qt=s("./node_modules/reselect/lib/index.js"),Kt=s("./app/j/set_page_tags/index.ts"),Yt=(0,s("./app/j/core/default_store/DefaultStore.ts").iu)(Kt.Ev),Qt=(0,qt.createSelector)(Yt,(e=>e.edgySetTags)),$t=s("./app/j/site_nav/index.ts"),Xt=["shouldShowEdgyData","user"],Jt=(0,ce.Z)("createSet",{diagramImageUploadError:ae.ky,setContentType:ae.dn}),es=(0,qt.createStructuredSelector)({courseEnrollments:zt.oC,courses:zt.Ho,edgySetTags:Qt,edgyStartScreen:zt.HW,isEdgyDataModalOpen:zt.q1,isUserUnderAge:$t.Wr,selectedSchool:zt.Le,shouldShowEdgyData:zt.Q0,userCountryCode:zt.G6});var ts=(0,ue.compose)((0,de.connect)(Jt,null,null,{context:n.tC}),(0,de.connect)(es,(e=>({actions:(0,ue.bindActionCreators)({closeEdgyModal:Gt._,fetchEdgyTagFeedback:Kt.mA,removeCourseTagFeedback:Kt.R6,removeSchool:Vt.er,saveAndRefreshTagFeedback:Kt.MQ,selectCourse:Vt.Oe,selectSchool:Vt.zH,setCourseEnrollments:Vt.j$,setEdgyDataModalOpen:Vt.Ds,setEdgyDataModalOptions:Vt.XZ,setSelectedSchool:Vt.qN},e)})),null,{context:Ce.jJ}))((function(e){var{shouldShowEdgyData:t,user:s}=e,r=(0,Se.Z)(e,Xt);return t&&(0,Wt.i)(s)?(0,g.jsx)(Zt,Object.assign({},r)):(0,g.jsx)(Ht,Object.assign({},r))})),ss=s("./app/j/context/UserContext.ts"),rs=s("./app/j/create_set/actions/ClassSetActionCreators.ts"),is=s("./app/j/utils/keyReflectDeep.ts"),ns=(0,is.Z)("FolderSetConstants",{actions:{BULK_UPDATE:null}}),os=s("./app/j/stores/Store.ts"),as=s("./node_modules/immutability-helper/index.js"),ls=s.n(as),ds={folderSets:{},setup(e){for(var t in e){var s=e[t];this.folderSets[t]=s}this.bindActions(ns.actions.BULK_UPDATE,this._updateFolderSets)},getAll(){return this.folderSets},getUnsyncedFolderSets(e){var t={};for(var s in this.folderSets){var r=this.folderSets[s];r.setId||(t[s]={classId:r.classId,setId:e})}return t},_updateFolderSets(e){var{models:t}=e,s={};for(var r in t){var i=t[r];s[r]=i.getProperties()}this.folderSets=ls()(this.folderSets,{$merge:s})}};(ds=Object.assign(ds,os.Z)).init();var us=ds,cs=s("./app/j/syncers/FolderSetSyncer.ts"),ps={folderSetSyncer:cs.Z,bulkUpdate(e){return G.Z.viewAction(ns.actions.BULK_UPDATE,{luidToProps:e}),this.folderSetSyncer.bulkSave(e)},getUnsyncedFolderSets(e){var t={},s=us.getAll();for(var r in s){var i=s[r];i.setId||(t[r]={folderId:i.folderId,setId:e})}return t}},hs={studiableItems:{FIRST_TAB_INDEX:7,MIN_ITEMS_FOR_PUBLISH:2,MAX_ITEMS:500,NUM_MULTIPLE_CHOICE_OPTIONS:4},multipleChoiceOptions:{MAX_ITEMS:15,MIN_ITEMS_PER_QUESTION:2},studiableMediaConnections:{SUPPORTED_MEDIA_TYPES:[i.DDH.TEXT,i.DDH.IMAGE,i.DDH.VIDEO]}},gs=s("./app/j/models/QModel.ts");class ms extends gs.Z{}ms.URL_BASE="multiple-choice-options",ms.MODEL_NAME="multipleChoiceOption",ms.API_VERSION="3.4";var _s=s("./app/j/syncers/LegacySyncer.ts"),fs=Object.assign({},_s.Z);fs.init(ms);var vs=fs,Ss=s("./app/j/utils/redirect.ts"),Cs={bulkUpdateAndPublish(e,t,s){var r=this.getEmptyOptionLuids(s);this.maybeBulkDeleteOptions(r).then((()=>{F.Z.publish(),F.Z.publishSync(e,{wordLang:i.spR.ENGLISH,defLang:i.spR.ENGLISH}).then((()=>{t._webUrl?(0,Ss.ZP)(""+t._webUrl):(0,Ss.ZP)("/"+t.id)}))}))},getEmptyOptionLuids(e){var t=[];return e.forEach((e=>{var{options:s}=e;s.forEach((e=>{var{optionConnectionMedia:s}=e;0===s.filter((e=>e.id)).length&&e.luid&&t.push(e.luid)}))})),t},maybeBulkDeleteOptions:e=>e.length>0?vs.bulkDel(e):Promise.resolve(),setHasTitle:e=>!!(null!=e&&e.title&&e.title.length>0),getValidationErrors(e,t){if(!this.setHasTitle(e))return{requires_title:"requires_title"};var s=t.length>=hs.studiableItems.MIN_ITEMS_FOR_PUBLISH,r=!0;return t.forEach((e=>{var t=e.options.filter((e=>e.id));if(e.id)if(t.length<hs.multipleChoiceOptions.MIN_ITEMS_PER_QUESTION)r=!1;else{0===t.filter((e=>e.isCorrect)).length&&(r=!1)}else s=!1})),s?r?null:{requires_options:"requires_options"}:{requires_two_items:"requires_two_items"}}},bs=s("./app/j/create_set/actions/SetWithTermActionCreators.ts"),ys=s("./app/j/components/UIModalBodySeparator.tsx"),Es=s("./app/j/components/UITextarea.tsx"),js=s("./node_modules/lodash/once.js"),xs=s.n(js),Ts=s("./app/j/components/UICheckbox.tsx"),Is=s("./app/j/components/UIColumn.tsx"),ws=s("./app/j/components/UIDropdown.tsx"),As=s("./app/j/components/UIFieldset.tsx"),Os=s("./app/j/components/UIInput.tsx"),Rs=s("./app/j/components/UIRow.tsx"),Ds=s("./app/j/create_set/constants/SetConstants.ts");function Ls(e,t){return t.indexOf(e)>=0}var Ps=xs()((()=>({PASSWORD_EMPTY_ERROR:{identifier:"password_empty_error",message:(0,se.Z)("create_set.permissions.password_empty_error")},CLASSES_EMPTY_ERROR:{identifier:"classes_empty_error",message:(0,se.Z)("create_set.permissions.classes_empty_error")},EDITABLE_BY_CLASSES_EMPTY_ERROR:{identifier:"editable_by_classes_empty_error",message:(0,se.Z)("create_set.permissions.classes_empty_error")}}))),Ms={validate:function(e,t){var{editableBy:s,errors:r,password:i,passwordEdit:n,passwordUse:o,selectedClassLuids:a,selectedEditableByClassLuids:l,viewableBy:d}=e;void 0===t&&(t=!1);var u=[];return t&&!Ls(Ps().PASSWORD_EMPTY_ERROR,r)||this.passwordRequiredButEmpty({viewableBy:d,editableBy:s,passwordUse:o,passwordEdit:n,password:i})&&u.push(Ps().PASSWORD_EMPTY_ERROR),t&&!Ls(Ps().CLASSES_EMPTY_ERROR,r)||this.classRequiredButEmpty({viewableBy:d,selectedClassLuids:a})&&u.push(Ps().CLASSES_EMPTY_ERROR),t&&!Ls(Ps().EDITABLE_BY_CLASSES_EMPTY_ERROR,r)||this.editableByClassRequiredButEmpty({editableBy:s,selectedEditableByClassLuids:l})&&u.push(Ps().EDITABLE_BY_CLASSES_EMPTY_ERROR),u},permissionsRequirePassword:function(e){var{viewableBy:t,editableBy:s}=e;return t===Ye.mk.PASSWORD||s===Ye.mk.PASSWORD},setPreviouslyHadPassword:function(e){var{passwordUse:t,passwordEdit:s}=e;return t||s||!1},passwordRequiredButEmpty:function(e){var{viewableBy:t,editableBy:s,passwordUse:r,passwordEdit:i,password:n}=e;return!n&&this.permissionsRequirePassword({viewableBy:t,editableBy:s})&&!this.setPreviouslyHadPassword({passwordUse:r,passwordEdit:i})},classRequiredButEmpty:function(e){var{viewableBy:t,selectedClassLuids:s}=e;return t===Ye.mk.CLASSES&&0===s.length},editableByClassRequiredButEmpty:function(e){var{editableBy:t,selectedEditableByClassLuids:s}=e;return t===Ye.mk.CLASSES&&0===s.length}};class Zs extends h.PureComponent{constructor(){super(...arguments),this.state={showEditPasswordLink:this.props.setPreviouslyHadPassword&&!this.props.password},this.onClickEditPassword=e=>{e.preventDefault(),this.setState({showEditPasswordLink:!1})}}getCanEdit(){return this.props.permissions.editableBy===Ye.mk.CLASSES}getEditableOptions(){var e=this.isEnrolledInClasses()?(0,g.jsx)("option",{value:Ye.mk.CLASSES,children:(0,se.Z)("create_set.permissions.groups.certain_classes_edit")},"classes"):null,t=(0,g.jsx)("option",{value:Ye.mk.PASSWORD,children:(0,se.Z)("create_set.permissions.groups.people_with_password_edit")},"password"),s=(0,g.jsx)("option",{value:Ye.mk.JUST_ME,children:(0,se.Z)("create_set.permissions.groups.set_creator_edit")},"justme");switch(this.props.permissions.viewableBy){case Ye.mk.EVERYONE:case Ye.mk.CLASSES:return[e,t,s];case Ye.mk.PASSWORD:return[t,s];case Ye.mk.JUST_ME:return[s];default:return[]}}renderViewableOptionDetails(){switch(this.props.permissions.viewableBy){case Ye.mk.EVERYONE:return(0,g.jsx)(_.Z,{id:"create_set.permissions.groups.everyone_hint"});case Ye.mk.CLASSES:return this.renderCertainClassesOption(Ye.mA.VIEWING);case Ye.mk.PASSWORD:return this.renderPasswordOption(Ye.mA.VIEWING);case Ye.mk.JUST_ME:return(0,g.jsx)(_.Z,{id:"create_set.permissions.groups.set_creator_view_hint"});default:return null}}renderPrivacyLockInfo(){var e,t;return this.isPrivacyLockedForDmca()?(e=(0,g.jsx)(_.Z,{id:"create_set.permissions.privacy_lock.reason.copyrighted"}),t=(0,g.jsx)("a",{href:"https://quizlet.com/help/2444159/why-was-my-content-removed-for-copyright",children:(0,g.jsx)(_.Z,{id:"create_set.permissions.privacy_lock.learn_more"})})):this.isPrivacyLockedForProprietary()?e=(0,g.jsx)(_.Z,{id:"create_set.permissions.privacy_lock.reason.proprietary"}):this.isPrivacyLockedForTestbank()?(e=(0,g.jsx)(_.Z,{id:"create_set.permissions.privacy_lock.reason.test_bank"}),t=(0,g.jsx)("a",{href:"https://quizlet.com/help/2444161/academic-integrity-on-quizlet",children:(0,g.jsx)(_.Z,{id:"create_set.permissions.privacy_lock.learn_more"})})):e=this.isPrivacyLockedForReview()?(0,g.jsx)(_.Z,{id:"create_set.permissions.privacy_lock.reason.review"}):(0,g.jsx)(_.Z,{id:"create_set.permissions.privacy_lock.reason.prohibited"}),(0,g.jsxs)("div",{className:"SetPermissions-privacyLock",children:[e," ",t]})}renderPasswordOption(e){var t=e===Ye.mA.VIEWING?(0,g.jsx)(_.Z,{id:"create_set.permissions.groups.people_with_password_use_hint"}):(0,g.jsx)(_.Z,{id:"create_set.permissions.groups.people_with_password_edit_hint"}),s=this.renderPasswordField();return[(0,g.jsx)("div",{children:t},"sublabel"),(0,g.jsx)("div",{className:"SetPermissions-passwordFieldWrap",children:s},"linkOrField")]}renderPasswordField(){if(this.state.showEditPasswordLink)return(0,g.jsx)(I.Z,{onClick:this.onClickEditPassword,children:(0,g.jsx)(_.Z,{id:"create_set.permissions.edit_password_link"})});var e=(0,xt.List)(this.props.errors).find((e=>e.identifier===Ps().PASSWORD_EMPTY_ERROR.identifier));return(0,g.jsx)(Os.Z,{invalid:!!e||void 0,label:e?e.message:(0,g.jsx)(_.Z,{id:"create_set.permissions.password_form_label"}),onChange:this.props.onChangePassword,placeholder:(0,se.Z)("create_set.permissions.password_form_placeholder"),type:"password",value:this.props.password||""})}renderCertainClassesOption(e){var t,s,r,i;e===Ye.mA.VIEWING?(s=(0,se.Z)("create_set.permissions.groups.certain_classes_use_hint"),t=this.props.selectedClassLuids,r=this.props.onToggleClass,i=(0,xt.List)(this.props.errors).find((e=>e.identifier===Ps().CLASSES_EMPTY_ERROR.identifier))):(s=(0,se.Z)("create_set.permissions.groups.certain_classes_edit_hint"),t=this.props.selectedEditableByClassLuids,r=this.props.onToggleClassPermissions,i=(0,xt.List)(this.props.errors).find((e=>e.identifier===Ps().EDITABLE_BY_CLASSES_EMPTY_ERROR.identifier)));var n=Object.keys(this.props.classes).map((e=>{var s=this.props.classes[e],n=Ls(e,t);return(0,g.jsx)("div",{className:"SetPermissions-classCheckbox",children:(0,g.jsx)(Ts.Z,{checked:n,invalid:!!i||void 0,label:s.title,name:"classes[]",onChange:r,value:e},e)},e)}));return[s,n.length>0?n:null,i?(0,g.jsx)("div",{className:"SetPermissions-error",children:i.message},"classesError"):null]}renderViewableOptions(){return(0,g.jsxs)(ws.Z,{onChange:this.props.onChangeViewableOption,value:this.props.permissions.viewableBy,children:[(0,g.jsx)("option",{disabled:this.isPrivacyLocked(),value:Ye.mk.EVERYONE,children:(0,se.Z)("create_set.permissions.groups.everyone_use")}),(0,g.jsx)("option",{disabled:this.isPrivacyLockedForReview()||this.isPrivacyLockedForProprietary()||this.isPrivacyLockedForDmca()||this.isPrivacyLockedForTestbankStrict()||!this.isEnrolledInClasses(),value:Ye.mk.CLASSES,children:(0,se.Z)("create_set.permissions.groups.certain_classes_use")}),(0,g.jsx)("option",{disabled:this.isPrivacyLockedForReview()||this.isPrivacyLockedForProprietary()||this.isPrivacyLockedForDmca()||this.isPrivacyLockedForTestbankStrict(),value:Ye.mk.PASSWORD,children:(0,se.Z)("create_set.permissions.groups.people_with_password_use")}),(0,g.jsx)("option",{value:Ye.mk.JUST_ME,children:(0,se.Z)("create_set.permissions.groups.set_creator_use")})]})}renderEditableOptionDetails(){switch(this.props.permissions.editableBy){case Ye.mk.CLASSES:return this.renderCertainClassesOption(Ye.mA.EDITING);case Ye.mk.PASSWORD:return this.renderPasswordOption(Ye.mA.EDITING);case Ye.mk.JUST_ME:return(0,g.jsx)(_.Z,{id:"create_set.permissions.groups.set_creator_edit_hint"});default:return null}}renderEditableOptions(){return(0,g.jsx)(ws.Z,{onChange:this.props.onChangeEditableOption,value:this.props.permissions.editableBy,children:this.getEditableOptions()})}render(){return(0,g.jsxs)("form",{onSubmit:this.props.onSubmit,children:[(0,g.jsxs)(Rs.Z,{children:[(0,g.jsx)(Is.Z,{width:.5,children:(0,g.jsxs)(As.Z,{legend:(0,g.jsx)(_.Z,{id:"create_set.permissions.view_title"}),children:[this.isPrivacyLocked()?this.renderPrivacyLockInfo():null,this.renderViewableOptions(),(0,g.jsx)("div",{className:"SetPermissions-viewableDetails",children:this.renderViewableOptionDetails()})]})}),(0,g.jsx)(Is.Z,{width:.5,children:(0,g.jsxs)(As.Z,{legend:(0,g.jsx)(_.Z,{id:"create_set.permissions.edit_title"}),children:[this.renderEditableOptions(),(0,g.jsx)("div",{className:"SetPermissions-editableDetails",children:this.renderEditableOptionDetails()})]})})]}),this.props.children]})}isEnrolledInClasses(){return Object.keys(this.props.classes).length>0}isPrivacyLockedForDmca(){return this.props.set.privacyLockStatus===Ds.v7.DMCA}blur(){var e=window.document.querySelector(".SetPermissions input:focus");e&&e.blur()}isPrivacyLockedForTestbank(){return this.isPrivacyLockedForTestbankStrict()||this.isPrivacyLockedForTestbankRelaxed()}isPrivacyLockedForTestbankRelaxed(){return this.props.set.privacyLockStatus===Ds.v7.TESTBANK_RELAXED}isPrivacyLockedForTestbankStrict(){return this.props.set.privacyLockStatus===Ds.v7.TESTBANK}isPrivacyLockedForProprietary(){return this.props.set.privacyLockStatus===Ds.v7.PROPRIETARY}isPrivacyLockedForReview(){return this.props.set.privacyLockStatus===Ds.v7.REVIEW}isPrivacyLocked(){return!!this.props.set.privacyLockStatus&&this.props.set.privacyLockStatus!==Ds.v7.UNLOCKED}}var ks=s("./node_modules/prop-types/index.js"),Us=s.n(ks),Ns={classes:Us().object.isRequired,permissions:Us().object.isRequired,selectedClassLuids:Us().array.isRequired,selectedEditableByClassLuids:Us().array.isRequired,set:Us().object.isRequired};class Fs extends h.Component{constructor(){super(...arguments),this.state={description:this.props.description,editableBy:this.props.setPermissionsProps.permissions.editableBy,errors:[],isDirty:!1,password:null,toggledClassLuids:[],toggledEditableByClassLuids:[],viewableBy:this.props.setPermissionsProps.permissions.viewableBy},this.handleCancel=()=>{Object.keys(this.state.toggledClassLuids).forEach((e=>Ke.Z.toggleClass(e))),Object.keys(this.state.toggledEditableByClassLuids).forEach((e=>Ke.Z.toggleClassPermissions(e))),this.props.onClose()},this.handleSave=()=>{var e=Ms.validate(this.getValidationParams());this.setState({errors:e,isDirty:!1}),0===e.length&&(this.updateSetPermissions(),Ke.Z.persistClassSetsForPermissions(this.props.setLuid),F.Z.update(this.props.setLuid,{description:this.state.description}),this.props.onClose())},this.handleEditDescription=e=>{this.setState({description:e.target.value,isDirty:!0})},this.handleChangeViewableOption=e=>{(0,Y.Z)("new_create_set_change_permissions"),this.setState({viewableBy:e.target.value,isDirty:!0})},this.handleChangeEditableOption=e=>{(0,Y.Z)("new_create_set_change_permissions"),this.setState({editableBy:e.target.value,isDirty:!0})},this.handleChangePassword=e=>{this.setState({password:e.target.value,isDirty:!0})},this.handleToggleClass=e=>{var t=e.target.value,s=this.state.toggledClassLuids[t],r=Object.assign({},this.state.toggledClassLuids,{[t]:!s||void 0});this.setState({toggledClassLuids:r,isDirty:!0}),Ke.Z.toggleClass(t)},this.handleToggleClassPermissions=e=>{var t=e.target.value,s=this.state.toggledEditableByClassLuids[t],r=Object.assign({},this.state.toggledEditableByClassLuids,{[t]:!s||void 0});this.setState({toggledEditableByClassLuids:r,isDirty:!0}),Ke.Z.toggleClassPermissions(t)}}getValidationParams(){return{editableBy:this.state.editableBy,errors:this.state.errors,password:this.state.password,passwordEdit:this.props.setPermissionsProps.set.passwordEdit,passwordUse:this.props.setPermissionsProps.set.passwordUse,selectedClassLuids:this.props.setPermissionsProps.selectedClassLuids,selectedEditableByClassLuids:this.props.setPermissionsProps.selectedEditableByClassLuids,viewableBy:this.state.viewableBy}}renderDescriptionTextarea(){return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(Es.Z,{invalid:this.props.hasProfanityError||void 0,label:this.props.hasProfanityError?(0,g.jsx)(_.Z,{id:"create_set.set_description_modal.profanity_error"}):(0,g.jsx)(_.Z,{id:"create_set.set_description_modal.label"}),onChange:this.handleEditDescription,placeholder:(0,se.Z)("create_set.set_description_modal.optional"),type:"autoExpand",value:this.state.description}),(0,g.jsx)(ys.Z,{})]})}render(){return(0,g.jsx)("div",{className:"CreateSetMobileOptions",children:(0,g.jsxs)(w.Z,{containerClassName:"CreateSetMobileOptions-modal",headerContent:(0,g.jsx)(_.Z,{id:"create_set.mobile_options_modal.title"}),isOpen:!0,onClose:this.handleCancel,children:[(0,g.jsx)(Be.Z,{className:"CreateSetMobileOptions-permissions",children:(0,g.jsx)(Zs,Object.assign({},this.props.setPermissionsProps,{errors:this.state.errors,onChangeEditableOption:this.handleChangeEditableOption,onChangePassword:this.handleChangePassword,onChangeViewableOption:this.handleChangeViewableOption,onSubmit:this.handleSave,onToggleClass:this.handleToggleClass,onToggleClassPermissions:this.handleToggleClassPermissions,password:this.state.password,permissions:{editableBy:this.state.editableBy,viewableBy:this.state.viewableBy},setPreviouslyHadPassword:Ms.setPreviouslyHadPassword(this.getValidationParams())}))}),(0,g.jsx)(ys.Z,{}),(0,g.jsx)(Be.Z,{children:(0,g.jsx)(v.Z,{"aria-label":(0,se.Z)("create_set.mobile_options_modal.save_button"),disabled:!this.state.isDirty,hero:!0,onClick:this.handleSave,width:"fill",children:(0,g.jsx)(_.Z,{id:"create_set.mobile_options_modal.save_button"})})})]})})}updateSetPermissions(){var e=this.state.viewableBy===Ye.mk.EVERYONE?i.iQw.PUBLIC_ACCESS:i.iQw.NOT_PUBLIC,t=this.state.viewableBy===Ye.mk.PASSWORD,s=this.state.editableBy===Ye.mk.PASSWORD,{password:r}=this.state,n={accessType:e,passwordUse:t,passwordEdit:s};r&&(n.password=r),F.Z.update(this.props.setLuid,n),Ke.Z.changePermission(Ye.mA.VIEWING,this.state.viewableBy),Ke.Z.changePermission(Ye.mA.EDITING,this.state.editableBy)}}Fs.propTypes={description:Us().string,hasProfanityError:Us().bool.isRequired,hasCreatedSets:Us().bool.isRequired,onClose:Us().func.isRequired,setLuid:Us().string.isRequired,viewOnly:Us().bool.isRequired,setPermissionsProps:Us().shape(Ns).isRequired};var Bs=s("./app/j/components/MediaVideo.tsx"),Hs=s("./app/j/components/ZoomableImage.tsx"),Vs=s("./app/j/rich_text/components/RichTextEditor.tsx"),Gs=s("./app/j/utils/ImageSizeHelper.ts");class Ws extends h.PureComponent{constructor(){super(...arguments),this.handleVideoDurationChange=e=>{this.props.videoClipEvents&&this.props.videoClipEvents.onChange("clipEndSeconds",e)},this.handleVideoClipTextChange=e=>{this.props.videoClipEvents&&this.props.videoClipEvents.onChange("webUrl",e.target.value)},this.handleVideoClipInputFocus=()=>{this.props.videoClipEvents&&this.props.videoClipEvents.onFocus()},this.handleVideoClipInputBlur=e=>{this.props.videoClipEvents&&this.props.videoClipEvents.onBlur(e)},this.handleClickToZoom=e=>{e.preventDefault(),e.stopPropagation(),this.zoomableImage.current&&this.zoomableImage.current.show()},this.handleDeleteImage=()=>{var{image:e,imageEvents:t}=this.props;e&&t&&t.onDeleteImage&&t.onDeleteImage()},this.handleOnEditorKeyDown=e=>{var{richTextEvents:t,text:s}=this.props;return(s&&0===s.plainText.length&&e.code===Je.Z.studiableItem.backspace||e.code===Je.Z.studiableItem.delete)&&t.onDeleteText&&t.onDeleteText(),!1},this.richTextEditor=h.createRef(),this.zoomableImage=h.createRef()}componentDidMount(){var{autofocus:e}=this.props.richTextConfig;e&&this.richTextEditor.current&&this.richTextEditor.current.focus()}componentDidUpdate(){var{isFocused:e}=this.props.richTextConfig;e&&this.richTextEditor.current&&!this.richTextEditor.current.state.isFocused&&this.richTextEditor.current.focus()}getImageContainerHeightWidth(e){if(e){var t=Math.max(e.height,e.width)/120;return{minHeight:48,minWidth:48,height:e.height/t,width:e.width/t}}return{}}renderImageMedia(){var{image:e}=this.props,t=this.getImageContainerHeightWidth(e);return null!=e&&e.url?(0,g.jsxs)("div",{className:"MediaInteractives-imageWrapper",style:t,children:[(0,g.jsx)(Hs.Z,{ref:this.zoomableImage,zoomUrl:(0,Gs.eA)(e.url),children:(0,g.jsx)("img",{className:"MediaInteractives-image",onClick:this.handleClickToZoom,src:e.url,style:t})}),(0,g.jsx)("a",{className:"MediaInteractives-imageOverlay",onClick:this.handleDeleteImage,children:(0,g.jsx)(C.Z,{className:"MediaInteractives-imageOverlayIcon",icon:"garbage"})})]}):null}renderPlaceholderImage(){var{placeholderImage:e}=this.props,t=this.getImageContainerHeightWidth(e);if(!this.shouldRenderPlaceholderImage())return null;var{url:s}=e;return(0,g.jsxs)("div",{className:"MediaInteractives-placeholderWrapper",style:t,children:[(0,g.jsx)("div",{className:"MediaInteractives-placeholderImage",style:Object.assign({backgroundImage:"url("+s+")",msFilter:"\"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+s+"',sizingMethod='scale')\""},t)}),(0,g.jsx)("div",{className:"MediaInteractives-placeholderSpinner",children:(0,g.jsx)(b.Z,{})})]})}renderRichTextEditor(){var e,t,{richTextEvents:s,richTextConfig:r,text:i}=this.props;return(0,g.jsx)(Vs.default,Object.assign({},s,r,{canEditRichText:!0,onEditorKeyDown:this.handleOnEditorKeyDown,plainText:null!=(e=null==i?void 0:i.plainText)?e:"",pmJson:null!=(t=null==i?void 0:i.richText)?t:null,ref:this.richTextEditor,shouldShowRichTextCombinedToolbar:!0}))}renderVideoClipInput(e){var{shouldRenderVideoClipPreview:t,shouldDisableVideoClipInput:s}=this.props,r=(0,Bs.RY)(e.webUrl);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"MediaInteractives-videoClipInput",children:[(0,g.jsx)(C.Z,{icon:"video"}),(0,g.jsx)(Os.Z,{disabled:s,onBlur:this.handleVideoClipInputBlur,onChange:this.handleVideoClipTextChange,onFocus:this.handleVideoClipInputFocus,placeholder:(0,se.Z)("media_video.edit_url_input_placeholder"),rows:1,value:e.webUrl||""})]}),t&&r?this.renderVideoClipInputPreview(r):null]})}renderVideoClipInputPreview(e){return(0,g.jsx)(Bs.ZP,{isPreview:!0,media:e,onGetDuration:this.handleVideoDurationChange})}render(){return(0,g.jsxs)("div",{className:"MediaInteractives",children:[this.renderRichTextEditor(),this.shouldRenderPlaceholderImage()?this.renderPlaceholderImage():this.renderImageMedia(),this.props.video?this.renderVideoClipInput(this.props.video):null]})}shouldRenderPlaceholderImage(){var{placeholderImage:e}=this.props;return!(null==e||!e.url)}}var zs=(e,t)=>{var{media:s}=e;return s.find((e=>e.mediaType===t))||null},qs=e=>{var t=zs(e,i.DDH.VIDEO);return t&&t.video?Object.assign({},t.video,{webUrl:(0,Bs.$f)(t.video)}):null};class Ks extends h.PureComponent{constructor(){super(...arguments),this.state={isVideoClipFocused:!1,textValue:this.getText(this.props),videoValue:qs(this.props)},this.handleChange=e=>{var t=this.state.textValue,s=Pe()(t);s&&(s.plainText=e.plain,e.rich&&(s.richText=e.rich)),this.hasTextChanged=!0,this.setState({textValue:s})},this.handleFocus=()=>{var{position:e,onFocus:t}=this.props,s={media:zs(this.props,i.DDH.TEXT),type:this.isExplanation()?i.$Gk.MULTIPLE_CHOICE_OPTION_EXPLANATION:i.$Gk.MULTIPLE_CHOICE_HINT};e&&(s.index=e),t(s)},this.handleBlur=()=>{var{textValue:e}=this.state;if(this.hasTextChanged){if(this.props.onDeleteText&&""===e.plainText){var t=zs(this.props,i.DDH.TEXT);t&&this.props.onDeleteText(t)}else this.props.onBlur&&this.props.onBlur(e);this.hasTextChanged=!1}},this.handleDeleteImage=()=>{var e=zs(this.props,i.DDH.IMAGE);e&&this.props.onDeleteImage&&this.props.onDeleteImage(e)},this.handleVideoClipBlur=()=>{var e,t,{videoValue:s}=this.state,{onBlurVideo:r}=this.props;if(this.hasVideoClipValueHasChanged&&null!=s&&null!=(e=s.webUrl)&&e.length&&r){var n=(0,Bs.RY)(s.webUrl,s.clipEndSeconds);(null==n?void 0:n.provider)===i.G6J.VIMEO&&r(n),(null==n?void 0:n.provider)===i.G6J.YOUTUBE&&ht.Z.warning("YouTube not yet supported as video provider from Create Set page"),this.hasVideoClipValueHasChanged=!1}if(0===(null==s||null==(t=s.webUrl)?void 0:t.length)&&this.props.onDeleteVideo){var o=zs(this.props,i.DDH.VIDEO);o&&this.props.onDeleteVideo(o)}this.setState({isVideoClipFocused:!1})},this.handleVideoClipChange=(e,t)=>{var{videoValue:s}=this.state;if(s){var r=Object.assign({},s,{[e]:t});this.setState({videoValue:r},(()=>{this.hasVideoClipValueHasChanged=!0}))}},this.handleVideoClipFocus=()=>{this.setState({isVideoClipFocused:!0})},this.hasTextChanged=!1}getPlaceHolder(){return this.isExplanation()?(0,se.Z)("create_set.multiple_choice_questions.placeholder.explanation"):(0,se.Z)("create_set.multiple_choice_questions.placeholder.hint")}getText(e){var t=zs(e,i.DDH.TEXT);return null!=t&&t.text?Object.assign({},t.text):{languageCode:i.spR.ENGLISH,plainText:"",ttsUrl:null,ttsSlowUrl:null}}getImage(e){var t=zs(e,i.DDH.IMAGE);return(null==t?void 0:t.image)||null}renderIcon(){var e=this.isExplanation()?"info-inverse":"lightbulb";return(0,g.jsx)(C.Z,{icon:e})}renderMediaInteractives(){var{isVideoClipFocused:e,textValue:t,videoValue:s}=this.state,r=l()({"EditableMcqHintOrExplanation-content":!0,"EditableMcqHintOrExplanation-explanationContent":this.isExplanation()}),i={onDeleteImage:this.handleDeleteImage},n={onBlur:this.handleBlur,onChange:this.handleChange,onFocus:this.handleFocus,onUpdatePMEditorView:this.props.onUpdatePMEditorView},o={onBlur:this.handleVideoClipBlur,onChange:this.handleVideoClipChange,onFocus:this.handleVideoClipFocus},a={autofocus:!!this.props.isFocused,lang:"en",languageCodes:["en"],placeholder:this.getPlaceHolder(),tabIndex:this.props.tabIndex},d=this.getImage(this.props);return(0,g.jsxs)("div",{className:r,children:[this.renderIcon(),(0,g.jsx)(Ws,{image:d,imageEvents:i,placeholderImage:this.props.placeholderImage,richTextConfig:a,richTextEvents:n,shouldDisableVideoClipInput:this.props.isVideoInputDisabled,shouldRenderVideoClipPreview:e,text:t,video:s,videoClipEvents:o})]})}render(){return(0,g.jsx)("div",{className:"EditableMcqHintOrExplanation",children:this.renderMediaInteractives()})}isExplanation(){return this.props.type===i.$Gk.MULTIPLE_CHOICE_OPTION_EXPLANATION}}Ks.getDerivedStateFromProps=(e,t)=>{var s;return!t.videoValue&&null!=(s=e.media.find((e=>e.mediaType===i.DDH.VIDEO)))&&s.video?{videoValue:qs(e)}:null};var Ys=s("./app/j/components/UIRadio.tsx");class Qs extends h.PureComponent{constructor(e){super(e),this.handleChange=e=>{var{optionText:t}=this.state;t&&(t.plainText=e.plain,e.rich&&(t.richText=e.rich),this.hasTextChanged=!0,this.hasDeleted=!1,this.setState({optionText:t}))},this.handleFocus=()=>{this.props.onFocus({media:this.getOptionMediaConnectionByMediaType(this.props,i.DDH.TEXT),type:i.$Gk.MULTIPLE_CHOICE_OPTION,index:this.props.number})},this.handleBlur=()=>{var{optionText:e}=this.state,{option:t}=this.props;if(t&&e&&!this.hasDeleted&&this.hasTextChanged){if(this.props.onDeleteText&&""===e.plainText){var s=this.getOptionMediaConnectionByMediaType(this.props,i.DDH.TEXT);s&&this.props.onDeleteText(s)}else this.props.onBlur&&this.props.onBlur({option:t,text:e});this.hasTextChanged=!1}},this.handleDeleteImage=()=>{var e=this.getOptionMediaConnectionByMediaType(this.props,i.DDH.IMAGE);e&&this.props.onDeleteImage&&this.props.onDeleteImage(e)},this.handleDeleteOption=()=>{var{onDeleteOption:e,option:t}=this.props,{optionText:s}=this.state,r=this.getOptionImage(this.props);e&&t&&0===t.explanationConnectionMedia.length&&(0===t.optionConnectionMedia.length||s&&0===s.plainText.length&&!r)&&(this.hasDeleted=!0,e(t))},this.handleOptionSelected=()=>{var{option:e,onOptionChange:t}=this.props;e&&t&&t({luid:Pe()(e.luid),id:e.id,isCorrect:!e.isCorrect})},this.hasDeleted=!1,this.hasTextChanged=!1;var{isPhantom:t}=e;this.state={isPhantom:t||!1,optionText:this.getOptionText(e)}}getOptionText(e){var t=this.getOptionMediaConnectionByMediaType(e,i.DDH.TEXT);return null!=t&&t.text?Object.assign({},t.text):{languageCode:i.spR.ENGLISH,plainText:"",ttsUrl:null,ttsSlowUrl:null}}getOptionImage(e){var t=this.getOptionMediaConnectionByMediaType(e,i.DDH.IMAGE);if(t){var{image:s}=t;if(s&&""!==s.url)return s}return null}getOptionMediaConnectionByMediaType(e,t){var{option:s}=e;return(null==s?void 0:s.optionConnectionMedia.map((e=>e)).find((e=>e.mediaType===t)))||null}renderMediaInteractives(){var{onUpdateRichTextEditorView:e,number:t,tabIndex:s}=this.props,{optionText:r}=this.state,i=t>1?(0,se.Z)("create_set.multiple_choice_questions.placeholder.other_option"):(0,se.Z)("create_set.multiple_choice_questions.placeholder.first_option"),n={onDeleteImage:this.handleDeleteImage},o={onBlur:this.handleBlur,onChange:this.handleChange,onDeleteText:this.handleDeleteOption,onFocus:this.handleFocus,onUpdatePMEditorView:e},a={autofocus:!!this.props.isFocused,isFocused:!!this.props.isFocused,lang:"en",languageCodes:["en"],placeholder:i,tabIndex:s};return(0,g.jsx)(Ws,{image:this.getOptionImage(this.props),imageEvents:n,placeholderImage:this.props.placeholderImage,richTextConfig:a,richTextEvents:o,text:r})}renderPhantom(){return(0,g.jsx)("span",{className:"EditableMcqOption-phantom",onClick:this.props.onAddOption,children:(0,g.jsx)(_.Z,{id:"create_set.multiple_choice_questions.add_option"})})}renderIsCorrectInput(){var e,{isPhantom:t}=this.state,{hasMultipleCorrectOptions:s,option:r,number:i}=this.props,n=!t&&null!=r&&r.optionConnectionMedia.length?null==r||null==(e=r.optionConnectionMedia[0].text)?void 0:e.plainText:null,o={checked:this.props.isCorrect,disabled:t||this.isSelectionDisabled(),label:n?(0,se.Z)("create_set.multiple_choice_questions.correct_option_label_text_exists",{optionText:n}):(0,se.Z)("create_set.multiple_choice_questions.correct_option_label_text_does_not_exit",{optionIndex:i}),name:this.props.optionGroupName,onChange:this.handleOptionSelected};return s?(0,g.jsx)(Ts.Z,Object.assign({},o)):(0,g.jsx)(Ys.Z,Object.assign({},o))}render(){var{isPhantom:e}=this.state,t=l()("EditableMcqOption",{"is-phantom":e});return(0,g.jsxs)("div",{className:t,children:[this.renderIsCorrectInput(),e?this.renderPhantom():this.renderMediaInteractives()]})}isSelectionDisabled(){var{option:e}=this.props,{optionText:t}=this.state;return!(null!=e&&e.id&&(!t||""!==t.plainText||null!==this.getOptionImage(this.props)))}}class $s extends h.PureComponent{constructor(e){super(e),this.handleChange=e=>{var t=this.state.textValue,s=Pe()(t);s.plainText=e.plain,e.rich&&(s.richText=e.rich),this.hasTextChanged=!0,this.setState({textValue:s})},this.handleFocus=()=>{this.props.onFocus({media:this.getPromptMediaConnectionByMediaType(this.props,i.DDH.TEXT),type:i.$Gk.MULTIPLE_CHOICE_PROMPT})},this.handleBlur=()=>{var{textValue:e}=this.state;if(this.hasTextChanged){if(this.props.onDeleteText&&""===e.plainText){var t=this.getPromptMediaConnectionByMediaType(this.props,i.DDH.TEXT);t&&this.props.onDeleteText(t)}else this.props.onBlur&&this.props.onBlur(e);this.hasTextChanged=!1}},this.handleDeleteImage=()=>{var e=this.getPromptMediaConnectionByMediaType(this.props,i.DDH.IMAGE);e&&this.props.onDeleteImage&&this.props.onDeleteImage(e)},this.hasTextChanged=!1;var t=this.getPrompt(e);this.state={textValue:t}}getImage(e){var t=this.getPromptMediaConnectionByMediaType(e,i.DDH.IMAGE);return(null==t?void 0:t.image)||null}getPrompt(e){var t=this.getPromptMediaConnectionByMediaType(e,i.DDH.TEXT);return null!=t&&t.text?Object.assign({},t.text):{languageCode:i.spR.ENGLISH,plainText:"",ttsUrl:null,ttsSlowUrl:null}}getPromptMediaConnectionByMediaType(e,t){var{promptMedia:s}=e;return s.find((e=>e.mediaType===t))||null}render(){var{textValue:e}=this.state,t={onDeleteImage:this.handleDeleteImage},s={onBlur:this.handleBlur,onChange:this.handleChange,onFocus:this.handleFocus,onUpdatePMEditorView:this.props.onUpdateRichTextEditorView},r={autofocus:!!this.props.isFocused,lang:"en",languageCodes:["en"],placeholder:(0,se.Z)("create_set.multiple_choice_questions.placeholder.question"),tabIndex:this.props.tabIndex};return(0,g.jsx)("div",{className:"EditableMcqQuestion",children:(0,g.jsx)(Ws,{image:this.getImage(this.props),imageEvents:t,placeholderImage:this.props.placeholderImage,richTextConfig:r,richTextEvents:s,text:e})})}}var Xs=s("./app/j/components/UIVerticalRule.tsx"),Js=s("./app/j/compatibility/useDarkMode.ts");class er extends h.PureComponent{renderToggle(){return"function"==typeof this.props.children?this.props.children(this.props.disabled,this.props.onClick):this.renderDefaultToggle()}renderDefaultToggle(){return(0,g.jsx)(k.Z,Object.assign({"aria-label":this.props.tooltip,disabled:this.props.disabled,icon:this.props.icon,onClick:this.props.onClick,tabIndex:-1},this.props.iconProps,{variant:"borderless"}))}render(){var e=l()("ContextToggle",this.props.className,{"is-active":this.props.isActive});return(0,g.jsx)("span",{className:e,children:this.props.tooltip&&!(0,$.b1)()?(0,g.jsx)(y.Z,{openDelay:200,overlay:(0,g.jsx)(j.Z,{children:this.props.tooltip||null}),position:"bottom center",triggerAction:"hover",children:this.renderToggle()}):this.renderToggle()})}}er.defaultProps={isActive:!1,disabled:!1};var tr=()=>(0,g.jsx)("span",{className:"ContextToggleSpacer",children:" "});function sr(e){var t=(0,Js.Z)(),s=e.isAutosuggestionEnabled?"list-add":t?"list-add-disabled-night":"list-add-disabled",r=e.canShowTooltip&&e.isAutosuggestionEnabled?(0,se.Z)("create_set.term_context.tooltips.auto_suggestions_off"):(0,se.Z)("create_set.term_context.tooltips.auto_suggestions_on");return(0,g.jsx)(er,{icon:s,isActive:!1,onClick:e.onToggleAutosuggest,tooltip:r})}class rr extends h.PureComponent{render(){var e=this.props.hasRecording?(0,se.Z)("create_set.term_context.tooltips.change_voice_recording"):(0,se.Z)("create_set.term_context.tooltips.add_voice_recording");return(0,g.jsx)(er,{icon:this.props.hasRecording?"mic":"record",isActive:this.props.isRecordingContextOpen&&this.props.isActiveSide,onClick:this.props.onToggleVoiceRecordingContext,tooltip:this.props.tooltipsEnabled?e:null})}}var ir=s("./node_modules/invariant/browser.js"),nr=s.n(ir),or=s("./app/j/rich_text/components/PMToolbar.tsx"),ar=s("./app/j/rich_text/components/UpsellPMToolbar.tsx"),lr=s("./app/j/rich_text/RichTextHelper.ts"),dr=(0,x.z)("div")({name:"PremiumItems",class:"p10i2lyl"});class ur extends h.PureComponent{constructor(e){super(e),this.handleToggleHintOrExplanation=()=>{this.props.onToggleHintOrExplanation&&this.props.onToggleHintOrExplanation()},this.handleDeleteItem=()=>{this.props.onDelete&&this.props.onDelete()},this.handleAddVideoClip=()=>{this.props.onAddVideoClip&&this.props.onAddVideoClip()},this.handleMouseDown=e=>{e.preventDefault()},this.handleMouseOver=()=>{this.setState({isActive:!0})},this.handleMouseOut=()=>{this.setState({isActive:!1})},this.handleOnChooseFiles=(e,t)=>{this.props.onImageUpload&&this.props.onImageUpload(e,t)},this.renderEditableToggles=()=>{var e=(0,g.jsxs)(g.Fragment,{children:[this.props.canEditRichText?this.renderPMToolbar():this.renderUpsellPMToolbar(),this.props.canEditRichText&&!(0,lr.F)()?(0,g.jsx)(Xs.Z,{bgColor:"gray"},"contextDivider"):null,this.props.isCapableOfVoiceRecording&&!this.props.isMobileWebView?this.renderVoiceRecordingContextToggle():null]});return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(dr,{children:[e,(0,g.jsx)(M.ZP,{logActionName:"advanced_creation_rich_text_toolbar_premium_branding_badge_view"})]}),this.props.shouldShowImageUploadToggle?this.renderImageUploadContextToggle():null,this.props.shouldShowAutosuggestionToggle?this.renderAutosuggestionContextToggle():null,this.props.shouldShowVideoClipToggle?this.renderVideoClipContextToggle():null,this.props.shouldShowHintToggle?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(Xs.Z,{bgColor:"gray"},"contextDivider"),this.renderMoreContextToggles()]}):null]})},this.state={isActive:!1}}renderDragToggle(){var{shouldShowDragToggle:e}=this.props,t=l()("StudiableItemToolbar-dragToggle");return e?(0,g.jsx)("div",{className:t,children:(0,g.jsx)(er,{disabled:!this.state.isActive,icon:"drag",isActive:this.props.isDragged,onClick:()=>{}})}):null}renderDeleteToggle(){return(0,g.jsx)(er,{disabled:this.props.isDeleteToggleDisabled,icon:"garbage",onClick:this.handleDeleteItem,tooltip:(0,se.Z)("create_set.term_context.tooltips.delete_row")})}renderImageUploadContextToggle(){var{imageHelper:e,isImageLoading:t}=this.props,s=null!=e&&e.hasImage()?(0,se.Z)("create_set.term_context.tooltips.change_image"):(0,se.Z)("create_set.term_context.tooltips.add_image");return t?(0,g.jsx)("div",{className:"StudiableItemToolBar-spinnerWrapper",children:(0,g.jsx)(b.Z,{size:"small"})}):(0,g.jsx)(Z.Z,{mimeTypes:N.k4,onChooseFiles:this.handleOnChooseFiles,children:e=>(0,g.jsx)(er,{disabled:!this.props.enableImageUpload,icon:"image",iconProps:{variant:"borderless",size:"medium"},onClick:this.props.onToggleImageContext||e,tooltip:this.props.areTooltipsEnabled?s:void 0})})}renderVoiceRecordingContextToggle(){nr()(this.props.onToggleVoiceRecordingContext,"onToggleVoiceRecordingContext should exists at this point");var e=(0,g.jsx)(rr,{hasRecording:!!this.props.hasRecording,index:this.props.index,isActiveSide:!0,isRecordingContextOpen:!!this.props.isRecordingContextOpen,onToggleVoiceRecordingContext:this.props.onToggleVoiceRecordingContext,tooltipsEnabled:this.props.areTooltipsEnabled});return 0===this.props.index&&this.props.shouldShowTooltipAudio?(0,g.jsx)(P,{featurePopoverVariant:"audio",isVisible:!0,variant:"rounded",children:e}):e}renderAutosuggestionContextToggle(){return nr()(this.props.onToggleAutosuggest,"onToggleAutosuggest should exists at this point"),(0,g.jsx)(sr,{canShowTooltip:!!this.props.areTooltipsEnabled,isAutosuggestionContextOpen:!0,isAutosuggestionEnabled:!!this.props.isAutosuggestionEnabled,onToggleAutosuggest:this.props.onToggleAutosuggest})}renderUpsellPMToolbar(){return(0,g.jsx)(ar.Z,{isInCombinedToolbar:!0,shouldHideOuterBadge:!0})}renderPMToolbar(){var e=(0,g.jsx)(or.Z,{editorView:this.props.editorView,isInCombinedToolbar:!0}),t=0===this.props.index&&this.props.shouldShowTooltipRichText?(0,g.jsx)(P,{featurePopoverVariant:"rich-text",isVisible:!0,children:e}):e;return this.props.editorView?t:null}renderVideoClipContextToggle(){return(0,g.jsx)(er,{disabled:this.props.shouldDisableVideoClipToggle,icon:"video",onClick:this.handleAddVideoClip,tooltip:this.props.shouldDisableVideoClipToggle?(0,se.Z)("create_set.term_context.tooltips.add_video_explanation_disabled_text"):(0,se.Z)("create_set.term_context.tooltips.add_video_explanation")})}renderMoreContextToggles(){var{enableHint:e,shouldShowHintToggle:t}=this.props,s=this.isTypeExplanation()?(0,se.Z)("create_set.term_context.tooltips.add_explanation"):(0,se.Z)("create_set.term_context.tooltips.add_hint"),r=this.isTypeExplanation()?"info-inverse":"lightbulb";return(0,g.jsx)("div",{className:"StudiableItemToolbar-moreToggles",children:t?(0,g.jsx)(er,{disabled:!e,icon:r,isActive:!1,onClick:this.handleToggleHintOrExplanation,tooltip:s}):null})}render(){var{isTermActive:e,shouldRenderEditableToggles:t,shouldShowDeleteToggle:s,shouldShowOrder:r,shouldShowMobileToolbar:i}=this.props,n=l()("StudiableItemToolbar-counter",{}),o=l()("StudiableItemToolbar",{"is-term-active":e,"is-mobile-toolbar":i});return(0,g.jsxs)("div",{className:o,onMouseOut:this.handleMouseOut,onMouseOver:this.handleMouseOver,children:[r?(0,g.jsx)("span",{className:n}):null,(0,g.jsx)("div",{className:"StudiableItemToolbar-editableToggles",onMouseDown:this.handleMouseDown,children:t||i?this.renderEditableToggles():null}),this.renderDragToggle(),s?(0,g.jsx)("div",{className:"StudiableItemToolbar-actionableToggles",onMouseDown:this.handleMouseDown,children:this.renderDeleteToggle()}):null]})}isTypeExplanation(){var{hintToggleType:e}=this.props;return void 0!==e&&e===i.$Gk.MULTIPLE_CHOICE_OPTION}}s("./.linaria-cache/app/j/create_set/components/StudiableItemToolbar.linaria.css");var cr=s("./node_modules/keymaster/keymaster.js"),pr=s.n(cr),hr=s("./app/j/utils/FileListHelper.ts");class gr extends h.PureComponent{constructor(e){super(e),this.handleToggleHintOrExplanation=()=>{var{selectedMediaConnection:e,item:t}=this.props,{activeContext:s}=this.state;if(e)switch(e.connectionType){case i.$Gk.MULTIPLE_CHOICE_PROMPT:this.props.toggleHint(t);break;case i.$Gk.MULTIPLE_CHOICE_OPTION:s&&this.props.toggleExplanation(t.options[Pe()(s.index)])}},this.handleAddVideoClip=()=>{var{item:e}=this.props,{activeContext:t}=this.state,s=e.options[Pe()(null==t?void 0:t.index)].explanationConnectionMedia.find((e=>e.mediaType===i.DDH.VIDEO));s&&(s.video=this.generateEmptyVideoModel(),this.props.addOrUpdateStudiableMediaConnectionWithMedia([s]),this.props.onUpdateSelectedMediaConnection(s))},this.handleDelete=()=>{this.props.onDelete(this.props.item)},this.handleDeleteOption=e=>{var{item:t}=this.props;if(this.props.onDeleteOption&&t){var{options:s}=t,r=s.findIndex((t=>t.luid===e.luid)),i=null;s.length>1&&(i=0===r?s[1]:s[r-1]);var n=i?this.getTextConnectionMedia(i.optionConnectionMedia):null;n&&this.props.onUpdateSelectedMediaConnection(n),this.props.onDeleteOption(e,Pe()(t.luid))}},this.handleDragEnd=e=>{this.setState({isDragged:!1}),this.props.onDragEnd(e)},this.handleDragOver=e=>{this.props.onDragOver({id:e.id,rank:e.rank})},this.handleAddOption=()=>{this.props.onOptionAdded(this.props.item)},this.handleItemActive=()=>{pr().setScope(this.props.item.luid),pr()(Je.Z.studiableItem.tab,this.props.item.luid,(()=>{var{item:e}=this.props,{activeContext:t}=this.state;if(null!==t){var{type:s,index:r}=t;if(s===i.$Gk.MULTIPLE_CHOICE_OPTION)if(r&&r===e.options.length-1)return this.handleAddOption(),!1}}))},this.handleItemInactive=()=>{var{item:e}=this.props;pr().deleteScope(e.luid),pr().unbind(Je.Z.studiableItem.addItemBelowCurrent,e.id)},this.handleFocus=e=>{var{media:t,type:s,index:r}=e;this.props.onUpdateActiveStudiableItem(this.props.item),t&&this.props.onUpdateSelectedMediaConnection(t);var i={type:s};r&&(i.index=r-1),this.setState({activeContext:i})},this.handleDragStart=e=>{this.setState({isDragged:!0}),e.dataTransfer.effectAllowed="move"},this.handleMouseOver=()=>{this.setState({isDraggable:!1})},this.handleMouseOut=()=>{this.setState({isDraggable:!1})},this.handleDeleteText=e=>{var{item:t}=this.props;this.props.onDeleteText(e,t.luid)},this.handleDeleteImage=e=>{var{item:t}=this.props;this.props.onDeleteImage(e,t.luid)},this.handleDeleteVideo=e=>{var{item:t}=this.props;this.props.onDeleteVideo(e,t.luid)},this.handleQuestionTextChange=e=>{var{item:t}=this.props;this.props.onQuestionMediaChange({item:t,type:i.DDH.TEXT,value:e})},this.handleOptionTextChange=e=>{var{option:t,text:s}=e,{item:r}=this.props;this.props.onOptionMediaChange({item:r,option:t,type:i.DDH.TEXT,value:s})},this.handleHintTextChange=e=>{var{item:t}=this.props;this.props.onHintMediaChange({item:t,type:i.DDH.TEXT,value:e})},this.handleExplanationTextChange=(e,t)=>{var{item:s}=this.props;this.props.onExplanationMediaChange({item:s,option:e,type:i.DDH.TEXT,value:t})},this.handleExplanationVideoChange=(e,t)=>{var{item:s}=this.props;this.props.onExplanationMediaChange({item:s,option:e,type:i.DDH.VIDEO,value:t})},this.handleSATAQuestionOptionChange=e=>{this.setState({hasMultipleCorrectOptions:e.target.checked})},this.handleOnUpload=(e,t)=>{var s=()=>{t&&t.reset()},{numTotal:r}=(0,hr.e)(e,N.k4);if(r){if(!(e.length<=0)&&1===e.length&&1===r){var{selectedMediaConnection:n,item:o}=this.props,{activeContext:a}=this.state,l={item:o};n&&a&&(n.connectionType===i.$Gk.MULTIPLE_CHOICE_OPTION||n.connectionType===i.$Gk.MULTIPLE_CHOICE_OPTION_EXPLANATION)&&(l.option=o.options[Pe()(a.index)]),n&&this.props.onImageUpload({file:e[0],selectedMediaConnection:n,parentStudiables:l}),s()}}else s()},this.handleUpdateRichTextEditorView=e=>{this.setState({editorView:e})},this.handleOptionChecked=e=>{var{item:t}=this.props,{selectedOptions:s,hasMultipleCorrectOptions:r}=this.state,i={isCorrect:e.isCorrect,luid:e.luid},n=[i],o=[];if(r||1!==s.length){o=s.some((t=>t.luid===e.luid))?s.filter((t=>t.luid!==e.luid)):[...s,i]}else{var a={isCorrect:!1,luid:s[0].luid};n.push(a),o.push(i)}this.props.onOptionChange({options:n,studiableItemLuid:Pe()(t.luid)}),this.setState({selectedOptions:o})},this.onDragEnter=()=>{this.setState({isDraggedOver:!0})},this.onDragLeave=()=>{this.setState({isDraggedOver:!1})},this.onDrop=()=>{this.state.isDraggedOver&&this.setState({isDraggedOver:!1})};var{item:t}=e,s=[];t.options&&t.options.length>0&&t.options.forEach((e=>{e.isCorrect&&s.push(e)})),this.state={activeContext:null,editorView:null,isDraggable:!1,isDragged:!1,isDraggedOver:!1,selectedOptions:s,hasMultipleCorrectOptions:s.length>1}}componentDidUpdate(e){this.props.isActive&&!e.isActive?this.handleItemActive():!this.props.isActive&&e.isActive&&this.handleItemInactive()}getImageMediaConnectionFromConnections(e){return e.find((e=>e.mediaType===i.DDH.IMAGE))}getTextConnectionMedia(e){return e.map((e=>e)).find((e=>e.mediaType===i.DDH.TEXT))}renderExplanation(e,t,s){var{imageUploadStatus:r,shouldShowVideoExplanationCreation:n}=this.props,o=this.isFieldFocused(e,i.$Gk.MULTIPLE_CHOICE_OPTION_EXPLANATION),a=this.isFieldLoadingImage(e,i.$Gk.MULTIPLE_CHOICE_OPTION_EXPLANATION)?r.image:null;return(0,g.jsx)(Ks,{isFocused:o,isVideoInputDisabled:!n,media:e.explanationConnectionMedia,onBlur:this.handleExplanationTextChange.bind(this,e),onBlurVideo:this.handleExplanationVideoChange.bind(this,e),onDeleteImage:this.handleDeleteImage,onDeleteText:this.handleDeleteText,onDeleteVideo:this.handleDeleteVideo,onFocus:this.handleFocus,onUpdatePMEditorView:this.handleUpdateRichTextEditorView,placeholderImage:a,position:t+1,tabIndex:s,type:i.$Gk.MULTIPLE_CHOICE_OPTION_EXPLANATION},"explanation-"+e.luid)}renderHint(e){var{imageUploadStatus:t}=this.props,s=this.isFieldFocused(e,i.$Gk.MULTIPLE_CHOICE_HINT),r=this.isFieldLoadingImage(e,i.$Gk.MULTIPLE_CHOICE_HINT)?t.image:null,{tabIndex:n}=this.props;return(0,g.jsx)(Ks,{isFocused:s,media:e.hintConnectionMedia,onBlur:this.handleHintTextChange,onDeleteImage:this.handleDeleteImage,onDeleteText:this.handleDeleteText,onFocus:this.handleFocus,onUpdatePMEditorView:this.handleUpdateRichTextEditorView,placeholderImage:r,tabIndex:n+1,type:i.$Gk.MULTIPLE_CHOICE_HINT})}renderOptions(){var{imageUploadStatus:e,item:t,tabIndex:s}=this.props,{selectedOptions:r,hasMultipleCorrectOptions:n}=this.state;return t.options.map(((o,a)=>{var{explanationConnectionMedia:l}=o,d=r.length?!!r.find((e=>e.luid===o.luid)):o.isCorrect,u=this.isFieldFocused(o,i.$Gk.MULTIPLE_CHOICE_OPTION),c=this.isFieldLoadingImage(o,i.$Gk.MULTIPLE_CHOICE_OPTION)?e.image:null,p=s+2+2*a,m=p+1;return(0,g.jsxs)(h.Fragment,{children:[(0,g.jsx)(Qs,{hasMultipleCorrectOptions:t.hasMultipleCorrectOptions||n,isCorrect:d,isFocused:u,isPhantom:!1,number:a+1,onBlur:this.handleOptionTextChange,onDeleteImage:this.handleDeleteImage,onDeleteOption:this.handleDeleteOption,onDeleteText:this.handleDeleteText,onFocus:this.handleFocus,onOptionChange:this.handleOptionChecked,onUpdateRichTextEditorView:this.handleUpdateRichTextEditorView,option:o,optionGroupName:"mcqStudiableItem-"+t.luid,placeholderImage:c,tabIndex:p},o.luid),l&&l.length>0?this.renderExplanation(o,a,m):null]},"group-"+o.luid)}))}renderPhantomOption(){var{hasMultipleCorrectOptions:e}=this.state,{item:t,tabIndex:s}=this.props,r=t.options.length,i=s+2*hs.multipleChoiceOptions.MAX_ITEMS;return(0,g.jsx)(Qs,{hasMultipleCorrectOptions:t.hasMultipleCorrectOptions||e,isPhantom:!0,number:r+1,onAddOption:this.handleAddOption,onFocus:this.handleFocus,optionGroupName:"mcqStudiableItem-"+t.luid,tabIndex:i})}renderSATAQuestionToggle(){return(0,g.jsx)("div",{className:"EditableMcqItem-SATAToggle",children:(0,g.jsx)(Ts.Z,{checked:this.state.hasMultipleCorrectOptions,disabled:!(!this.state.hasMultipleCorrectOptions||!this.props.item.hasMultipleCorrectOptions),label:(0,se.Z)("create_set.multiple_choice_questions.sata_question_toggle"),onChange:this.handleSATAQuestionOptionChange})})}render(){var{imageUploadStatus:e,isActive:t,isDeleteDisabled:s,item:r,selectedMediaConnection:n,tabIndex:o,shouldShowVideoExplanationCreation:a}=this.props,l=!s,d=(null==n?void 0:n.connectionType)||i.$Gk.MULTIPLE_CHOICE_PROMPT,u=this.isFieldFocused(r,i.$Gk.MULTIPLE_CHOICE_PROMPT),c=this.isFieldLoadingImage(r,i.$Gk.MULTIPLE_CHOICE_PROMPT)?this.props.imageUploadStatus.image:null,p=(null==n?void 0:n.connectionType)===i.$Gk.MULTIPLE_CHOICE_OPTION_EXPLANATION;return(0,g.jsx)("div",{className:"EditableMcqItem-animationWrapper",children:(0,g.jsxs)("div",{className:"EditableMcqItem",draggable:this.state.isDraggable,onDragEnd:this.handleDragEnd.bind(this,r.id),onDragEnter:this.props.onDragEnter,onDragLeave:this.props.onDragLeave,onDragOver:this.handleDragOver.bind(this,r),onDragStart:this.handleDragStart,onDrop:this.onDrop,onMouseOut:this.handleMouseOut,onMouseOver:this.handleMouseOver,children:[(0,g.jsx)(ur,{areTooltipsEnabled:!0,canEditRichText:!0,editorView:this.state.editorView,enableHint:t,enableImageUpload:t,hintToggleType:d,isDragged:this.state.isDragged,isImageLoading:e.isLoading&&t,isTermActive:!0,onAddVideoClip:this.handleAddVideoClip,onDelete:this.handleDelete,onImageUpload:this.handleOnUpload,onToggleHintOrExplanation:this.handleToggleHintOrExplanation,shouldDisableVideoClipToggle:!p||!t,shouldRenderEditableToggles:!0,shouldShowDeleteToggle:l,shouldShowDragToggle:!1,shouldShowHintToggle:!0,shouldShowImageUploadToggle:!0,shouldShowOrder:!0,shouldShowVideoClipToggle:a}),(0,g.jsxs)("div",{className:"EditableMcqItem-content",children:[(0,g.jsx)($s,{isFocused:u,onBlur:this.handleQuestionTextChange,onDeleteImage:this.handleDeleteImage,onDeleteText:this.handleDeleteText,onFocus:this.handleFocus,onUpdateRichTextEditorView:this.handleUpdateRichTextEditorView,placeholderImage:c,promptMedia:r.promptConnectionMedia,tabIndex:o}),r.hintConnectionMedia&&r.hintConnectionMedia.length>0?this.renderHint(r):null,(0,g.jsxs)("div",{className:"EditableMcqItem-options",children:[(0,g.jsx)(je.uH,{component:"div",transitionEnter:!0,transitionLeave:!0,transitionName:"CreateSetPage-multipleChoiceOptions--animateItem",children:this.renderOptions()}),this.shouldShowPhantomOption()?this.renderPhantomOption():null,this.shouldShowSATAQuestionToggle()?this.renderSATAQuestionToggle():null]})]})]})})}generateEmptyVideoModel(){return{clipEndSeconds:null,clipStartSeconds:0,code:null,provider:null,providerVideoId:""}}isFieldFocused(e,t){var{selectedMediaConnection:s}=this.props;return!(!s||s.connectionModelLuid!==e.luid||s.connectionType!==t)}isFieldLoadingImage(e,t){var{imageUploadStatus:s}=this.props;return!(e.luid!==s.connectionLuid||s.connectionType!==t)}shouldShowSATAQuestionToggle(){var{item:e}=this.props,t=e.options.some((e=>e.isCorrect));return e.options.length>hs.multipleChoiceOptions.MIN_ITEMS_PER_QUESTION&&t}shouldShowPhantomOption(){var{item:e}=this.props;return e.options.length<hs.multipleChoiceOptions.MAX_ITEMS}}var mr=(0,le.Z)()(gr),_r=s("./app/j/utils/ScrollHelper.ts");class fr extends h.Component{constructor(e){super(e),this.handleAddOption=e=>{var{addOptionsForStudiableItem:t}=this.props;t&&e.luid&&t(e.luid,1)},this.handleDeleteStudiableItem=e=>{this.props.removeStudiableItem(e)},this.handleDeleteImageMediaConnection=(e,t)=>{var{deleteStudiableMediaConnection:s}=this.props;s&&s(e,i.DDH.IMAGE,t)},this.handleDeleteTextMediaConnection=(e,t)=>{var{deleteStudiableMediaConnection:s}=this.props;s&&s(e,i.DDH.TEXT,t)},this.handleDeleteVideoMediaConnection=(e,t)=>{var{deleteStudiableMediaConnection:s}=this.props;s&&s(e,i.DDH.VIDEO,t)},this.handleDragEnd=e=>{var{draggedOverStudiableItem:t}=this.state,{moveStudiableItem:s}=this.props;t&&s({id:e,idAtNewPosition:t.id})},this.handleDragOver=e=>{this.setState({draggedOverStudiableItem:e})},this.handleImageUpload=e=>{var{uploadImageMedia:t}=this.props;t&&t(e)},this.handleUpdateActiveStudiableItem=e=>{var{activeQuestion:t}=this.state;null!==t&&t.luid===e.luid||this.setState({activeQuestion:e})},this.handleClickAddCard=()=>{var{createStudiableItem:e}=this.props;e(),_r.Z.scrollToBottom()},this.state={activeQuestion:null,draggedOverStudiableItem:null}}getTabIndex(e){return(2*hs.multipleChoiceOptions.MAX_ITEMS+2)*e+hs.studiableItems.FIRST_TAB_INDEX}renderAddStudiableItemsButton(){var{studiableMultipleChoiceQuestions:e}=this.props;return e&&e.length<hs.studiableItems.MAX_ITEMS?(0,g.jsx)("div",{className:"CreateSetPage-addStudiableItem",onClick:this.handleClickAddCard,children:(0,g.jsx)(He.Z,{"aria-label":(0,se.Z)("create_set.term_context.tooltips.add_row"),children:(0,se.Z)("create_set.term_context.tooltips.add_row")})}):null}renderMcqs(){var{addOrUpdateStudiableMediaConnectionWithMedia:e,deleteMultipleChoiceOption:t,imageUploadStatus:s,saveMultipleChoiceOption:r,selectedMediaConnection:i,studiableMultipleChoiceQuestions:n,toggleExplanation:o,toggleHint:a,updateExplanationMedia:l,updateHintMedia:d,updateOptionMedia:u,updateQuestionMedia:c,updateSelectedMediaConnection:p,setLuid:h,shouldShowVideoExplanationCreation:m}=this.props;if(!(t&&s&&r&&n&&o&&a&&l&&d&&u&&c&&p))return null;var _=n.length<=hs.studiableItems.MIN_ITEMS_FOR_PUBLISH;return(0,g.jsx)(g.Fragment,{children:n.map(((n,f)=>(0,g.jsx)(mr,{addOrUpdateStudiableMediaConnectionWithMedia:e,imageUploadStatus:s,isActive:this.isQuestionActive(n),isDeleteDisabled:_,item:n,onDelete:this.handleDeleteStudiableItem,onDeleteImage:this.handleDeleteImageMediaConnection,onDeleteOption:t,onDeleteText:this.handleDeleteTextMediaConnection,onDeleteVideo:this.handleDeleteVideoMediaConnection,onDragEnd:this.handleDragEnd,onDragOver:this.handleDragOver,onExplanationMediaChange:l,onHintMediaChange:d,onImageUpload:this.handleImageUpload,onOptionAdded:this.handleAddOption,onOptionChange:r,onOptionMediaChange:u,onQuestionMediaChange:c,onUpdateActiveStudiableItem:this.handleUpdateActiveStudiableItem,onUpdateSelectedMediaConnection:p,selectedMediaConnection:i,shouldShowVideoExplanationCreation:m,studiableContainerLuid:h,tabIndex:this.getTabIndex(f),toggleExplanation:o,toggleHint:a},n.luid)))})}render(){var e=!(0,$.s2)();return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(je.uH,{component:"div",transitionEnter:e,transitionLeave:e,transitionName:"CreateSetPage-multipleChoiceQuestions--animateItem",children:(0,g.jsx)("div",{"data-testid":"EditableMcqItemsContainer",children:this.renderMcqs()})}),this.renderAddStudiableItemsButton()]})}isQuestionActive(e){var{activeQuestion:t}=this.state;return null!==t&&e.luid===t.luid}}var vr=(0,is.Z)("ErrorAlertConstants",{actions:{DISMISS:null,CREATE:null},ignoredValidationErrors:{set:{requires_title:null,requires_word_lang:null,requires_def_lang:null,min_diagram_shapes:null,min_terms:null}},permissions:{UNDER_13:null,NOT_CREATOR:null}}),Sr={dismiss(){G.Z.viewAction(vr.actions.DISMISS)},create(e,t,s){G.Z.viewAction(vr.actions.CREATE,{title:e,messages:t,fatal:s})}};class Cr extends h.PureComponent{constructor(){super(...arguments),this.onDismiss=()=>{Sr.dismiss()}}getIsFatal(){return!!this.props.activeError&&this.props.activeError.fatal}getMessages(){return this.props.activeError?this.props.activeError.messages:[]}getSecondaryMessages(){return this.props.activeError?this.props.activeError.secondaryMessages:[]}getIsOpen(){return!!this.props.activeError}renderDismissButton(){return(0,g.jsx)(Ae.wI,{onClick:this.onDismiss,text:(0,se.Z)("create_set.error_alert.dismiss_button")})}renderSecondaryMessages(){var e=this.getSecondaryMessages().map(((e,t)=>(0,g.jsx)("div",{children:e},"message"+t)));if(e.length)return(0,g.jsx)(we.Z,{children:(0,g.jsx)("ul",{children:e.map(((e,t)=>(0,g.jsx)("li",{children:e},t)))})})}renderGeneralError(){var e=this.getMessages().map(((e,t)=>{var s=e;return"object"==typeof e&&(s=e.message),(0,g.jsx)("li",{children:s},"error"+t)})),t=this.renderDismissButton();return this.getIsFatal()?(0,g.jsxs)("div",{children:[(0,g.jsx)(ut.Z,{id:"create_set.error_alert.log_back_in_description",loginUrl:(0,g.jsx)(Ie.ZP,{linkTo:"/login",text:(0,se.Z)("create_set.error_alert.log_back_in_description_link")})}),this.renderSecondaryMessages()]}):(0,g.jsxs)("div",{children:[(0,g.jsx)("ul",{children:e}),this.renderSecondaryMessages(),(0,g.jsx)("div",{children:t})]})}render(){var e;return this.props.activeError&&(e=this.props.activeError.title),e||(e=(0,g.jsx)(ut.Z,{id:"create_set.error_alert.titles.unknown"})),(0,g.jsx)(Ge.g,{body:this.renderGeneralError(),isOpen:this.getIsOpen(),onClose:this.onDismiss,title:e})}}s("./node_modules/core-js/modules/es.regexp.constructor.js"),s("./node_modules/core-js/modules/es.regexp.to-string.js"),s("./node_modules/core-js/modules/es.object.values.js");var br=s("./app/j/components/TrackedCursorTextarea.tsx"),yr=s("./app/j/components/UIRadioGroup.tsx"),Er=s("./app/j/i18n/getLocalizedLanguage.ts");class jr extends h.PureComponent{constructor(){super(...arguments),this.getWordPlaceholder=()=>this.props.wordLang&&this.props.wordLang!==this.props.defLang?(0,Er.Z)(this.props.wordLang):(0,se.Z)("create_set.import.preview.sides.term"),this.getDefinitionPlaceholder=()=>this.props.defLang&&this.props.wordLang!==this.props.defLang?(0,Er.Z)(this.props.defLang):(0,se.Z)("create_set.import.preview.sides.definition")}render(){var e=null;if(this.props.rows.length)e=this.props.rows.map(((e,t)=>{var{word:s,definition:r}=e;return(0,g.jsx)("div",{className:"TermRowsPreview-row",children:(0,g.jsxs)("div",{className:"TermContent",children:[(0,g.jsx)("div",{className:"TermContent-counter"}),(0,g.jsx)("div",{className:"TermContent-inner",children:(0,g.jsx)("div",{className:"TermContent-sides",children:(0,g.jsxs)("div",{className:"TermContent-sideWrap",children:[(0,g.jsx)("div",{className:"TermContent-side TermContent-side--word",children:(0,g.jsx)(Es.Z,{id:s+"-"+t,label:this.getWordPlaceholder(),onChange:()=>{},type:"autoExpand",value:s})}),(0,g.jsx)("div",{className:"TermContent-side TermContent-side--definition",children:(0,g.jsx)(Es.Z,{id:r+"-"+t,label:this.getDefinitionPlaceholder(),onChange:()=>{},type:"autoExpand",value:r})})]})})})]})},"term-row-preview-"+t)}));else if(this.props.noRowsMessage)return(0,g.jsx)("p",{children:this.props.noRowsMessage});return(0,g.jsx)("div",{className:"TermRowsPreview",children:e})}}jr.defaultProps={rows:[],wordLang:"en",defLang:"en"};var xr=jr,Tr=s("./node_modules/lodash/debounce.js"),Ir=s.n(Tr),wr=s("./node_modules/lodash/size.js"),Ar=s.n(wr),Or=s("./app/j/utils/escape-regex.ts"),Rr=s("./app/j/utils/keyReflect.ts"),Dr=s("./app/j/utils/transformTermText.ts"),Lr=s("./app/j/utils/trim.ts"),Pr=(0,Rr.Z)("Delimiter",{TAB:null,COMMA:null,NEWLINE:null,SEMICOLON:null,CUSTOM:null}),Mr="IMPORT";class Zr extends h.PureComponent{constructor(){super(...arguments),this.state={convertedTerms:{},convertedTermsOrder:[],customTermDelimiter:"",customWordDelimiter:"",isHidden:!this.props.shouldShow,isImporting:!1,isLoading:!1,maxPreviewRows:Ds.Rj.MAX_TERMS,termDelimiter:Pr.NEWLINE,textareaContent:"",tooManyTerms:!1,wordDelimiter:Pr.TAB},this.onTransitionInEnd=()=>{this.componentRef&&je.m7.off(this.componentRef,this.onTransitionInEnd),F.Z.hideTerms()},this.onClose=()=>{pr().popScope(Mr),pr().unbind(Je.Z.modal.exit,Mr),this.componentRef&&je.m7.on(this.componentRef,this.onTransitionOutEnd)},this.onTransitionOutEnd=()=>{this.componentRef&&je.m7.off(this.componentRef,this.onTransitionOutEnd),this.setState({isHidden:!this.props.shouldShow})},this.onKeyDown=e=>{switch(e.key){case"Tab":var t=this.textareaRef?this.textareaRef.getSelectionStart():-1,s=this.textareaRef?this.textareaRef.getSelectionEnd():-1;if(-1!==s){e.preventDefault();var{textareaContent:r}=this.state,i=r.slice(0,t)+"\t"+r.slice(s);this._onChange(i,t+1)}break;case"Enter":e.metaKey&&this.onImportClick(e)}},this.onChange=e=>{var{value:t}=e.target;this._onChange(t)},this.onOpen=()=>{pr().pushScope(Mr),pr()(Je.Z.modal.exit,Mr,(()=>{if(!this.state.isImporting)return this._onCancel(),!1})),this.setState({maxPreviewRows:V.ZP.getNumFreeTerms(),isHidden:!1}),this.componentRef&&je.m7.on(this.componentRef,this.onTransitionInEnd)},this.onCancel=e=>{e.preventDefault(),this._onCancel()},this.onImportClick=e=>{e.preventDefault();var{convertedTerms:t,convertedTermsOrder:s}=this.state;this.setState({isImporting:!0}),window.setTimeout((()=>{this.props.onImport(t,s),this.reset()}),300)},this.changeWordDelimiter=e=>{this.setState({wordDelimiter:e},(()=>{e===Pr.CUSTOM&&""===this.state.customWordDelimiter||this.previewData(),e===Pr.CUSTOM&&this.customWordDelimiterInput&&this.customWordDelimiterInput.focus()}))},this.changeCustomTermDelimiter=e=>{var t=e.target.value,s=this.state.customTermDelimiter,r=this.state.termDelimiter;this.setState({termDelimiter:Pr.CUSTOM,customTermDelimiter:t},(()=>{r===Pr.CUSTOM&&t===s||this.previewData()}))},this.changeCustomWordDelimiter=e=>{var t=e.target.value,s=this.state.customWordDelimiter,r=this.state.wordDelimiter;this.setState({wordDelimiter:Pr.CUSTOM,customWordDelimiter:t},(()=>{r===Pr.CUSTOM&&t===s||this.previewData()}))},this._previewDataNow=()=>{var[e,t,s]=this.convertDataToTerms(this.state.textareaContent,this.state.maxPreviewRows);this.setState({tooManyTerms:s,convertedTerms:e,convertedTermsOrder:t},(()=>this.setState({isLoading:!1})))},this.changeTermDelimiter=e=>{this.setState({termDelimiter:e},(()=>{e===Pr.CUSTOM&&""===this.state.customTermDelimiter||this.previewData(),e===Pr.CUSTOM&&this.customTermDelimiterInput&&this.customTermDelimiterInput.focus()}))},this._previewDataDebounced=Ir()(this._previewDataNow,500)}UNSAFE_componentWillReceiveProps(e){e.shouldShow&&this.setState({isLoading:!1,isImporting:!1}),!this.props.shouldShow&&e.shouldShow?this.onOpen():this.props.shouldShow&&!e.shouldShow&&this.onClose()}componentDidUpdate(e){!e.shouldShow&&this.props.shouldShow&&this.didOpen()}getPlaceholderText(){var e=[[(0,se.Z)("create_set.import.placeholder.word1"),(0,se.Z)("create_set.import.placeholder.definition1")],[(0,se.Z)("create_set.import.placeholder.word2"),(0,se.Z)("create_set.import.placeholder.definition2")],[(0,se.Z)("create_set.import.placeholder.word3"),(0,se.Z)("create_set.import.placeholder.definition3")]],t=this.getWordDelimiterString(),s=this.getTermDelimiterString();return e.map((e=>e.join(t))).join(s)}getWordDelimiterRegex(){var e=this.getWordDelimiterString();return this.state.wordDelimiter===Pr.COMMA?/([,，、，])/:new RegExp("("+(0,Or.Z)(e)+")")}getLuid(e){return"preview-row-"+e}getWordDelimiterString(){switch(this.state.wordDelimiter){case Pr.TAB:return"\t";case Pr.COMMA:return",";case Pr.CUSTOM:return this.parseDelimiter(this.state.customWordDelimiter||"\t");default:throw new Error("Unrecognized word delimiter in terms import")}}getTermDelimiterString(){switch(this.state.termDelimiter){case Pr.NEWLINE:return"\n";case Pr.SEMICOLON:return";";case Pr.CUSTOM:return this.parseDelimiter(this.state.customTermDelimiter||"\n");default:throw new Error("Unrecognized term delimiter in terms import")}}getTermDelimiterRegex(){var e=new RegExp((0,Or.Z)(this.getTermDelimiterString()));return this.state.termDelimiter===Pr.SEMICOLON&&(e=/[;；]/),e}render(){var e=Object.values(this.state.convertedTerms),t=this.state.isLoading?(0,g.jsx)("div",{className:"ImportTerms-loadingOverlay",children:(0,g.jsx)("div",{className:"ImportTerms-loadingSpinner",children:(0,g.jsx)(b.Z,{size:"large"})})},"loading"):null,s=this.state.isImporting?(0,g.jsx)("div",{className:"ImportTerms-importOverlay",children:(0,g.jsx)("div",{className:"ImportTerms-importSpinner",children:(0,g.jsx)(b.Z,{size:"large"})})},"import"):null,r=this.state.tooManyTerms?(0,g.jsxs)("div",{className:"ImportTerms-maxRowsWarning",children:[(0,g.jsx)("h3",{children:(0,g.jsx)(_.Z,{id:"create_set.import.preview.too_many_terms.title",numTermsLimit:Ds.Rj.MAX_TERMS})}),(0,g.jsx)("p",{children:(0,g.jsx)(_.Z,{id:"create_set.import.preview.too_many_terms.subtitle",numTerms:this.state.maxPreviewRows})})]}):null,i=Ar()(this.state.convertedTerms),n=(0,g.jsx)(T.Z,{deprecatedStyle:!0,size:4,children:(0,g.jsx)(_.Z,{id:"create_set.import.preview.title"})}),o=0===i?n:(0,g.jsxs)(T.Z,{deprecatedStyle:!0,size:4,children:[(0,g.jsx)(_.Z,{id:"create_set.import.preview.title"}),(0,g.jsx)("span",{className:"ImportTerms-numTerms",children:(0,g.jsx)(_.Z,{id:"create_set.import.preview.num_terms",numTerms:i})})]}),a=l()("ImportTerms",{"is-showing":this.props.shouldShow,"is-hidden":this.state.isHidden,"is-loading":this.state.isLoading});return(0,g.jsxs)("div",{className:a,ref:e=>{this.componentRef=e},children:[(0,g.jsx)("div",{className:"ImportTerms-import",children:(0,g.jsxs)(S.Z,{children:[(0,g.jsx)("div",{className:"ImportTerms-cancelImportButtonWrap",children:(0,g.jsx)(He.Z,{"aria-label":(0,se.Z)("create_set.import.cancel_button"),onClick:this.onCancel,children:(0,g.jsx)(_.Z,{id:"create_set.import.cancel_button"})})}),(0,g.jsx)("span",{className:"ImportTerms-heading",children:(0,g.jsx)(_.Z,{id:"create_set.import.title"})})," ",(0,g.jsx)("span",{className:"ImportTerms-instructions",children:(0,g.jsx)(_.Z,{id:"create_set.import.instructions"})}),(0,g.jsxs)("form",{className:"ImportTerms-form",children:[(0,g.jsx)(br.Z,{className:"ImportTerms-textarea",onChange:this.onChange,onKeyDown:this.onKeyDown,placeholder:this.getPlaceholderText(),ref:e=>{this.textareaRef=e},value:this.state.textareaContent}),(0,g.jsx)("div",{className:"ImportTerms-importButtonWrap",children:(0,g.jsx)(v.Z,{"aria-label":(0,se.Z)("create_set.import.import_button"),disabled:0===e.length||this.state.isLoading||this.state.isImporting,hero:!0,onClick:this.onImportClick,children:(0,g.jsx)(_.Z,{id:"create_set.import.import_button"})})}),(0,g.jsxs)("div",{className:"ImportTerms-formGroupWrap",children:[(0,g.jsxs)("div",{className:"ImportTerms-formGroup",children:[(0,g.jsx)("label",{className:"ImportTerms-formLabel",children:(0,g.jsx)(_.Z,{id:"create_set.import.settings.column_delimiter.title"})}),(0,g.jsxs)(yr.Z,{onChange:this.changeWordDelimiter,value:this.state.wordDelimiter,children:[(0,g.jsx)(Ys.Z,{label:(0,g.jsx)(_.Z,{id:"create_set.import.settings.column_delimiter.tab"}),value:Pr.TAB}),(0,g.jsx)(Ys.Z,{label:(0,g.jsx)(_.Z,{id:"create_set.import.settings.column_delimiter.comma"}),value:Pr.COMMA}),(0,g.jsx)(Ys.Z,{label:(0,g.jsx)("span",{className:"ImportTerms-formCustomDelimiter",children:(0,g.jsx)(Os.Z,{label:(0,g.jsx)(_.Z,{id:"create_set.import.settings.column_delimiter.custom"}),onChange:this.changeCustomWordDelimiter,onFocus:this.changeCustomWordDelimiter,placeholder:"-",ref:e=>{this.customWordDelimiterInput=e},type:"text",value:this.state.customWordDelimiter})}),value:Pr.CUSTOM})]})]}),(0,g.jsxs)("div",{className:"ImportTerms-formGroup",children:[(0,g.jsx)("label",{className:"ImportTerms-formLabel",children:(0,g.jsx)(_.Z,{id:"create_set.import.settings.row_delimiter.title"})}),(0,g.jsxs)(yr.Z,{onChange:this.changeTermDelimiter,value:this.state.termDelimiter,children:[(0,g.jsx)(Ys.Z,{label:(0,g.jsx)(_.Z,{id:"create_set.import.settings.row_delimiter.new_line"}),value:Pr.NEWLINE}),(0,g.jsx)(Ys.Z,{label:(0,g.jsx)(_.Z,{id:"create_set.import.settings.row_delimiter.semicolon"}),value:Pr.SEMICOLON}),(0,g.jsx)(Ys.Z,{label:(0,g.jsx)("span",{className:"ImportTerms-formCustomDelimiter",children:(0,g.jsx)(Os.Z,{label:(0,g.jsx)(_.Z,{id:"create_set.import.settings.row_delimiter.custom"}),onChange:this.changeCustomTermDelimiter,onFocus:this.changeCustomTermDelimiter,placeholder:"\\n\\n",ref:e=>{this.customTermDelimiterInput=e},type:"text",value:this.state.customTermDelimiter})}),value:Pr.CUSTOM})]})]})]})]})]})}),(0,g.jsx)(je.uH,{component:"div",transitionName:"ImportTerms-spinner--animate",children:s}),(0,g.jsxs)("div",{className:"ImportTerms-preview",children:[(0,g.jsx)(je.uH,{component:"div",transitionName:"ImportTerms-spinner--animate",children:t}),(0,g.jsxs)(S.Z,{children:[o,r,(0,g.jsx)("div",{className:"ImportTerms-previewRows",children:(0,g.jsx)(xr,{defLang:this.props.defLang,noRowsMessage:this.state.isLoading?(0,se.Z)("create_set.import.preview.loading"):(0,se.Z)("create_set.import.preview.no_content"),rows:e,wordLang:this.props.wordLang})})]})]})]})}reset(e){this.setState({convertedTerms:{},convertedTermsOrder:[],textareaContent:"",tooManyTerms:!1,isLoading:!1,isImporting:!1},(()=>{e&&e()}))}previewData(){this.setState({isLoading:!0}),this.state.convertedTermsOrder.length?this._previewDataDebounced():window.setTimeout((()=>this._previewDataNow()),0)}parseDelimiter(e){return e.replace(/\\n/g,"\n").replace(/\\t/g,"\t")}convertDataToTerms(e,t){if(void 0===t&&(t=0),!e)return[{},[],!1];for(var s=this._parseData(e),r=!1,i={},n=[],o=0;o<s.length;o+=2){if(t>=0&&n.length>=t){r=!0;break}var a=this.getLuid(o/2),l=(0,Dr.Z)(s[o],this.props.wordLang,this.props.defLang),d=(0,Dr.Z)(s[o+1],this.props.defLang,this.props.wordLang);(l||d)&&(i[a]={word:l,definition:d},n.push(a))}return[i,n,r]}_parseData(e){var t=this._cleanData(e);if(""===t)return[];var s=this.getTermDelimiterString(),r=this.getWordDelimiterString(),i=this.getWordDelimiterRegex(),n=this.getTermDelimiterRegex(),o=[];for(var a of t.split(n)){var l=a.split(i);if(3===l.length)o.push(l[0],l[2]);else if(1===l.length&&""!==l[0])o.push(l[0]),s!==r&&o.push("");else if(l.length>3){var d=l.shift();l.shift();var u=l.join("");o.push(d,u)}}return o}_onCancel(){this.reset(this.props.onCancel)}_cleanData(e){return(0,Lr.Z)(e.replace(/[ ]{4}/g,"\t").replace(/\r\n/g,"\n"))}focus(){this.textareaRef&&this.textareaRef.focus()}didOpen(){this.focus()}_onChange(e,t){this.setState({textareaContent:e},(()=>{t&&this.textareaRef&&this.textareaRef.setCaretPosition(t),this.previewData()}))}}Zr.defaultProps={shouldShow:!0};var kr=s("./app/j/components/AutoExpandTextarea.tsx"),Ur=s("./node_modules/react-dom/index.js"),Nr=s("./app/j/utils/is-element-active.ts"),Fr="SetDescriptionModalBody";class Br extends h.PureComponent{constructor(){super(...arguments),this.state={description:this.props.description},this.getPlaceholder=()=>this.props.description?(0,se.Z)("create_set.set_description_modal.optional"):void 0,this.onClickSave=e=>{e.preventDefault(),this.props.onClose()},this.onTextareaClick=e=>{e.stopPropagation()},this.onChange=e=>{this.setState({description:e.target.value})},this.onBlur=e=>{var{value:t}=e.target;if((t||this.props.description)&&t!==this.props.description)return this.updateAction({description:t})},this.updateAction=e=>{F.Z.update(this.props.setLuid,e)},this.focus=()=>{this.textarea.focus(kr.b)}}componentDidMount(){pr().pushScope(Fr),pr()(Je.Z.modal.tab,Fr,(()=>{if((0,Nr.Z)((0,Ur.findDOMNode)(this.saveButton)))return this.focus(),!1})),this.focus()}componentWillUnmount(){pr().popScope(Fr),pr().unbind(Je.Z.modal.tab,Fr)}render(){return(0,g.jsxs)("div",{children:[(0,g.jsx)(Be.Z,{className:"SetDescriptionModal-textarea",children:(0,g.jsx)(kt.Z,{invalid:this.props.hasProfanityError||void 0,label:this.props.hasProfanityError?(0,g.jsx)(_.Z,{id:"create_set.set_description_modal.profanity_error"}):(0,g.jsx)(_.Z,{id:"create_set.set_description_modal.label"}),languageCodes:[this.props.wordLang,this.props.defLang],onBlur:this.onBlur,onChange:this.onChange,onClick:this.onTextareaClick,placeholder:this.getPlaceholder(),ref:e=>{e&&(this.textarea=e)},tabIndex:6,type:"autoExpand",value:this.state.description})}),(0,g.jsx)(Be.Z,{className:"SetDescriptionModal-saveButton",children:(0,g.jsx)(v.Z,{"aria-label":(0,se.Z)("create_set.set_description_modal.save_button"),hero:!0,onClick:this.onClickSave,ref:e=>{this.saveButton=e},tabIndex:6,width:"fill",children:(0,g.jsx)(_.Z,{id:"create_set.set_description_modal.save_button"})})})]})}}class Hr extends h.PureComponent{render(){return(0,g.jsx)(w.Z,{headerContent:(0,g.jsx)(_.Z,{id:"create_set.set_description_modal.title"}),isOpen:this.props.isOpen,onClose:this.props.onClose,children:!!this.props.isOpen&&(0,g.jsx)(Br,{defLang:this.props.defLang,description:this.props.description,hasProfanityError:this.props.hasProfanityError,onClose:this.props.onClose,setLuid:this.props.setLuid,wordLang:this.props.wordLang})})}}var Vr="SetPermissions";class Gr extends h.PureComponent{constructor(){super(...arguments),this.state=this.getEmptyState(),this.onOpen=()=>{pr().pushScope(Vr),pr()(Je.Z.modal.tab,Vr,(()=>(this.focusViewing(),!1))),this.setState(this.getEmptyState())},this.onClose=()=>{pr().popScope(Vr),pr().unbind(Je.Z.modal.tab,Vr),this.setState(this.getEmptyState())},this.handleChangeViewableOption=e=>{(0,Y.Z)("new_create_set_change_permissions"),Ke.Z.changePermission(Ye.mA.VIEWING,e.currentTarget.value)},this.handleChangeEditableOption=e=>{(0,Y.Z)("new_create_set_change_permissions"),Ke.Z.changePermission(Ye.mA.EDITING,e.currentTarget.value)},this.handleChangePassword=e=>{this.setState({password:e.currentTarget.value})},this.getValidationErrors=()=>Ms.validate(this.getValidationParams(this.props)),this.hasValidationErrors=()=>this.getValidationErrors().length>0,this.onDoneEditing=()=>{var e=this.getValidationErrors();this.setState({errors:e}),0===e.length&&(this.updateSetPermissions(),Ke.Z.persistClassSetsForPermissions(this.props.setLuid),this.props.onClose())},this.handleToggleClass=e=>{var t=e.currentTarget.value;Ke.Z.toggleClass(t)},this.handleToggleClassPermissions=e=>{var t=e.currentTarget.value;Ke.Z.toggleClassPermissions(t)},this.onDoneClick=e=>{e.preventDefault(),this.onDoneEditing()}}UNSAFE_componentWillReceiveProps(e){!this.props.isOpen&&e.isOpen?this.onOpen():this.props.isOpen&&!e.isOpen&&this.onClose();var t=Ms.validate(this.getValidationParams(e),!0);this.setState({errors:t})}getEmptyState(){return{errors:[],password:this.props.set.password}}getValidationParams(e){return{editableBy:e.permissions.editableBy,errors:this.state.errors,password:this.state.password,passwordEdit:e.set.passwordEdit,passwordUse:e.set.passwordUse,selectedClassLuids:e.selectedClassLuids,selectedEditableByClassLuids:e.selectedEditableByClassLuids,viewableBy:e.permissions.viewableBy}}render(){return(0,g.jsx)("div",{className:"SetPermissions",children:(0,g.jsx)(w.Z,{headerContent:(0,g.jsx)(_.Z,{id:"create_set.permissions.title"}),isOpen:this.props.isOpen,onClose:this.onDoneEditing,preventClose:this.hasValidationErrors(),children:(0,g.jsx)(Zs,Object.assign({},this.props,{errors:this.state.errors,onChangeEditableOption:this.handleChangeEditableOption,onChangePassword:this.handleChangePassword,onChangeViewableOption:this.handleChangeViewableOption,onSubmit:this.onDoneClick,onToggleClass:this.handleToggleClass,onToggleClassPermissions:this.handleToggleClassPermissions,password:this.state.password,setPreviouslyHadPassword:Ms.setPreviouslyHadPassword(this.getValidationParams(this.props)),children:(0,g.jsx)(v.Z,{"aria-label":(0,se.Z)("create_set.permissions.save_button"),disabled:this.hasValidationErrors(),hero:!0,onClick:this.onDoneClick,width:"fill",children:(0,g.jsx)(_.Z,{id:"create_set.permissions.save_button"})})}))})})}updateSetPermissions(){var e=this.props.permissions.viewableBy===Ye.mk.EVERYONE?i.iQw.PUBLIC_ACCESS:i.iQw.NOT_PUBLIC,t=this.props.permissions.viewableBy===Ye.mk.PASSWORD,s=this.props.permissions.editableBy===Ye.mk.PASSWORD,{password:r}=this.state,n={accessType:e,passwordUse:t,passwordEdit:s};r&&(n.password=r),F.Z.update(this.props.setLuid,n)}focusViewing(){var e=this.props.permissions.viewableBy,t=window.document.querySelector(".SetPermissions-section--viewing input[value='"+e+"']");t&&t.focus()}focusEditing(){var e=this.props.permissions.editableBy,t=window.document.querySelector(".SetPermissions-section--editing input[value='"+e+"']");t&&t.focus()}blur(){var e=window.document.querySelector(".SetPermissions input:focus");e&&e.blur()}}var Wr=s("./app/j/components/UnconfirmedPermissionErrorModal.tsx");class zr extends h.PureComponent{renderNotCreatorMessage(){return(0,g.jsx)(w.Z,{headerContent:(0,g.jsx)(_.Z,{id:"create_set.permissions_error_modal.no_permission_to_change_setting"}),includeCloseButton:!0,isOpen:this.props.isOpen,onClose:this.props.onClose,children:(0,g.jsxs)("div",{children:[(0,g.jsx)(Be.Z,{children:(0,g.jsx)(_.Z,{id:"create_set.permissions_error_modal.only_creator_has_permission"})}),(0,g.jsx)(Be.Z,{children:(0,g.jsx)(v.Z,{"aria-label":(0,se.Z)("create_set.permissions_error_modal.okay_button"),onClick:this.props.onClose,tabIndex:0,children:(0,g.jsx)(_.Z,{id:"create_set.permissions_error_modal.okay_button"})})})]})})}render(){return(0,g.jsxs)("div",{className:"SetPermissionsErrorModal",children:[this.props.type===vr.permissions.NOT_CREATOR?this.renderNotCreatorMessage():null,this.props.type===vr.permissions.UNDER_13?(0,g.jsx)(Wr.default,{headerContent:(0,g.jsx)(_.Z,{id:"create_set.permissions_error_modal.no_permission_to_change_setting"}),isOpen:this.props.isOpen,isUnderageUser:!0,onClose:this.props.onClose,subheaderContent:(0,g.jsx)(_.Z,{id:"create_set.permissions_error_modal.parent_email_not_confirmed"})}):null]})}}s("./node_modules/core-js/modules/es.string.match.js"),s("./node_modules/core-js/modules/es.array.reduce.js"),s("./node_modules/core-js/modules/es.array.sort.js");var qr=s("./app/j/constants/TermConstants.ts"),Kr=s("./app/j/components/LegacyTermText.tsx"),Yr=s("./app/j/components/UIPopover.tsx"),Qr=s("./app/j/config/languages.ts"),$r=s("./app/j/utils/tamperProofNow.ts"),Xr={TOO_SHORT:0,SAVE_ERROR:1,NO_MIC_ACCESS:2,BAD_SAMPLE_RATE:3,MIC_MUTED:5};class Jr{constructor(e){this.isGranted=!1,this.isRecording=!1,this.recordingData={},this.recordingTimestamp=0,this.maxDuration=1/0,this.minDuration=0,this.saveTimeout=1/0,this.onIsUsable=()=>{},this.onStop=()=>{},this.onSave=()=>{},this.onCancel=()=>{},this.onUploadFinish=()=>{},this.onError=()=>{},this.onReady=()=>{},this.onPermissionDenied=()=>{},Object.assign(this,e)}record(e){this.recordingData=e,this.isRecording=!0,this.recordingTimestamp=(0,$r.Z)()}stop(){this.isRecording=!1}cancel(){this.onCancel()}elapsedTime(e){return void 0===e&&(e=this.recordingTimestamp),e?(0,$r.Z)()-e:0}hasPermission(){return this.isGranted}needsPermission(){}getVolume(){return 0}}Jr.errors=Xr;var ei,ti=(0,is.Z)("RecorderConstants",{permissions:{DENIED:null,GRANTED:null,NEEDED:null},states:{RECORDING:null,UPLOADING:null,SAVING:null,STOPPED:null,ERROR:null}}),si=ti.permissions,ri=ti.states,ii={MAX_DURATION:3e4,MIN_DURATION:400},ni=!1,oi="html5",ai=s("./app/j/constants/TimeConstants.ts"),li=s("./app/j/create_set/constants/CustomAudioConstants.ts");s("./node_modules/core-js/modules/es.array-buffer.slice.js"),s("./node_modules/core-js/modules/es.typed-array.uint8-array.js"),s("./node_modules/core-js/modules/esnext.typed-array.at.js"),s("./node_modules/core-js/modules/es.typed-array.sort.js"),s("./node_modules/core-js/modules/es.typed-array.to-locale-string.js");function di(){return new Worker(("string"==typeof window.__worker_public_path__?window.__worker_public_path__:"https://quizlet.com/a/j/dist/")+"VoiceRecordingWorker.3ee729ceb826f3fbfa74.worker.js")}class ui{constructor(e){this.id=0,this.isRecording=!1,this.isTestingMicrophone=!1,this.mutedAlreadySent=!1,this.callbacks={record:e.onChunk,stop:e.onStop,cancel:e.onCancel,ready:e.onReady,micMuted:e.onMicMuted,testingResult:e=>this._processTest(e)},this.node=e.context.createScriptProcessor(e.bufferLen||4096,1,1),this.node.addEventListener("audioprocess",this._processAudio.bind(this),!1),this.worker=new di,this.worker.onmessage=e=>{var{id:t,command:s,data:r}=e.data;this.callbacks[s]&&t===this.id&&this.callbacks[s](r)},this.isTestingMicrophone=!0;var{sampleRate:t}=e.context;this.worker.postMessage({command:"init",config:{sampleRate:t}})}_processTest(e){e?(this.isTestingMicrophone=!1,this.callbacks.ready()):this.mutedAlreadySent||(this.callbacks.micMuted(),this.mutedAlreadySent=!0)}_processAudio(e){this.isRecording?this.worker.postMessage({id:this.id,command:"record",buffer:e.inputBuffer.getChannelData(0)}):this.isTestingMicrophone&&this.worker.postMessage({id:this.id,command:"testing",buffer:e.inputBuffer.getChannelData(0)})}record(){this.id++,this.isRecording=!0}stop(){this.isRecording=!1,this.worker.postMessage({id:this.id,command:"stop"})}cancel(){this.isRecording=!1,this.worker.postMessage({id:this.id,command:"cancel"})}connect(e){this.node.connect(e)}}class ci{constructor(e,t){this.socket=e,this.json({sampleRate:t,command:"newfile"})}json(e){this.socket.send(JSON.stringify(e))}write(e){this.socket.send(e)}close(e){void 0===e&&(e={}),this.json(Object.assign(e,{command:"endfile"}))}cancel(){this.json({command:"cancel"})}}class pi extends Jr{static create(e){return void 0===e&&(e={}),ei||(ei=new pi(e)),ei}constructor(e){super(e),this.keypressPadding=100,this.audioReady=!1,this.socketReady=!1,this.stream=null,this.streamBuffer=[],this.source=null,this.audioContext=null,this.recorderNode=null,this.soundPlayer?this.soundPlayer.borrowWebAudioContext().then((e=>{window.navigator.mediaDevices.getUserMedia&&WebSocket?(this.audioContext=e,this.onIsUsable("html5",this),this._setupSocket()):this.onIsUsable(!1)})).catch((()=>this.onIsUsable(!1))):this.onIsUsable(!1)}stop(){super.stop(),Pe()(this.recorderNode,"Falsy recorderNode in Html5Recorder stop").stop(),Pe()(this.stream,"Falsy stream in Html5Recorder stop").close(this.recordingData)}record(e){super.record(e),this.streamBuffer=[],this.stream=new ci(Pe()(this.socket,"Falsy socket in Html5Recorder"),Pe()(this.audioContext,"Falsy audioContext in Html5Recorder record").sampleRate),Pe()(this.recorderNode,"Falsy recorderNode in Html5Recorder record").record()}cancel(){Pe()(this.recorderNode,"Falsy recorderNode in Html5Recorder cancel").cancel(),this.streamBuffer=[],Pe()(this.stream,"Falsy stream in Html5Recorder cancel").cancel(),this.stream=null}_setupSocket(){var e=this;this.socketReady||(this.socket=new WebSocket(this.webSocketUrl),this.socket.onmessage=e=>{var t=JSON.parse(e.data);if(!t||!t.command)return null;switch(t.command){case"bad_sample_rate":return this.onError(Xr.BAD_SAMPLE_RATE,t);case"finished_uploading":return this.onUploadFinish();case"done":return this.onSave(t);default:return this}},this.socket.onopen=()=>{this.socketReady=!0,clearInterval(this.heartbeat);var e=JSON.stringify({command:"ping"});this.heartbeat=window.setInterval((()=>this.socket.send(e)),3e4),this._setupAudio()},this.socket.onerror=function(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];console.log(s),e.onError(Xr.SAVE_ERROR)},this.socket.onclose=()=>{this.socketReady=!1,window.setTimeout((()=>this._setupSocket()),1500)})}_getFreqData(){var e=new Uint8Array(this.analyserNode.frequencyBinCount);return this.analyserNode.getByteFrequencyData(e),Array.apply([],e)}getVolume(){if(!this.analyserNode)return 0;var e=this._getFreqData(),t=e.reduce(((e,t)=>e+Math.pow(t,2)),0),s=Math.max(...e);return(Math.sqrt(t/Math.max(e.length,1))+s)/510}_setupAudio(){if(!this.audioReady){var e=e=>{this.isGranted=!0,this._setupRecording(e)},t=()=>{this.isGranted=!1,this.onPermissionDenied()};try{window.navigator.mediaDevices.getUserMedia?window.navigator.mediaDevices.getUserMedia({audio:!0}).then(e).catch(t):window.navigator.getUserMedia({audio:!0},e,t)}catch(s){this.audioReady=!1,t()}}}_setupRecording(e){var t=Pe()(this.audioContext,"Falsy audioContext in Html5Recorder setup"),s=new ui({context:t,onChunk:e=>{var t=this.elapsedTime();t<this.keypressPadding||(t>this.maxDuration?this.stop():t<this.minDuration?this.streamBuffer.push(e.blob):(this.streamBuffer.length&&this.stream&&(this.streamBuffer.map(this.stream.write,this.stream),this.streamBuffer=[]),this.stream&&this.stream.write(e.blob)))},onStop:()=>{var e=this.elapsedTime();e<this.minDuration?this.onError(Xr.TOO_SHORT,{duration:e}):this.onStop(e)},onCancel:()=>this.onCancel(),onReady:()=>{this.audioReady=!0,this.onReady()},onMicMuted:()=>this.onError(Xr.MIC_MUTED)});this.recorderNode=s;var r=t.createMediaStreamSource(e);this.source=r;var i=t.createGain();i.gain.value=0;var n=t.createChannelSplitter(2),o=t.createChannelMerger(2);this.analyserNode=this._buildAnalyserNode(),r.connect(n),n.connect(o),o.connect(this.analyserNode),this.analyserNode.connect(s.node),s.connect(i),i.connect(t.destination)}_buildAnalyserNode(){var e=Pe()(this.audioContext,"Falsy audioContext in Html5Recorder _buildAnalyserNode").createAnalyser();return e.smoothingTimeConstant=.6,e.fftSize=1024,e}}class hi{constructor(e){var t=this;void 0===e&&(e={}),this.settings=Object.assign({plugins:[pi],onIsUsable:()=>{},onNotUsable:()=>{}},e),this.pluginProps=Object.assign({},e),this.methodBuffer=[],this.plugin={init:function(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return t.methodBuffer.push(["init",s])},stop:function(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return t.methodBuffer.push(["stop",s])},cancel:function(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return t.methodBuffer.push(["cancel",s])},record:function(e){void 0===e&&(e={});for(var s=arguments.length,r=new Array(s>1?s-1:0),i=1;i<s;i++)r[i-1]=arguments[i];return t.methodBuffer.push(["record",[e].concat(r)])},hasPermission:function(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return t.methodBuffer.push(["hasPermission",s])},needsPermission:function(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return t.methodBuffer.push(["needsPermission",s])},getVolume:function(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return t.methodBuffer.push(["getVolume",s])}},Object.keys(this.plugin).forEach((e=>{Object.defineProperty(this,e,{value:function(){for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return t.plugin[e].apply(t.plugin,r)}})})),this.initUsablePlugin()}initUsablePlugin(){var e=this.settings.plugins.shift();if(!e)return this.settings.onNotUsable&&this.settings.onNotUsable();this.pluginProps.onIsUsable=(e,t)=>{if(e)for(this.plugin=t,this.settings.onIsUsable&&this.settings.onIsUsable(e);this.methodBuffer.length;){var[s,r]=this.methodBuffer.shift();this.plugin[s].apply(this.plugin,r)}else this.initUsablePlugin()},e.create(this.pluginProps)}}class gi extends gs.Z{}gi.URL_BASE="custom-audios",gi.MODEL_NAME="customAudio";var mi=s("./app/j/constants/SyncerConstants.ts"),_i=s("./app/j/errors/QuizletConnectionError.ts"),fi=s("./app/j/errors/ValidationError.ts"),vi=s("./node_modules/events/events.js"),Si=s("./node_modules/lodash/last.js"),Ci=s.n(Si);class bi{constructor(e,t,s,r){this.finishedModels={},this.didInvoke=!1,this.errorObj=null,this.type=e,this.expectedNumModels=t,this.successCb=s,this.failureCb=r}isBulkOperation(){return this.type===mi.Z.BULK_UPDATE||this.type===mi.Z.BULK_DELETE}fulfill(e,t,s){void 0===s&&(s=null),this.finishedModels[e]=t,this.errorObj=s}isReadyToInvoke(){return!this.didInvoke&&this.hasBeenFulfilled()}wasInvoked(){return this.didInvoke}hasBeenFulfilled(){return this.expectedNumModels===Object.keys(this.finishedModels).length}invokeCallback(){this.isReadyToInvoke()&&(this.errorObj?this.failureCb([this.errorObj,this.finishedModels]):this.successCb(this.finishedModels),this.didInvoke=!0)}}var yi=s("./app/j/utils/promiseFinally.ts"),Ei=s("./app/j/utils/unique.ts"),ji=e=>e===mi.Z.UPDATE||e===mi.Z.BULK_UPDATE,xi=(0,$r.Z)();class Ti extends vi.EventEmitter{constructor(){super(...arguments),this.BATCH_SIZE=200,this.SYNC_DELAY_MS=1e4,this.shouldSyncDelay=!1,this._isProcessing=!1,this._hasSyncingError=!1,this.models={},this.queues={},this.pendingOps={},this._luidIndex=0,this._seqCounter=0,this._attemptCount=0,this._waitTimeout=0,this._waitInterval=0,this.delayTimer=0,this._requestStartTime=0,this._requestEndTime=0,this._shouldLog=!1}setShouldSyncDelay(e){void 0===e&&(e=!0),this.shouldSyncDelay=e}isSyncing(){return this._isProcessing}getLuid(){return this.MODEL.MODEL_NAME+"-"+this._luidIndex++}getOpSeq(){return"op-seq-"+this._seqCounter++}contains(e){return e in this.models&&e in this.queues}getModel(e){return this._ensureContains(e),this.models[e]}hasQueuedOpsForLuid(e){return this.contains(e)&&this.queues[e].length>0}add(e){void 0===e&&(e={});var t=this.getLuid();return this.models[t]=this.MODEL.fromJson(e),this._resetQueue(t),t}bulkAdd(e){var t={};for(var s of e)t[this.add(s)]=s;return t}save(e,t,s){var i=this;return(0,r.Z)((function*(){void 0===s&&(s={}),i._ensureContains(e);try{var r=yield i._promiseSync(mi.Z.UPDATE,{[e]:t},Boolean(s.syncNow));return[e,r[e]]}catch(a){var[n,o]=a;throw[n,e,o[e]]}}))()}addAndSave(e,t){void 0===t&&(t={});var s=this.add();return this.save(s,e,t)}bulkAddAndSave(e,t){void 0===t&&(t={});var s=this.bulkAdd(e);return this.bulkSave(s,t)}bulkSave(e,t){var s=this;return(0,r.Z)((function*(){return void 0===t&&(t={}),Object.keys(e).forEach((e=>s._ensureContains(e))),[yield s._promiseSync(mi.Z.BULK_UPDATE,e,Boolean(t.syncNow))]}))()}del(e){var t=this;return(0,r.Z)((function*(){t._ensureContains(e);try{var s=yield t._promiseSync(mi.Z.DELETE,{[e]:{}},!0);return[e,s[e]]}catch(n){var[r,i]=n;throw[r,e,i[e]]}}))()}bulkDel(e){var t=this;return(0,r.Z)((function*(){var s={};for(var r of e)t._ensureContains(r),s[r]={};return[yield t._promiseSync(mi.Z.BULK_DELETE,s,!0)]}))()}reset(){this._luidIndex=0,this._seqCounter=0,this._attemptCount=0,this._waitTimeout=0,this._waitInterval=0,this.models={},this.queues={},this.pendingOps={}}beginSyncing(){var e=this._isProcessing;this._isProcessing=!0,e||this.emit("sync:begin")}endSyncing(){var e=this._isProcessing;this._isProcessing=!1,e&&this.emit("sync:end")}errorSyncing(){this._hasSyncingError=!0,this._attemptCount+=1,this.emit("sync:error")}recoverSyncing(){var e=this._hasSyncingError;this._hasSyncingError=!1,this._attemptCount=0,e&&this.emit("sync:recover")}_promiseSync(e,t,s){return void 0===s&&(s=!1),new Promise(((r,i)=>{this._enqueue(e,t,r,i),this._sync(s)}))}_ensureContains(e){if(!this.contains(e))throw new Error("LUID "+e+" not found in "+this.MODEL.MODEL_NAME+"Syncer")}_isQueuedForDelete(e,t){var s,r;return void 0===t&&(t=this.queues[e]),this._ensureContains(e),t.length>0&&((r=null==(s=Ci()(t))?void 0:s.type)===mi.Z.DELETE||r===mi.Z.BULK_DELETE)}_resetQueue(e){this.queues[e]=[]}_enqueue(e,t,s,r){var i=this.getOpSeq();this.pendingOps[i]=new bi(e,Object.keys(t).length,s,r),Object.keys(t).forEach((s=>{var r=t[s];if(this._isQueuedForDelete(s))throw new Error("Cannot queue new changes. LUID "+s+" is queued for deletion");this.queues[s].push({seq:i,type:e,props:r})}))}_flushQueues(){var e={},t=0;for(var s in this.queues){var r=this.queues[s];if(r.length&&(e[s]=r,this._resetQueue(s),(t+=1)>=this.BATCH_SIZE))break}return e}_reinsertQueues(e){Object.keys(e).forEach((t=>{var s=e[t];this.queues[t]=s.concat(this.queues[t])}))}_splitQueues(e){var t=[],s=[],r=[];return Object.keys(e).forEach((i=>{var n=e[i],o=n.map((e=>{var{seq:t}=e;return t}));if(this._isQueuedForDelete(i,n))s.push([i,this.models[i],o]);else{var a=this.models[i];for(var{type:l,props:d}of n){if(!ji(l))throw new Error("Unsupported type="+l);a.setAll(d)}a.isClientValid()?t.push([i,a,o]):r.push([i,a,o])}})),[t,s,r]}_addArgToCallback(e,t,s,r){if(void 0===r&&(r=null),!(e in this.pendingOps))throw new Error("Seq "+e+" not found in stored callbacks");this.pendingOps[e].fulfill(t,s,r)}_prepareCallbacks(e,t){if(e instanceof Error){var s=e;for(var[r,i,n]of t)for(var o of n)this._addArgToCallback(o,r,i,s)}else{if(e.length!==t.length)throw new Error("Models and LUIDs lengths do not match");for(var a=0;a<e.length;a++){var l=e[a],[d,,u]=t[a],c=l.isValid()?null:new fi.Z("Syncer model "+l.self.MODEL_NAME+" invalid ["+JSON.stringify(l.getValidationErrors())+"]");for(var p of u)this._addArgToCallback(p,d,l,c)}}}_invokeAndClearCallbacks(){Object.keys(this.pendingOps).forEach((e=>{var t=this.pendingOps[e];t.isReadyToInvoke()&&t.invokeCallback()})),this._clearInvokedCallbacks()}_clearInvokedCallbacks(){Object.keys(this.pendingOps).forEach((e=>{this.pendingOps[e].wasInvoked()&&delete this.pendingOps[e]}))}_sync(e){if(void 0===e&&(e=!1),!this.isSyncing())if(this.shouldSyncDelay&&!e){if(this.delayTimer)return;this.delayTimer=window.setTimeout((()=>{this.isSyncing()||(this.beginSyncing(),this._syncQueueLoop(),this.delayTimer=0)}),this.SYNC_DELAY_MS)}else this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=0),this.beginSyncing(),this._syncQueueLoop()}_syncQueueLoop(){var e=this._flushQueues();if(0!==Object.keys(e).length){var[t,s,r]=this._splitQueues(e),i=this._syncModels(t).then((()=>this._syncModels(s,!0))).then((()=>this._prepareCallbacks(new fi.Z("Queue validations failed"),r))).then((()=>this._invokeAndClearCallbacks())).catch((()=>this._reinsertQueues(e)));(0,yi.Z)(i,(()=>{if(clearInterval(this._waitInterval),clearTimeout(this._waitTimeout),this._hasSyncingError){var e=Math.min(1e4,500*Math.pow(2,this._attemptCount)),t=e/2+Math.floor(Math.random()*e/2),s=(0,$r.Z)()+t;this._waitInterval=window.setInterval((()=>{var e=Math.round((s-(0,$r.Z)())/1e3);e>=0&&this.emit("sync:wait",e)}),1e3),this._waitTimeout=window.setTimeout((()=>this._syncQueueLoop()),t),this.emit("sync:start-wait")}else this._syncQueueLoop()}))}else this.endSyncing()}_syncModels(e,t){var s=this;return(0,r.Z)((function*(){void 0===t&&(t=!1);var r=e.map((e=>{var[,t]=e;return t}));if(0!==r.length){var i=s._generateRequestIdFromQueue(e);s._logRequestStartTime();try{var[,n]=t?yield s.MODEL.bulkDelete(r,i):yield s.MODEL.bulkSave(r,i);s._prepareCallbacks(n,e),s.recoverSyncing()}catch(o){if(o instanceof _i.Z)throw s._enableLoggingRequestTiming(),s.errorSyncing(),o;s._prepareCallbacks(o,e)}finally{s._logRequestEndTime()}}}))()}_generateRequestIdFromQueue(e){var t=[];for(var[,,s]of e)for(var r of s)t.push(r);var i=(0,Ei.Z)(t);return xi+":"+this.MODEL.MODEL_NAME+":"+i.join("|")}_enableLoggingRequestTiming(){this._shouldLog=!0}_logRequestStartTime(){this._requestStartTime=(0,$r.Z)()}_logRequestEndTime(){this._requestEndTime=(0,$r.Z)(),this._shouldLog&&(0,Y.Z)("create_set_request_timing",{lengthMs:this._requestEndTime-this._requestStartTime,syncer:this.MODEL.MODEL_NAME})}}var Ii=s("./app/j/utils/AudioPlayer.ts");var wi=new class extends Ti{constructor(){super(...arguments),this.MODEL=gi,this.connectionPrimed=!1,this.permissionGranted=!1,this.recorderImplementation=null}configure(e){this.config=e}getRecorder(){return this.configureRecorder({})}getAudioPlayer(){return this.audioPlayer||(this.audioPlayer=new Ii.default),this.audioPlayer}ensureConfig(){if(!this.config)throw new Error("CustomAudioSyncer lacks config");return this.config}configureRecorder(e){var t=this.ensureConfig();return this.recorder||(this.recorder=new hi({maxDuration:ii.MAX_DURATION,minDuration:ii.MIN_DURATION,onCancel:e.onCancel,onError:e.onError,onIsUsable:e.onIsUsable,onNotUsable:e.onNotUsable,onPermissionDenied:e.onPermissionDenied,onReady:e.onReady,onSave:e.onSave,onStop:e.onStop,onUploadFinish:e.onUploadFinish,plugins:[pi],soundPlayer:this.getAudioPlayer(),webSocketUrl:t.webSocketUrl})),this.recorder}primeConnection(){if(!this.connectionPrimed){var e=this.config;null!=e&&e.connectionPrimingUrl&&((new Image).src=e.connectionPrimingUrl),this.connectionPrimed=!0}}record(){this.primeConnection(),this.getRecorder().record({qecookies:this.ensureConfig().qecookies})}stop(){this.getRecorder().stop()}cancel(){this.getRecorder().cancel()}getVolume(){return this.getRecorder().getVolume()}hasPermission(){return this.getRecorder().hasPermission()}needsPermission(){return this.getRecorder().needsPermission()}preloadAudio(e,t){return void 0===t&&(t={}),this.getAudioPlayer().preload(e,t)}playAudio(e,t){return void 0===t&&(t={}),this.getAudioPlayer().play(e,t)}stopAllAudio(){return this.getAudioPlayer().stopAll()}},Ai=s("./app/j/syncers/SetSyncer.ts"),Oi=20*ai.NO;var Ri=new class{constructor(){this.setLuid=null,this.termLuid=null,this.termSide=null,this.setSyncer=Ai.Z,this.termSyncer=K.Z,this.customAudioSyncer=wi}record(e,t,s){return this.setLuid=e,this.termLuid=t,this.termSide=s,G.Z.viewAction(li.Z.actions.RECORD,{setLuid:this.setLuid,termLuid:this.termLuid,termSide:this.termSide}),this.customAudioSyncer.record()}stop(){return G.Z.viewAction(li.Z.actions.STOP),this.customAudioSyncer.stop()}cancel(){return G.Z.viewAction(li.Z.actions.CANCEL),this.customAudioSyncer.cancel()}updatePermissionStatus(e){G.Z.viewAction(li.Z.actions.PERMISSION_UPDATE,{status:e}),this.customAudioSyncer.permissionGranted=e===si.GRANTED}updateRecorderImplementation(e){G.Z.viewAction(li.Z.actions.IMPLEMENTATION_UPDATE,{implementation:e}),this.customAudioSyncer.recorderImplementation=e}getVolume(){G.Z.viewAction(li.Z.actions.GET_VOLUME,{volume:this.customAudioSyncer.getVolume()})}needsPermission(){return G.Z.viewAction(li.Z.actions.NEEDS_PERMISSION),this.customAudioSyncer.needsPermission()}preloadAudio(e,t){return void 0===t&&(t={}),this.customAudioSyncer.preloadAudio(e,t)}playAudio(e,t){return void 0===t&&(t={}),this.customAudioSyncer.playAudio(e,t)}stopAllAudio(){return this.customAudioSyncer.stopAllAudio()}saveError(){this.onError(Xr.SAVE_ERROR,{})}dismissUpsell(){G.Z.viewAction(li.Z.actions.DISMISS_UPSELL)}onError(e,t){G.Z.serverAction(li.Z.actions.ERROR,{code:e,data:t})}onSave(e){return this.create(e.api_response,this.setLuid,this.termLuid,this.termSide)}onCancel(){G.Z.serverAction(li.Z.actions.CANCEL_SUCCESS)}onStop(e){G.Z.serverAction(li.Z.actions.STOP_SUCCESS,{duration:e})}onUploadFinish(){G.Z.serverAction(li.Z.actions.UPLOAD_FINISH)}init(){var e=this;return G.Z.viewAction(li.Z.actions.INIT),this.customAudioSyncer.configureRecorder({onCancel:()=>this.onCancel(),onError:function(t,s){void 0===s&&(s={}),clearTimeout(e.waitingForSaveTimeout),e.customAudioSyncer.endSyncing(),e.onError(t,s)},onIsUsable:e=>this.updateRecorderImplementation(e),onNotUsable:()=>this.updateRecorderImplementation(ni),onPermissionDenied:()=>this.updatePermissionStatus(si.DENIED),onReady:()=>this.updatePermissionStatus(si.GRANTED),onSave:e=>(clearTimeout(this.waitingForSaveTimeout),this.customAudioSyncer.endSyncing(),this.onSave(e)),onStop:e=>(this.waitingForSaveTimeout=window.setTimeout((()=>this.saveError()),Oi),this.onStop(e)),onUploadFinish:()=>(this.customAudioSyncer.beginSyncing(),this.onUploadFinish())})}create(e,t,s,r){var i=this.customAudioSyncer.add(e),n={},o=this.termSyncer.getModel(s).get(r);o&&(n.text=o);var a=this.setSyncer.getModel(t).get("word"===r?"wordLang":"defLang");a&&(n.language=a);var l=(e,i)=>(G.Z.viewAction(li.Z.actions.CREATE,{luid:e,model:i,termLuid:s,setLuid:t,termSide:r}),this.updateTermCustomAudio(e,t,s,r));if(Object.keys(n).length)this.customAudioSyncer.save(i,n).then((e=>{var[t,s]=e;return l(t,s)})).catch((e=>{var[t]=e;this.onError(Xr.SAVE_ERROR,t)}));else{var d=this.customAudioSyncer.getModel(i);l(i,d)}return i}updateTermCustomAudio(e,t,s,r){return F.Z.maybeCreateSet(t).then((e=>B.Z.maybeCreateTerm(s,e))).then((t=>{var i=this.customAudioSyncer.getModel(e).get("id"),n="word"===r?{wordCustomAudioId:i}:"definition"===r?{definitionCustomAudioId:i}:{};this.termSyncer.save(s,n,!0),G.Z.serverAction(li.Z.actions.CREATE_SUCCESS,{customAudioLuid:e,termLuid:s,termSide:r})})).catch((e=>{this.onError(Xr.SAVE_ERROR,e)})),e}delete(e,t,s){G.Z.viewAction(li.Z.actions.DELETE,{customAudioLuid:s,termLuid:e,termSide:t});var r="word"===t?"wordCustomAudioId":"definitionCustomAudioId";return this.termSyncer.save(e,{[r]:null})}},Di=s("./app/j/create_set/components/LanguageSelect.tsx");class Li extends h.PureComponent{constructor(){super(...arguments),this.state={shouldShowLangSelect:this.props.isChooseLangSelected},this.onHideLangSelect=()=>F.Z.hideLangSelect(),this.renderLanguageSelect=()=>(0,g.jsx)(Di.Z,{disableAutofocus:!this.shouldShowLangSelect(),disabled:this.props.viewOnly,lang:this.props.side===Kr.dR?this.props.wordLang:this.props.defLang,onHideLangSelect:this.onHideLangSelect,onSelectLang:this.props.onSelectLang,recentLanguages:this.props.recentLanguages,setLuid:this.props.setLuid,showInvisibleLangs:Qr.YN.indexOf(this.props.defLang)>=0,side:this.props.side}),this.renderQuestionSubtext=()=>(0,g.jsx)("div",{className:"LanguagePrompt-questionSubtext",children:this.props.questionSubtext}),this.shouldShowLangSelect=()=>this.props.isChooseLangSelected||this.state.shouldShowLangSelect}render(){return(0,g.jsx)("div",{className:"LanguagePrompt",children:(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"LanguagePrompt-question",children:this.props.question}),this.props.questionSubtext?this.renderQuestionSubtext():null,(0,g.jsx)("div",{className:"LanguagePrompt-languageSelect",children:this.renderLanguageSelect()})]})})}}var Pi=Li,Mi=s("./node_modules/lodash/find.js"),Zi=s.n(Mi),ki=(s("./node_modules/core-js/modules/es.string.trim.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.parse-int.js"),s("./app/j/create_set/components/AutodefineContext.tsx")),Ui=s("./app/j/components/Ellipsis.tsx"),Ni=s("./app/j/utils/diff.ts");class Fi extends h.PureComponent{constructor(e){super(e),this.handleClick=()=>{this.props.onClick(this.props.suggestion)},this.handleMouseMove=()=>{this.props.onMouseMove(this.props.suggestion)},this._getOriginalCaseSuggestionTextDiff=(e,t)=>{var s=0;return t.map(((t,r)=>{var[i,n]=t,o=s;return s+=n.length,[i,e.substring(o,s)]}))},this.diffMatchPatch=new Ni.ZP({ignoreCase:!0})}renderText(){var{suggestion:e,prefix:t}=this.props;if(!(t&&t.length>0))return(0,g.jsx)("span",{children:e.text});var s=this.diffMatchPatch.diff_main(t,e.text,!1).filter((e=>{var[t,s]=e;return t!==Ni.NL}));return this._getOriginalCaseSuggestionTextDiff(e.text,s).map(((e,t)=>{var[s,r]=e,i=l()({"AutosuggestContextItem-match":s===Ni.JZ});return(0,g.jsx)("span",{className:i,children:r},t)}))}render(){var e=l()("AutosuggestContextItem",{"AutosuggestContextItem--selected":this.props.isSelected});return(0,g.jsx)("div",{className:e,onMouseDown:this.handleClick,onMouseMove:this.handleMouseMove,children:(0,g.jsx)(Ui.Z,{children:this.renderText()})})}}Fi.defaultProps={isSelected:!1};var Bi="AutosuggestContext-Scope";class Hi extends h.PureComponent{constructor(){super(...arguments),this.state={selectedItemIndex:-1},this.handleSuggestionChosen=e=>{null!=e&&e.text&&this.props.onSuggestionChosen(e.text)},this.handleSuggestionMouseMove=e=>{nr()(this.props.suggestionsData,"this.props.suggestionsData should not be null");var t=this.props.suggestionsData.suggestions.indexOf(e);t<0||this.setState({selectedItemIndex:t})},this.handleContextMouseOut=()=>{this.setState({selectedItemIndex:-1})}}componentDidMount(){pr().addOverlappingScope(Bi),pr()(Je.Z.autosuggestions.nextItem,Bi,(()=>(this.state.selectedItemIndex<0?this.setState({selectedItemIndex:0}):this.setState({selectedItemIndex:(this.state.selectedItemIndex+1)%this.suggestionsCount}),!1))),pr()(Je.Z.autosuggestions.previousItem,Bi,(()=>(this.state.selectedItemIndex<=0?this.setState({selectedItemIndex:this.suggestionsCount-1}):this.setState({selectedItemIndex:(this.state.selectedItemIndex-1)%this.suggestionsCount}),!1))),pr()(Je.Z.autosuggestions.selectItem,Bi,(()=>{var{suggestionsData:e}=this.props;if(!e||-1===this.state.selectedItemIndex)return!0;if(this.state.selectedItemIndex>=0){var t=e.suggestions[this.state.selectedItemIndex];this.handleSuggestionChosen(t)}return!1}))}componentWillUnmount(){pr().unbind(Je.Z.autosuggestions.nextItem,Bi),pr().unbind(Je.Z.autosuggestions.previousItem,Bi),pr().unbind(Je.Z.autosuggestions.selectItem,Bi),pr().removeOverlappingScope(Bi)}get suggestionsCount(){return this.props.suggestionsData?this.props.suggestionsData.suggestions.length:0}renderItems(){var{suggestionsData:e}=this.props;return nr()(e,"suggestionsData should not be null"),e.suggestions.map(((t,s)=>(0,g.jsx)(Fi,{isSelected:s===this.state.selectedItemIndex,onClick:this.handleSuggestionChosen.bind(this,t),onMouseMove:this.handleSuggestionMouseMove,prefix:e.parameters.prefix,suggestion:t},t.id)))}render(){var e=l()("AutosuggestContext",{"AutosuggestContext--extraTopPadding":this.props.extraTopPadding});return(0,g.jsx)("div",{className:e,onMouseOut:this.handleContextMouseOut,children:(0,g.jsx)("div",{className:"AutosuggestContext-suggestions",children:this.renderItems()})})}shouldRenderSide(e){return this.props.suggestionsData&&this.props.termSide===e}}class Vi extends h.Component{constructor(){super(...arguments),this.onClick=e=>{this.props.onClick(e)}}render(){return(0,g.jsxs)("div",{className:"ImageUploadProminentContextToggle","data-testid":"ImageUploadProminentContextToggle",onClick:this.onClick,children:[(0,g.jsx)(C.Z,{icon:"image",size:"large"}),(0,g.jsx)("div",{className:"ImageUploadProminentContextToggle-IconExplanation",children:(0,g.jsx)(_.Z,{id:"create_set.term_context.image.add_image"})})]})}}var Gi=e=>{var{disabled:t,onToggleImageContext:s}=e;return(0,g.jsx)("div",{className:"ImageUploadComponent",children:(0,g.jsx)("div",{"data-testid":"ImageUploadComponent-contextToggle",children:(0,g.jsx)(er,{disabled:t,icon:"image",onClick:s,children:(e,t)=>(0,g.jsx)(Vi,{disabled:e,onClick:t})})})})};class Wi{constructor(e){this.placeholderImage=e.placeholderImage,this.image=e.image}hasImageOrPlaceholder(){return this.hasImagePlaceholder()||this.hasImage()}hasImagePlaceholder(){return this.hasPlainImagePlaceholder()||this.hasRichImagePlaceholder()}hasPlainImagePlaceholder(){return!!this.placeholderImage&&this.placeholderImage.type===H._O.PLAIN}hasRichImagePlaceholder(){return!!this.placeholderImage&&this.placeholderImage.type===H._O.RICH}isUploadProcessing(){var e;return!(this.hasImage()||null==(e=this.placeholderImage)||!e.isProcessing)}isImageUploading(){var e;return!(null==(e=this.placeholderImage)||!e.isUploading)}hasImage(){var e;return!(null==(e=this.image)||null==e.getSecurePath||!e.getSecurePath())}hasOrIsUploadingImage(){return this.hasImagePlaceholder()||this.isUploadProcessing()||this.isImageUploading()||this.hasImage()}}class zi extends h.PureComponent{constructor(e){super(e),this.getImageUrl=()=>{if(!this.imageHelper.hasImage())return"";var{image:e}=this.props;return nr()(null==e?void 0:e.getSecurePath,"image should exist!"),(0,$.n5)()?e.getSecurePath():e.getSquareSecurePath()},this.getZoomedImageUrl=()=>{if(!this.imageHelper.hasImage())return null;var{image:e}=this.props;return nr()(null==e?void 0:e.getSecurePath,"image should exist!"),e.getSecurePath()},this.getImageHeight=()=>(nr()(this.props.image,"this.props.image should exist!"),Math.min(60,this.props.image.height)),this.getImageWidth=()=>(nr()(this.props.image,"this.props.image should exist!"),Math.min(84,this.props.image.width)),this.getPlaceholderStyles=()=>{if(this.imageHelper.hasRichImagePlaceholder()){nr()(this.props.placeholderImage,"this.props.placeholderImage should exist!");var e=this.props.placeholderImage.dataUrl;return{backgroundImage:"url("+e+")",msFilter:"\"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"',sizingMethod='scale')\""}}},this.handleClickToZoom=e=>{e.preventDefault(),e.stopPropagation(),this.zoomableImage&&this.zoomableImage.show()},this.handleZoomableImage=e=>{e&&(this.zoomableImage=e)},this.imageHelper=new Wi({placeholderImage:e.placeholderImage,image:e.image})}UNSAFE_componentWillReceiveProps(e){this.props.image===e.image&&this.props.placeholderImage===e.placeholderImage||(this.imageHelper=new Wi({placeholderImage:e.placeholderImage,image:e.image}))}renderPlaceHolder(){return(0,g.jsx)("div",{className:"UploadedImage-imageWrap UploadedImage-backgroundImage",style:this.getPlaceholderStyles(),children:(0,g.jsx)("div",{className:"UploadedImage-spinner",children:(0,g.jsx)(b.Z,{size:"small"})})})}renderZoomableImage(){return(0,g.jsx)(Hs.Z,{className:"UploadedImage-image",height:this.getImageHeight(),ref:this.handleZoomableImage,src:this.getImageUrl(),width:this.getImageWidth(),zoomPadding:20,zoomUrl:this.getZoomedImageUrl()})}renderRetinaZoomableImage(){var e={backgroundImage:"url("+this.getImageUrl()+")",height:this.getImageHeight(),width:this.getImageWidth()};return(0,g.jsx)("div",{children:(0,g.jsx)(Hs.Z,{ref:this.handleZoomableImage,zoomPadding:20,zoomUrl:this.getZoomedImageUrl(),children:(0,g.jsx)("div",{className:"UploadedImage-image",children:(0,g.jsx)("span",{className:"UploadedImage-backgroundImage",style:e})})})})}renderDeleteIcon(){return nr()(this.props.onDeleteImage,"this.props.onDeleteImage should exist!"),(0,g.jsx)("a",{className:"UploadedImage-imageOverlay",onClick:this.props.onDeleteImage,children:(0,g.jsx)(C.Z,{className:"UploadedImage-imageOverlayIcon",icon:"garbage"})})}renderImage(){return(0,g.jsxs)("div",{className:"UploadedImage-imageWrap",children:[(0,$.n5)()?this.renderRetinaZoomableImage():this.renderZoomableImage(),(0,g.jsx)("a",{className:"UploadedImage-overlay",onClick:this.handleClickToZoom}),this.renderDeleteIcon()]})}render(){if(!this.imageHelper.hasImageOrPlaceholder())return null;var e=l()("UploadedImage",{"is-processing":this.imageHelper.isUploadProcessing(),"is-uploading":this.imageHelper.isImageUploading()});return(0,g.jsxs)("div",{className:e,children:[this.imageHelper.hasImage()?this.renderImage():null,this.imageHelper.hasImagePlaceholder()&&!this.imageHelper.hasImage()?this.renderPlaceHolder():null]})}}class qi extends h.Component{constructor(){super(...arguments),this.onNextTick=e=>window.setTimeout(e,0),this.handleCustomDistractorChange=(e,t)=>{this.props.onCustomDistractorChange&&this.props.onCustomDistractorChange(e,t)},this.onDistractorSuggestionChosen=e=>{this.isClickingSuggestion=!0;var{activeDistractor:t}=this.props;null!==t&&this.props.onCustomDistractorSelectSuggestion(e,t),this.activeDistractorInput.current&&this.onNextTick((()=>{this.activeDistractorInput.current&&this.activeDistractorInput.current.focus(),this.isClickingSuggestion=!1}))},this.handleCustomDistractorFocus=e=>{this.props.onCustomDistractorRichTextEditorFocus(e)},this.handleCustomDistractorRemoveClick=()=>{this.props.onCustomDistractorRemoveClick&&this.props.onCustomDistractorRemoveClick()},this.handleCustomDistractorRichTextEditorBlur=(e,t)=>{!this.isClickingSuggestion&&this.props.onCustomDistractorRichTextEditorBlur&&this.props.onCustomDistractorRichTextEditorBlur(e,t)},this.handleUpdatePMEditorView=e=>{this.props.onUpdatePMEditorView&&this.props.onUpdatePMEditorView(e)},this.languageContainsAccentCharacters=()=>Ze.Z.containsAccentLanguage(this.props.languageCode),this.activeDistractorInput=h.createRef(),this.isClickingSuggestion=!1}renderImage(){return(0,g.jsx)("span",{className:"CardSideCustomDistractors-distractorRowImage",children:(0,g.jsx)(zi,{image:null,onDeleteImage:()=>{},placeholderImage:null})})}renderImageContainer(){var e;return null!=(e=this.props.imageHelper)&&e.hasImageOrPlaceholder()?(0,g.jsx)("div",{className:"CardSideCustomDistractors-distractorRowImageContainer",children:this.renderImage()}):(0,g.jsx)("div",{className:"CardSideCustomDistractors-distractorRowImageContainer",children:(0,g.jsx)(Gi,{disabled:!0,onToggleImageContext:()=>{}})})}renderDistractorRow(e,t,s){var{activeDistractor:r}=this.props,n=!((null==r?void 0:r.luid)!==e.luid);return(0,g.jsxs)("div",{className:"CardSideCustomDistractors-distractorRow",children:[(0,g.jsx)("div",{className:"CardSideCustomDistractors-distractorRowTop",children:(0,g.jsx)(Vs.default,{canEditRichText:!0,isFocused:n,label:(0,se.Z)("create_set.term_context.custom_distractors.field_label"),labelId:"custom-distractor",lang:t,languageCodes:t?[t]:[],onBlur:this.handleCustomDistractorRichTextEditorBlur.bind(this,e),onChange:this.handleCustomDistractorChange.bind(this,e),onFocus:this.handleCustomDistractorFocus.bind(this,e),onUpdatePMEditorView:this.handleUpdatePMEditorView,placeholder:(0,se.Z)("create_set.term_context.custom_distractors.multiple_choice_option_placeholder",{number:s+1}),plainText:e.text.plainText,pmJson:e.text.richText,ref:n?this.activeDistractorInput:null,shouldShowRichTextCombinedToolbar:!0,tabIndex:this.props.tabIndex})}),(0,g.jsx)(je.uH,{disableTransition:(0,$.b1)(),transitionName:"TermContent-animateContext",children:this.shouldRenderSuggestions(n)?(0,g.jsx)("div",{className:"Autosuggest",children:(0,g.jsx)(Hi,{extraTopPadding:this.languageContainsAccentCharacters(),onSuggestionChosen:this.onDistractorSuggestionChosen,suggestionsData:this.props.distractorSuggestions,termSide:i.kH9.DEFINITION})}):null})]},e.luid)}renderDistractorFields(){var{distractors:e,languageCode:t}=this.props;return(e||[]).map(((e,s)=>this.renderDistractorRow(e,t,s)))}render(){return(0,g.jsxs)("div",{className:"CardSideCustomDistractors",children:[(0,g.jsx)("div",{className:"CardSideCustomDistractors-distractorFields",children:this.renderDistractorFields()}),(0,g.jsxs)("div",{className:"CardSideCustomDistractors-content",children:[(0,g.jsx)("div",{className:"CardSideCustomDistractors-header",children:(0,g.jsx)(_.Z,{id:"create_set.term_context.custom_distractors.description.header"})}),(0,g.jsx)("div",{className:"CardSideCustomDistractors-description",children:(0,g.jsx)(_.Z,{id:"create_set.term_context.custom_distractors.description.paragraph_one"})}),(0,g.jsx)("div",{className:"CardSideCustomDistractors-description",children:(0,g.jsx)(_.Z,{id:"create_set.term_context.custom_distractors.description.paragraph_two"})}),(0,g.jsx)("div",{className:"CardSideCustomDistractors-removeContext",children:(0,g.jsxs)(I.Z,{onClick:this.handleCustomDistractorRemoveClick,tabIndex:this.props.tabIndex,variant:"revert",children:[(0,g.jsx)(C.Z,{icon:"garbage"}),(0,g.jsx)("span",{className:"CardSideCustomDistractors-removeCTA",children:(0,g.jsx)(_.Z,{id:"create_set.term_context.custom_distractors.description.remove_cta"})})]})})]})]})}shouldRenderSuggestions(e){var{isAutosuggestionEnabled:t,isTermActive:s,distractorSuggestions:r}=this.props,i=!!(s&&t&&e);return i&&null!=r&&r.suggestions.length&&this.props.onCustomDistractorSuggestionsShow(),i}}class Ki extends h.PureComponent{render(){var e=l()("ContextToggleGroup","ContextToggleGroup--"+this.props.variant);return(0,g.jsx)("div",{className:e,children:(0,g.jsx)("div",{className:"ContextToggleGroup-inner",children:this.props.children})})}}var Yi=s("./app/j/containers/CreateSetLanguageEditorContainer.ts");class Qi extends h.PureComponent{constructor(){super(...arguments),this.onFocus=e=>{this.props.onFocus(e,Kr.go)},this.onBlur=e=>{this.props.onBlur(e,Kr.go)},this.handleEditorValueChange=e=>{this.props.onChange(e,Kr.go)},this.handlePaste=e=>{if(this.props.onPaste&&this.props.onPaste(e))return!0;if(!this.props.canUseImageUpload||(0,re.XX)(e.clipboardData))return!1;e.preventDefault();var{matching:t,nonMatching:s,numTotal:r}=(0,re.t9)(e.clipboardData,N.k4);return s.length&&this.props.onImageUploadFailure(s),t.length&&this.props.onImageUploadSuccess(t,1===r),!0},this.richTextEditorRef=h.createRef(),this.focus=()=>{this.richTextEditorRef&&this.richTextEditorRef.current&&this.richTextEditorRef.current.focus()},this.blur=()=>{this.richTextEditorRef&&this.richTextEditorRef.current&&this.richTextEditorRef.current.blur()}}getLabel(){return this.props.isProfane?(0,se.Z)("create_set.term_profanity_warning.input_label"):this.props.hasMinTermsError?(0,se.Z)("create_set.validation_errors.not_enough_terms_error"):this.props.label}renderImage(){return(0,g.jsx)("span",{className:"DefinitionSide-image",children:(0,g.jsx)(zi,{image:this.props.image,onDeleteImage:this.props.onDeleteImage,placeholderImage:this.props.placeholderImage})})}renderDefinitionContextToggles(){if(this.props.imageHelper&&this.props.imageHelper.hasImageOrPlaceholder())return(0,g.jsx)("div",{className:"DefinitionSide-imageContainer",children:this.renderImage()});var e=(0,g.jsx)(Gi,{disabled:!this.props.enableImageUpload,onToggleImageContext:this.props.onToggleImageContext}),t=0===this.props.index&&this.props.shouldShowTooltipImage?(0,g.jsx)(P,{featurePopoverVariant:"image",isVisible:!0,children:e}):e;return(0,g.jsx)("div",{className:"DefinitionSide-imageContainer",children:t})}render(){return(0,g.jsx)("div",{className:"DefinitionSide",children:(0,g.jsxs)("div",{className:"DefinitionSide-richTextEditor",children:[this.renderDefinitionContextToggles(),(0,g.jsx)(Vs.default,{canEditRichText:!0,invalid:this.props.isProfane||this.props.hasMinTermsError||this.props.hasDefLangError||void 0,label:this.getLabel(),labelAddOnContent:this.shouldRenderLanguageEditor()?(0,g.jsx)(Yi.Z,{side:Kr.go}):null,labelId:this.props.labelId,lang:this.props.lang,languageCodes:this.props.lang?[this.props.lang]:[],onBlur:this.onBlur,onChange:this.handleEditorValueChange,onFocus:this.onFocus,onPaste:this.handlePaste,onUpdatePMEditorView:this.props.onUpdatePMEditorView,otherLang:this.props.otherSideLang,placeholder:this.props.placeholder,plainText:this.props.definition,pmJson:this.props.definitionRichText,ref:this.richTextEditorRef,shouldShowRichTextCombinedToolbar:!0,tabIndex:this.props.tabIndex})]})})}shouldRenderLanguageEditor(){return this.props.termActive||this.props.hasDefLangError}}var $i=s("./app/j/create_set/constants/TermConstants.ts"),Xi=s("./app/j/utils/bound-index.ts"),Ji=s("./app/j/utils/BreakpointsHelper.ts"),en=s("./app/j/utils/breakpointSwitch.ts"),tn=s("./app/j/utils/chunk-array.ts"),{MAX_NUM_IMAGES_FREE:sn,MAX_NUM_IMAGES_UPGRADED:rn}=H.Rj,{TAB_INDEX:nn}=$i.dG,on=e=>(0,Ji.Lu)(e,"s")?1:(0,Ji.Lu)(e,"m")?2:4;class an extends h.Component{constructor(e){super(e),this.getLimit=()=>this.props.canUseImageUpload?rn:sn,this.getFirstIndexOnPage=()=>(this.state.page-1)*this.state.numPerPage,this.getLastIndexOnPage=()=>Math.min(this.state.numImages-1,this.state.page*this.state.numPerPage-1),this.getActiveResultLuid=()=>Object.keys(this.props.images)[this.state.activeResultIndex],this.getNumImagesToShow=e=>Math.min(Ar()(e),this.getLimit()),this.handleError=e=>{var t=e.target,s=this.props.images,r=Object.keys(s),i="";r.forEach((e=>{s[e]._secureLegacyUrlSmall===t.src&&(i=e)})),this.props.onImageError(i)},this.handlePrevPage=()=>{if(this.hasPreviousPage()){var e=(this.state.page-1)*this.state.numPerPage-1;this.transitionToIndexOnNewPage(e,this.state.page-1)}},this.handleNextPage=()=>{var{page:e,numPerPage:t}=this.state;if(this.hasNextPage()){var s=e*t;this.transitionToIndexOnNewPage(s,e+1)}},this.handleLayoutChange=e=>{var t=on(e);t!==this.state.numPerPage&&this.setState((e=>{var{numImages:s}=e,{activeResultIndex:r}=e,i=Math.ceil(s/t),n=Math.min(e.page,i);return n<e.page&&(r=s-1),(r<(n-1)*t||r>=n*t)&&(r=(n-1)*t),{activeResultIndex:r,numPerPage:t,page:n}}))},this.onNextImage=()=>(this.nextImage(),!1),this.onPrevImage=()=>(this.prevImage(),!1),this.onNextElement=()=>!(this.hasActiveImage()||(0,Nr.Z)((0,Ur.findDOMNode)(this.prevArrow))||0===this.getFirstIndexOnPage()&&this.props.isPrevElementFocused())||this.onNextImage(),this.onPrevElement=()=>{if(this.isFirstImageOnPageActive())this.resetActiveResultIndex();else if(this.hasActiveImage()||(0,Nr.Z)((0,Ur.findDOMNode)(this.nextArrow)))return this.onPrevImage();return!0},this.onSelectImage=()=>{if(this.hasActiveImage()){var e=this.getActiveResultLuid();return this.props.onSelectImage(e),!1}return(0,Nr.Z)((0,Ur.findDOMNode)(this.nextArrow))?this.handleNextPage():(0,Nr.Z)((0,Ur.findDOMNode)(this.prevArrow))&&this.handlePrevPage(),!0},this.onMountPrevArrow=e=>{this.prevArrow=e},this.onMountNextArrow=e=>{this.nextArrow=e},this.renderArrow=e=>{var t="left"===e?this.hasPreviousPage():this.hasNextPage();return(0,g.jsx)("div",{className:"ImageCarousel-arrowWrap ImageCarousel-arrowWrap--"+e,children:(0,g.jsx)(k.Z,{disabled:!t,icon:"wedge-"+e,onClick:"left"===e?this.handlePrevPage:this.handleNextPage,ref:"left"===e?this.onMountPrevArrow:this.onMountNextArrow,tabIndex:this.props.enabled&&t?nn:-1})})},this.renderImages=()=>{var{numPerPage:e,numImages:t,page:s}=this.state,r=Math.ceil(t/e),i=this.getImageLuids(this.props.images),n="translateX("+(s-1)/r*-100+"%)",o=(t,s)=>t*e+s;return(0,g.jsx)("div",{className:"ImageCarousel-content",children:(0,g.jsx)("div",{className:"ImageCarousel-images",style:{transform:n,width:100*r+"%"},children:i.map(((t,s)=>(0,g.jsx)("div",{className:"ImageCarousel-imagePage",children:t.map(((t,r)=>(0,g.jsx)("div",{className:"ImageCarousel-imageWrap",style:{width:100/e+"%"},children:(0,g.jsx)("a",{className:"ImageCarousel-imageLink",onBlur:this.resetActiveResultIndex,onClick:this.props.onSelectImage.bind(null,t),onFocus:this.setActiveResultIndex.bind(null,o(s,r)),ref:e=>{this.imageRefs[o(s,r)]=e},tabIndex:-1,children:(0,g.jsx)("img",{alt:this.props.searchQuery,className:"ImageCarousel-image",onError:this.handleError,src:this.props.images[t].getSmallSecurePath()})})},t)))},s)))})})},this._highestPageReached=1,this.hasPreviousPage=()=>this.state.page>1,this.hasNextPage=()=>this.state.page*this.state.numPerPage<this.state.numImages,this.setActiveResultIndex=e=>(this.setState({activeResultIndex:(0,Xi.Z)(e,this.state.numImages)}),!0),this.focusImage=e=>{this.imageRefs[e].focus()},this.focusActiveImage=()=>{this.hasActiveImage()&&this.focusImage(this.state.activeResultIndex)},this.unbindKeys=()=>{pr().unbind(Je.Z.imageCarousel.prevImage,this.props.keyboardScope),pr().unbind(Je.Z.imageCarousel.nextImage,this.props.keyboardScope),pr().unbind(Je.Z.imageCarousel.nextElement,this.props.keyboardScope),pr().unbind(Je.Z.imageCarousel.prevElement,this.props.keyboardScope),pr().unbind(Je.Z.imageCarousel.selectImage,this.props.keyboardScope)},this.navigateResults=e=>{var t;t=this.hasActiveImage()?this.state.activeResultIndex+e:1===e?this.getFirstIndexOnPage():this.getLastIndexOnPage(),this.setActiveResultIndex(t);var s=Math.ceil((t+1)/this.state.numPerPage);this.state.page!==s?this.transitionToIndexOnNewPage(t,s):this.focusImage(t)},this.resetActiveResultIndex=()=>{this.setState({activeResultIndex:-1})},this.isFirstImageOnPageActive=()=>this.state.activeResultIndex===this.getFirstIndexOnPage(),this.isLastImageOnPageActive=()=>this.state.activeResultIndex===this.getLastIndexOnPage(),this.hasActiveImage=()=>this.state.activeResultIndex>-1,this.prevImage=()=>{0!==this.state.activeResultIndex&&this.navigateResults(-1)},this.nextImage=()=>{this.state.activeResultIndex!==this.state.numImages-1&&this.navigateResults(1)},this.bindKeys=()=>{pr().setScope(this.props.keyboardScope),pr()(Je.Z.imageCarousel.nextImage,this.props.keyboardScope,this.onNextImage),pr()(Je.Z.imageCarousel.prevImage,this.props.keyboardScope,this.onPrevImage),pr()(Je.Z.imageCarousel.nextElement,this.props.keyboardScope,this.onNextElement),pr()(Je.Z.imageCarousel.prevElement,this.props.keyboardScope,this.onPrevElement),pr()(Je.Z.imageCarousel.selectImage,this.props.keyboardScope,this.onSelectImage)},this.transitionToIndexOnNewPage=(e,t)=>{this.setState({activeResultIndex:e,page:t}),this.pageTransitionTimeout&&clearTimeout(this.pageTransitionTimeout),this.pageTransitionTimeout=window.setTimeout((()=>this.focusImage(e)),400)},this.breakpointSwitch=(0,en.Z)(),this.breakpointSwitch.addListener(this.handleLayoutChange),this.state={activeResultIndex:0,numImages:this.getNumImagesToShow(e.images),numPerPage:on(this.breakpointSwitch.breakpoint),page:1}}UNSAFE_componentWillMount(){this.props.enabled&&this.bindKeys(),this.imageRefs={}}componentDidMount(){this.pageTransitionTimeout=null}UNSAFE_componentWillReceiveProps(e){!this.props.enabled&&e.enabled&&this.bindKeys(),this.props.enabled&&!e.enabled&&this.unbindKeys(),this.props.images!==e.images&&this.setState({numImages:this.getNumImagesToShow(e.images)})}UNSAFE_componentWillUpdate(e,t){t.page>this._highestPageReached&&(this._highestPageReached=t.page)}componentWillUnmount(){this.unbindKeys(),this.breakpointSwitch.removeListener(this.handleLayoutChange),this.pageTransitionTimeout&&clearTimeout(this.pageTransitionTimeout),(0,Y.Z)("new_create_set_image_search_results_page_reached",{page:this._highestPageReached,query:this.props.searchQuery})}getImageLuids(e){return this.state.numImages<0?[]:(0,tn.Z)(Object.keys(e).slice(0,this.getLimit()),this.state.numPerPage)}render(){return(0,g.jsxs)("div",{className:"ImageCarousel",children:[this.renderArrow("left"),this.renderImages(),this.renderArrow("right")]})}}var ln=(0,me.Z)((()=>s.e("report_image_flow_modal_lazy").then(s.bind(s,"./app/j/components/ReportImageFlowModal.tsx")))),dn=s("./app/j/upgrade/UpsellsHelper.ts"),un=s("./app/j/utils/ellipsis.ts"),cn=s("./app/j/utils/logSubscriptionEvent.ts"),pn=(0,x.z)("div")({name:"ImageButtonSection",class:"i1f94iwx"});class hn extends h.PureComponent{constructor(e){super(e),this.handleOpenImageCarousel=()=>{(0,$.b1)()&&this.focusActiveElement()},this.handleUpdateQueryString=e=>{this.setState({queryString:e.target.value})},this.handleRerunSearch=e=>{e.preventDefault(),this.state.queryString&&this.props.onRerunSearch&&this.props.onRerunSearch(this.state.queryString)},this.handleChooseFiles=(e,t)=>{this.props.onUpload(e,t),this.props.onClose()},this.handleFileChooserRef=e=>{this.fileChooser=e},this.handleSearchResult=e=>{if(this.props.searchResults){var t=this.props.searchResults[e];(0,Y.Z)("new_create_set_select_image_search_result",{message:"imageSearchQuery="+this.retrieveSearchQuery()+" selectedId="+t.id+" selectedCode="+t.code}),this.props.onImageSelect(e),this.props.onClose()}},this.handleSearchButtonRef=e=>{this.searchButton=e},this.handleSearchBoxRef=e=>{this.searchBox=e},this.handleImageCarouselRef=e=>{this.imageCarousel=e},this.handleOpenReportModal=()=>{this.setState({isReportModalOpen:!0}),(0,Y.Z)("open_report_modal",{modelType:i.BYJ.IMAGE,modelId:0})},this.handleCloseReportModal=()=>{this.setState({isReportModalOpen:!1})},this.handleUpsellButtonClick=e=>{(0,cn.ZP)({action:i.Mpk.CLICK,cta:e,fullActionName:"create_set_image_upsell_cta_click"});var t=(0,dn.Qq)("custom_image_upload");(0,Ss.YQ)(t)},this.setImageIdToBeRemoved=e=>{this.setState({imageIdToBeRemoved:e})},this.imageHelper=new Wi({placeholderImage:e.placeholderImage,image:e.image}),this.state={queryString:"",isReportModalOpen:!1,imageIdToBeRemoved:""}}UNSAFE_componentWillMount(){this.setState({queryString:this.retrieveSearchQuery(this.props)})}componentDidMount(){this.props.enabled&&this.handleOpenImageCarousel()}UNSAFE_componentWillReceiveProps(e){this.props.image===e.image&&this.props.placeholderImage===e.placeholderImage||(this.imageHelper=new Wi({placeholderImage:e.placeholderImage,image:e.image})),this.retrieveSearchQuery(e)!==this.retrieveSearchQuery(this.props)&&this.setState({queryString:this.retrieveSearchQuery(e)}),e.dragDropEvent&&this.props.onDropEnd(e.dragDropEvent)}componentDidUpdate(e){!e.enabled&&this.props.enabled&&this.handleOpenImageCarousel(),this.props.onDragEnterEnd&&!e.isDropTarget&&this.props.isDropTarget&&this.props.onDragEnterEnd(),this.props.onDragLeaveEnd&&e.isDropTarget&&!this.props.isDropTarget&&this.props.onDragLeaveEnd()}getImageIds(){if(this.hasSearchResults()&&this.imageCarousel){var e=this.imageCarousel.state.page,t=this.state.imageIdToBeRemoved;this.props.searchResults&&t&&delete this.props.searchResults[t];var s=this.imageCarousel.getImageLuids(this.retrieveSearchResults()),r=this.props.searchResults;if(!r)return[];var i=this.retrieveSearchQuery(),n=e-1;return s.length<n?[]:s[n].map((t=>({id:Number(r[t].id),url:r[t]._legacyUrl,sideText:i,page:e})))}return[]}getTabIndex(){return this.props.enabled?$i.dG.TAB_INDEX:-1}getMaxNumResults(){return this.props.canUseImageUpload?H.Rj.MAX_NUM_IMAGES_UPGRADED:H.Rj.MAX_NUM_IMAGES_FREE}renderUpsellButton(e){return(0,g.jsx)("div",{className:"ImageUploadContext-upsellButton",children:(0,g.jsx)(f.Z,{below:"s",children:t=>(0,g.jsxs)(v.Z,{onClick:()=>this.handleUpsellButtonClick(e),width:t?"fill":"auto",children:[e,(0,g.jsx)(M.ZP,{logActionName:"advanced_creation_upload_image_premium_branding_badge_view",size:"small"})]})})})}renderUploadButton(e){return(0,g.jsx)(f.Z,{below:"s",children:t=>(0,g.jsx)(Z.Z,{mimeTypes:this.props.mimeTypes,multiple:this.props.multipleUpload,onChooseFiles:this.handleChooseFiles,ref:this.handleFileChooserRef,children:(0,g.jsxs)(v.Z,{width:t?"fill":"auto",children:[e,(0,g.jsx)(M.ZP,{logActionName:"advanced_creation_upload_image_premium_branding_badge_view",size:"small"})]})})})}renderUploadOrUpsellButton(){if(this.props.isUserUnderAge)return null;var e=(0,se.Z)("create_set.term_context.image.upload_link");return this.props.canUseImageUpload?this.renderUploadButton(e):this.renderUpsellButton(e)}renderReportModal(){return(0,g.jsx)(ln,{imageIds:this.getImageIds(),isOpen:this.state.isReportModalOpen,isReportingFlowBlocked:this.props.isReportingFlowBlocked,modelId:0,onClose:this.handleCloseReportModal})}renderReportImageButton(){return this.hasSearchResults()?(0,g.jsx)(pn,{children:(0,g.jsx)(I.Z,{onClick:this.handleOpenReportModal,children:(0,g.jsx)(_.Z,{id:"reporting_flow.image.title"})})}):null}renderSearchInput(){return(0,g.jsx)("form",{className:"ImageUploadContext-headerItem ImageUploadContext-searchForm",onSubmit:this.handleRerunSearch,children:(0,g.jsx)(Os.Z,{addOnContent:(0,g.jsx)("span",{className:"ImageUploadContext-searchButton",children:(0,g.jsx)(k.Z,{disabled:!this.state.queryString,icon:"arrow-right",onClick:this.handleRerunSearch,ref:this.handleSearchButtonRef,tabIndex:this.getTabIndex(),type:"submit",variant:"borderless"})}),className:"js-keymaster-allow",onChange:this.handleUpdateQueryString,placeholder:(0,se.Z)("create_set.term_context.image.search_quizlet_title"),ref:this.handleSearchBoxRef,tabIndex:this.getTabIndex(),value:this.state.queryString})})}renderSearchResultsLoading(){return(0,g.jsx)("div",{className:"ImageUploadContext-searchResults ImageUploadContext-searchResults--loading",children:(0,g.jsx)("p",{className:"ImageUploadContext-resultsText ImageUploadContext-resultsText--loading",children:(0,g.jsx)(_.Z,{id:"create_set.term_context.image.loading"})})})}renderNoImagesFound(e){var t='<span className="ImageUploadContext-query">'+(0,un.Z)(e,25)+"</span>";return(0,g.jsx)("div",{className:"ImageUploadContext-searchResults ImageUploadContext-searchResults--noResults",children:(0,g.jsx)("p",{className:"ImageUploadContext-resultsText ImageUploadContext-resultsText--noneFound",children:(0,g.jsx)(_.Z,{id:"create_set.term_context.image.no_results",searchTerm:t})})})}renderSearchResultsItems(){return(0,g.jsx)(an,{canUseImageUpload:this.props.canUseImageUpload,enabled:this.props.enabled,images:this.retrieveSearchResults(),isPrevElementFocused:this.isSearchButtonFocused,keyboardScope:this.props.keyboardScope,onImageError:this.setImageIdToBeRemoved,onSelectImage:this.handleSearchResult,ref:this.handleImageCarouselRef,searchQuery:this.retrieveSearchQuery()})}renderSearchResults(){var e=this.retrieveSearchQuery();if(this.isLoadingSearchResults())return this.renderSearchResultsLoading();if(this.hasSearchResults()){var t=this.renderSearchResultsItems();return(0,g.jsx)("div",{className:"ImageUploadContext-searchResults ImageUploadContext-searchResults--hasResults",children:t})}return e?this.renderNoImagesFound(e):null}renderHeader(){return(0,g.jsxs)("div",{className:"ImageUploadContext-header",children:[this.renderSearchInput(),(0,g.jsx)("div",{className:"ImageUploadContext-headerItem",children:this.renderUploadOrUpsellButton()})]})}render(){var e=l()("ImageUploadContext",{"is-open":this.props.enabled,"is-dropTarget":this.props.isDropTarget,"is-waitingForQuery":this.isWaitingForQuery()});return(0,g.jsxs)("div",{className:e,onDragEnter:this.props.onDragEnter,onDragLeave:this.props.onDragLeave,onDrop:this.props.onDrop,children:[this.renderReportModal(),this.renderHeader(),(0,g.jsx)("div",{className:"ImageUploadContext-wrapper",children:(0,g.jsx)("div",{className:"ImageUploadContext-searchWrap",children:this.renderSearchResults()})}),(0,g.jsx)("div",{className:"ImageUploadContext-header",children:this.renderReportImageButton()})]})}focusActiveElement(){var e=this.imageCarousel;null!=e&&e.hasActiveImage()&&e.focusActiveImage(),this.focusSearchInput()}focusSearchInput(){this.searchBox&&this.searchBox.focus()}isWaitingForQuery(){return!this.props.word&&!this.hasExistingQuery()}retrieveSearchQuery(e){void 0===e&&(e=this.props);var{searchMeta:t}=e;return t?t.queryString:""}isSearchButtonFocused(){return(0,Nr.Z)(this.searchButton)}hasSearchResults(){return Ar()(this.retrieveSearchResults())>0}hasExistingQuery(){return!!this.retrieveSearchQuery()}retrieveSearchResults(){var e=this.getMaxNumResults(),{searchResults:t}=this.props;return t?Object.keys(t||{}).filter((e=>t[e])).slice(0,e).reduce(((e,s)=>Object.assign({},e,{[s]:t[s]})),{}):{}}isLoadingSearchResults(){return!!this.props.searchMeta&&this.props.searchMeta.isLoading}openUploadDialog(){this.fileChooser&&this.fileChooser.handleOpenFileDialog()}}hn.defaultProps={isDropTarget:!1,mimeTypes:N.k4,multipleUpload:!0,isReportingFlowBlocked:!1};var gn=(0,le.Z)()(hn);s("./.linaria-cache/app/j/create_set/components/ImageUploadContext.linaria.css");class mn{constructor(e){this.recorderState=e.recorderState}getRecorderState(){return this.recorderState}getVolume(){return this.getRecorderState().volume}isInitialized(){return this.getRecorderState().initialized}isStopped(){return this.getRecorderState().status===ri.STOPPED}isRecording(){return this.getRecorderState().status===ri.RECORDING}isSavingRecording(){return this.getRecorderState().status===ri.SAVING}isUploadingRecording(){return this.getRecorderState().status===ri.UPLOADING}isWaitingForPlugin(){return null===this.getRecorderState().implementation}isLackingRecordingPlugin(){return this.getRecorderState().implementation===ni}isUsingHtml5Plugin(){return this.getRecorderState().implementation===oi}hasRecordingPlugin(){var e=this.getRecorderState().implementation;return null!=e&&!this.isLackingRecordingPlugin()}isPermissionNeeded(){return this.getRecorderState().permissions===si.NEEDED&&this.isWaitingForMic()&&!this.isMicMuted()}isPermissionDenied(){return this.getRecorderState().permissions===si.DENIED&&this.hasRecordingPlugin()}isPermissionGranted(){return this.getRecorderState().permissions===si.GRANTED&&this.hasRecordingPlugin()}isWaitingForMic(){return this.getRecorderState().permissions===si.NEEDED&&this.hasRecordingPlugin()}getErrorCode(){return this.getRecorderState().errorCode}hasError(){var e=this.getErrorCode();return this.getRecorderState().status===ri.ERROR&&null!=e}hasNonUIBlockingError(){return this.hasError()&&!this.hasUIBlockingError()}hasUIBlockingError(){return this.hasError()&&[Xr.NO_MIC_ACCESS,Xr.MIC_MUTED].indexOf(this.getErrorCode())>-1}isMicMuted(){return this.hasError()&&this.getErrorCode()===Xr.MIC_MUTED}hasBlockingUpsellBeenDismissed(){return this.getRecorderState().hasBlockingUpsellBeenDismissed}}var _n=s("./node_modules/keycode-js/dist/keycode.cjs.js"),fn=s("./app/j/notifications/addNotification.ts"),vn=s("./app/j/notifications/Constants.ts"),Sn=s("./app/j/utils/EventListener.ts"),Cn=s("./app/j/utils/tween.ts"),bn=$i.Sb.RECORDING,{MAX_DURATION:yn}=ii,En=(0,dn.Qq)("recording_new"),jn=(0,g.jsx)(C.Z,{icon:"mic"}),xn=e=>window.setTimeout(e,100);class Tn extends h.PureComponent{constructor(e){super(e),this.recorderHelper=new mn(this.props),this.onSideChanged=()=>{this.stopPlayingRecording(),this.hideUndoNotice(),this.hideError(),null!==this.tooShortTimeout&&clearTimeout(this.tooShortTimeout)},this.onRecordingAdded=()=>{this.playRecording(),this.hideUndoNotice()},this.onRecordingDeleted=()=>{null!==this.tooShortTimeout&&clearTimeout(this.tooShortTimeout)},this.onVolumeTick=()=>{if(!this.recorderHelper.isRecording()&&(!this.canRecord()||this.hasRecording()||!this._isMounted))return this.stopVolumeTick();Ri.getVolume(),xn(this.onVolumeTick)},this.onNeedsPermission=()=>{this.waitForPermissionsTimeout=window.setTimeout((()=>{this.openPermissions()}),1e3)},this.onDeniedPermission=()=>{null!==this.waitForPermissionsTimeout&&clearTimeout(this.waitForPermissionsTimeout),this.closePermissions()},this.onGrantedPermission=()=>{null!==this.waitForPermissionsTimeout&&clearTimeout(this.waitForPermissionsTimeout),this.closePermissions()},this.onSwitchActiveSide=(e,t)=>{t.preventDefault(),this.switchToSide(e)},this.onRecordingTick=()=>{if(!this.recorderHelper.isRecording()||!this._isMounted)return this.stopRecordingTick();this.forceUpdate(),xn(this.onRecordingTick)},this.onPlayTtsAudio=(e,t)=>{t.preventDefault(),e&&(Ri.stopAllAudio(),Ri.playAudio(e))},this.onKeyDown=e=>{e.which===_n.PC&&(e.preventDefault(),!this.state.spaceHeldDown&&this.canRecord()&&(this.setState({spaceHeldDown:!0}),this.startRecording()))},this.onKeyUp=e=>{e.which===_n.PC&&(e.preventDefault(),this.state.spaceHeldDown&&this.recorderHelper.isRecording()&&(this.setState({spaceHeldDown:!1}),this.stopRecording()))},this.onMouseDown=e=>{e.preventDefault(),this.startRecording()},this.onMouseUp=e=>{e.preventDefault(),this.stopRecording()},this.onTouchStart=e=>{e.preventDefault(),this.startRecording()},this.onTouchEnd=e=>{e.preventDefault(),this.stopRecording()},this.onStopPlayingRecording=e=>{e.preventDefault(),this.stopPlayingRecording()},this.onPlayRecording=(e,t)=>{t.preventDefault(),this.playRecording(e)},this.onOpen=()=>{this.keyDownListener=Sn.Z.listen(window.document,"keydown",this.onKeyDown),this.keyUpListener=Sn.Z.listen(window.document,"keyup",this.onKeyUp),pr().setScope(this.props.termLuid),pr()(Je.Z.recording.recordWord,this.props.termLuid,(()=>(this.switchToSide(Kr.dR),!1))),pr()(Je.Z.recording.recordDefinition,this.props.termLuid,(()=>(this.switchToSide(Kr.go),!1))),pr()(Je.Z.recording.nextRow,this.props.termLuid,(()=>(this.switchToOffsetRow(1)&&this.props.onScrollToOffset(1),!1))),pr()(Je.Z.recording.prevRow,this.props.termLuid,(()=>(this.switchToOffsetRow(-1)&&this.props.onScrollToOffset(-1),!1))),pr()(Je.Z.recording.playOrRestoreRecording,this.props.termLuid,(()=>(this.hasRecording()?this.togglePlayingRecording():this.hasUndo()&&this.undoDelete(),!1))),pr()(Je.Z.recording.deleteRecording,this.props.termLuid,(()=>(this.deleteRecording(),!1)))},this.onReload=e=>{e.preventDefault(),window.location.reload()},this.onClickCloseBlockingUpsell=e=>{e.preventDefault(),Ri.dismissUpsell()},this.onClose=()=>{this.recorderHelper.isRecording()&&Ri.cancel(),this.stopPlayingRecording(),this.stopRecordingTick(),this.stopVolumeTick(),this.keyDownListener&&this.keyDownListener.remove(),this.keyUpListener&&this.keyUpListener.remove(),pr().unbind(Je.Z.recording.recordWord,this.props.termLuid),pr().unbind(Je.Z.recording.recordDefinition,this.props.termLuid),pr().unbind(Je.Z.recording.nextRow,this.props.termLuid),pr().unbind(Je.Z.recording.prevRow,this.props.termLuid),pr().unbind(Je.Z.recording.playOrRestoreRecording,this.props.termLuid),pr().unbind(Je.Z.recording.deleteRecording,this.props.termLuid),null!==this.tooShortTimeout&&clearTimeout(this.tooShortTimeout)},this.onUndoDelete=e=>{e.preventDefault(),this.undoDelete()},this.onError=()=>{switch(this.recorderHelper.getErrorCode()){case Xr.TOO_SHORT:this.showError(),null!==this.tooShortTimeout&&clearTimeout(this.tooShortTimeout),this.tooShortTimeout=window.setTimeout((()=>this.hideError()),2e3);break;case Xr.SAVE_ERROR:this.showError();break;case Xr.MIC_MUTED:null!==this.waitForPermissionsTimeout&&clearTimeout(this.waitForPermissionsTimeout),this.closePermissions()}},this.onDeleteRecording=(e,t)=>{t.preventDefault(),this.deleteRecording(e)},this.volumeTick=null,this.isUnmounting=!1,this.recordingTick=null,this.waitForPermissionsTimeout=null,this.tooShortTimeout=null,this.keyUpListener=null,this.keyDownListener=null,this.state={hideError:!0,lastDeletedCustomAudioLuid:null,playbackPercentage:0,recordingStarted:0,spaceHeldDown:!1}}componentDidMount(){this.props.enabled&&(this._isMounted=!0,this.onOpen(),this.startVolumeTick(),this.recorderHelper.isPermissionNeeded()&&this.onNeedsPermission(),this.recorderHelper.isPermissionGranted()&&this.onGrantedPermission(),this.recorderHelper.isPermissionDenied()&&this.onDeniedPermission())}componentDidUpdate(e){var t=!e.enabled&&this.props.enabled,s=e.enabled&&!this.props.enabled,r=e.activeSide!==this.props.activeSide,i=!e.canUseVoiceRecording&&this.props.canUseVoiceRecording,n=e.recorderState.status!==this.props.recorderState.status,o=e.recorderState.errorCode!==this.props.recorderState.errorCode,a=e.recorderState.implementation!==this.props.recorderState.implementation,l=e.recorderState.permissions!==this.props.recorderState.permissions,d=e.recorderState.volume!==this.props.recorderState.volume;(n||o||a||l||d)&&(this.recorderHelper=new mn(this.props));var u=e.wordCustomAudioLuid!==this.props.wordCustomAudioLuid,c=u&&!!this.props.wordCustomAudioLuid,p=u&&!!this.props.wordCustomAudioLuid,h=e.definitionCustomAudioLuid!==this.props.definitionCustomAudioLuid,g=h&&!!this.props.definitionCustomAudioLuid,m=h&&!!this.props.definitionCustomAudioLuid,_=p&&this.props.activeSide===Kr.dR||m&&this.props.activeSide===Kr.go,f=c&&this.props.activeSide===Kr.dR||g&&this.props.activeSide===Kr.go;this.startVolumeTick(),i&&window.setTimeout((()=>{Ri.init()}),0),t&&this.onOpen(),s&&this.onClose(),this.recorderHelper.hasError()&&(n||o)&&this.onError(),r&&this.onSideChanged(),_&&this.onRecordingAdded(),f&&this.onRecordingDeleted(),a&&this.recorderHelper.isPermissionNeeded()&&this.onNeedsPermission(),l&&this.recorderHelper.isPermissionDenied()&&this.onDeniedPermission(),l&&this.recorderHelper.isPermissionGranted()&&this.onGrantedPermission(),!r&&!n||f||this.hideUndoNotice()}componentWillUnmount(){this.isUnmounting=!0,this._isMounted=!1,this.onClose()}getRecordingDuration(){return 0===this.state.recordingStarted?0:(0,$r.Z)()-this.state.recordingStarted}getRecording(e){return void 0===e&&(e=this.props.activeSide),e===Kr.dR?this.props.wordCustomAudio:this.props.definitionCustomAudio}getRecordingUrl(e){var t=this.getRecording(e);return null!=t&&t._url?t._url.replace("http://","https://"):null}getRecordingLuid(e){return void 0===e&&(e=this.props.activeSide),e===Kr.dR?this.props.wordCustomAudioLuid:this.props.definitionCustomAudioLuid}getTtsUrl(e){return void 0===e&&(e=this.props.activeSide),e===Kr.dR?this.props.wordTtsAudioUrl:this.props.definitionTtsAudioUrl}getInactiveSide(){return this.props.activeSide===Kr.dR?Kr.go:Kr.dR}renderMicMuted(){if(!this.recorderHelper.isMicMuted())return null;var e=(0,g.jsx)(I.Z,{newTab:!0,to:"/help/2444123/faq-is-my-mic-not-working",children:(0,g.jsx)(_.Z,{id:"create_set.term_context.voice.muted.faq_link"})}),t=[(0,g.jsx)(C.Z,{icon:"mic"},"mic"),(0,g.jsx)(C.Z,{icon:"x"},"x")],s=(0,g.jsx)(_.Z,{id:"create_set.term_context.voice.muted.title"}),r=(0,g.jsx)(_.Z,{faqLink:e,id:"create_set.term_context.voice.muted.subtitle"});return this.renderIconView(t,s,r)}renderIconView(e,t,s){return(0,g.jsxs)("div",{className:"VoiceRecordingContext-workspace",children:[(0,g.jsx)("div",{className:"VoiceRecordingContext-iconWrap",children:e}),(0,g.jsx)("div",{className:"VoiceRecordingContext-headline",children:t}),s?(0,g.jsx)("div",{className:"VoiceRecordingContext-subheadline",children:s}):null]})}renderRecordingMicrophone(e){var t=e===this.props.activeSide,s={boxShadow:"0 0 0 "+(t?5+15*Math.round(100*this.recorderHelper.getVolume())/100:5)+"px currentColor"},r=l()("VoiceRecordingContext-micWrap",{"has-error":this.recorderHelper.getErrorCode()>=0&&!this.state.hideError,"is-activeSide":t,"is-recording":this.recorderHelper.isRecording()});return(0,g.jsx)("div",{className:r,children:t?(0,g.jsx)("div",{className:"VoiceRecordingContext-micBubble",onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd,onTouchStart:this.onTouchStart,style:s,children:(0,g.jsx)(C.Z,{icon:"mic",size:"large"})}):(0,g.jsx)("div",{className:"VoiceRecordingContext-micBubble",style:s,children:(0,g.jsx)(C.Z,{icon:"mic",size:"large"})})})}renderRecordPrompt(){if(!this.canUseVoiceRecording())return null;var e=this.renderError(),t=this.renderRecordingMicrophone(this.props.activeSide);return(0,g.jsx)("div",{className:"VoiceRecordingContext-workspace",children:(0,g.jsx)(f.Z,{above:"s",children:s=>s?(0,g.jsxs)(g.Fragment,{children:[t,(0,g.jsx)("div",{className:"VoiceRecordingContext-headline",children:(0,g.jsx)(_.Z,{id:"create_set.term_context.voice.start_recording_instructions",micIcon:jn,spaceBar:(0,g.jsx)("kbd",{children:(0,g.jsx)(_.Z,{id:"create_set.term_context.voice.start_recording_instructions_spacebar"})})})}),e]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"VoiceRecordingContext-headline",children:(0,g.jsx)(_.Z,{id:"create_set.term_context.voice.start_recording_instructions_mobile",micIcon:jn})}),e,t]})})})}renderMicPermissionsDenied(){if(!this.recorderHelper.isPermissionDenied())return null;var e=[(0,g.jsx)(C.Z,{icon:"mic"},"mic"),(0,g.jsx)(C.Z,{icon:"x"},"x")],t=(0,g.jsx)(_.Z,{id:"create_set.term_context.voice.error.permission_denied"});return this.renderIconView(e,t)}renderNoPlugin(){if(!this.recorderHelper.isLackingRecordingPlugin())return null;var e=(0,g.jsx)(I.Z,{newTab:!0,to:"https://www.google.com/chrome/",children:(0,g.jsx)(_.Z,{id:"create_set.term_context.voice.not_supported.chrome_link"})}),t=(0,g.jsx)(_.Z,{id:"create_set.term_context.voice.not_supported.title"}),s=(0,g.jsx)(_.Z,{chromeLink:e,id:"create_set.term_context.voice.not_supported.subtitle"}),r=[(0,g.jsx)(C.Z,{icon:"mic"},"mic"),(0,g.jsx)(C.Z,{icon:"x"},"x")];return this.renderIconView(r,t,s)}renderNoRecording(e){return this.hasRecording(e)?null:this.canUseVoiceRecording()?this.renderRecordPrompt():this.renderUpsell()}renderError(){if(this.state.hideError)return null;var e=null;return this.recorderHelper.getErrorCode()===Xr.TOO_SHORT?e=(0,g.jsx)("div",{className:"VoiceRecordingContext-errorMessage",children:(0,g.jsx)(_.Z,{id:"create_set.term_context.voice.error.too_short"})}):this.recorderHelper.getErrorCode()!==Xr.SAVE_ERROR&&this.recorderHelper.getErrorCode()!==Xr.BAD_SAMPLE_RATE||(e=(0,g.jsx)("div",{className:"VoiceRecordingContext-errorMessage",children:(0,g.jsx)(_.Z,{id:"create_set.term_context.voice.error.unknown"})})),e?(0,g.jsx)("div",{className:"VoiceRecordingContext-error",children:e}):null}renderWaitingForMic(){if(!this.recorderHelper.isWaitingForMic())return null;var e=(0,g.jsx)(C.Z,{className:"VoiceRecordingContext-icon",icon:"info"}),t=(0,g.jsx)(_.Z,{id:"create_set.term_context.voice.waiting_for_microphone"});return this.renderIconView(e,t)}renderExistingRecording(e){if(!this.hasRecording(e)||this.recorderHelper.isRecording())return null;var t=this.isPlayingRecording()?(0,g.jsx)("div",{className:"VoiceRecordingContext-stopButton",onClick:this.onStopPlayingRecording,children:(0,g.jsx)(C.Z,{icon:"stop",size:"large"})}):(0,g.jsx)("div",{className:"VoiceRecordingContext-playButton",onClick:this.onPlayRecording.bind(null,e),children:(0,g.jsx)(C.Z,{icon:"play",size:"large"})}),s=this.canRecord()||this.isPlayingRecording()?(0,g.jsx)(_.Z,{id:"create_set.term_context.voice.rerecord_instructions"}):(0,g.jsx)(I.Z,{newTab:!0,to:En,children:(0,g.jsx)(_.Z,{id:"create_set.term_context.voice.upsell.rerecord"})}),r=this.isPlayingRecording()?(0,g.jsx)("div",{className:"VoiceRecordingContext-playbackFill",style:{right:Math.max(0,100-this.state.playbackPercentage)+"%"}}):null;return(0,g.jsxs)("div",{className:"VoiceRecordingContext-workspace",children:[(0,g.jsx)("div",{className:"VoiceRecordingContext-existingRecordingActionsWrap",children:(0,g.jsxs)("div",{className:"VoiceRecordingContext-existingRecordingActions",children:[t,this.canRecord()||this.isPlayingRecording()?(0,g.jsx)("div",{className:"VoiceRecordingContext-garbageButton",onClick:this.onDeleteRecording.bind(null,e),children:(0,g.jsx)(C.Z,{icon:"garbage",size:"large"})}):null]})}),(0,g.jsx)(f.Z,{above:"s",children:(0,g.jsx)("div",{className:"VoiceRecordingContext-headline",children:s})}),this.renderError(),r]})}renderUpsell(){return this.canUseVoiceRecording()?null:(0,g.jsx)("div",{className:"VoiceRecordingContext-workspace VoiceRecordingContext-workspace--upsell",children:(0,g.jsx)("div",{className:"VoiceRecordingContext-workspaceWrap",children:(0,g.jsxs)("div",{className:"VoiceRecordingContext-workspaceCell",children:[(0,g.jsx)(Be.Z,{className:"VoiceRecordingContext-headline",children:(0,g.jsx)(_.Z,{id:"create_set.term_context.voice.upsell.headline"})}),(0,g.jsx)(Be.Z,{children:(0,g.jsx)(v.Z,{linkTo:En,linkToNewTab:!0,children:this.renderText()})})]})})})}renderCurrentlyRecording(){if(!this.recorderHelper.isRecording())return null;var e=this.getRecordingDuration(),t=yn-e<=1e4,s=Math.floor(e/1e3)+Math.floor(e%1e3/10)/100,r=t?(0,g.jsx)("h6",{className:"VoiceRecordingContext-headline",children:(0,g.jsx)(_.Z,{duration:yn/1e3,id:"create_set.term_context.voice.approaching_max_seconds"})}):null,i=this.renderRecordingMicrophone(this.props.activeSide),n=(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"VoiceRecordingContext-headline",children:[(0,g.jsx)(_.Z,{id:"create_set.term_context.voice.recording_in_progress",numberOfSeconds:s}),(0,g.jsxs)("span",{className:"VoiceRecordingContext-recordingStopwatch",children:[(0,g.jsx)(_.Z,{formats:{number:{stopwatch:{minimumFractionDigits:1,maximumFractionDigits:1}}},id:"create_set.term_context.voice.number_of_seconds",seconds:s})," ",(0,g.jsx)(_.Z,{id:"create_set.term_context.voice.number_of_seconds_unit",seconds:s})]})]}),r?(0,g.jsx)("div",{className:"VoiceRecordingContext-headline",children:r}):null]});return(0,g.jsx)("div",{className:"VoiceRecordingContext-workspace",children:(0,g.jsx)(f.Z,{above:"s",children:e=>e?(0,g.jsxs)(g.Fragment,{children:[i,n]}):(0,g.jsxs)(g.Fragment,{children:[n,i]})})})}renderSwitchSidesRecordingArea(e){return(0,g.jsxs)("div",{className:"VoiceRecordingContext-workspace",children:[this.renderRecordingMicrophone(e),this.renderSwitchSidesLink(e)]})}renderSwitchSidesLink(e){return(0,g.jsxs)(I.Z,{onClick:this.onSwitchActiveSide.bind(null,e),children:[(0,g.jsx)(f.Z,{below:"s",children:(0,g.jsx)(C.Z,{icon:"switch"})}),e===Kr.dR?(0,g.jsx)(_.Z,{id:"create_set.term_context.voice.switch_to_term_side"}):(0,g.jsx)(_.Z,{id:"create_set.term_context.voice.switch_to_definition_side"})]})}renderRecordingArea(e){return e!==this.props.activeSide?this.renderSwitchSidesRecordingArea(e):this.recorderHelper.isRecording()?this.renderCurrentlyRecording():this.recorderHelper.isLackingRecordingPlugin()?this.renderNoPlugin():this.recorderHelper.isPermissionDenied()?this.renderMicPermissionsDenied():this.recorderHelper.isMicMuted()?this.renderMicMuted():this.recorderHelper.isWaitingForMic()?this.renderWaitingForMic():this.recorderHelper.isSavingRecording()||this.recorderHelper.isUploadingRecording()?this.renderSavingRecording():this.hasRecording(e)?this.renderExistingRecording(e):this.renderNoRecording(e)}renderText(){return(0,dn.od)()?(0,g.jsx)(g.Fragment,{children:(0,dn.jJ)()}):(0,g.jsx)(_.Z,{id:"create_set.term_context.voice.upsell.learn_more_link"})}renderBlockingUpsell(){return this.canUseVoiceRecording()||this.recorderHelper.hasBlockingUpsellBeenDismissed()?null:(0,g.jsxs)("div",{className:"VoiceRecordingContext-blockingUpsell",children:[(0,g.jsxs)("div",{className:"VoiceRecordingContext-blockingUpsellWrap",children:[(0,g.jsx)("div",{className:"VoiceRecordingContext-blockingUpsellCell VoiceRecordingContext-blockingUpsellCell--image",children:(0,g.jsx)("img",{role:"presentation",src:this.props.voiceRecordingUpsellImage})}),(0,g.jsxs)("div",{className:"VoiceRecordingContext-blockingUpsellCell VoiceRecordingContext-blockingUpsellCell--text",children:[(0,g.jsx)(T.Z,{deprecatedStyle:!0,size:4,children:(0,g.jsx)(_.Z,{id:"create_set.term_context.voice.upsell.headline"})}),(0,g.jsx)(Be.Z,{children:(0,g.jsx)(v.Z,{linkTo:En,linkToNewTab:!0,children:this.renderText()})})]})]}),(0,g.jsx)("div",{className:"VoiceRecordingContext-blockingUpsellClose",onClick:this.onClickCloseBlockingUpsell,children:(0,g.jsx)(I.Z,{onClick:this.onClickCloseBlockingUpsell,children:(0,g.jsx)(_.Z,{id:"create_set.term_context.voice.upsell.close_link"})})})]})}renderSide(e){return(0,g.jsx)("div",{className:"VoiceRecordingContext-sideWrap","data-testid":"VoiceRecordingContext-sideWrap",children:(0,g.jsx)(f.Z,{above:"s",children:t=>t?(0,g.jsxs)(g.Fragment,{children:[this.renderRecordingArea(e),e===this.props.activeSide?this.renderTtsLink(e):null]}):(0,g.jsxs)(g.Fragment,{children:[this.renderRecordingArea(e),(0,g.jsxs)("div",{className:"VoiceRecordingContext-secondaryActions",children:[(0,g.jsx)("div",{className:"VoiceRecordingContext-secondaryAction",children:this.renderSwitchSidesLink(this.getInactiveSide())}),(0,g.jsx)("div",{className:"VoiceRecordingContext-secondaryAction",children:this.renderTtsLink(this.props.activeSide)})]})]})})})}renderTtsLink(e){var t=this.getTtsUrl(e),s=e===Kr.dR?(0,g.jsx)(_.Z,{id:"create_set.term_context.voice.no_quizlet_term_audio"}):(0,g.jsx)(_.Z,{id:"create_set.term_context.voice.no_quizlet_definition_audio"}),r=t?(0,g.jsx)(_.Z,{id:"create_set.term_context.voice.listen_to_quizlet_audio_link"}):s;return(0,g.jsx)(I.Z,{disabled:!t,onClick:this.onPlayTtsAudio.bind(null,t),children:(0,g.jsx)(f.Z,{above:"s",children:e=>e?(0,g.jsx)(g.Fragment,{children:r}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(C.Z,{icon:"play"}),r]})})})}renderSavingRecording(){if(!this.recorderHelper.isSavingRecording()&&!this.recorderHelper.isUploadingRecording())return null;var e=(0,g.jsx)("div",{className:"VoiceRecordingContext-headline",children:(0,g.jsx)(_.Z,{id:"create_set.term_context.voice.saving"})}),t=this.renderRecordingMicrophone(this.props.activeSide);return(0,g.jsx)("div",{className:"VoiceRecordingContext-workspace",children:(0,g.jsx)(f.Z,{above:"s",children:s=>s?(0,g.jsxs)(g.Fragment,{children:[t,e]}):(0,g.jsxs)(g.Fragment,{children:[e,t]})})})}render(){var e=l()("VoiceRecordingContext-helpLinkWrap",{"VoiceRecordingContext-helpLinkWrap--cleanDesign":this.props.shouldUseCleanDesign}),t=this.renderSide(Kr.dR),s=this.renderSide(Kr.go),r=this.canUseVoiceRecording()?(0,g.jsx)(I.Z,{newTab:!0,to:"/help/2444119/recording-custom-audio",children:(0,g.jsx)(_.Z,{id:"create_set.term_context.voice.faq_link"})}):null,i=this.renderBlockingUpsell();return(0,g.jsxs)("div",{className:"VoiceRecordingContext",children:[(0,g.jsx)("div",{className:"VoiceRecordingContext-wrapper",children:(0,g.jsx)("div",{className:"VoiceRecordingContext-main",children:(0,g.jsx)(f.Z,{above:"s",children:e=>e?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"VoiceRecordingContext-side VoiceRecordingContext-side--word",children:t}),(0,g.jsx)("div",{className:"VoiceRecordingContext-side VoiceRecordingContext-side--definition",children:s})]}):(0,g.jsx)(g.Fragment,{children:(0,g.jsx)("div",{className:"VoiceRecordingContext-recordingArea",children:this.props.activeSide===Kr.dR?t:s})})})})}),(0,g.jsx)("div",{className:e,children:r}),i]})}undoDelete(){Ri.updateTermCustomAudio(this.state.lastDeletedCustomAudioLuid,this.props.setLuid,this.props.termLuid,this.props.activeSide),this.setState({lastDeletedCustomAudioLuid:null})}startVolumeTick(){this.volumeTick||(this.stopVolumeTick(),this.volumeTick=xn(this.onVolumeTick))}openPermissions(){this.props.onOpenVoiceRecordingPermissionsModal()}closePermissions(){this.props.onCloseVoiceRecordingPermissionsModal()}startRecording(){this.canRecord()&&(Ri.record(this.props.setLuid,this.props.termLuid,this.props.activeSide),this.setState({recordingStarted:(0,$r.Z)()},this.onRecordingTick))}stopRecording(){this.recorderHelper.isRecording()&&((0,Y.Z)("new_create_set_recording_stopped"),Ri.stop())}playRecording(e){if(this.hasRecording(e)){var t=this.getRecordingUrl(e);Ri.preloadAudio(t,{onError(){},onLoad:e=>{if(this._isMounted&&!this.isUnmounting){this.stopPlayingRecording();var s=new Cn.Z({playbackPercentage:0});s.to({playbackPercentage:105}).duration(1e3*e).update((e=>{this._isMounted&&!this.isUnmounting&&this.setState(e)})).on("end",(()=>{this._isMounted&&!this.isUnmounting&&this.setState({playbackPercentage:0})})).start();var r=()=>null==s?void 0:s.stop();Ri.playAudio(t,{onStop:r,onError:r,onFinish:r})}}})}}stopPlayingRecording(){Ri.stopAllAudio()}togglePlayingRecording(){this.isPlayingRecording()?this.stopPlayingRecording():this.playRecording()}deleteRecording(e){if(this.hasRecording(e)){this.stopPlayingRecording();var t=this.getRecordingLuid(e);Ri.delete(this.props.termLuid,this.props.activeSide,t),this.setState({lastDeletedCustomAudioLuid:t}),(0,fn.Z)({duration:vn.th.DEFAULT,isDismissible:!0,message:(0,se.Z)("create_set.term_context.voice.error.recording_deleted"),onClickSecondaryAction:this.onUndoDelete,secondaryActionLabel:(0,se.Z)("create_set.term_context.voice.error.undo_link")})}}startRecordingTick(){this.recordingTick||(this.stopRecordingTick(),this.recordingTick=xn(this.onRecordingTick))}stopRecordingTick(){null!==this.recordingTick&&clearTimeout(this.recordingTick),this.recordingTick=null}stopVolumeTick(){null!==this.volumeTick&&clearTimeout(this.volumeTick),this.volumeTick=null}hideUndoNotice(){this.state.lastDeletedCustomAudioLuid&&this.setState({lastDeletedCustomAudioLuid:null})}hideError(){this.setState({hideError:!0})}showError(){this.setState({hideError:!1})}hasTts(e){return!!this.getTtsUrl(e)}hasRecording(e){return!!this.getRecording(e)}isPlayingRecording(){return this.state.playbackPercentage>0}canUseVoiceRecording(){return this.props.canUseVoiceRecording}canRecord(){return this.canUseVoiceRecording()&&this.recorderHelper.isPermissionGranted()&&!this.isPlayingRecording()&&(this.recorderHelper.isStopped()||this.recorderHelper.hasNonUIBlockingError())}switchToOffsetRow(e){return!!this.canRecord()&&(B.Z.activateOffsetRowContext(this.props.termLuid,e,bn),!0)}switchToSide(e){e===this.props.activeSide||this.recorderHelper.isRecording()||B.Z.activateSide(this.props.termLuid,e)}hasUndo(){return!!this.state.lastDeletedCustomAudioLuid}}class In extends h.PureComponent{constructor(){super(...arguments),this.onFocus=e=>{this.props.onFocus(e,Kr.dR)},this.onBlur=e=>{this.props.onBlur(e,Kr.dR)},this.handleEditorValueChange=e=>{this.props.onChange(e,Kr.dR)},this.handlePaste=e=>{if(this.props.onPaste&&this.props.onPaste(e))return!0;if(!this.props.canUseImageUpload||(0,re.XX)(e.clipboardData))return!1;e.preventDefault();var{matching:t,nonMatching:s,numTotal:r}=(0,re.t9)(e.clipboardData,N.k4);return s.length&&this.props.onImageUploadFailure(s),t.length&&this.props.onImageUploadSuccess(t,1===r),!0},this.richTextEditorRef=h.createRef(),this.focus=()=>{this.richTextEditorRef&&this.richTextEditorRef.current&&this.richTextEditorRef.current.focus()},this.blur=()=>{this.richTextEditorRef&&this.richTextEditorRef.current&&this.richTextEditorRef.current.blur()}}getLabel(){return this.props.isProfane?(0,se.Z)("create_set.term_profanity_warning.input_label"):this.props.hasMinTermsError?(0,se.Z)("create_set.validation_errors.not_enough_terms_error"):this.props.label}render(){return(0,g.jsx)("div",{className:l()("WordSide",{"is-active":this.props.termActive}),children:(0,g.jsx)(Vs.default,{canEditRichText:!0,invalid:this.props.isProfane||this.props.hasMinTermsError||this.props.hasWordLangError||void 0,label:this.getLabel(),labelAddOnContent:this.shouldRenderLanguageEditor()?(0,g.jsx)(Yi.Z,{side:Kr.dR}):null,labelId:this.props.labelId,lang:this.props.lang,languageCodes:this.props.lang?[this.props.lang]:[],onBlur:this.onBlur,onChange:this.handleEditorValueChange,onFocus:this.onFocus,onPaste:this.handlePaste,onUpdatePMEditorView:this.props.onUpdatePMEditorView,otherLang:this.props.otherSideLang,placeholder:this.props.placeholder,plainText:this.props.word,pmJson:this.props.wordRichText,ref:this.richTextEditorRef,shouldShowRichTextCombinedToolbar:!0,tabIndex:this.props.tabIndex,userLocale:this.props.userLocale})})}shouldRenderLanguageEditor(){return this.props.termActive||this.props.hasWordLangError}}var wn=s("./app/j/utils/ObjectHelper.ts");function An(e,t,s,r){return!(!t&&!e)&&t!==e||!(!r&&!s)&&!(0,wn.J)(r,s)}var On=s("./app/j/i18n/LocalizationConstants.ts"),Rn=s("./app/j/utils/PageSessionHelper.ts"),Dn=s("./app/j/utils/log-event.ts"),Ln=s("./app/j/utils/unix-timestamp.ts");class Pn{constructor(){this.editPageSessionHelper=new Rn.Z,this.suggestionPageSessionHelper=new Rn.Z}getSuggestionSessionId(){return this.suggestionPageSessionHelper.getPageSessionId()}getEdtSessionId(){return this.editPageSessionHelper.getPageSessionId()}logCreateSetSuggestionEvent(e,t){var s=Pe()(yt.Z.user),r=Object.assign({action:e,uid:yt.Z.uid,user_id:s.id,client_id:null,client_timestamp:(0,Ln.vJ)(),platform:i.t4T.WEB,edit_session_id:this.getEdtSessionId(),suggestion_session_id:this.getSuggestionSessionId()},t,{suggested_texts:JSON.stringify(t.suggested_texts)});(0,Dn.Z)("create_set_suggestions",r)}}function Mn(e,t){return t.indexOf(e)>=0}var Zn=s("./app/j/utils/shallow-equal.ts");s("./node_modules/core-js/modules/es.symbol.replace.js");function kn(e,t){return kn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},kn(e,t)}function Un(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kn(e,t)}s("./node_modules/core-js/modules/es.string.starts-with.js");function Nn(){Nn=function(e,t){return new s(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function s(e,r,i){var n=new RegExp(e,r);return t.set(n,i||t.get(e)),kn(n,s.prototype)}function r(e,s){var r=t.get(s);return Object.keys(r).reduce((function(t,s){return t[s]=e[r[s]],t}),Object.create(null))}return Un(s,RegExp),s.prototype.exec=function(t){var s=e.exec.call(this,t);return s&&(s.groups=r(s,this)),s},s.prototype[Symbol.replace]=function(s,i){if("string"==typeof i){var n=t.get(this);return e[Symbol.replace].call(this,s,i.replace(/\$<([^>]+)>/g,(function(e,t){return"$"+n[t]})))}if("function"==typeof i){var o=this;return e[Symbol.replace].call(this,s,(function(){var e=arguments;return"object"!=typeof e[e.length-1]&&(e=[].slice.call(e)).push(r(e,o)),i.apply(this,e)}))}return e[Symbol.replace].call(this,s,i)},Nn.apply(this,arguments)}var Fn=Nn(/Quizlet term [0-9]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+(.*) \{[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+=(.*)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+\}/,{word:1,definition:2});var{TAB_INDEX:Bn}=$i.dG;function Hn(e){if(e){if(Object.prototype.hasOwnProperty.call(e,"marks"))return!0;var t=e.content;if(t instanceof Array)for(var s=0;s<t.length;s++)if(Hn(t[s]))return!0}return!1}class Vn extends h.Component{constructor(e){var t;super(e),t=this,this.state={activeDistractor:null,actionsExpanded:!1,definition:this.props.term.definition,definitionCustomDistractors:this.props.term.definitionCustomDistractors?this.props.term.definitionCustomDistractors.map((e=>Object.assign({},e,{luid:e.id}))):null,definitionRichText:this.props.term.definitionRichText,focusedInputContainsAccentLanguage:!1,isAutosuggestVisible:!1,isDraggable:!0,isDraggedOver:!1,isFocused:!1,richTextEditorView:null,termUpdateCounter:0,word:this.props.term.word,wordRichText:this.props.term.wordRichText},this.getOtherSide=e=>e===Kr.dR?Kr.go:Kr.dR,this.getTtsUrl=function(e){void 0===e&&(e=t.props.activeSide);var s,r=Mn(s=t.getLang(e),Qr.ZP.notActualLanguages)?"en":Mn(s,["ja-ro","ja-ka"])?"ja":Mn(s,Qr.ZP.ttsLanguages)?Mn(s,["zh-CN","zh-TW"])?"zh":s:null;if(!r)return null;var i=e===Kr.dR?t.props.term._wordTtsUrl:t.props.term._definitionTtsUrl;return null==i?void 0:i.replace(/\/\w{2}\.mp3/,"/"+r+".mp3")},this.getActiveComponent=()=>"word"===this.props.activeSide?this.wordSide.current:this.definitionSide.current,this.getInactiveSideLang=()=>this.props[this.props.activeSide===Kr.dR?"definitionLang":"wordLang"],this.getSideLabel=e=>e===Kr.dR?this.getWordSideLabel():this.getDefinitionSideLabel(),this.getDefinitionSideLabel=()=>this.hasCustomDistractors()?(0,se.Z)("create_set.term_context.sides.answer"):(0,se.Z)("create_set.term_context.sides.definition"),this.getWordSideLabel=()=>this.hasCustomDistractors()?(0,se.Z)("create_set.term_context.sides.question"):(0,se.Z)("create_set.term_context.sides.term"),this.getSideLabelId=e=>e===Kr.dR?this.getWordSideLabelId():this.getDefinitionSideLabelId(),this.getDefinitionSideLabelId=()=>this.hasCustomDistractors()?"answer-side":"definition-side",this.getWordSideLabelId=()=>this.hasCustomDistractors()?"question-side":"term-side",this.getSidePlaceholder=e=>{if("en"!==On.ZX)return"";var t=this.getLang(e);return t&&this.props.wordLang!==this.props.definitionLang?(0,se.Z)("create_set.term_context.sides.language_prompt",{language:(0,Er.Z)(t)}):e===Kr.dR?this.getWordSidePlaceholder():this.getDefinitionSidePlaceholder()},this.getWordSidePlaceholder=()=>this.hasCustomDistractors()?(0,se.Z)("create_set.term_context.custom_distractors.question_placeholder"):(0,se.Z)("create_set.term_context.sides.term_prompt"),this.getDefinitionSidePlaceholder=()=>this.hasCustomDistractors()?(0,se.Z)("create_set.term_context.custom_distractors.answer_placeholder"):(0,se.Z)("create_set.term_context.sides.definition_prompt"),this.getLang=function(e){return void 0===e&&(e=t.props.activeSide),t.props[e===Kr.dR?"wordLang":"definitionLang"]},this.getAllWords=()=>Object.values(this.props.terms).map((e=>e.word)),this.getAllDefinitions=()=>Object.values(this.props.terms).map((e=>e.definition)),this.onNextTick=e=>window.setTimeout(e,0),this.onImageContextDragEnter=()=>{this.setState({isDraggedOver:!0})},this.onCloseContext=e=>{this.props.onCloseContext(e),this.closeActionsAndRefocus()},this.onToggleAutodefineContext=()=>{this.props.onToggleContext($i.Sb.AUTODEFINE)},this.onSelectAutodefineResult=e=>{(0,Y.Z)("new_create_set_select_autodefine_result");var t=this.state.definition?this.state.definition+"\n"+e:e,s={word:this.state.word,definition:t};this.setState(s),this.updateAction(s),this.closeAutodefineContext(),this.closeActionsAndRefocus()},this.onReplaceImage=e=>{J.replace(e,this.props.setLuid,this.props.termLuid,this.props.termImageLuid),this.closeActionsAndRefocus()},this.onDeleteImage=()=>{J.del(this.props.setLuid,this.props.imageLuid,this.props.termLuid,this.props.termImageLuid),this.props.onCloseContext($i.Sb.IMAGE),this.focusDefinition()},this.onFormUpload=(e,t)=>{var s=()=>{t.reset(),this.closeImageContext(),this.closeActionsAndRefocus()},{matching:r,nonMatching:i,numTotal:n}=(0,hr.e)(e,N.k4);if(!n)return J.bulkCreate([{file:t,setLuid:this.props.setLuid,termLuid:this.props.termLuid,termImageLuid:this.props.termImageLuid}]),void s();i.length&&J.bulkUploadFailure({message:(0,se.Z)("create_set.term_context.image.file_format_warning"),files:i}),this.props.onBulkImageUpload(r,this.props.termLuid,1===n),s()},this.onToggleCustomDistractorsContext=()=>{if(this.props.activeContext!==$i.Sb.CUSTOM_DISTRACTORS){var{definitionLang:e,termLuid:t}=this.props,s=e||null;(!this.state.definitionCustomDistractors||this.state.definitionCustomDistractors.length<3)&&this.setState((e=>{var r=e.definitionCustomDistractors||[],i=[{luid:t+"-distractor-1",text:{languageCode:s,plainText:"",richText:null,ttsUrl:null,ttsSlowUrl:null}},{luid:t+"-distractor-2",text:{languageCode:s,plainText:"",richText:null,ttsUrl:null,ttsSlowUrl:null}},{luid:t+"-distractor-3",text:{languageCode:s,plainText:"",richText:null,ttsUrl:null,ttsSlowUrl:null}}];return{definitionCustomDistractors:[...r,...i.slice(0,3-r.length)]}}))}this.props.onToggleContext($i.Sb.CUSTOM_DISTRACTORS),(0,Y.Z)("new_create_set_definition_distractors_add_options",{setId:this.props.term.setId,termId:this.props.term.id})},this.handleDistractorUpdate=e=>{var t=e?e.filter((e=>e.text&&e.text.plainText.trim().length>0)):null;this.handleDistractorDeletion(e,t),this.updateAction({definitionCustomDistractors:t,word:this.state.word,definition:this.state.definition})},this.handleDistractorDeletion=(e,t)=>{if(3!==(null==t?void 0:t.length)){var s=[...t||[],...(e?e.filter((e=>!e.text||0===e.text.plainText.trim().length)).map((e=>(delete e.id,e))):null)||[]];this.setState({definitionCustomDistractors:s})}},this.handleDrop=e=>{if(this.setState({isDraggedOver:!1}),!(this.dropContainsText(e)||this.props.isReordering||this.props.viewOnly))if(this.props.canUseImageUpload){if(void 0!==e.dataTransfer)if(e.preventDefault(),(0,re.U5)(e.dataTransfer))J.dropFailure({message:(0,se.Z)("create_set.term_context.image.drag_from_other_website")});else{var{matching:t,nonMatching:s,numTotal:r}=(0,re.t9)(e.dataTransfer,N.k4);r?(s.length&&this.onImageUploadFailure(s),this.onImageUploadSuccess(t,1===r),this.closeImageContext()):J.dropFailure({message:(0,se.Z)("create_set.term_context.image.no_images_selected")})}}else{var i=(0,dn.Qq)("custom_image_upload");(0,Ss.YQ)(i)}},this.handlePaste=e=>{var t;nr()("paste"===e.type,"handlePaste called with non-paste clipboard event");var s=Zi()(null==(t=e.clipboardData)?void 0:t.items,(e=>"text/plain"===e.type));return s&&s.getAsString((e=>{var t,s,r=(t=e,null==(s=Fn.exec(t))?void 0:s.groups);this.setState(r)})),!1},this.onClickMoveUp=()=>{this.props.onMoveUp({shouldCenter:!1})},this.onClickMoveDown=()=>{this.props.onMoveDown({shouldCenter:!1})},this.onDragLeave=()=>{this.state.isDraggedOver&&this.setState({isDraggedOver:!1})},this.onDragEnter=e=>{if(!this.props.isReordering){try{if("move"===e.dataTransfer.effectAllowed||this.dropContainsText(e))return}catch(t){}this.state.isDraggedOver||this.setState({isDraggedOver:!0})}},this.onImageUploadFailure=e=>{J.bulkUploadFailure({files:e,message:(0,se.Z)("create_set.term_context.image.file_format_warning")})},this.onImageUploadSuccess=(e,t)=>{this.props.onBulkImageUpload(e,this.props.termLuid,t)},this.onInsertRow=()=>{this.state.actionsExpanded&&this.setState({actionsExpanded:!1}),this.props.onAddRow()},this.onToggleActions=()=>{this.props.isActive||this.props.onActive(this.props.termLuid),this.setState((e=>{var{actionsExpanded:t}=e;return{actionsExpanded:!t}}))},this.onWordClick=()=>{this.props.viewOnly||this.focusWord()},this.onAddRowClick=e=>{e.preventDefault(),this.onWordClick()},this.handleEditorValueChange=(e,t)=>{if(!this.props.viewOnly&&this.getActiveComponent()){var s={};this.props.canEditRichText&&"rich"in e&&(s[t+"RichText"]=e.rich);var r=e.plain,i=this.state[t];if(e.plain!==i){var n=!1;this.props.shouldShowAutosuggest?n=!0:t===Kr.go&&r&&this.isAutodefineContextOpen()&&this.closeAutodefineContext(),n&&this.autosuggestAction(r),s[t]=r,s.isAutosuggestVisible=n,this.setState(s)}else this.setState(s)}},this.onUpdatePMEditorView=e=>{this.setState({richTextEditorView:e})},this.onFocus=(e,t)=>{if(!this.props.viewOnly){var s=this.props.shouldShowAutosuggest&&t===Kr.go,r=Ze.Z.containsAccentLanguage(t===Kr.go?this.props.definitionLang:this.props.wordLang);(!this.props.isActive||t!==this.props.activeSide)&&((0,$.b1)()?this.onNextTick((()=>B.Z.activateRowSide(this.props.termLuid,t))):B.Z.activateRowSide(this.props.termLuid,t)),t===Kr.dR&&this.closeAutodefineContext(),t===Kr.go&&this.props.shouldShowAutosuggest&&this.autosuggestAction(this.state.definition),t===Kr.go&&this.shouldRenderCustomDistractorsLabel()&&(this.onToggleCustomDistractorsContext(),this.onNextTick((()=>this.focusDefinition()))),this.setState({isFocused:!0,focusedInputContainsAccentLanguage:r,isAutosuggestVisible:s})}},this.onBlur=(e,t)=>{if(!this.props.viewOnly){this.props.shouldShowAutosuggest&&B.Z.autosuggestClear(t);var s=e.currentTarget.value,r=this.props.term[t],i=null,n=null;this.props.canEditRichText&&(i=this.state[t+"RichText"],n=this.props.term[t+"RichText"]),this.setState({isFocused:!1}),An(r,s,n,i)&&((0,$.b1)()?this.onNextTick((()=>this.updateBothSidesAndDetectLang(t,s,i))):this.updateBothSidesAndDetectLang(t,s,i))}},this.onSuggestionChosen=e=>{var{activeSide:t}=this.props,s={};if(t===Kr.dR)s.word=e,this.setState(Object.assign({},s,{isAutosuggestVisible:!1}));else{if(t!==Kr.go)return;s.definition=e,this.onNextTick((()=>{this.focusDefinition(),this.setState(Object.assign({},s))})),this.onNextTick((()=>{this.setState({isAutosuggestVisible:!1})}))}this.updateAction(s),this.getLang(t)||this.detectLangAction(t),t===Kr.dR&&this.onNextTick((()=>this.focusDefinition()))},this.onTextDrop=e=>{this.dropContainsText(e)&&e.stopPropagation()},this.onDragOver=e=>{e&&this.dropContainsText(e)&&e.stopPropagation()},this.onStartOnlyTextDrag=e=>{var t=window.getSelection();t&&"Range"===t.type||(e.stopPropagation(),e.preventDefault())},this.onMouseEnterSide=()=>{this.setState({isDraggable:!1})},this.onMouseLeaveSide=()=>{this.setState({isDraggable:!0})},this.onToggleVoiceRecordingContext=()=>{this.props.canUseVoiceRecording?this.props.onToggleContext($i.Sb.RECORDING):(window.open((0,dn.Qq)("recording_new"),"_blank"),(0,cn.ZP)({action:i.Mpk.CLICK,cta:(0,se.Z)("create_set.term_context.tooltips.add_voice_recording"),fullActionName:"create_set_audio_upsell_in_toolbar_click"}))},this.onImageContextDragLeave=()=>{this.setState({isDraggedOver:!1})},this.onToggleImageContext=e=>{e.stopPropagation(),e.preventDefault(),this.props.onToggleContext($i.Sb.IMAGE)},this.onCustomDistractorChange=(e,t)=>{this.setState((s=>({definitionCustomDistractors:(s.definitionCustomDistractors||[]).map((s=>s.luid===e.luid?Object.assign({},e,{text:{plainText:t.plain,richText:t.rich,languageCode:this.props.definitionLang||null}}):s))})))},this.onCustomDistractorBlur=(e,t)=>{var s,r;if(!this.props.viewOnly){var i=null==(s=this.props.term.definitionCustomDistractors)?void 0:s.find((t=>t.luid===e.luid)),n=null==(r=this.state.definitionCustomDistractors)?void 0:r.find((t=>t.luid===e.luid)),o=t.currentTarget.value,a=null==i?void 0:i.text.plainText,l=null==n?void 0:n.text.richText,d=An(a,o,null==i?void 0:i.text.richText,l);this.setState({activeDistractor:null}),d&&((0,$.b1)()?this.onNextTick((()=>this.handleDistractorUpdate(this.state.definitionCustomDistractors))):this.handleDistractorUpdate(this.state.definitionCustomDistractors))}},this.onCustomDistractorSuggestionsShow=()=>{var{distractorSuggestions:e}=this.props;e&&!this.loggedCreateSetSuggestionRequestId.includes(e.requestId)&&(this.logCreateSetSuggestionEvent(i.ffg.SUGGESTIONS_SHOWN),this.loggedCreateSetSuggestionRequestId.push(e.requestId))},this.handleRemoveAllDefinitionCustomDistractors=()=>{this.setState({definitionCustomDistractors:null}),this.handleDistractorUpdate(null),this.props.onToggleContext($i.Sb.CUSTOM_DISTRACTORS),(0,Y.Z)("new_create_set_definition_distractors_remove_options",{setId:this.props.term.setId,termId:this.props.term.id})},this.onCustomDistractorRichTextEditorFocus=e=>{var t;this.setState({activeDistractor:e}),this.props.shouldShowCustomDistractorsToggle&&!this.props.distractorSuggestions&&null!=(t=this.state.definition)&&t.length&&B.Z.autosuggestDistractors({definition:this.state.definition})},this.onCustomDistractorSelectSuggestion=(e,t)=>{var{distractorSuggestions:s}=this.props;if(t&&s){var{definitionCustomDistractors:r}=this.state,n=(r||[]).map((s=>(t.luid&&t.luid===s.luid&&(s.text=Object.assign({},s.text,{plainText:e,richText:null})),s)));this.setState({definitionCustomDistractors:n}),this.logCreateSetSuggestionEvent(i.ffg.SUGGESTION_CHOSEN,e)}},this.onCustomDistractorUpsellClick=()=>{(0,cn.ZP)({action:i.Mpk.CLICK,fullActionName:"teacher_mcq_upsell_click"})},this.renderStudiableItemToolbar=()=>{var e={areTooltipsEnabled:this.areTooltipsEnabled(),canEditRichText:this.props.canEditRichText,editorView:this.state.richTextEditorView,enableImageUpload:this.shouldEnableImageUpload(),imageHelper:this.props.imageHelper,index:this.props.index,isAutosuggestionEnabled:this.props.isAutosuggestionEnabled,isImageContextOpen:this.isImageContextOpen(),isMobileWebView:this.props.isMobileWebView,isRecordingContextOpen:this.isRecordingContextOpen(),isTermActive:this.props.isActive,onDelete:this.props.onDeleteRow,onToggleAutosuggest:this.props.onToggleAutosuggest,onToggleImageContext:this.onToggleImageContext,onToggleVoiceRecordingContext:this.onToggleVoiceRecordingContext,shouldRenderEditableToggles:this.props.isActive,shouldShowTooltipAudio:this.props.shouldShowTooltipAudio,shouldShowTooltipRichText:this.props.shouldShowTooltipRichText};return(0,g.jsx)(f.Z,{below:"s",children:t=>t?(0,g.jsx)(ur,Object.assign({},e,{isCapableOfVoiceRecording:this.isCapableOfVoiceRecording(),shouldShowAutosuggestionToggle:!0,shouldShowMobileToolbar:!0})):(0,g.jsx)(ur,Object.assign({},e,{isCapableOfVoiceRecording:this.isCapableOfVoiceRecording(),isDeleteToggleDisabled:!(this.props.totalCount>Ds.Rj.MIN_TERMS),shouldShowAutosuggestionToggle:!this.props.shouldUseCleanDesign,shouldShowDeleteToggle:!0,shouldShowDragToggle:!0,shouldShowOrder:!0}))})},this.shouldRenderCustomDistractorTrigger=()=>this.props.shouldShowCustomDistractorsToggle&&this.props.isActive&&!this.isCustomDistractorsContextOpen()&&!this.shouldRenderCustomDistractorsLabel(),this.shouldRenderCustomDistractorUpsell=()=>this.props.shouldShowMCQUpsell&&this.props.isActive&&!this.props.shouldShowCustomDistractorsToggle&&!this.isCustomDistractorsContextOpen()&&!this.shouldRenderCustomDistractorsLabel(),this.shouldRenderCustomDistractors=()=>!this.props.viewOnly&&this.props.isActive&&this.isCustomDistractorsContextOpen(),this.shouldRenderCustomDistractorsLabel=()=>!this.isCustomDistractorsContextOpen()&&this.state.definitionCustomDistractors&&this.hasCustomDistractors(),this.shouldAddExtraPaddingToDistractorTrigger=()=>this.props.activeSide===Kr.go&&Ze.Z.containsAccentLanguage(this.props.definitionLang),this.shouldEnableImageUpload=()=>!this.props.imageHelper.isImageUploading()&&(this.props.activeSide===Kr.go||this.props.shouldShowRichTextUpsell),this.shouldUpdateOnProps=(e,t)=>e.term.word!==t.term.word||e.term.definition!==t.term.definition||e.activeSide!==t.activeSide||e.canUseImageUpload!==t.canUseImageUpload||e.canUseVoiceRecording!==t.canUseVoiceRecording||e.definitionCustomAudio!==t.definitionCustomAudio||e.definitionCustomAudioLuid!==t.definitionCustomAudioLuid||e.definitionLang!==t.definitionLang||e.definitionSideSuggestions!==t.definitionSideSuggestions||e.dragDropEvent!==t.dragDropEvent||e.hasDefLangError!==t.hasDefLangError||e.hasDefProfanity!==t.hasDefProfanity||e.hasMinTermsError!==t.hasMinTermsError||e.hasWordLangError!==t.hasWordLangError||e.hasWordProfanity!==t.hasWordProfanity||e.image!==t.image||e.imageLuid!==t.imageLuid||e.index!==t.index||e.isActive!==t.isActive||e.isActive||e.isAutosuggestionEnabled!==t.isAutosuggestionEnabled||e.isDropTarget!==t.isDropTarget||e.isNotSynced!==t.isNotSynced||e.isPhantom!==t.isPhantom||e.isReordering!==t.isReordering||e.placeholderImage!==t.placeholderImage||e.recorderState!==t.recorderState||e.termImageLuid!==t.termImageLuid||e.totalCount!==t.totalCount||e.wordCustomAudio!==t.wordCustomAudio||e.wordCustomAudioLuid!==t.wordCustomAudioLuid||e.wordLang!==t.wordLang||e.wordSideSuggestions!==t.wordSideSuggestions||e.distractorSuggestions!==t.distractorSuggestions,this.searchImages=function(e){void 0===e&&(e=t.props.term.word);var s=t.props.wordLang&&t.props.definitionLang?[t.props.wordLang,t.props.definitionLang]:null,r=t.props.canUseImageUpload?H.Rj.MAX_NUM_IMAGES_UPGRADED:H.Rj.MAX_NUM_IMAGES_FREE;J.search(t.props.termLuid,e,s,r)},this.isRecordingContextOpen=()=>this.props.activeContext===$i.Sb.RECORDING,this.closeRecordingContext=()=>{this.props.onCloseContext($i.Sb.RECORDING)},this.blurDefinition=()=>{this.definitionSide.current&&this.definitionSide.current.blur()},this.hasDefinitionRecording=()=>!!this.props.definitionCustomAudio,this.closeActionsAndRefocus=()=>{this.state.actionsExpanded&&this.setState({actionsExpanded:!1},(()=>this.focusDefinition()))},this.canShowAutodefine=()=>!!this.state.word,this.closeAutodefineContext=()=>this.props.onCloseContext($i.Sb.AUTODEFINE),this.isAutodefineContextOpen=()=>this.props.activeContext===$i.Sb.AUTODEFINE,this.dropContainsText=e=>(0,re.IL)(e.dataTransfer),this.blurWord=()=>{this.wordSide.current&&this.wordSide.current.blur()},this.focusDefinition=()=>{this.definitionSide.current&&this.definitionSide.current.focus()},this.focusWord=()=>{this.wordSide.current&&this.wordSide.current.focus()},this.focus=()=>{var e=this.getActiveComponent();e&&e.focus()},this.openUploadDialog=()=>{var e=this.imageUpload.current;e&&e.openUploadDialog()},this.detectLangAction=e=>{this._detectLang||(this._detectLang=Ir()((e=>{if(!this.hasLang(e)){var t=e===Kr.dR?this.getAllWords():this.getAllDefinitions();F.Z.detectLanguage(this.props.setLuid,e,t)}}),Ds.ej.DEBOUNCE_TIME)),this._detectLang(e)},this.autosuggestAction=e=>{this._autosuggest||(this._autosuggest=Ir()((e=>{var t,s={defLang:this.props.definitionLang,localTermId:-1,prefix:e,wordLang:this.props.wordLang};this.props.activeSide===Kr.dR?B.Z.autosuggestWord(s):(B.Z.autosuggestDefinition(Object.assign({word:this.state.word,definition:this.state.definition},s)),this.props.shouldShowCustomDistractorsToggle&&null!=(t=this.state.definition)&&t.length&&B.Z.autosuggestDistractors({definition:this.state.definition}))}),$i.Au.DEBOUNCE_TIME)),this._autosuggest(e)},this.closeImageContext=()=>{this.props.onCloseContext($i.Sb.IMAGE)},this.updateAction=function(e,s){void 0===s&&(s=!0),s&&(e.rank=t.props.term.rank),B.Z.update({setLuid:t.props.setLuid,luid:t.props.termLuid,props:e,wordLang:t.props.wordLang,defLang:t.props.definitionLang,persist:s,shouldLogForRichTextDebugging:t.props.shouldLogForRichTextDebugging})},this.hasCustomDistractors=()=>(this.state.definitionCustomDistractors||[]).some((e=>e.text&&e.text.plainText.trim().length>0)),this.hasWordRecording=()=>!!this.props.wordCustomAudio,this.definitionSide=h.createRef(),this.imageUpload=h.createRef(),this.wordSide=h.createRef(),this.contextProps={disableTransition:(0,$.b1)(),transitionName:"TermContent-animateContext"},this.loggedCreateSetSuggestionRequestId=[]}componentDidMount(){this.createSetSuggestionsEventLogger=new Pn}UNSAFE_componentWillReceiveProps(e){if(this.props.term.word!==e.term.word||this.props.term.definition!==e.term.definition||!(0,wn.J)(this.props.term.wordRichText,e.term.wordRichText)||!(0,wn.J)(this.props.term.definitionRichText,e.term.definitionRichText)){var{word:t,wordRichText:s,definition:r,definitionRichText:i}=e.term;this.state.isFocused||(this.setState({word:t,wordRichText:s,definition:r,definitionRichText:i}),this.setState((e=>({termUpdateCounter:(e.termUpdateCounter+1)%10}))))}var n=e.term.definitionCustomDistractors;n&&this.setState((t=>{var s=(t.definitionCustomDistractors||[]).map(((e,t)=>{var s=n.find(((s,r)=>e.id===s.id||t===r));return null!=s&&s.id&&!e.id?Object.assign({},e,{id:s.id}):e}));return this.props.definitionLang!==e.definitionLang&&s.map((t=>(t.text.languageCode=e.definitionLang||null,t))),{definitionCustomDistractors:s}})),this.props.isActive&&!e.isActive&&this.setState({actionsExpanded:!1}),e.dragDropEvent&&this.onDrop(e.dragDropEvent)}shouldComponentUpdate(e,t){return!(0,Zn.Z)(this.state,t)||this.shouldUpdateOnProps(this.props,e)}componentDidUpdate(e){this.props.dragEnterEvent&&!e.isDropTarget&&this.props.isDropTarget&&this.onDragEnter(this.props.dragEnterEvent),e.isDropTarget&&!this.props.isDropTarget&&this.onDragLeave()}getIntValueFromLuid(e){return parseInt(e.split("-")[1],10)}getVoiceRecording(e){return void 0===e&&(e=this.props.activeSide),e===Kr.dR?[this.props.wordCustomAudioLuid,this.props.wordCustomAudio]:[this.props.definitionCustomAudioLuid,this.props.definitionCustomAudio]}onDrop(e){this.state.isDraggedOver&&this.setState({isDraggedOver:!1}),this.handleDrop(e)}renderExternalContextToggles(){return(0,g.jsx)(f.Z,{below:"s",children:e=>e?this.renderMobileContextToggles():(0,$.b1)()?this.renderTabletContextToggles():(0,g.jsx)(f.Z,{below:"m",children:this.renderTabletContextToggles()})})}renderImageDropTarget(){return(0,g.jsx)("div",{className:"TermContent-imageDropTarget",children:(0,g.jsx)(U,{size:"small",children:(0,g.jsx)(T.Z,{deprecatedStyle:!0,size:4,children:(0,g.jsx)(_.Z,{id:"create_set.term_context.drop_to_upload"})})})})}renderVoiceRecording(){if(this.props.viewOnly)return null;if(!this.props.isActive)return null;if(!this.isRecordingContextOpen())return null;var[e,t]=this.getVoiceRecording(Kr.dR),[s,r]=this.getVoiceRecording(Kr.go);return(0,g.jsx)("div",{className:"TermContent-context TermContent-voiceRecordingContext",children:(0,g.jsx)(Tn,{activeSide:this.props.activeSide,canUseVoiceRecording:this.props.canUseVoiceRecording,definitionCustomAudio:r,definitionCustomAudioLuid:s,definitionTtsAudioUrl:this.getTtsUrl(Kr.go),enabled:this.isRecordingContextOpen(),isMac:this.props.isMac,onClose:this.onCloseContext.bind(null,$i.Sb.RECORDING),onCloseVoiceRecordingPermissionsModal:this.props.onCloseVoiceRecordingPermissionsModal,onOpenVoiceRecordingPermissionsModal:this.props.onOpenVoiceRecordingPermissionsModal,onScrollToOffset:this.props.onScrollToOffset,recorderState:this.props.recorderState,setLuid:this.props.setLuid,shouldUseCleanDesign:this.props.shouldUseCleanDesign,term:this.props.term,termLuid:this.props.termLuid,voiceRecordingUpsellImage:this.props.voiceRecordingUpsellImage,wordCustomAudio:t,wordCustomAudioLuid:e,wordTtsAudioUrl:this.getTtsUrl(Kr.dR)})})}renderAutodefine(){if(this.props.viewOnly)return null;if(!this.props.isActive)return null;if(!this.isAutodefineContextOpen()||!this.canShowAutodefine())return null;var{data:e,isLoading:t}=this.props.autodefineResults||{},s=(0,Ei.Z)((e||[]).map((e=>{var{text:t}=e;return t})));return(0,g.jsx)("div",{className:"TermContent-context TermContent-autodefineContext",children:(0,g.jsx)(ki.Z,{enabled:this.isAutodefineContextOpen(),isLoading:!!t,onClose:this.onCloseContext.bind(null,$i.Sb.AUTODEFINE),onSelectAutodefineResult:this.onSelectAutodefineResult,resultLang:this.props.definitionLang,results:s,termLuid:this.props.termLuid})})}renderAutosuggest(){var{definitionSideSuggestions:e,wordSideSuggestions:t}=this.props;return this.props.activeSide===Kr.dR?nr()(t,"Missing wordSideSuggestions."):nr()(e,"Missing definitionSideSuggestions."),(0,g.jsx)("div",{className:"TermContent-autosuggestContext",children:(0,g.jsx)(Hi,{extraTopPadding:this.state.focusedInputContainsAccentLanguage,onSuggestionChosen:this.onSuggestionChosen,suggestionsData:this.props.activeSide===Kr.dR?t:e,termSide:this.props.activeSide===Kr.dR?i.kH9.WORD:i.kH9.DEFINITION})})}renderAddRowButton(){return this.props.isSetContentTypeDiagrams?(0,g.jsx)("div",{className:"TermContent-addCard",id:"addRow",children:(0,g.jsx)(I.Z,{onClick:this.onAddRowClick,children:(0,g.jsx)("span",{className:"TermContent-addRowButton",children:(0,g.jsx)(_.Z,{id:"create_set.term_context.tooltips.add_row"})})})}):(0,g.jsx)("a",{className:"TermContent-addRow",id:"addRow",onClick:this.onAddRowClick,children:(0,g.jsx)("span",{className:"TermContent-addRowButton",children:(0,g.jsx)(He.Z,{"aria-label":(0,se.Z)("create_set.term_context.tooltips.add_row"),children:(0,g.jsx)(_.Z,{id:"create_set.term_context.tooltips.add_row"})})})})}renderExpandableTouchContextToggles(){return this.state.actionsExpanded?[(0,g.jsx)(er,{disabled:!(this.props.totalCount>Ds.Rj.MIN_TERMS),icon:"garbage",onClick:this.props.onDeleteRow},"deleteRow"),(0,g.jsx)(er,{disabled:0===this.props.index,icon:"up",onClick:this.onClickMoveUp},"moveRowUp"),(0,g.jsx)(er,{disabled:this.props.index===this.props.totalCount-1,icon:"wedge-down",onClick:this.onClickMoveDown},"moveRowDown"),(0,g.jsx)(er,{disabled:!(this.props.totalCount<Ds.Rj.MAX_TERMS),icon:"plus-thin",onClick:this.onInsertRow},"insertRow")]:[(0,g.jsx)(tr,{},"spacer"),this.props.canEditRichText||this.props.shouldShowRichTextUpsell?(0,g.jsx)(er,{className:"TermContent--mobile-expand-icon",icon:"system-more-vertical",iconProps:{variant:"borderless",size:"large"},onClick:this.onToggleActions},"toggleAll"):(0,g.jsx)(er,{icon:"more",onClick:this.onToggleActions},"toggleAll")]}renderMobileContextToggles(){return this.props.canEditRichText||this.props.shouldShowRichTextUpsell?this.renderMobileRichTextContextToggles():(0,g.jsx)("div",{className:"TermContent-externalContextToggles",children:(0,g.jsxs)(Ki,{variant:"mobile",children:[this.renderExpandableTouchContextToggles(),this.props.shouldShowAutosuggest&&!this.props.shouldUseCleanDesign?(0,g.jsx)(sr,{isAutosuggestionContextOpen:this.shouldRenderAutosuggestContext(this.props.activeSide),isAutosuggestionEnabled:this.props.isAutosuggestionEnabled,onToggleAutosuggest:this.props.onToggleAutosuggest}):null,(0,g.jsx)(er,{icon:"image",isActive:this.isImageContextOpen(),onClick:this.onToggleImageContext})]})})}renderMobileRichTextContextToggles(){return(0,g.jsx)("div",{className:"TermContent-externalContextToggles",children:(0,g.jsx)(Ki,{variant:"mobile",children:this.renderExpandableTouchContextToggles()})})}renderTabletContextToggles(){return(0,g.jsx)("div",{className:"TermContent-externalContextToggles",children:(0,g.jsx)(Ki,{variant:"tablet",children:this.renderExpandableTouchContextToggles()})})}renderImageUpload(){if(this.props.viewOnly)return null;if(!this.props.isActive)return null;if(!this.isImageContextOpen())return null;var e=l()("TermContent-context TermContent-imageUploadContext",{"is-draggedOver":this.state.isDraggedOver});return(0,g.jsx)("div",{className:e,children:(0,g.jsx)(gn,{canUseImageUpload:this.props.canUseImageUpload,enabled:this.isImageContextOpen(),image:this.props.image,innerRef:this.imageUpload,isReportingFlowBlocked:this.props.isReportingFlowBlocked,isUserUnderAge:this.props.isUserUnderAge,keyboardScope:this.props.termLuid,onClose:this.closeImageContext,onDragEnterEnd:this.onImageContextDragEnter,onDragLeaveEnd:this.onImageContextDragLeave,onDropEnd:this.handleDrop,onImageSelect:this.onReplaceImage,onRerunSearch:this.searchImages,onUpload:this.onFormUpload,placeholderImage:this.props.placeholderImage,searchMeta:this.props.imageSearchMeta,searchResults:this.props.imageSearchResults,word:this.state.word})})}renderContext(){return(0,g.jsxs)("div",{className:"TermContent-contexts",children:[(0,g.jsx)(je.uH,Object.assign({},this.contextProps,{children:this.renderCustomDistractors()})),(0,g.jsx)(je.uH,Object.assign({},this.contextProps,{children:this.renderImageUpload()})),(0,g.jsx)(je.uH,Object.assign({},this.contextProps,{children:this.props.shouldShowAutosuggest?null:this.renderAutodefine()})),(0,g.jsx)(je.uH,Object.assign({},this.contextProps,{children:this.renderVoiceRecording()}))]})}renderWordSide(){return(0,g.jsx)(In,{canEditRichText:this.props.canEditRichText,canUseImageUpload:this.props.canUseImageUpload,hasMinTermsError:this.props.hasMinTermsError,hasRecording:this.hasWordRecording(),hasWordLangError:this.props.hasWordLangError,hideContextToggles:this.props.shouldShowRichTextUpsell,index:this.props.index,isActiveSide:this.props.activeSide===Kr.dR,isAutosuggestionContextOpen:this.shouldRenderAutosuggestContext(Kr.dR),isAutosuggestionEnabled:this.props.isAutosuggestionEnabled,isProfane:this.props.hasWordProfanity,isRecordingContextOpen:this.isRecordingContextOpen(),label:this.getSideLabel(Kr.dR),labelId:this.getSideLabelId(Kr.dR),lang:this.props.wordLang,onBlur:this.onBlur,onChange:this.handleEditorValueChange,onFocus:this.onFocus,onImageUploadFailure:this.onImageUploadFailure,onImageUploadSuccess:this.onImageUploadSuccess,onPaste:this.handlePaste,onToggleAutosuggest:this.props.onToggleAutosuggest,onToggleVoiceRecordingContext:this.onToggleVoiceRecordingContext,onUpdatePMEditorView:this.onUpdatePMEditorView,otherSideLang:this.props.definitionLang,placeholder:this.getSidePlaceholder(Kr.dR),ref:this.wordSide,shouldRenderAutosuggestionContextToggle:!this.props.shouldUseCleanDesign,shouldShowAutosuggest:this.props.shouldShowAutosuggest,tabIndex:Bn,termActive:this.props.isActive,userLocale:this.props.userLocale,viewOnly:this.props.viewOnly,word:this.state.word,wordRichText:this.state.wordRichText},"wordContent-"+this.state.termUpdateCounter)}renderDefinitionSide(){return(0,g.jsx)(Qi,{areTooltipsEnabled:this.areTooltipsEnabled(),canEditRichText:this.props.canEditRichText,canUseImageUpload:this.props.canUseImageUpload,definition:this.state.definition,definitionRichText:this.state.definitionRichText,enableAutodefine:this.canShowAutodefine(),enableImageUpload:!this.props.imageHelper.isImageUploading(),hasDefLangError:this.props.hasDefLangError,hasMinTermsError:this.props.hasMinTermsError,hasRecording:this.hasDefinitionRecording(),hideContextToggles:this.props.shouldShowRichTextUpsell,image:this.props.image,imageHelper:this.props.imageHelper,index:this.props.index,isActiveSide:this.props.activeSide===Kr.go,isAutodefineContextOpen:this.isAutodefineContextOpen(),isAutosuggestionContextOpen:this.shouldRenderAutosuggestContext(Kr.go),isAutosuggestionEnabled:this.props.isAutosuggestionEnabled,isCapableOfVoiceRecording:this.isCapableOfVoiceRecording(),isImageContextOpen:this.isImageContextOpen(),isProfane:this.props.hasDefProfanity,isRecordingContextOpen:this.isRecordingContextOpen(),label:this.getSideLabel(Kr.go),labelId:this.getSideLabelId(Kr.go),lang:this.props.definitionLang,onBlur:this.onBlur,onChange:this.handleEditorValueChange,onDeleteImage:this.onDeleteImage,onFocus:this.onFocus,onImageUploadFailure:this.onImageUploadFailure,onImageUploadSuccess:this.onImageUploadSuccess,onPaste:this.handlePaste,onToggleAutodefineContext:this.onToggleAutodefineContext,onToggleAutosuggest:this.props.onToggleAutosuggest,onToggleImageContext:this.onToggleImageContext,onToggleVoiceRecordingContext:this.onToggleVoiceRecordingContext,onUpdatePMEditorView:this.onUpdatePMEditorView,otherSideLang:this.props.wordLang,placeholder:this.getSidePlaceholder(Kr.go),placeholderImage:this.props.placeholderImage,ref:this.definitionSide,shouldRenderAutosuggestionContextToggle:!this.props.shouldUseCleanDesign,shouldShowAutosuggest:this.props.shouldShowAutosuggest,shouldShowTooltipImage:this.props.shouldShowTooltipImage,tabIndex:Bn,termActive:this.props.isActive,viewOnly:this.props.viewOnly},"definitionContent-"+this.state.termUpdateCounter)}renderSideOverlay(e,t){return(0,g.jsx)(y.Z,{constrainToWindow:!1,overlay:e,position:t,triggerAction:"always",children:(0,g.jsx)("div",{})},"overlay")}renderSide(e){var t=[],s=(0,$.b1)(),r=e===Kr.dR?this.props.wordPopover:this.props.definitionPopover;return r&&s&&t.push(this.renderSideOverlay(r,"top left")),t.push(e===Kr.dR?this.renderWordSide():this.renderDefinitionSide()),r&&!s&&t.push(this.renderSideOverlay(r,"bottom left")),t}renderCounter(){var e;return e=this.props.isNotSynced?(0,g.jsx)(C.Z,{className:"TermContent-counterAlertIcon",icon:"alert"}):this.props.isPhantom||this.props.viewOnly?null:(0,g.jsx)("span",{className:"TermContent-deleteRow",children:(0,g.jsx)(k.Z,{disabled:!(this.props.totalCount>Ds.Rj.MIN_TERMS),icon:"garbage",onClick:this.props.onDeleteRow,tabIndex:-1,title:(0,se.Z)("create_set.term_context.tooltips.delete_row"),variant:"borderless"})}),(0,g.jsx)("span",{className:"TermContent-counter",children:e})}renderCustomDistractorUpsell(){var e=l()("TermContent-sideCustomOptionsTrigger",{"TermContent-sideCustomOptionsTrigger--extraPadding":this.shouldAddExtraPaddingToDistractorTrigger()});return(0,g.jsx)("div",{className:e,children:(0,g.jsxs)(I.Z,{newTab:!0,onClick:this.onCustomDistractorUpsellClick,tabIndex:Bn,to:"/upgrade?source=teacher_mcq",variant:"revert",children:[(0,g.jsx)(C.Z,{icon:"options-add"}),(0,g.jsxs)("span",{className:"TermContent-sideCustomOptionsTriggerText",children:[(0,g.jsx)(_.Z,{id:"create_set.term_context.custom_distractors.cta"}),(0,g.jsx)(M.ZP,{logActionName:"add_multiple_choice_options_premium_branding_badge_view"})]})]})})}renderCustomDistractorTrigger(){var e=l()("TermContent-sideCustomOptionsTrigger",{"TermContent-sideCustomOptionsTrigger--extraPadding":this.shouldAddExtraPaddingToDistractorTrigger()});return(0,g.jsx)("div",{className:e,children:(0,g.jsxs)(I.Z,{onClick:this.onToggleCustomDistractorsContext,tabIndex:Bn,variant:"revert",children:[(0,g.jsx)(C.Z,{icon:"options-add"}),(0,g.jsxs)("span",{className:"TermContent-sideCustomOptionsTriggerText",children:[(0,g.jsx)(_.Z,{id:"create_set.term_context.custom_distractors.cta"}),(0,g.jsx)(M.ZP,{logActionName:"add_multiple_choice_options_premium_branding_badge_view"})]})]})})}renderCustomDistractorLabel(){return(0,g.jsx)("div",{className:"TermContent-sideCustomOptionsLabel",children:(0,g.jsx)("span",{className:"TermContent-sideCustomOptionsLabelText",children:(0,g.jsx)(_.Z,{id:"create_set.term_context.custom_distractors.label"})})})}renderCustomDistractors(){var e;if(!this.shouldRenderCustomDistractors())return null;var t=Object.assign({},this.props.distractorSuggestions);t.suggestions=((null==(e=this.props.distractorSuggestions)?void 0:e.suggestions)||[]).filter((e=>!(this.state.definitionCustomDistractors||[]).some((t=>t.text.plainText===e.text))));var s=this.props.definitionLang;return(0,g.jsx)("div",{className:"TermContent-context TermContent-customDistractorsContext",children:(0,g.jsx)(qi,{activeDistractor:this.state.activeDistractor,distractors:this.state.definitionCustomDistractors,distractorSuggestions:t,isAutosuggestionEnabled:this.props.isAutosuggestionEnabled,isTermActive:this.props.isActive,languageCode:s,onCustomDistractorChange:this.onCustomDistractorChange,onCustomDistractorRemoveClick:this.handleRemoveAllDefinitionCustomDistractors,onCustomDistractorRichTextEditorBlur:this.onCustomDistractorBlur,onCustomDistractorRichTextEditorFocus:this.onCustomDistractorRichTextEditorFocus,onCustomDistractorSelectSuggestion:this.onCustomDistractorSelectSuggestion,onCustomDistractorSuggestionsShow:this.onCustomDistractorSuggestionsShow,onUpdatePMEditorView:this.onUpdatePMEditorView,tabIndex:Bn,viewOnly:this.props.viewOnly})})}render(){var e=this.props.isSetContentTypeDiagrams&&this.props.isPhantom,t=l()("TermContent-inner",{"TermContent-inner--phantomCleanDesign":e}),s=l()("TermContent-sideWrap",{"TermContent-sideWrap--grid":e}),r=l()("TermContent",{"has-error":this.props.hasWordProfanity||this.props.hasDefProfanity||this.props.hasMinTermsError,"has-expandedActions":this.state.actionsExpanded,"has-image":this.props.imageHelper.hasImageOrPlaceholder(),"has-richTextToolbar":this.shouldShowRTCleanDesign(),"is-dropTarget":this.isDraggedOver(),"is-viewOnly":this.props.viewOnly,"rt-clean-design":this.shouldShowRTCleanDesign(),["is-active-"+this.props.activeSide]:this.props.isActive,"is-autosuggestToggleHidden":this.props.shouldUseCleanDesign});return(0,g.jsxs)("div",{className:r,children:[(0,g.jsxs)("div",{className:t,draggable:this.state.isDraggable,onDragEnd:this.props.onDragEnd,onDragStart:this.props.onDragStart,children:[this.shouldShowRTCleanDesign()&&(this.state.richTextEditorView||this.props.shouldShowRichTextUpsell)&&!this.props.isPhantom?this.renderStudiableItemToolbar():null,(0,g.jsxs)("div",{className:"TermContent-inner-padding",children:[(0,g.jsxs)("div",{className:"TermContent-sides",draggable:this.state.isDraggable,onDragStart:this.onStartOnlyTextDrag,onMouseEnter:this.onMouseEnterSide,onMouseLeave:this.onMouseLeaveSide,children:[(0,g.jsxs)("div",{className:s,onDragEnter:this.props.onDragEnter,onDragLeave:this.props.onDragLeave,onDrop:this.props.onDrop,children:[(0,g.jsxs)("div",{className:"TermContent-side TermContent-side--word",onDragOver:this.onDragOver,onDrop:this.onTextDrop,children:[this.renderSide(Kr.dR),(0,g.jsx)(je.uH,Object.assign({},this.contextProps,{children:this.shouldRenderAutosuggestContext(Kr.dR)?this.renderAutosuggest():null}))]}),(0,g.jsxs)("div",{className:"TermContent-side TermContent-side--definition",onDragOver:this.onDragOver,onDrop:this.onTextDrop,children:[this.renderSide(Kr.go),(0,g.jsx)(je.uH,Object.assign({},this.contextProps,{children:this.shouldRenderAutosuggestContext(Kr.go)?this.renderAutosuggest():null})),this.shouldRenderCustomDistractorTrigger()?this.renderCustomDistractorTrigger():null,this.shouldRenderCustomDistractorUpsell()?this.renderCustomDistractorUpsell():null,this.shouldRenderCustomDistractorsLabel()?this.renderCustomDistractorLabel():null]}),this.props.isPhantom?this.renderAddRowButton():null]}),this.isDraggedOver()?this.renderImageDropTarget():null]}),this.props.isPhantom?null:this.renderExternalContextToggles(),(0,g.jsx)(f.Z,{below:"s",children:e=>this.shouldHideCounter(e)?null:this.renderCounter()})]})]}),this.renderContext()]})}shouldHideCounter(e){return this.props.isSetContentTypeDiagrams&&this.props.isPhantom||this.shouldShowRTCleanDesign()&&!e&&!this.props.isPhantom}shouldShowRTCleanDesign(){return this.props.canEditRichText||this.props.shouldShowRichTextUpsell}shouldRenderAutosuggestContext(e){return e===this.props.activeSide&&this.props.isActive&&this.props.isAutosuggestionEnabled&&this.props.shouldShowAutosuggest&&this.hasSuggestions()&&this.state.isAutosuggestVisible&&null===this.props.activeContext}hasSuggestions(){return this.props.activeSide===Kr.dR?!!this.props.wordSideSuggestions&&this.props.wordSideSuggestions.suggestions.length>0:!!this.props.definitionSideSuggestions&&this.props.definitionSideSuggestions.suggestions.length>0}updateBothSidesAndDetectLang(e,t,s){var r=this.getOtherSide(e),i={};i[e]=t,i[r]=this.props.term[r];var[n,o]=[e+"RichText",r+"RichText"];if(this.props.canEditRichText){var a=this.props.term[o];i[n]=s,i[o]=a,this.props.shouldLogForRichTextDebugging&&(Hn(s)||Hn(a))&&ht.Z.debug("Rich text updates sent for terms",Object.assign({setId:this.props.term.setId},i))}this.updateAction(i),!this.getLang(e)&&t&&this.detectLangAction(e)}hasLang(e){return e===Kr.dR?!!this.props.wordLang:!!this.props.definitionLang}blur(){var e=this.getActiveComponent();e&&e.blur()}isDraggedOver(){return this.state.isDraggedOver&&!this.props.isReordering}isImageContextOpen(){return this.props.activeContext===$i.Sb.IMAGE}isCustomDistractorsContextOpen(){return this.props.activeContext===$i.Sb.CUSTOM_DISTRACTORS}isValidFile(e){return!(null==e||!e.type)&&N.k4.indexOf(e.type.toLowerCase())>-1}areTooltipsEnabled(){return this.props.index<$i.yF.DISABLE_TOOLTIPS}isCapableOfVoiceRecording(){return!(0,$.un)()&&!this.props.isUserUnderAge}logCreateSetSuggestionEvent(e,t){var{distractorSuggestions:s,term:r,termLuid:n,setLuid:o}=this.props;s&&this.createSetSuggestionsEventLogger.logCreateSetSuggestionEvent(e,{card_side:i.dU_.DEFINITION,context_definition_text:(this.state.definition||"").trim(),context_word_text:(this.state.word||"").trim(),suggested_texts:s.suggestions.map((e=>e.text)),server_studiable_container_id:r.setId,client_studiable_container_id:this.getIntValueFromLuid(o),server_studiable_item_id:r.id,client_studiable_item_id:this.getIntValueFromLuid(n),suggestion_type:i.lcY.CARD_DISTRACTOR_SUGGESTION,studiable_container_type:i.MG.SET,studiable_item_type:i.zqd.N_SIDED_CARD,selected_option_index:t?s.suggestions.findIndex((e=>e.text===t)):null})}}Vn.defaultProps={isReportingFlowBlocked:!1};var Gn=(0,le.Z)()(Vn);function Wn(e){var{children:t,prompt:s}=e;return(0,g.jsxs)("div",{className:"TermSidePopover",children:[(0,g.jsx)("div",{className:"TermSidePopover-prompt",children:s}),h.Children.map(t,(e=>(0,g.jsx)("div",{className:"TermSidePopover-action",children:e})))]})}var zn=e=>window.setTimeout(e,0);class qn extends h.Component{constructor(e){var t;super(e),t=this,this.onSelectLang=()=>{this.props.shouldTriggerAutodefine?zn((()=>this.onToggleContext($i.Sb.AUTODEFINE))):this.props.onFocusActiveRow()},this.onMoveUp=e=>{0!==this.props.index&&this.props.onMoveUp(this.props.termLuid,e)},this.onMoveDown=e=>{this.props.index!==this.props.totalCount-1&&this.props.onMoveDown(this.props.termLuid,e)},this.onAddRow=()=>{this.props.totalCount<Ds.Rj.MAX_TERMS&&this.props.onAddRow(this.props.termLuid)},this.handleDeleteRow=()=>{this.props.totalCount>Ds.Rj.MIN_TERMS&&this.props.onDeleteRow(this.props.termLuid)},this.onToggleContext=(e,t)=>{"function"==typeof t&&zn(t),e!==this.props.activeContext?this.canOpenContext(e)&&this.openContext(e):this.closeContext(e)},this.onMouseLeave=()=>{this.props.onMouseLeave()},this.onViewDuplicate=()=>{this.props.onViewDuplicate(this.props.termLuid)},this.onIgnoreDuplicates=()=>{B.Z.ignoreDuplicates(this.props.term.word),this.props.onFocusActiveRow()},this.onDragStart=e=>{this.props.isPhantom||this.props.viewOnly?e.preventDefault():this.props.onDragStart(this.props.termLuid,e)},this.onDragEnd=e=>{this.props.isPhantom||this.props.viewOnly?e.preventDefault():this.props.onDragEnd(this.props.termLuid)},this.onDragOver=e=>{this.props.onDragOver(this.props.termLuid,e)},this.onMouseEnter=()=>{this.props.onMouseEnter(this.props.termLuid)},this.bindKeymaps=()=>{pr().setScope(this.props.termLuid),pr()(Je.Z.studiableItem.moveUp,this.props.termLuid,(()=>(this.saveTermThen((()=>{this.onMoveUp({shouldCenter:!0}),this.focus()})),!1))),pr()(Je.Z.studiableItem.moveDown,this.props.termLuid,(()=>(this.saveTermThen((()=>{this.onMoveDown({shouldCenter:!0}),this.focus()})),!1))),pr()(Je.Z.studiableItem.toggleUpload,this.props.termLuid,(()=>{if(!this.canOpenContext($i.Sb.IMAGE))return!1;var e=()=>{this.termContent.current&&this.termContent.current.openUploadDialog()};return this.props.activeContext===$i.Sb.IMAGE?e():this.onToggleContext($i.Sb.IMAGE,e),!1})),pr()(Je.Z.studiableItem.toggleImages,this.props.termLuid,(()=>(this.onToggleContext($i.Sb.IMAGE),!1))),pr()(Je.Z.studiableItem.toggleRecord,this.props.termLuid,(()=>(this.onToggleContext($i.Sb.RECORDING),!1))),pr()(Je.Z.studiableItem.toggleAutosuggest,this.props.termLuid,(()=>(this.props.onToggleAutosuggest(),!1))),pr()(Je.Z.studiableItem.closeContext,this.props.termLuid,(()=>{if(this.props.activeContext)return this.onToggleContext(this.props.activeContext),!1})),pr()(Je.Z.studiableItem.addItemBelowCurrent,this.props.termLuid,(()=>(this.onAddRow(),!1)))},this.unbindKeymaps=()=>{pr().unbind(Je.Z.studiableItem.moveUp,this.props.termLuid),pr().unbind(Je.Z.studiableItem.moveDown,this.props.termLuid),pr().unbind(Je.Z.studiableItem.toggleImages,this.props.termLuid),pr().unbind(Je.Z.studiableItem.toggleAutosuggest,this.props.termLuid),pr().unbind(Je.Z.studiableItem.toggleRecord,this.props.termLuid),pr().unbind(Je.Z.studiableItem.closeContext,this.props.termLuid),pr().unbind(Je.Z.studiableItem.addItemBelowCurrent,this.props.termLuid)},this.openContext=e=>{if(e===$i.Sb.IMAGE){(0,cn.ZP)({action:i.Mpk.VIEW,fullActionName:"new_create_set_open_image_context"}),this.blurWord(),B.Z.toggleContext(this.props.termLuid,$i.Sb.IMAGE);var{queryString:t,lang:s}=this.props.imageSearchMeta||{};if(this.props.term.word&&(t!==this.props.term.word||s!==this.props.wordLang)){var r=this.props.wordLang&&this.props.defLang?[this.props.wordLang,this.props.defLang]:null,n=this.props.canUseImageUpload?H.Rj.MAX_NUM_IMAGES_UPGRADED:H.Rj.MAX_NUM_IMAGES_FREE;J.search(this.props.termLuid,this.props.term.word,r,n)}}else e===$i.Sb.AUTODEFINE?((0,Y.Z)("new_create_set_open_autodefine_context"),this.blurWord(),this.blurDefinition(),this.props.wordLang?this.props.defLang?this.props.term.word&&(B.Z.toggleContext(this.props.termLuid,$i.Sb.AUTODEFINE),B.Z.autodefine(this.props.termLuid,this.props.term.word,this.props.wordLang,this.props.defLang,this.props.user?this.props.user.id:null)):F.Z.showLangSelect(this.props.setLuid,Kr.go,this.props.termLuid,!0):F.Z.showLangSelect(this.props.setLuid,Kr.dR,this.props.termLuid,!0)):e===$i.Sb.RECORDING?((0,Y.Z)("new_create_set_open_recording_context"),this.blurWord(),this.blurDefinition(),B.Z.toggleContext(this.props.termLuid,$i.Sb.RECORDING),this.props.canUseVoiceRecording&&Ri.init()):e===$i.Sb.CUSTOM_DISTRACTORS&&(this.blurDefinition(),B.Z.toggleContext(this.props.termLuid,$i.Sb.CUSTOM_DISTRACTORS))},this.closeContext=function(e){void 0===e&&(e=null),null!==e&&e!==t.props.activeContext||(e!==$i.Sb.AUTODEFINE&&e!==$i.Sb.IMAGE||zn((()=>t.focusDefinition())),B.Z.resetContext(t.props.termLuid))},this.termContent=h.createRef(),this.imageHelper=new Wi({placeholderImage:e.placeholderImage,image:e.image})}UNSAFE_componentWillReceiveProps(e){this.props.image===e.image&&this.props.placeholderImage===e.placeholderImage||(this.imageHelper=new Wi({placeholderImage:e.placeholderImage,image:e.image})),e.dragDropEvent&&this.onDragEnd(e.dragDropEvent)}shouldComponentUpdate(e,t){var s;return!(0,Zn.Z)(this.state,t)||(!(null==(s=this.termContent)||!s.current.shouldUpdateOnProps(this.props,e))||(this.props.langPromptSide!==e.langPromptSide||this.props.isNotSynced!==e.isNotSynced||this.props.isDragged!==e.isDragged||this.props.isDraggedActive!==e.isDraggedActive||this.props.defLang!==e.defLang||this.props.duplicateStatus!==e.duplicateStatus||this.props.activeContext!==e.activeContext&&this.props.isActive||this.props.profanityResults!==e.profanityResults||this.props.isAutosuggestionEnabled!==e.isAutosuggestionEnabled||this.props.wordSideSuggestions!==e.wordSideSuggestions||this.props.definitionSideSuggestions!==e.definitionSideSuggestions))}componentDidUpdate(e){this.props.isActive&&!e.isActive?this.bindKeymaps():!this.props.isActive&&e.isActive&&this.unbindKeymaps(),this.props.dragEnterEvent&&!e.isDropTarget&&this.props.isDropTarget&&this.props.onDragEnterEnd(this.props.termLuid,this.props.dragEnterEvent),e.isDropTarget&&!this.props.isDropTarget&&this.props.onDragLeaveEnd()}renderDuplicatePopover(){return this.props.duplicateStatus===$i.Do.ACTIVE_DUPLICATE&&this.props.isActive?(0,g.jsx)(Yr.Z,{children:(0,g.jsxs)(Wn,{prompt:(0,g.jsx)(_.Z,{id:"create_set.term_duplicate_warning.title"}),children:[(0,g.jsx)(I.Z,{onClick:this.onIgnoreDuplicates,children:(0,g.jsx)(_.Z,{id:"create_set.term_duplicate_warning.ignore_link"})}),(0,g.jsx)(I.Z,{onClick:this.onViewDuplicate,children:(0,g.jsx)(_.Z,{id:"create_set.term_duplicate_warning.view_others_link"})})]})}):null}renderLanguagePrompt(){var{langPromptSide:e}=this.props;if(!e)return null;var t=this.props.shouldTriggerAutodefine?(0,se.Z)("create_set.language_prompt.autodefine_hint"):void 0;return(0,g.jsx)(Yr.Z,{children:(0,g.jsx)(Pi,{defLang:this.props.defLang,isChooseLangSelected:this.props.isChooseLangSelected,onSelectLang:this.onSelectLang,question:(0,se.Z)("create_set.language_prompt.what_language_for_suggestions"),questionSubtext:t,recentLanguages:this.props.recentLanguages,setLuid:this.props.setLuid,side:e,viewOnly:this.props.viewOnly,wordLang:this.props.wordLang})})}renderProfanityPopover(){return this.props.langPromptSide?null:this.props.isActive&&this.hasProfanity()?(0,g.jsx)(j.Z,{children:(0,g.jsx)(_.Z,{id:"create_set.term_profanity_warning.tooltip"})}):null}renderWordPopover(){return this.hasWordProfanity()?this.renderProfanityPopover():this.props.shouldTriggerAutodefine&&this.props.wordLang&&this.props.langPromptSide===Kr.dR?this.renderLanguagePrompt():this.renderDuplicatePopover()}renderDefinitionPopover(){return this.hasDefinitionProfanity()&&!this.hasWordProfanity()?this.renderProfanityPopover():this.props.shouldTriggerAutodefine&&this.props.defLang&&this.props.langPromptSide===Kr.go?this.renderLanguagePrompt():null}renderTermContent(){var e;return(0,g.jsx)(Gn,{activeContext:this.props.activeContext,activeSide:this.props.activeSide,autodefineResults:this.props.autodefineResults,canEditRichText:this.props.canEditRichText,canUseImageUpload:this.props.canUseImageUpload,canUseVoiceRecording:this.props.canUseVoiceRecording,definitionCustomAudio:this.props.definitionCustomAudio,definitionCustomAudioLuid:this.props.definitionCustomAudioLuid,definitionLang:this.props.defLang,definitionPopover:this.shouldRenderPopover()?this.renderDefinitionPopover():null,definitionSideSuggestions:this.props.definitionSideSuggestions,distractorSuggestions:this.props.distractorSuggestions,hasDefLangError:this.props.hasDefLangError,hasDefProfanity:this.hasDefinitionProfanity(),hasMinTermsError:this.props.hasMinTermsError,hasWordLangError:this.props.hasWordLangError,hasWordProfanity:this.hasWordProfanity(),image:this.props.image,imageHelper:this.imageHelper,imageLuid:this.props.imageLuid,imageSearchMeta:this.props.imageSearchMeta,imageSearchResults:this.props.imageSearchResults,index:this.props.index,innerRef:this.termContent,isActive:this.props.isActive,isAutosuggestionEnabled:this.props.isAutosuggestionEnabled,isMac:this.props.isMac,isMobileWebView:this.props.isMobileWebView,isNotSynced:this.props.isNotSynced,isPhantom:this.props.isPhantom,isReordering:this.props.isReordering,isReportingFlowBlocked:this.props.isReportingFlowBlocked,isSetContentTypeDiagrams:this.props.isSetContentTypeDiagrams,isUserUnderAge:!(null==(e=this.props.user)||!e._isUnderAge),onActive:this.props.onActive,onAddRow:this.onAddRow,onBulkImageUpload:this.props.onBulkImageUpload,onCloseContext:this.closeContext,onCloseVoiceRecordingPermissionsModal:this.props.onCloseVoiceRecordingPermissionsModal,onDeleteRow:this.handleDeleteRow,onDragEnd:this.onDragEnd,onDragStart:this.onDragStart,onMoveDown:this.onMoveDown,onMoveUp:this.onMoveUp,onOpenVoiceRecordingPermissionsModal:this.props.onOpenVoiceRecordingPermissionsModal,onScrollToOffset:this.props.onScrollToOffset,onToggleAutosuggest:this.props.onToggleAutosuggest,onToggleContext:this.onToggleContext,placeholderImage:this.props.placeholderImage,recorderState:this.props.recorderState,setLuid:this.props.setLuid,shouldLogForRichTextDebugging:this.props.shouldLogForRichTextDebugging,shouldShowAutosuggest:!0,shouldShowCustomDistractorsToggle:this.props.shouldShowTeacherCustomDistractorCreation,shouldShowMCQUpsell:this.props.shouldShowMCQUpsell,shouldShowRichTextUpsell:!this.props.canEditRichText&&(0,lr.F)(),shouldShowTooltipAudio:this.props.shouldShowTooltipAudio,shouldShowTooltipImage:this.props.shouldShowTooltipImage,shouldShowTooltipRichText:this.props.shouldShowTooltipRichText,shouldUseCleanDesign:this.props.shouldUseCleanDesign,term:this.props.term,termImageLuid:this.props.termImageLuid,termLuid:this.props.termLuid,terms:this.props.terms,totalCount:this.props.totalCount,userLocale:this.props.userLocale,viewOnly:this.props.viewOnly,voiceRecordingUpsellImage:this.props.voiceRecordingUpsellImage,wordCustomAudio:this.props.wordCustomAudio,wordCustomAudioLuid:this.props.wordCustomAudioLuid,wordLang:this.props.wordLang,wordPopover:this.shouldRenderPopover()?this.renderWordPopover():null,wordSideSuggestions:this.props.wordSideSuggestions})}renderBareRow(){var e=l()("TermRow-bareSide TermRow-bareSide--word TermText",{"is-rtl":Qr.cQ.indexOf(this.props.wordLang)>-1,["lang-"+(this.props.wordLang?this.props.wordLang:"")]:this.props.wordLang}),t=l()("TermRow-bareSide TermRow-bareSide--definition TermText",{"is-rtl":Qr.cQ.indexOf(this.props.defLang)>-1,["lang-"+(this.props.defLang?this.props.defLang:"")]:this.props.defLang});return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:e,children:this.props.term.word||" "}),(0,g.jsx)("div",{className:t,children:this.props.term.definition||" "})]})}render(){var e=this.props.isSetContentTypeDiagrams&&!this.props.isPhantom||this.props.shouldUseCleanDesign&&!this.props.isSetContentTypeDiagrams,t=l()("TermRow",{"TermRow--box":e,"has-activeContext":this.props.activeContext,"has-image":this.imageHelper.hasImage(),"is-active":this.props.isActive,"is-disabled":this.props.viewOnly,"is-dragged":this.props.isDragged,"is-draggedActive":this.props.isDraggedActive,"is-duplicate":!!this.props.duplicateStatus,"is-notSynced":this.props.isNotSynced,"is-phantom":this.props.isPhantom});return(0,g.jsx)("div",{className:t,onDragEnter:this.props.onDragEnter,onDragLeave:this.props.onDragLeave,onDragOver:this.onDragOver,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:this.props.forceBareRow?this.renderBareRow():(0,g.jsxs)(g.Fragment,{children:[this.renderBareRow(),this.renderTermContent()]})},this.props.termLuid+"-row")}saveTermThen(e){this.blur(),zn(e)}hasProfanity(){return this.hasWordProfanity()||this.hasDefinitionProfanity()}hasWordProfanity(){var e,t=this.props.profanityResults,s=this.props.user&&this.props.user.isVerified;return!(null==t||null==(e=t.word)||!e.data||3!==t.word.data.level||s)}canOpenContext(e){switch(e){case $i.Sb.AUTODEFINE:return this.termContent.current.canShowAutodefine();case $i.Sb.IMAGE:return!this.imageHelper.isImageUploading();default:return!0}}shouldRenderPopover(){return!(this.props.activeContext||this.props.viewOnly)}focus(){this.termContent.current&&this.termContent.current.focus()}focusWord(){this.termContent.current&&this.termContent.current.focusWord()}focusDefinition(){this.termContent.current&&this.termContent.current.focusDefinition()}blur(){this.termContent.current&&this.termContent.current.blur()}blurWord(){this.termContent.current&&this.termContent.current.blurWord()}blurDefinition(){this.termContent.current&&this.termContent.current.blurDefinition()}hasDefinitionProfanity(){var e,t,s,r=this.props.profanityResults,i=null==(e=this.props.user)?void 0:e.isVerified;return!(3!==(null==r||null==(t=r.definition)||null==(s=t.data)?void 0:s.level)||i)}}qn.defaultProps={forceBareRow:!1,isSetContentTypeDiagrams:!1,shouldUseCleanDesign:!1,isReportingFlowBlocked:!1};var Kn=(0,le.Z)()(qn),Yn=(0,wt.k)($i.W2.TERM_ROW_MIN_HEIGHT);class Qn extends h.PureComponent{constructor(e){super(e),this.state={height:e.height}}UNSAFE_componentWillMount(){this.tween=new Cn.Z({height:this.props.height}).ease("linear").to({height:Yn}).duration(150).update((e=>this.setState(e)))}componentDidMount(){this.tween.start()}componentDidUpdate(e){this.props.dragDropEvent&&!e.isDropTarget&&this.props.isDropTarget&&this.props.onDragEnterEnd(this.props.termLuid,this.props.dragDropEvent)}componentWillUnmount(){this.tween.stop()}render(){return(0,g.jsx)("div",{className:"TermRowDragPlaceholder",onDragEnter:this.props.onDragEnter,onDragLeave:this.props.onDragLeave,style:{height:this.state.height+"px"}})}}var $n=(0,le.Z)()(Qn);class Xn extends h.PureComponent{constructor(){super(...arguments),this.handleClickAddRow=()=>{this.props.onAddRow(this.props.precedingLuid)}}render(){var e=l()("TermRowSeparator",{"TermRowSeparator--large":this.props.shouldUseLargeSeparator});return(0,g.jsx)("div",{className:e,"data-term-luid":this.props.precedingLuid,children:this.props.includeAddRowButton?(0,g.jsx)("span",{className:"TermRowSeparator-addRowBetweenButton",children:(0,g.jsx)(k.Z,{icon:"plus-thin",onClick:this.handleClickAddRow,tabIndex:-1,title:(0,se.Z)("create_set.term_context.tooltips.add_row")})}):null})}}var Jn="VoiceRecordingPermissionsModal";class eo extends h.PureComponent{constructor(){super(...arguments),this.onOpen=()=>{pr().pushScope(Jn),pr()(Je.Z.modal.exit,Jn,(()=>(this.props.onClose(),!1)))},this.onClose=()=>{pr().popScope(Jn)},this.onClickOverlay=e=>{e.preventDefault(),this.props.onClose()},this.recorderHelper=new mn(this.props)}componentDidMount(){this.props.isOpen&&this.onOpen()}UNSAFE_componentWillUpdate(e){!this.props.isOpen&&e.isOpen&&this.onOpen(),this.props.isOpen&&!e.isOpen&&this.onClose()}renderHtmlArrow(){return this.props.isOpen&&this.recorderHelper.isUsingHtml5Plugin()?(0,g.jsxs)("div",{className:"VoiceRecordingPermissionsModal-arrow",children:[(0,g.jsx)("span",{className:"VoiceRecordingPermissionsModal-arrowFirstLeg"}),(0,g.jsx)("span",{className:"VoiceRecordingPermissionsModal-arrowSecondLeg"}),(0,g.jsx)("span",{className:"VoiceRecordingPermissionsModal-arrowPointer",children:(0,$.un)()?(0,g.jsx)(C.Z,{icon:"wedge-down"}):(0,g.jsx)(C.Z,{icon:"wedge-up"})})]}):null}renderOverlay(){return this.props.isOpen?(0,g.jsx)("div",{className:"VoiceRecordingPermissionsModal-overlay",onClick:this.onClickOverlay}):null}render(){var e=l()({VoiceRecordingPermissionsModal:!0,"is-open":this.props.isOpen});return(0,g.jsxs)("div",{className:e,children:[(0,g.jsx)("div",{className:"VoiceRecordingPermissionsModal-content",children:(0,g.jsx)("p",{children:(0,g.jsx)(_.Z,{id:"create_set.term_context.voice.permissions_instructions"})})}),this.renderHtmlArrow(),this.renderOverlay()]})}}var to=s("./app/j/utils/property.ts"),so=Object.assign({customAudios:{},setup(e){for(var t in this.customAudios={},e){var s=e[t];this.customAudios[t]=s}this.bindActions(li.Z.actions.CREATE,this._create),this.bindActions(li.Z.actions.DELETE,this._delete)},getAll(){return this.customAudios},_create(e){var{luid:t,model:s}=e,r=(0,to.Z)(t,s.properties);return this.customAudios=ls()(this.customAudios,{$merge:r}),[t]},_delete(e){var{customAudioLuid:t}=e;return t in this.customAudios?(delete this.customAudios[t],[t]):[]}},os.Z);so.init();var ro=so,io=s("./app/j/utils/delete-key.ts"),no=s("./app/j/view_models/ImageViewModel.ts"),oo=Object.assign({images:{},placeholders:{},setup(e){this.images={},this.placeholders={},this._setup(e),this.bindActions(H.Nw.BULK_CREATE,this._bulkCreate),this.bindActions(H.Nw.CREATE_PLACEHOLDER,this._createPlaceholder),this.bindActions(H.Nw.CREATE_RICH_PLACEHOLDER,this._createRichPlaceholder),this.bindActions(H.Nw.CREATE_SUCCESS,this._createSuccess),this.bindActions(H.Nw.CREATE_FAILURE,this._createFailure),this.bindActions(H.Nw.CREATE_PROGRESS,this._createProgress),this.bindActions(H.Nw.DELETE,this._delete),this.bindActions(H.Nw.PRELOAD,this._preload),this.bindActions(H.Nw.STORE,this._store)},getAll(){return this.images},getPlaceholders(){return this.placeholders},_bulkCreate(e){var t={},s={};for(var r of e)t[r.imageLuid]=new no.Z,s[r.imageLuid]=null;return this.images=ls()(this.images,{$merge:t}),this.placeholders=ls()(this.placeholders,{$merge:s}),e.map((e=>e.imageLuid))},_createPlaceholder(e){var{luid:t}=e;if(!this._contains(t))return[];var s=(0,to.Z)(t);return s[t]={type:H._O.PLAIN,isProcessing:!1,isUploading:!0,percentProgress:null,dataUrl:null},this.placeholders=ls()(this.placeholders,{$merge:s}),[t]},_createRichPlaceholder(e){var{luid:t,placeholderUrl:s}=e;if(!this._contains(t))return[];var r=(0,to.Z)(t);return r[t]={type:H._O.RICH,isProcessing:!1,isUploading:!0,percentProgress:0,dataUrl:s},this.placeholders=ls()(this.placeholders,{$merge:r}),[t]},_createSuccess(e){var{luid:t,model:s}=e;this._ensureContains(t);var r=(0,to.Z)(t,{$merge:s.properties});if(this.images=ls()(this.images,r),!this.placeholders[t])return[t];var i=(0,to.Z)(t,{$merge:{}});return i[t].$merge.isUploading=!1,this.placeholders[t].type===H._O.RICH?i[t].$merge.isProcessing=!1:i[t].$merge.isProcessing=!0,this.placeholders=ls()(this.placeholders,i),[t]},_createFailure(e){var{luid:t}=e;return this._delete({luid:t})},_createProgress(e){var{luid:t,progress:s}=e;if(this._ensureContains(t),!this.placeholders[t])return[];var r=(0,to.Z)(t,{$merge:{}});return r[t].$merge.percentProgress=s,r[t].$merge.isProcessing=100===s,this.placeholders=ls()(this.placeholders,r),[t]},_delete(e){var{luid:t}=e;return this._ensureContains(t),this.images=(0,io.Z)(this.images,[t]),this.placeholders=(0,io.Z)(this.placeholders,[t]),[t]},_preload(e){var{luid:t}=e;this._ensureContains(t);var s=(0,to.Z)(t,null);return this.placeholders=ls()(this.placeholders,{$merge:s}),[t]},_store(e){var t={},s={};for(var r in e){var i=e[r];this._contains(r)||(t[r]=new no.Z(i),s[r]=null)}return this.images=ls()(this.images,{$merge:t}),this.placeholders=ls()(this.placeholders,{$merge:s}),Object.keys(e)},_setup(e){return this._store(e)},_ensureContains(e){if(!this._contains(e))throw new Error("Image LUID "+e+" not found")},_contains(e){return e in this.images&&e in this.placeholders}},os.Z);oo.init();var ao=oo,lo=Object.assign({error:null,errorCode:null,implementation:null,initialized:!1,permissions:si.NEEDED,status:ri.STOPPED,volume:0,blockingUpsellDismissed:!1,setup(){this.bindActions(li.Z.actions.INIT,this._initialize),this.bindActions(li.Z.actions.PERMISSION_UPDATE,this._updatePermissions),this.bindActions(li.Z.actions.IMPLEMENTATION_UPDATE,this._updateRecorderImplementation),this.bindActions(li.Z.actions.RECORD,this._startRecording),this.bindActions(li.Z.actions.STOP_SUCCESS,this._stopRecording),this.bindActions(li.Z.actions.CREATE_SUCCESS,this._saveRecording),this.bindActions(li.Z.actions.CANCEL_SUCCESS,this._cancelRecording),this.bindActions(li.Z.actions.UPLOAD_FINISH,this._uploadFinished),this.bindActions(li.Z.actions.ERROR,this._recordingError),this.bindActions(li.Z.actions.GET_VOLUME,this._setVolume),this.bindActions(li.Z.actions.DISMISS_UPSELL,this._dismissUpsell)},getError(){return this.error},getErrorCode(){return this.errorCode},getImplementation(){return this.implementation},isInitialized(){return this.initialized},getPermissions(){return this.permissions},getStatus(){return this.status},getVolume(){return this.volume},hasBlockingUpsellBeenDismissed(){return this.blockingUpsellDismissed},_initialize(){this.initialized=!0},_updatePermissions(e){var{status:t}=e;this.permissions=t,t===si.GRANTED&&(this.status=ri.STOPPED,this.error=null,this.errorCode=null)},_updateRecorderImplementation(e){var{implementation:t}=e;this.implementation=t},_startRecording(){this.status=ri.RECORDING},_stopRecording(){this.status=ri.UPLOADING},_uploadFinished(){this.status=ri.SAVING},_saveRecording(){this.status=ri.STOPPED},_cancelRecording(){this.status=ri.STOPPED},_recordingError(e){var{code:t,data:s}=e;this.status=ri.ERROR,this.error=s,this.errorCode=t},_setVolume(e){var{volume:t}=e;this.volume=t},_dismissUpsell(){this.blockingUpsellDismissed=!0}},os.Z);lo.init();var uo=lo,co=s("./node_modules/lodash/range.js"),po=s.n(co),ho=s("./app/j/utils/bound-range.ts"),go=s("./app/j/utils/findDOMParent.ts"),mo=s("./app/j/utils/MemoizedCache.ts"),_o=s("./app/j/utils/ScrollInfo.ts"),fo=s("./app/j/utils/viewport.ts"),vo=new mo.Z,So=new mo.Z;function Co(e){e&&(vo.delete(e),So.delete(e))}function bo(e,t){e!==t&&(Co(e),Co(t))}var yo=(e,t)=>e.map(t).forEach(Co),Eo=(e,t)=>t.startIndex<=e&&e<=t.endIndex;class jo extends h.PureComponent{constructor(e){var t;super(e),t=this,this.fetchCustomAudioStore=()=>({customAudios:ro.getAll()}),this.fetchRecorderStore=()=>({recorderState:{error:uo.getError(),errorCode:uo.getErrorCode(),hasBlockingUpsellBeenDismissed:uo.hasBlockingUpsellBeenDismissed(),implementation:uo.getImplementation(),initialized:uo.isInitialized(),permissions:uo.getPermissions(),status:uo.getStatus(),volume:uo.getVolume()}}),this.fetchTermStore=()=>({activeContext:V.ZP.getActiveContext(),activeRow:V.ZP.getActiveRow(),activeSide:V.ZP.getActiveSide(),autodefineResults:V.ZP.getAutodefineResults(),definitionSideSuggestions:V.ZP.getDefinitionSideSuggestions(),distractorSuggestions:V.ZP.getDistractorSuggestions(),ignoredDuplicateWords:V.ZP.getIgnoredDuplicateWords(),imageSearchResults:V.ZP.getImageSearchResults(),phantomRow:V.ZP.getPhantomRow(),profanityResults:V.ZP.getProfanityResults(),termImageMap:V.ZP.getImageMap(),terms:V.ZP.getAll(),termsOrder:V.ZP.getOrder(),termDefinitionCustomAudioMap:V.ZP.getTermDefinitionCustomAudioMap(),termWordCustomAudioMap:V.ZP.getTermWordCustomAudioMap(),wordSideSuggestions:V.ZP.getWordSideSuggestions(),wordsToLuids:V.ZP.getWordsToLuids()}),this.fetchImageStore=()=>({images:ao.getAll(),imagePlaceholders:ao.getPlaceholders()}),this.getNextActiveDuplicate=e=>{for(var t,{word:s}=this.state.terms[e],r=this.duplicateLuids.indexOf(e);t!==e;)if(r=(r+1)%this.duplicateLuids.length,t=this.duplicateLuids[r],s===this.state.terms[t].word)return t},this.getHeight=e=>{var t=this.getBoundingClientRect(e);return t?t.height:null},this.getUncachedBoundingClientRect=e=>{var t=this.getTermRowDOMNode(e);return t instanceof HTMLElement?t.getBoundingClientRect():null},this.getDropLocation=()=>this.state.dropLocation&&this.state.draggedOverRow&&this.isPhantom(this.state.draggedOverRow)?$i.wg.BEFORE:this.state.dropLocation,this.getTopVisibleRowIndex=()=>{var e=window.document.elementFromPoint((0,fo.d)()/2,this.props.stickyHeaderHeight+1),t=(0,go.Z)(e,(e=>e.hasAttribute("data-term-luid"))),s=null==t?void 0:t.getAttribute("data-term-luid");return s?this.getIndex(s):0},this.getLastVisibleRowIndex=e=>{for(var t=e;t<this.state.termsOrder.length;t++)if(!this.isLuidInViewport(this.getLuid(t)))return t;return this.state.termsOrder.length},this.getTermRowDOMNode=e=>this.termRefs[e]&&(0,Ur.findDOMNode)(this.termRefs[e]),this.getImageSearchResults=e=>{if(!this.state.imageSearchResults[e])return null;var t=this.state.imageSearchResults[e],s={};for(var r of t.imageLuids)s[r]=this.state.images[r];return s},this.getAutodefineResults=e=>this.state.autodefineResults&&this.state.autodefineResults[e]?this.state.autodefineResults[e]:null,this.getProfanityResults=e=>this.state.profanityResults&&this.state.profanityResults[e]?this.state.profanityResults[e]:null,this.getDuplicateStatus=e=>{if(-1===this.duplicateLuids.indexOf(e))return null;var{hoverRow:t,activeRow:s}=this.state,r=null;return t&&-1!==this.duplicateLuids.indexOf(t)&&this.state.terms[t]?r=this.state.terms[t].word:s&&-1!==this.duplicateLuids.indexOf(s)&&(r=this.state.terms[s].word),r&&this.state.terms[e].word===r?$i.Do.ACTIVE_DUPLICATE:$i.Do.INACTIVE_DUPLICATE},this.getNumTerms=function(e){return void 0===e&&(e=t.state),t.hasPhantomRow(e)?e.termsOrder.length-1:e.termsOrder.length},this.getSiblingRow=(e,t)=>{var s=this.getIndex(e)+t,r=this.getLastIndex(),i=null;return s<=r?i=this.getLuid(s):r>0&&t>0&&(i=this.getLuid(r-1)),i},this.getIndex=e=>this.state.termsOrder.indexOf(e),this.getLastIndex=function(e){return void 0===e&&(e=t.state),t.getNumTerms(e)-1},this.getLuid=e=>this.state.termsOrder[e],this.getBoundingClientRect=e=>this.isActive(e)?this.getUncachedBoundingClientRect(e):function(e,t){for(var s=arguments.length,r=new Array(s>2?s-2:0),i=2;i<s;i++)r[i-2]=arguments[i];return So.memoize(e,t,...r)}(e,this.getUncachedBoundingClientRect,e),this.getImageLuidToTermLuid=e=>{for(var t=Object.keys(this.state.termImageMap),s=0;s<t.length;s++){var r=t[s],[i,n]=this.state.termImageMap[r];if(e===n)return r}return null},this.onScroll=()=>{this.props.isHidden||window.requestAnimationFrame(this.debouncedUpdateView)},this.onDragEnd=e=>{this.props.onDragEnd();var{draggedOverRow:t}=this.state,s=this.getIndex(e),r=t?this.getIndex(t):-1;s<r&&(r-=1),this.state.dropLocation===$i.wg.AFTER&&(r+=1);var i=this.getLastIndex();r>i&&(r=i),r<0&&(r=0),s!==r&&B.Z.move(this.props.setLuid,e,s,r),this.setState({dropLocation:null,draggedRow:null,draggedOverRow:null})},this.onOpenVoiceRecordingPermissionsModal=()=>{this.state.isVoiceRecordingPermissionsModalOpen||this.setState({isVoiceRecordingPermissionsModalOpen:!0})},this.onMouseLeave=()=>{this.setState({hoverRow:null})},this.onMouseEnter=e=>{(0,$.b1)()||this.setState({hoverRow:e})},this.onMoveDown=(e,t)=>{var s=this.getIndex(e);if(B.Z.move(this.props.setLuid,e,s,s+1),t.shouldCenter)this.scrollToCenter(e);else{var r=this.getSiblingRow(e,1);if(r){var i=this.getHeight(r);i&&_r.Z.scrollBy(i)}}},this.onMoveUp=(e,t)=>{var s=this.getIndex(e);if(B.Z.move(this.props.setLuid,e,s,s-1),t.shouldCenter)this.scrollToCenter(e);else{var r=this.getSiblingRow(e,-1);if(r){var i=this.getHeight(r);i&&_r.Z.scrollBy(-1*i)}}},this.onAddRow=e=>{var t=B.Z.bulkCreate([this.getIndex(e)+1]);window.setTimeout((()=>{this.termRefs[t]&&this.termRefs[t].focusWord()}),0)},this.onDragStart=(e,t)=>{var s=window.getSelection();if(!s||"Range"!==s.type){var r=this.getBoundingClientRect(e);if(r){t.dataTransfer.setData&&"function"==typeof t.dataTransfer.setData&&t.dataTransfer.setData("text",e),t.dataTransfer.effectAllowed="move";var{top:i,left:n}=r,o=t.clientX-n,a=t.clientY-i;t.dataTransfer.setDragImage&&"function"==typeof t.dataTransfer.setDragImage&&t.dataTransfer.setDragImage(this.getTermRowDOMNode(e),o,a);var l=this.getHeight(e),d={};this.state.draggedHeight!==l&&(d.draggedHeight=l),this.state.draggedRow!==e&&(d.draggedRow=e),Ar()(d)&&this.setState(d)}}},this.onDragLeave=()=>{},this.onDragEnter=(e,t)=>{this.onDragEnterOrOver(e,t)},this.onDragOver=(e,t)=>{t.preventDefault(),this.state.draggedRow!==e&&this.onDragEnterOrOver(e,t)},this.onBulkImageUpload=(e,t,s)=>{if(!(e.length<=0)){if(1===e.length&&s){var[r,i]=this.state.termImageMap[t]||[null,null];return this.onActive(t),J.bulkCreate([{file:e[0],setLuid:this.props.setLuid,termLuid:t,termImageLuid:r}])}var n=V.ZP.getImagelessTermLuids(this.state.images,t),o=this.createBulkImageData(e,n);return this.onActive(o[0].termLuid),J.bulkCreate(o)}},this.onFocusActiveRow=()=>{this.state.activeRow&&this.termRefs[this.state.activeRow]&&this.termRefs[this.state.activeRow].focus()},this.onCloseVoiceRecordingPermissionsModal=()=>{this.state.isVoiceRecordingPermissionsModalOpen&&this.setState({isVoiceRecordingPermissionsModalOpen:!1})},this.handleDeleteRow=e=>{try{B.Z.del(e)}catch(t){t.message&&t.message.match("not found")||ht.Z.error(t)}},this.onActive=e=>{this.isActive(e)||B.Z.activateRow(e)},this.onDragEnterOrOver=(e,t)=>{if(e!==$i.eE){var s=this.getBoundingClientRect(e);if(s){this.props.onDragEnterOrOver(t);var r=0;this.state.dropLocation&&(this.state.dropLocation===$i.wg.BEFORE?r=16:this.state.dropLocation===$i.wg.AFTER&&(r=-16));var{top:i}=s,n=t.clientY+r-i,o=this.getHeight(e);nr()(o,"Missing termHeight.");var a=n>o/2?$i.wg.AFTER:$i.wg.BEFORE;a!==this.state.dropLocation&&this.setState({dropLocation:a}),this.state.draggedOverRow!==e&&this.setState({draggedOverRow:e})}}},this.onScrollToOffset=e=>{if(this.state.activeRow){var t=this.getSiblingRow(this.state.activeRow,e);t&&this.scrollToCenter(t)}},this.renderUncachedTermRow=e=>{var t=this.getNumTerms(),s=this.state.terms[e],[r,i]=this.state.termImageMap[e]||[null,null],n=this.state.images[i]||null,o=this.state.imagePlaceholders[i]||null,a=this.state.imageSearchResults[e],d=this.state.termWordCustomAudioMap[e],u=this.state.customAudios[d],c=this.state.termDefinitionCustomAudioMap[e],p=this.state.customAudios[c],h=this.getIndex(e),m=this.props.hasMinTermsError&&(0===h||1===h)&&!s.id,_=this.getDuplicateStatus(e),f=this.rowToAskLangFor===e,{openLangSelectSide:v}=this.props,S=this.props.hasSyncingError?V.ZP.getUnsavedTermUpdates(this.props.shouldLogForRichTextDebugging):{},C=l()("TermRows-termRowWrap",{"TermRows-bareRow":this.isInvisible(e)});return(0,g.jsx)("div",{className:C,"data-term-luid":e,children:(0,g.jsx)(Kn,{activeContext:this.isActive(e)?this.state.activeContext:null,activeSide:this.state.activeSide,autodefineResults:this.getAutodefineResults(e),canEditRichText:this.props.canEditRichText,canUseImageUpload:this.props.canUseImageUpload,canUseVoiceRecording:this.props.canUseVoiceRecording,definitionCustomAudio:p,definitionCustomAudioLuid:c,definitionSideSuggestions:this.state.definitionSideSuggestions,defLang:this.props.defLang,distractorSuggestions:this.state.distractorSuggestions,duplicateStatus:_,hasDefLangError:this.props.hasDefLangError&&(0===h||this.isActive(e)),hasMinTermsError:m,hasWordLangError:this.props.hasWordLangError&&(0===h||this.isActive(e)),image:n,imageLuid:i,imageSearchMeta:a,imageSearchResults:this.getImageSearchResults(e),index:h,innerRef:t=>{this.termRefs[e]=t},isActive:this.isActive(e),isAutosuggestionEnabled:this.props.isAutosuggestionEnabled,isChooseLangSelected:f&&null!==v,isDragged:this.isDragged(e),isDraggedActive:this.isDraggedActive(e),isMac:this.props.isMac,isMobileWebView:this.props.isMobileWebView,isNotSynced:this.props.hasSyncingError&&e in S,isPhantom:this.isPhantom(e),isReordering:!!this.state.draggedRow,isReportingFlowBlocked:this.props.isReportingFlowBlocked,isSetContentTypeDiagrams:this.props.isSetContentTypeDiagrams,langPromptSide:f?this.sideToAskLangFor:null,onActive:this.onActive,onAddRow:this.onAddRow,onBulkImageUpload:this.onBulkImageUpload,onCloseVoiceRecordingPermissionsModal:this.onCloseVoiceRecordingPermissionsModal,onDeleteRow:this.handleDeleteRow,onDragEnd:this.onDragEnd,onDragEnterEnd:this.onDragEnter,onDragLeaveEnd:this.onDragLeave,onDragOver:this.onDragOver,onDragStart:this.onDragStart,onFocusActiveRow:this.onFocusActiveRow,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMoveDown:this.onMoveDown,onMoveUp:this.onMoveUp,onOpenVoiceRecordingPermissionsModal:this.onOpenVoiceRecordingPermissionsModal,onScrollToOffset:this.onScrollToOffset,onToggleAutosuggest:this.props.onToggleAutosuggest,onViewDuplicate:this.scrollToNextDuplicate,placeholderImage:o,profanityResults:this.getProfanityResults(e),recentLanguages:this.props.recentLanguages,recorderState:this.state.recorderState,setLuid:this.props.setLuid,shouldLogForRichTextDebugging:this.props.shouldLogForRichTextDebugging,shouldShowMCQUpsell:this.props.shouldShowMCQUpsell,shouldShowTeacherCustomDistractorCreation:this.props.shouldShowTeacherCustomDistractorCreation,shouldShowTooltipAudio:this.props.shouldShowTooltipAudio,shouldShowTooltipImage:this.props.shouldShowTooltipImage,shouldShowTooltipRichText:this.props.shouldShowTooltipRichText,shouldTriggerAutodefine:!(!f||!v)&&v.triggerAutodefine,shouldUseCleanDesign:this.props.shouldUseCleanDesign,term:s,termImageLuid:r,termLuid:e,terms:this.state.terms,totalCount:t,user:this.props.user,userLocale:this.props.userLocale,viewOnly:this.props.viewOnly,voiceRecordingUpsellImage:this.props.voiceRecordingUpsellImage,wordCustomAudio:u,wordCustomAudioLuid:d,wordLang:this.props.wordLang,wordSideSuggestions:this.state.wordSideSuggestions})},e)},this.customAudioLuidToTermLuid=e=>{var{termWordCustomAudioMap:t,termDefinitionCustomAudioMap:s}=this.state;for(var r in t)if(t[r]===e)return r;for(var i in s)if(s[i]===e)return i;return null},this.scrollToCenter=e=>{var t=this.getTermRowDOMNode(e);nr()(t instanceof HTMLElement,"Incorrect node.");var s=t&&t.offsetParent.offsetTop,r=(null==t?void 0:t.offsetTop)+s-(0,fo.C)()/2,i=Math.max(0,r);_r.Z.scrollTo(i)},this.updateView=()=>{var e=this.state.termsOrder.length,t=Math.ceil((0,fo.C)()/$i.W2.TERM_ROW_MIN_HEIGHT),s=this.getTopVisibleRowIndex(),r=Math.min(s+t,e-1),i=this.getLastVisibleRowIndex(r),n=Math.max(50,t,i-s);this.setState({startIndex:(0,ho.Z)(s-n,0,e-50),endIndex:i+n})},this.disablePartialRendering=()=>{this.scrollListener&&(this.scrollListener.remove(),this.scrollListener=null),this.resizeListener&&(this.resizeListener.remove(),this.resizeListener=null)},this.enablePartialRendering=()=>{this.disablePartialRendering(),this.scrollListener=Sn.Z.listen(window,"scroll",this.onScroll),this.resizeListener=Sn.Z.listen(window,"resize",this.onScroll),this.debouncedUpdateView()},this.scrollToNextDuplicate=e=>{var t=this.getNextActiveDuplicate(e);nr()(t,"Missing nextLuid."),B.Z.activateRow(t),this.scrollToCenter(t)},this._onRecorderChange=()=>{Co(this.state.activeRow),this.setState(this.fetchRecorderStore(),(()=>this.forceUpdate()))},this._onCustomAudiosChange=e=>{yo(e,this.customAudioLuidToTermLuid),this.setState(this.fetchCustomAudioStore(),(()=>this.forceUpdate()))},this._onImagesChange=e=>{yo(e,this.getImageLuidToTermLuid),this.setState(this.fetchImageStore(),(()=>this.forceUpdate()))},this._onTermsChange=e=>{e&&e.forEach(Co),this.setState(this.fetchTermStore(),(()=>this.forceUpdate()))};var s={draggedHeight:null,draggedOverRow:null,draggedRow:null,dropLocation:null,endIndex:200,hoverRow:null,isVoiceRecordingPermissionsModalOpen:!1,startIndex:0};this.state=Object.assign({},s,this.fetchTermStore(),this.fetchImageStore(),this.fetchCustomAudioStore(),this.fetchRecorderStore()),this.duplicateLuids=this.rebuildDuplicateLuids(this.state),this.termRefs={},this.debouncedUpdateView=Ir()(this.updateView,100)}UNSAFE_componentWillMount(){V.ZP.addChangeListener(this._onTermsChange),ao.addChangeListener(this._onImagesChange),ro.addChangeListener(this._onCustomAudiosChange),uo.addChangeListener(this._onRecorderChange)}componentDidMount(){this.sideToAskLangFor=null,this.rowToAskLangFor=null,this.scrollToBottomTimer=null,this.isPartialRenderingEnabled()&&this.enablePartialRendering(),(this.props.shouldShowTooltipRichText||this.props.shouldShowTooltipAudio)&&this.giveFocusToFirstTerm()}UNSAFE_componentWillUpdate(e,t){var s=function(e){if(e.openLangSelectSide)return e.openLangSelectSide.side;if(e.wordLang&&e.defLang)return null;var t=e.detectLanguageResults.word;if(!e.wordLang&&t&&t.data&&t.data.length>=0)return qr.E.WORD_SIDE;var s=e.detectLanguageResults.definition;return!e.defLang&&s&&s.data&&s.data.length>=0?qr.E.DEFINITION_SIDE:null}(e),r=function(e,t,s){if(t.openLangSelectSide)return t.openLangSelectSide.row?t.openLangSelectSide.row:s.termsOrder[0];if(!e)return null;for(var r of s.termsOrder)if(s.terms[r][e])return r;return null}(s,e,t),i=this.duplicateLuids;this.state.wordsToLuids===t.wordsToLuids&&this.state.ignoredDuplicateWords===t.ignoredDuplicateWords||(i=this.rebuildDuplicateLuids(t));var n=this.isPartialRenderingEnabled(),o=this.isPartialRenderingEnabled(t);this.props.wordLang!==e.wordLang||this.props.defLang!==e.defLang||this.props.canUseImageUpload!==e.canUseImageUpload||this.props.canUseVoiceRecording!==e.canUseVoiceRecording||this.props.hasSyncingError!==e.hasSyncingError||this.props.isAutosuggestionEnabled!==e.isAutosuggestionEnabled||n!==o?(vo.clear(),So.clear()):this.selectivelyClearTermRowCache(e,t,s,r),this.sideToAskLangFor=s,this.rowToAskLangFor=r,this.duplicateLuids=i,n&&!o?this.disablePartialRendering():!n&&o&&this.enablePartialRendering()}componentDidUpdate(e,t){var s=t.termsOrder.length,r=this.state.termsOrder.length,i=t.termsOrder[s-1],n=this.getLuid(r-1);if(!this.props.isIOS&&!e.viewOnly&&this.hasPhantomRow()&&s>0&&r>s&&n!==i){var o=(window.document.querySelector(".SiteHeader")?window.document.querySelector(".SiteHeader").scrollHeight:0)+window.document.querySelector(".CreateSetPage").scrollHeight-(0,fo.C)(),a=o-_o.Z.getScrollTop();a>0&&a<500&&(this.scrollToBottomTimer&&clearTimeout(this.scrollToBottomTimer),this.scrollToBottomTimer=window.setTimeout((()=>_r.Z.scrollTo(o)),150))}}componentWillUnmount(){this.scrollToBottomTimer&&clearTimeout(this.scrollToBottomTimer),this.isPartialRenderingEnabled()&&this.disablePartialRendering(),V.ZP.removeChangeListener(this._onTermsChange),ao.removeChangeListener(this._onImagesChange),ro.removeChangeListener(this._onCustomAudiosChange),uo.removeChangeListener(this._onRecorderChange)}renderMaxTermsWarning(){return(0,g.jsx)("div",{className:"TermRows-maxTermsWarning",children:(0,g.jsx)(Ut.Z,{boxed:!0,uppercaseDeprecated:!0,children:(0,g.jsx)(_.Z,{id:"create_set.max_terms_warning",maxNumTerms:Ds.Rj.MAX_TERMS})})})}renderPlaceholder(e){if(!e||!(e in this.state.terms))return null;var{draggedHeight:t}=this.state;return nr()(t,"Missing draggedHeight in renderPlaceholder"),(0,g.jsx)("div",{className:"TermRows-placeholderWrap",children:(0,g.jsx)($n,{height:t,onDragEnterEnd:this.onDragEnter,termLuid:$i.eE})},"placeholder")}renderRowSeparator(e){return(0,g.jsx)(Xn,{includeAddRowButton:this.canAddRowAfter(e),onAddRow:this.onAddRow,precedingLuid:e,shouldUseLargeSeparator:this.props.shouldUseCleanDesign},"separator-"+e)}renderTermRow(e){return function(e,t){for(var s=arguments.length,r=new Array(s>2?s-2:0),i=2;i<s;i++)r[i-2]=arguments[i];return vo.memoize(e,t,...r)}(e,this.renderUncachedTermRow,e)}renderTerms(){var e=this.getDropLocation(),t=!(0,$.s2)()&&this.getNumTerms()<50;return(0,g.jsx)(je.uH,{component:"div",transitionEnter:t,transitionLeave:t,transitionName:"TermRows--animateRow",children:this.state.termsOrder.reduce(((t,s)=>(this.isDraggedOverRow(s)&&e===$i.wg.BEFORE&&(nr()(this.state.draggedRow,"Missing this.state.draggedRow."),t.push(this.renderPlaceholder(this.state.draggedRow))),t.push(this.renderTermRow(s)),this.isPhantom(s)||this.isDraggedActive(s)||t.push(this.renderRowSeparator(s)),this.isDraggedOverRow(s)&&e===$i.wg.AFTER&&(nr()(this.state.draggedRow,"Missing this.state.draggedRow."),t.push(this.renderPlaceholder(this.state.draggedRow))),t)),[])})}render(){var e=l()("TermRows",{"is-hidden":this.props.isHidden});return(0,g.jsxs)("div",{className:e,children:[this.renderTerms(),this.canInsertTerms()?null:this.renderMaxTermsWarning(),(0,g.jsx)(eo,{isOpen:this.state.isVoiceRecordingPermissionsModalOpen,onClose:this.onCloseVoiceRecordingPermissionsModal,recorderState:this.state.recorderState})]})}isDraggedOverRow(e){return!!this.state.draggedRow&&this.state.draggedOverRow===e}isDraggedActive(e){return!(!this.isDragged(e)||!this.state.draggedOverRow)}canAddRowAfter(e){return!!this.canInsertTerms()&&(!this.props.viewOnly&&(!this.isPhantom(e)&&(this.getIndex(e)!==this.getNumTerms()-1&&(!this.isActive(e)||!this.state.activeContext))))}isDragged(e){return e===this.state.draggedRow}isPhantom(e){return e===this.state.phantomRow&&!this.isActive(e)}isInvisible(e){return this.isPartialRenderingEnabled()&&!Eo(this.getIndex(e),this.state)&&!this.isPhantom(e)&&!this.isActive(e)&&!this.isDragged(e)}isActive(e){return e===this.state.activeRow}hasPhantomRow(e){return void 0===e&&(e=this.state),null!==e.phantomRow}createBulkImageData(e,t){var s=[],r=Math.max(0,e.length-t.length),i=po()(0,r).map((e=>this.state.termsOrder.length-1+e)),n=B.Z.bulkCreate(i),o=0;for(var a of t.concat(n)){if(o>=e.length)break;s.push({file:e[o++],setLuid:this.props.setLuid,termLuid:a})}if(o<e.length){var l=po()(o,e.length).map((t=>e[t]));J.bulkUploadFailure({message:(0,se.Z)("create_set.bulk_upload_failure",{maxNumTerms:Ds.Rj.MAX_TERMS}),files:l})}return s}canInsertTerms(){return this.getNumTerms()<Ds.Rj.MAX_TERMS}giveFocusToFirstTerm(){window.setTimeout((()=>{var e=this.termRefs[this.state.termsOrder[this.state.startIndex]];e&&e.focusWord()}),0)}rebuildDuplicateLuids(e){var t=[];return Object.keys(e.wordsToLuids).forEach((s=>{var r=e.wordsToLuids[s];-1===e.ignoredDuplicateWords.indexOf(s)&&Ar()(r)>1&&t.push(...r)})),t.sort(((t,s)=>e.terms[t].rank-e.terms[s].rank)),t}isLuidInViewport(e){var t=this.getBoundingClientRect(e);if(!t)return!1;var{top:s,left:r,bottom:i,right:n}=t;return s>=0&&r>=0&&i<=(0,fo.C)()&&n<=(0,fo.d)()}selectivelyClearTermRowCache(e,t,s,r){for(var i=0;i<this.state.termsOrder.length;i++)(Eo(i,this.state)&&!Eo(i,t)||!Eo(i,this.state)&&Eo(i,t))&&Co(this.getLuid(i));(!this.props.hasMinTermsError&&e.hasMinTermsError||!this.props.hasDefLangError&&e.hasDefLangError||!this.props.hasWordLangError&&e.hasWordLangError)&&t.termsOrder.slice(0,Ds.Rj.MIN_TERMS).forEach(Co);var n=this.getLastIndex(this.state),o=this.getLastIndex(t);bo(this.getLuid(0),t.termsOrder[0]),bo(this.getLuid(n),t.termsOrder[o]),this.getNumTerms(t)<=Ds.Rj.MIN_TERMS&&t.termsOrder.slice(0,Ds.Rj.MIN_TERMS+1).forEach(Co),this.getNumTerms()<=Ds.Rj.MIN_TERMS&&this.state.termsOrder.slice(0,Ds.Rj.MIN_TERMS+1).forEach(Co),bo(this.state.activeRow,t.activeRow),bo(this.state.phantomRow,t.phantomRow),bo(this.state.hoverRow,t.hoverRow),bo(this.state.draggedOverRow,t.draggedOverRow),this.state.draggedOverRow===t.draggedOverRow&&this.state.draggedRow===t.draggedRow||(Co(this.state.draggedRow),Co(t.draggedRow)),this.state.activeRow===t.activeRow&&this.state.hoverRow===t.hoverRow||this.duplicateLuids.forEach(Co),bo(this.rowToAskLangFor,s),this.sideToAskLangFor!==r&&(Co(this.rowToAskLangFor),Co(s)),(this.state.wordSideSuggestions!==t.wordSideSuggestions||this.state.definitionSideSuggestions!==t.definitionSideSuggestions)&&Co(this.state.activeRow)}isPartialRenderingEnabled(e){return void 0===e&&(e=this.state),this.getNumTerms(e)>200}}jo.defaultProps={detectLanguageResults:{},hasSyncingError:!1,isReportingFlowBlocked:!1,isSetContentTypeDiagrams:!1,shouldUseCleanDesign:!1};var xo=s("./app/j/create_set/stores/ClassSetStore.ts"),To=s("./app/j/create_set/stores/ClassStore.ts"),Io=s("./app/j/errors/PermissionDeniedError.ts"),wo=Object.assign({errorQueue:[],activeError:null,setup(){this.bindActions(vr.actions.DISMISS,this._dismiss),this.bindActions(vr.actions.CREATE,this._create),this.bindActions(H.Nw.CREATE_FAILURE,this._imageUploadError),this.bindActions(H.Nw.DROP_FAILURE,this._imageDropError),this.bindActions(H.Nw.BULK_UPLOAD_FAILURE,this._bulkImageUploadError),this.bindActions(Ds.Nw.PUBLISH_FAILURE,this._publishFailure),this.bindActions(Ds.Nw.UPDATE_FAILURE,this._setUpdateFailure),this.bindActions(Ds.Nw.DISCARD_FAILURE,this._discardFailure),this.bindActions($i.Nw.UPDATE_FAILURE,this._termUpdateFailure),this.bindActions($i.Nw.CREATE_IMAGE_FAILURE,this._termImageCreateFailure)},getActiveError(){return this.activeError},_create(e){var{title:t,messages:s,fatal:r}=e;this._pushError(t,s,r)},_dismiss(){this.activeError=this.errorQueue.shift()},_discardFailure(e){var{error:t}=e,s=(0,se.Z)("create_set.error_alert.titles.discard");t instanceof Io.Z?this._fatalError(s,t):this._pushError(s,t)},_publishFailure(e){var{error:t,model:s}=e,r=(0,se.Z)("create_set.error_alert.titles.publish");if(t instanceof Io.Z)this._fatalError(r,t);else{var i=[];t instanceof fi.Z?s.getValidationErrors().filter((e=>!(e.identifier in vr.ignoredValidationErrors.set))).forEach((e=>i.push(e))):t&&i.push(t.message),i.length>0&&this._pushError(r,i)}},_imageUploadError(e){var{error:t,model:s}=e,r=(0,se.Z)("create_set.error_alert.titles.image_upload"),i=(0,se.Z)("create_set.error_alert.please_try_again");t instanceof Io.Z?this._fatalError(r,t):t instanceof fi.Z?this._pushError(r,s.getValidationErrors()):t&&this._pushError(r,[i])},_imageDropError(e){var{error:t}=e,s=(0,se.Z)("create_set.error_alert.titles.image_upload");this._pushError(s,[t.message])},_bulkImageUploadError(e){var{error:t}=e,s=(0,se.Z)("create_set.error_alert.titles.bulk_upload"),r=t.files.map((e=>e.name));this._pushError(s,[t.message],!1,r)},_termUpdateFailure(e){var{error:t,models:s}=e,r=(0,se.Z)("create_set.error_alert.titles.set_update");if(t instanceof Io.Z)this._fatalError(r,t);else{var i=[];t instanceof fi.Z?Object.keys(s).forEach((e=>{s[e].getValidationErrors().forEach((e=>i.push(e)))})):t&&i.push(t.message),i.length>0&&this._pushError(r,i)}},_setUpdateFailure(e){var{error:t,model:s}=e,r=(0,se.Z)("create_set.error_alert.titles.set_update"),i=[];t instanceof Io.Z?this._fatalError(r,t):(t instanceof fi.Z?s.getValidationErrors().filter((e=>!(e.identifier in vr.ignoredValidationErrors.set))).forEach((e=>i.push(e))):t&&i.push(t.message),i.length>0&&this._pushError(r,i))},_termImageCreateFailure(e){var{error:t,model:s}=e,r=(0,se.Z)("create_set.error_alert.titles.add_image"),i=[];t instanceof Io.Z?this._fatalError(r,t):(t instanceof fi.Z?s.getValidationErrors().forEach((e=>i.push(e))):t&&i.push((0,se.Z)("create_set.error_alert.please_try_again")),i.length>0&&this._pushError(r,i))},_fatalError(e,t){this._pushError(e,[t.message],!0)},_pushError(e,t,s,r){void 0===t&&(t=[]),void 0===s&&(s=!1),void 0===r&&(r=[]);var i={title:e,messages:t,fatal:s,secondaryMessages:r};this.activeError?this.errorQueue.push(i):this.activeError=i}},os.Z);wo.init();var Ao=wo,Oo=s("./app/j/create_set/stores/SetPermissionStore.ts"),Ro=s("./app/j/create_set/stores/SetStore.ts"),Do=s("./app/j/create_set/stores/UserStore.ts"),Lo=(0,me.Z)((()=>s.e("create_set_tooltip_diagram_modal_lazy").then(s.bind(s,"./app/j/create_set/components/CreateSetTooltipDiagramModal.tsx")))),Po=(0,me.Z)((()=>s.e("image_upload_error_modal_lazy").then(s.bind(s,"./app/j/components/ImageUploadErrorModal.tsx")))),Mo=(0,me.Z)((()=>s.e("ocr_upsell_modal_lazy").then(s.bind(s,"./app/j/components/OCRUpsellModal.tsx"))));var Zo=s("./app/j/rich_text/RichTextContext.ts"),ko=s("./app/j/stores/SyncerStore.ts"),Uo=s("./app/j/tracking/AnalyticsTrackingHelper.ts"),No=s("./app/j/utils/Cookie.ts"),Fo=s("./app/j/utils/is-empty.ts"),Bo=s("./app/j/utils/log-pageload-events.ts"),Ho=s("./app/j/utils/maybeConfirmPageHide.ts"),Vo=s("./app/j/utils/openSignupModal.ts"),Go="e1phsipe";class Wo extends h.Component{constructor(e){var t;super(e),t=this,this.fetchSyncerStore=()=>({isImageUploading:ko.Z.isSyncing("ImageSyncer"),isSyncing:ko.Z.isSyncing(),lastSavedTimestamp:ko.Z.getLastSyncedTimestamp(),hasSyncingError:ko.Z.hasError()}),this.fetchSetStore=()=>({detectLanguageResults:Ro.Z.getDetectLanguageResults(),isDiscardDisabled:Ro.Z.isDiscardDisabled(),isPublishDisabled:Ro.Z.isPublishDisabled(),isRedirecting:Ro.Z.isRedirecting(),openLangSelectSide:Ro.Z.getOpenLangSelectSide(),set:Ro.Z.get(),setLuid:Ro.Z.getLuid(),setProfanityErrors:Ro.Z.getProfanityErrors(),setValidationErrors:Ro.Z.getValidationErrors(),shouldHideTerms:Ro.Z.shouldHideTerms(),stickyHeaderHeight:Ro.Z.getStickyHeaderHeight()}),this.fetchClassSetStore=()=>({classSets:xo.Z.getAll(),classSetSetMap:xo.Z.getSetMap(),classSetClassMap:xo.Z.getClassMap()}),this.fetchSetPermissionStore=()=>{var{set:e,user:t}=this.state,s=Oo.Z.getPermissions();return this.shouldOverrideViewPermissionForVerifiedCreator(t,e)&&(s.viewableBy=Ye.mk.JUST_ME),{permissions:s,selectedClassLuids:Oo.Z.getSelectedClassLuids(),selectedEditableByClassLuids:Oo.Z.getSelectedEditableByClassLuids()}},this.fetchErrorAlertStore=()=>({activeError:Ao.getActiveError()}),this.fetchClassStore=()=>({classes:To.Z.getAll()}),this.fetchUserStore=()=>({user:Do.Z.getUser()}),this.getPublishButtonText=()=>this.isPublishDisabled()||this.isSyncingOrRedirecting()&&(0,$.b1)()?(0,g.jsx)(_.Z,{id:"create_set.header.publish_button.saving"}):this.state.set.isPublished()?(0,g.jsx)(_.Z,{id:"create_set.header.publish_button.done"}):(0,g.jsx)(_.Z,{id:"create_set.header.publish_button.create"}),this.onToggleAutosuggest=()=>{B.Z.autosuggestClear(),this.setState({isAutosuggestionEnabled:!this.state.isAutosuggestionEnabled})},this.onPublishButtonClickFooter=e=>(e.preventDefault(),(0,u.Pv)(this.props.loggerConfig,"new_create_set_click_bottom_publish_button"),this.publishSetClickSource="publish-set-bottom",this.isSetContentTypePracticeQuestions()?this.onPublishMcqs():this.onPublishTerms()),this.onPublishButtonClickHeader=e=>(e.preventDefault(),(0,u.Pv)(this.props.loggerConfig,"new_create_set_click_header_publish_button"),this.publishSetClickSource="publish-set-top",this.isSetContentTypePracticeQuestions()?this.onPublishMcqs():this.onPublishTerms()),this.onFlipColumn=()=>{this.setState({areColumnsFlipped:!this.state.areColumnsFlipped});var e=V.ZP.getAll(),t={};for(var s of Object.keys(e)){var r=e[s];r.word===r.definition&&(0,wn.J)(r.wordRichText,r.definitionRichText)||(t[s]={definition:r.word||"",word:r.definition||"",definitionRichText:r.wordRichText||null,wordRichText:r.definitionRichText||null},r.wordCustomAudioId!==r.definitionCustomAudioId&&(t[s]=Object.assign({},t[s],{definitionCustomAudioId:r.wordCustomAudioId||null,wordCustomAudioId:r.definitionCustomAudioId||null})))}B.Z.flipColumns(this.state.setLuid,t);var{wordLang:i,defLang:n}=this.state.set;if((i||n)&&"photo"!==n)return F.Z.update(this.state.setLuid,{wordLang:n,defLang:i})},this.onDragOverHeader=()=>{this.startAutoScroll(Ds.qF.UP)},this.onDrop=e=>{e.preventDefault(),this.stopAutoScroll()},this.onOpenImport=e=>(e.preventDefault(),this.toggleImport(!0)),this.onCloseImport=()=>this.toggleImport(!1),this.onImport=(e,t)=>{(0,u.Pv)(this.props.loggerConfig,"new_create_set_import_terms");var{startIndex:s,luidsToReplace:r}=V.ZP.getImportInfo(),i=[],n=0;if(r.length>0)for(var o=t.slice(0,Math.min(t.length,r.length)),a=0;a<o.length;a++){var l=o[a];i[r[a]]=Object.assign({},e[l],{rank:s+n}),n+=1}var d=[];if(n<t.length)for(var c=t.slice(n,t.length),p=0;p<c.length;p++){var h=c[p];d.push(Object.assign({},e[h],{rank:s+n})),n+=1}B.Z.import({setLuid:this.state.setLuid,luidToPropsToReplace:i,arrayOfPropsToAdd:d,wordLang:this.state.set.wordLang,defLang:this.state.set.defLang});var g=Object.keys(e).map((t=>e[t])),m=g.find((e=>!!e.word)),_=g.find((e=>!!e.definition));return m&&!this.state.set.wordLang&&F.Z.detectLanguage(this.state.setLuid,"word",[m.word]),_&&!this.state.set.defLang&&F.Z.detectLanguage(this.state.setLuid,"definition",[_.definition]),_r.Z.scrollToBottom(),this.onCloseImport()},this.publishTerms=()=>{var e={};V.ZP.isImagesOnly()&&(e.defLang="photo");var{diagramImage:t,numDiagramShapes:s}=this.props;if(t||!this.isSetContentTypeDiagrams()||this.state.hasShownDiagramImageRequiredError)if(t&&s<Ds.Rj.MIN_TERMS&&!this.state.hasShownMinDiagramShapesError)this.setState({hasShownMinDiagramShapesError:!0,setValidationErrors:{min_diagram_shapes:(0,se.Z)("errors.model_validation.set.min_diagram_shapes",{numDiagramShapes:Ds.Rj.MIN_TERMS-s})}});else{V.ZP.isBlankDefinitions()&&t&&s>0&&(e.defLang=this.props.wordLang);var r=V.ZP.getUnsavedTermUpdates(this.props.shouldLogForRichTextDebugging);this.props.shouldLogForRichTextDebugging&&this.maybeLogDebugForNullRichText(r,"CreateSetPage_publishTerms"),bs.Z.bulkUpdateAndPublish(this.state.setLuid,e,r)}else this.setState({hasShownDiagramImageRequiredError:!0,setValidationErrors:{requires_diagram_image:(0,se.Z)("errors.model_validation.set.requires_diagram_image")}})},this.publishMcqs=()=>{if(!ko.Z.isSyncing()){var{set:e,setLuid:t}=this.state,{studiableMultipleChoiceQuestions:s}=this.props,r=Cs.getValidationErrors(e,s);r?this.setState({setValidationErrors:r}):this.setState({setValidationErrors:{}},(()=>{Cs.bulkUpdateAndPublish(t,e,s)}))}},this.onPublishTerms=()=>{window.setTimeout(this.publishTerms,0)},this.onPublishMcqs=()=>{this.publishMcqs()},this.onCloseSetDescription=()=>{this.state.isSetDescriptionOpen&&this.setState({isSetDescriptionOpen:!1})},this.onOpenSetDescription=()=>{(0,u.Pv)(this.props.loggerConfig,"new_create_set_open_set_description_modal"),this.state.isSetDescriptionOpen||this.setState({isSetDescriptionOpen:!0})},this.onClosePermissions=()=>{this.setState({isSetPermissionsOpen:!1},(()=>{this.props.canEditPermissions&&this.setPermissions&&this.setPermissions.blur()}))},this.onOpenPermissions=e=>{(0,u.Pv)(this.props.loggerConfig,"new_create_set_open_permissions"),this.setState({isSetPermissionsOpen:!0},(()=>{if(this.props.canEditPermissions&&this.setPermissions)switch(e){case Ye.mA.VIEWING:this.setPermissions.focusViewing();break;case Ye.mA.EDITING:this.setPermissions.focusEditing()}}))},this.onCloseCreateSetTooltipDiagramModal=()=>{this.setState({isCreateSetTooltipDiagramModalOpen:!1})},this.onCloseCreateSetUpsellModal=()=>{if(this.state.isCreateSetUpsellModalOpen&&(this.setState({isCreateSetUpsellModalOpen:!1}),this.shouldShowCreateSetUpsellModal())){(0,u.$F)(this.props.loggerConfig,{action:i.Mpk.DISMISS,fullActionName:"create_set_upsell_modal_ocr_close"}),No.ZP.write(i.VjB.CREATE_SET__UPSELL_MODAL,!0,{duration:7,path:"/"});var e=No.ZP.read(i.VjB.CREATE_SET__NUM_SHOW_UPSELL_MODAL)||0;No.ZP.write(i.VjB.CREATE_SET__NUM_SHOW_UPSELL_MODAL,+e+1,{duration:60})}},this.onBeforeUnload=()=>{if(!this.state.isDiscardDisabled&&!this.state.activeError&&!this.state.isPublishDisabled){var e=V.ZP.getUnsavedTermUpdates(),t=Object.keys(e).length>0;return t&&B.Z.bulkUpdate({setLuid:this.state.setLuid,luidToProps:e,wordLang:this.state.set.wordLang,defLang:this.state.set.defLang,persist:!0,syncDelayOverride:!0}),ko.Z.isSyncing()?((0,u.Pv)(this.props.loggerConfig,"new_create_set_exit_while_syncing",{syncing:ko.Z.getAllSyncing()}),(0,se.Z)("create_set.leaving_page_warning.unsaved_changes")):t?((0,u.Pv)(this.props.loggerConfig,"new_create_set_exit_with_unsaved_terms"),(0,se.Z)("create_set.leaving_page_warning.unsaved_terms")):this.state.shouldShowImport?(0,se.Z)("create_set.leaving_page_warning.generic"):void 0}},this.handleTrackPublishEvent=()=>{null!==this.publishSetClickSource&&(0,Uo.Nh)(this.publishSetClickSource),this.publishSetClickSource=null},this.handleOpenMobileOptionsModal=()=>{this.setState({isMobileOptionsModalOpen:!0})},this.handleCloseMobileOptionsModal=()=>{this.setState({isMobileOptionsModalOpen:!1})},this.handleOnCloseLogin=()=>{this.setState({isSignupWallModalOpen:!this.props.isSignedIn})},this.handleCloseImageErrorUploadModal=()=>{this.props.toggleShowImageUploadErrorModal&&this.props.toggleShowImageUploadErrorModal(!1)},this.handleOnOpenLogin=()=>{this.setState({isSignupWallModalOpen:!1}),QWait("Quizlet.loginModal",(()=>{yt.Z.openLoginModal({excludeFromFullpageExperiment:!0,includeCloseButton:!1,onCloseLogin:this.handleOnCloseLogin,preventCloseOnOverlayClick:!0})}))},this.renderSignupPromptModal=()=>(0,g.jsx)(p.default,{actions:{onOpenLogin:this.handleOnOpenLogin,onOpenSignup:Vo.j},excludeFromFullpageExperiment:!0,header:(0,se.Z)("create_set.signup_modal_headline"),includeCloseButton:!1,isOpen:this.state.isSignupWallModalOpen,preventCloseOnOverlayClick:!0,redir:"/create-set",signupOrigin:this.props.signupOrigin}),this.renderMobileOptionsModal=()=>{var{set:e,setProfanityErrors:t}=this.state;return(0,g.jsx)(Fs,{description:e.description,hasCreatedSets:this.props.hasCreatedSets,hasProfanityError:!!t.description,onClose:this.handleCloseMobileOptionsModal,setLuid:this.state.setLuid,setPermissionsProps:{classes:this.state.classes,permissions:this.state.permissions,selectedClassLuids:this.state.selectedClassLuids,selectedEditableByClassLuids:this.state.selectedEditableByClassLuids,set:this.state.set},viewOnly:!this.props.isSignedIn})},this.renderSetPermissionsError=()=>{var e=this.props.isUnderAge&&!this.props.isConfirmed?vr.permissions.UNDER_13:vr.permissions.NOT_CREATOR;return(0,g.jsx)(zr,{isOpen:this.state.isSetPermissionsOpen,onClose:this.onClosePermissions,type:e})},this.renderSetPermissions=()=>(0,g.jsx)(Gr,{classes:this.state.classes,isOpen:this.state.isSetPermissionsOpen,onClose:this.onClosePermissions,permissions:this.state.permissions,ref:e=>{this.setPermissions=e},selectedClassLuids:this.state.selectedClassLuids,selectedEditableByClassLuids:this.state.selectedEditableByClassLuids,set:this.state.set,setLuid:this.state.setLuid}),this.toggleImport=function(e){void 0===e&&(e=!t.state.shouldShowImport),e?(0,u.Pv)(t.props.loggerConfig,"new_create_set_open_import_modal"):F.Z.showTerms(),t.setState({shouldShowImport:e})},this._onFocus=e=>{var t=e.target;"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName||this.setState({hasFocusedInput:!0})},this._onErrorAlert=()=>{this.setState(this.fetchErrorAlertStore())},this.cancelEvent=e=>e.preventDefault(),this._onUserChange=()=>{this.setState(this.fetchUserStore())},this.isAutoScrolling=function(e){return void 0===e&&(e=null),null===e?!!t.autoScrollDirection:t.autoScrollDirection===e},this.startAutoScroll=e=>{this.isAutoScrolling(e)||(this.autoScrollDirection=e,_r.Z.continuousScroll(e))},this.scrollIfNearEdges=e=>{var{clientY:t}=e,s=(0,fo.C)(),r=(e=>e/6)(s),i=s-r;t<r?this.startAutoScroll(Ds.qF.UP):t>i?this.startAutoScroll(Ds.qF.DOWN):this.stopAutoScroll()},this._onSetPermissionsChange=()=>{this.hasChangedPermissions=!0,this.setState(this.fetchSetPermissionStore())},this._onSetChange=()=>{this.setState(this.fetchSetStore())},this._onSyncerChange=()=>{this.setState(this.fetchSyncerStore())},this.addSetToClass=e=>{var t=xo.Z.getUnsyncedClassSets(e);return rs.Z.bulkUpdate(t)},this.addSetToFolder=e=>{var t=us.getUnsyncedFolderSets(e);return ps.bulkUpdate(t)},this.hasMinDiagramShapesError=()=>"min_diagram_shapes"in this.state.setValidationErrors,this.hasMinTermsError=()=>"min_terms"in this.state.setValidationErrors,this.hasDefLangError=()=>"requires_def_lang"in this.state.setValidationErrors&&!this.state.set.defLang,this.hasWordLangError=()=>"requires_word_lang"in this.state.setValidationErrors&&!this.state.set.wordLang,this.hasTitleRequiredError=()=>"requires_title"in this.state.setValidationErrors&&!this.state.set.title,this.hasDiagramImageRequiredError=()=>"requires_diagram_image"in this.state.setValidationErrors&&this.isSetContentTypeDiagrams(),this.hasTitleProfanityError=()=>!!this.state.setProfanityErrors.title,this.hasDescriptionProfanityError=()=>!!this.state.setProfanityErrors.description,this.isSyncingOrRedirecting=()=>this.state.isSyncing||this.state.isRedirecting,this.isPublishDisabled=()=>this.state.isPublishDisabled||this.state.isImageUploading,this._onBlur=()=>{this.setState({hasFocusedInput:!1})},this.stopAutoScroll=()=>{this.isAutoScrolling()&&(this.autoScrollDirection=null,_r.Z.stopScroll())},this.shouldOverrideViewPermissionForVerifiedCreator=(e,t)=>!(null==e||!e.isVerified||t.id||this.hasChangedPermissions),this.shouldShowTeacherCustomDistractorCreation=()=>this.props.shouldShowTeacherCustomDistractorCreation&&!this.props.diagramImage,this.shouldShowDiagramsContainer=()=>this.props.isUnderAge?null:this.props.setContentType?this.isSetContentTypeDiagrams():this.props.isDiagramSet;var s={areColumnsFlipped:!1,hasFocusedInput:!1,hasShownDiagramImageRequiredError:!1,hasShownMinDiagramShapesError:!1,isCreateSetTooltipDiagramModalOpen:!1,isAutosuggestionEnabled:!e.isMobileWebView,isCreateSetUpsellModalOpen:!1,isSetDescriptionOpen:!1,isSetPermissionsOpen:!1,isSignupWallModalOpen:!e.isSignedIn,shouldShowImport:!1};this.state=Object.assign({permissions:{},selectedClassLuids:[],selectedEditableByClassLuids:[]},s,this.fetchUserStore(),this.fetchSetStore(),this.fetchClassSetStore(),this.fetchClassStore(),this.fetchSyncerStore(),this.fetchErrorAlertStore())}UNSAFE_componentWillMount(){if(ko.Z.addChangeListener(this._onSyncerChange),Ro.Z.addChangeListener(this._onSetChange),Oo.Z.addChangeListener(this._onSetPermissionsChange),Ao.addChangeListener(this._onErrorAlert),Do.Z.addChangeListener(this._onUserChange),this.isSetContentTypePracticeQuestions()&&this.props.studiableMultipleChoiceQuestions&&this.props.studiableMultipleChoiceQuestions.length<hs.studiableItems.MIN_ITEMS_FOR_PUBLISH)for(var e=this.props.studiableMultipleChoiceQuestions.length;e<hs.studiableItems.MIN_ITEMS_FOR_PUBLISH;e++)this.props.createStudiableItem();this.hasChangedPermissions=!1,this.setState(this.fetchSetPermissionStore())}componentDidMount(){(0,Bo.K7)(),this.props.isResumingCreate&&!this.props.hideAutosavePrompt&&(0,fn.Z)({duration:vn.th.LONG,isDismissible:!0,message:(0,se.Z)("create_set.autosave.notice"),onClickSecondaryAction:()=>{window.confirm((0,se.Z)("create_set.autosave.confirmation"))&&F.Z.discard(this.state.setLuid)},secondaryActionLabel:(0,se.Z)("create_set.autosave.discard_link")}),this.shouldShowCreateSetUpsellModal()&&this.setState({isCreateSetUpsellModalOpen:!0}),this.props.shouldShowTooltipDiagram&&this.setState({isCreateSetTooltipDiagramModalOpen:!0}),this.beforeUnloadListener=(0,Ho.Z)(this.onBeforeUnload),this.props.isIOS&&(this.focusInputListener=Sn.Z.capture(window.document,"focus",this._onFocus),this.blurInputListener=Sn.Z.capture(window.document,"blur",this._onBlur)),this.autoScrollDirection=null,this.onPublishTimeout=null,this.hasLoggedUnsyncedTerms=!1;var e=this.context;(0,cn.gg)(e)&&(0,cn.Rj)(i.s$K.CREATE_SET_PAGE),this.maybeShowU13Toast()}UNSAFE_componentWillUpdate(e,t){var s;!this.state.hasSyncingError&&t.hasSyncingError?(0,fn.Z)({duration:vn.th.PERSISTENT,icon:"alert",message:(0,se.Z)("create_set.syncing_error_bar.lost_connection"),priority:vn.Hr.HIGH,type:vn.wD.CREATE_SET_SYNC_ERROR}):this.state.hasSyncingError&&!t.hasSyncingError&&(s={type:vn.wD.CREATE_SET_SYNC_ERROR},QWait("Quizlet.NotificationContainer",(()=>{nr()(yt.Z.NotificationContainer,"Missing Quizlet.NotificationContainer"),yt.Z.NotificationContainer.removeNotification(s)})))}componentDidUpdate(e,t){t.setValidationErrors!==this.state.setValidationErrors&&_r.Z.scrollToTop(),this.onPublishTimeout=window.setTimeout((()=>{!t.set.id&&this.state.set.id&&(this.addSetToClass(this.state.set.id),this.addSetToFolder(this.state.set.id))}),0),this.state.isRedirecting&&this.handleTrackPublishEvent()}componentWillUnmount(){ko.Z.removeChangeListener(this._onSyncerChange),Ro.Z.removeChangeListener(this._onSetChange),Oo.Z.removeChangeListener(this._onSetPermissionsChange),this.beforeUnloadListener&&this.beforeUnloadListener.remove(),this.focusInputListener&&this.focusInputListener.remove(),this.blurInputListener&&this.blurInputListener.remove(),this.onPublishTimeout&&clearTimeout(this.onPublishTimeout)}isSelfIdentifiedTeacher(){return!!this.state.user&&this.state.user.isSelfIdentifiedTeacher()}getPracticeQuestionValidationErrorMessage(){return"requires_two_items"in this.state.setValidationErrors?(0,g.jsx)(_.Z,{id:"create_practice_question.validation_errors.requires_two_items"}):"requires_options"in this.state.setValidationErrors?(0,g.jsx)(_.Z,{id:"create_practice_question.validation_errors.requires_options"}):null}getSetValidationErrorMessage(){if((0,te.P)(this.props.setContentType)){if(this.hasTitleProfanityError())return(0,g.jsx)(_.Z,{id:"create_set.header.set_title_error.profane"});if(this.hasDescriptionProfanityError())return(0,g.jsx)(_.Z,{id:"create_set.set_description_modal.profanity_error"})}return this.hasDiagramImageRequiredError()?this.state.setValidationErrors.requires_diagram_image:this.hasMinDiagramShapesError()?this.state.setValidationErrors.min_diagram_shapes:this.hasMinTermsError()?this.hasWordLangError()&&this.hasDefLangError()?(0,te.P)(this.props.setContentType)?(0,g.jsx)(_.Z,{id:"create_set.validation_errors.sentence_case.not_enough_terms_and_languages_error"}):(0,g.jsx)(_.Z,{id:"create_set.validation_errors.not_enough_terms_and_languages_error"}):this.hasWordLangError()?(0,te.P)(this.props.setContentType)?(0,g.jsx)(_.Z,{id:"create_set.validation_errors.sentence_case.not_enough_terms_and_term_language_error"}):(0,g.jsx)(_.Z,{id:"create_set.validation_errors.not_enough_terms_and_term_language_error"}):this.hasDefLangError()?(0,te.P)(this.props.setContentType)?(0,g.jsx)(_.Z,{id:"create_set.validation_errors.sentence_case.not_enough_terms_and_definition_language_error"}):(0,g.jsx)(_.Z,{id:"create_set.validation_errors.not_enough_terms_and_definition_language_error"}):(0,te.P)(this.props.setContentType)?(0,g.jsx)(_.Z,{id:"create_set.validation_errors.sentence_case.not_enough_terms_error"}):(0,g.jsx)(_.Z,{id:"create_set.validation_errors.not_enough_terms_error"}):this.hasWordLangError()&&this.hasDefLangError()?(0,te.P)(this.props.setContentType)?(0,g.jsx)(_.Z,{id:"create_set.validation_errors.sentence_case.languages_error"}):(0,g.jsx)(_.Z,{id:"create_set.validation_errors.languages_error"}):this.hasWordLangError()?(0,te.P)(this.props.setContentType)?(0,g.jsx)(_.Z,{id:"create_set.validation_errors.sentence_case.term_language_error"}):(0,g.jsx)(_.Z,{id:"create_set.validation_errors.term_language_error"}):this.hasDefLangError()?(0,te.P)(this.props.setContentType)?(0,g.jsx)(_.Z,{id:"create_set.validation_errors.sentence_case.definition_language_error"}):(0,g.jsx)(_.Z,{id:"create_set.validation_errors.definition_language_error"}):null}renderPublishIconButton(){return this.isPublishDisabled()?(0,g.jsx)(b.Z,{}):(0,g.jsx)(c.Z,{icon:"system-check",iconProps:{variant:"whiteBorderless",size:"xlarge"},isHigherZIndex:!0,onClick:this.onPublishButtonClickHeader,tooltipText:(0,se.Z)("create_set.header.publish_button.create")})}renderPublishButton(e){var t,s=e===Ds._B.HEADER?this.onPublishButtonClickHeader:this.onPublishButtonClickFooter,r=e===Ds._B.FOOTER,i=this.props.numDiagramShapes>=Ds.Rj.MIN_TERMS,n=Ds.Rj.MIN_TERMS-this.props.numDiagramShapes,o=!(0,te.P)(this.props.setContentType)&&!i&&this.props.diagramImage&&!this.state.set.isPublished()||this.props.isEditingDiagramImage,a=(0,g.jsx)(v.Z,{disabled:this.isPublishDisabled()||o,hero:r,onClick:s,children:this.getPublishButtonText()});t=this.props.isEditingDiagramImage?(0,g.jsx)(_.Z,{id:"create_set.finish_editing_error"}):this.props.canUsePremiumDiagramFeatures?(0,g.jsx)(_.Z,{id:"create_set.need_more_terms_error",numMoreTerms:n}):(0,g.jsx)(_.Z,{id:"create_set.upgrade_to_add_points_error",productName:this.isSelfIdentifiedTeacher()?(0,se.Z)("products.one_year_teacher_recurring.name"):(0,se.Z)("products.one_year_plus_recurring.name")});var d=l()({"CreateSetHeader-publishButtonOverlayWrap":e===Ds._B.HEADER});return o?(0,g.jsx)(y.Z,{className:d,overlay:(0,g.jsx)(j.Z,{children:t}),position:"left",triggerAction:"hover",children:(0,g.jsx)("div",{children:a})},"overlay"):a}renderMcqs(){var{addOptionsForStudiableItem:e,addOrUpdateStudiableMediaConnectionWithMedia:t,createStudiableItem:s,deleteMultipleChoiceOption:r,deleteStudiableMediaConnection:i,imageUploadStatus:n,moveStudiableItem:o,removeStudiableItem:a,saveMultipleChoiceOption:l,selectedMediaConnection:d,studiableMultipleChoiceQuestions:u,toggleExplanation:c,toggleHint:p,updateExplanationMedia:h,updateHintMedia:m,updateOptionMedia:_,updateQuestionMedia:f,updateSelectedMediaConnection:v,uploadImageMedia:S,shouldShowVideoExplanationCreation:C}=this.props,{setLuid:b}=this.state;return(0,g.jsx)(fr,{addOptionsForStudiableItem:e,addOrUpdateStudiableMediaConnectionWithMedia:t,createStudiableItem:s,deleteMultipleChoiceOption:r,deleteStudiableMediaConnection:i,imageUploadStatus:n,moveStudiableItem:o,removeStudiableItem:a,saveMultipleChoiceOption:l,selectedMediaConnection:d,setLuid:b,shouldShowVideoExplanationCreation:C,studiableContainerLuid:this.state.setLuid,studiableMultipleChoiceQuestions:u,toggleExplanation:c,toggleHint:p,updateExplanationMedia:h,updateHintMedia:m,updateOptionMedia:_,updateQuestionMedia:f,updateSelectedMediaConnection:v,uploadImageMedia:S})}renderLabelsForAccessibility(){return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:Go,id:"editor-term-side",children:(0,se.Z)("create_set.term_context.sides.term")}),(0,g.jsx)("div",{className:Go,id:"editor-definition-side",children:(0,se.Z)("create_set.term_context.sides.definition")}),(0,g.jsx)("div",{className:Go,id:"editor-question-side",children:(0,se.Z)("create_set.term_context.sides.question")}),(0,g.jsx)("div",{className:Go,id:"editor-answer-side",children:(0,se.Z)("create_set.term_context.sides.answer")}),(0,g.jsx)("div",{className:Go,id:"editor-custom-distractor",children:(0,se.Z)("create_set.term_context.custom_distractors.field_label")})]})}renderTerms(){var{detectLanguageResults:e,set:t,setLuid:s}=this.state,r=!this.props.isSignedIn;return(0,g.jsxs)(g.Fragment,{children:[this.renderLabelsForAccessibility(),(0,g.jsx)(jo,{canEditRichText:this.props.canEditRichText,canUseImageUpload:this.props.canUseImageUpload,canUseVoiceRecording:this.props.canUseVoiceRecording,defLang:t.defLang,detectLanguageResults:e,hasDefLangError:this.hasDefLangError(),hasMinTermsError:this.hasMinTermsError(),hasSyncingError:this.state.hasSyncingError,hasWordLangError:this.hasWordLangError(),isAutosuggestionEnabled:this.state.isAutosuggestionEnabled,isHidden:this.state.shouldHideTerms,isIOS:this.props.isIOS,isMac:this.props.isMac,isMobileWebView:this.props.isMobileWebView,isSetContentTypeDiagrams:this.isSetContentTypeDiagrams(),onDragEnd:this.stopAutoScroll,onDragEnterOrOver:this.scrollIfNearEdges,onToggleAutosuggest:this.onToggleAutosuggest,openLangSelectSide:this.state.openLangSelectSide,recentLanguages:this.props.recentLanguages,setLuid:s,shouldLogForRichTextDebugging:this.props.shouldLogForRichTextDebugging,shouldShowMCQUpsell:this.props.shouldShowMCQUpsell,shouldShowTeacherCustomDistractorCreation:this.shouldShowTeacherCustomDistractorCreation(),shouldShowTooltipAudio:this.props.shouldShowTooltipAudio,shouldShowTooltipImage:this.props.shouldShowTooltipImage,shouldShowTooltipRichText:this.props.shouldShowTooltipRichText,shouldUseCleanDesign:(0,te.P)(this.props.setContentType),stickyHeaderHeight:this.state.stickyHeaderHeight,user:this.state.user,userLocale:this.getUserLocale(),viewOnly:r,voiceRecordingUpsellImage:this.props.voiceRecordingUpsellImage,wordLang:t.wordLang})]})}renderCreateSetUpsellModal(){return(0,g.jsx)(Mo,{isOpen:this.state.isCreateSetUpsellModalOpen,onClose:this.onCloseCreateSetUpsellModal,source:"create_set_modal_ocr",variant:this.isSelfIdentifiedTeacher()?"teacher":"student"})}render(){var{permissions:e,set:t,setLuid:s}=this.state,r=!this.props.isSignedIn,i=(0,te.P)(this.props.setContentType)?this.renderPublishIconButton():this.renderPublishButton(Ds._B.HEADER),n=l()("CreateSetPage",{"has-focusedInput":this.state.hasFocusedInput}),o=l()("CreateSetPage-container",{"CreateSetPage-container--whiteBackground":(0,te.P)(this.props.setContentType)}),a=l()("CreateSetPage-footer",{"CreateSetPage--footerOverlap":this.isSetContentTypeDiagrams()}),d=this.isSetContentTypePracticeQuestions()?this.onPublishMcqs:this.onPublishTerms;return(0,g.jsx)(Zo.K,{value:{canEditRichText:this.props.canEditRichText,isSelfIdentifiedTeacher:this.isSelfIdentifiedTeacher(),shouldShowRichText:!0},children:(0,g.jsxs)("div",{className:n,onDragOver:this.cancelEvent,onDrop:this.onDrop,children:[(0,g.jsx)(ts,{canEditRichText:this.props.canEditRichText,canFlipColumns:this.canFlipColumns(),hasFocusedInput:this.state.hasFocusedInput,isAutosuggestionEnabled:this.state.isAutosuggestionEnabled,isDiagramSet:this.props.isDiagramSet,isMac:this.props.isMac,isPublished:this.state.set.isPublished(),isResumingCreate:this.props.isResumingCreate,isSyncing:this.isSyncingOrRedirecting(),lastSavedTimestamp:this.state.lastSavedTimestamp,loggerConfig:this.props.loggerConfig,numTermsSaved:V.ZP.getNumSyncedTerms(),onDragOver:this.onDragOverHeader,onFlipColumn:this.onFlipColumn,onOpenImport:this.onOpenImport,onOpenMobileOptionsModal:this.handleOpenMobileOptionsModal,onOpenPermissions:this.onOpenPermissions,onOpenSetDescription:this.onOpenSetDescription,onPublish:d,onToggleAutosuggest:this.onToggleAutosuggest,permissions:e,preselectedCourse:this.props.preselectedCourse,publishButton:i,set:t,setLuid:s,setProfanityErrors:this.state.setProfanityErrors,setValidationBoxedErrors:this.isSetContentTypePracticeQuestions()?this.getPracticeQuestionValidationErrorMessage():this.getSetValidationErrorMessage(),setValidationErrors:this.state.setValidationErrors,shouldShowAd:this.props.shouldShowAd,shouldShowFlipTermsMenu:!this.isSetContentTypePracticeQuestions(),user:this.state.user||void 0,viewOnly:r}),(0,g.jsxs)("div",{className:o,children:[this.props.shouldShowTooltipDiagram?(0,g.jsx)(f.Z,{below:"m",children:e=>e?(0,g.jsx)(Lo,{isOpen:this.state.isCreateSetTooltipDiagramModalOpen,onClose:this.onCloseCreateSetTooltipDiagramModal,source:"create_set_tooltip_diagram_modal"}):null}):null,this.shouldShowDiagramsContainer()&&(0,g.jsx)(f.Z,{above:"s",children:(0,g.jsx)(ve,{})}),(0,g.jsx)(S.Z,{children:(0,g.jsxs)("div",{className:"CreateSetPage-list",children:[this.isSetContentTypePracticeQuestions()||(0,te.P)(this.props.setContentType)?null:(0,g.jsx)(f.Z,{below:"s",children:(0,g.jsx)("div",{className:"CreateSetPage-flipColumns",children:(0,g.jsxs)(E.Z,{checked:this.state.areColumnsFlipped,disabled:!this.canFlipColumns(),onChange:this.onFlipColumn,children:[(0,g.jsx)(C.Z,{icon:"switch"})," ",(0,g.jsx)(_.Z,{id:"create_set.header.flip_columns_tooltip"})]})})}),(0,g.jsx)(m,{children:this.isSetContentTypePracticeQuestions()?this.renderMcqs():this.renderTerms()}),(0,g.jsx)("div",{className:a,children:(0,g.jsx)("div",{className:"CreateSetPage-publishButton",children:this.renderPublishButton(Ds._B.FOOTER)})}),this.state.hasSyncingError?(0,g.jsx)("div",{className:"CreateSetPage-blockerOverlay"}):null]},"list")})]}),(0,g.jsx)(Zr,{defLang:t.defLang,onCancel:this.onCloseImport,onImport:this.onImport,shouldShow:this.state.shouldShowImport,wordLang:t.wordLang}),this.state.activeError&&(0,g.jsx)(Cr,{activeError:this.state.activeError}),(0,g.jsx)(Hr,{defLang:this.state.set.defLang,description:this.state.set.description,hasProfanityError:!!this.state.setProfanityErrors.description,isOpen:this.state.isSetDescriptionOpen,onClose:this.onCloseSetDescription,setLuid:this.state.setLuid,wordLang:this.state.set.wordLang}),this.props.canEditPermissions?this.renderSetPermissions():this.renderSetPermissionsError(),this.props.isSignedIn?null:this.renderSignupPromptModal(),this.state.isMobileOptionsModalOpen?this.renderMobileOptionsModal():null,this.props.showImageUploadErrorModal?(0,g.jsx)(Po,{isOpen:this.props.showImageUploadErrorModal,onClose:this.handleCloseImageErrorUploadModal}):null,this.shouldShowCreateSetUpsellModal()?this.renderCreateSetUpsellModal():null]})})}maybeShowU13Toast(){var e;!No.ZP.read("toast-create-set-page-u13-privacy")&&null!=(e=yt.Z.user)&&e._isUnderAge&&((0,o.fz)((0,se.Z)("create_set.toast.u13_changes"),{action:{text:(0,se.Z)("create_set.toast.read_more"),onClick:()=>(0,Ss.YQ)("https://help.quizlet.com/hc/articles/360029923632")},includeDismiss:!0}),No.ZP.write("toast-create-set-page-u13-privacy","true"))}shouldShowCreateSetUpsellModal(){var e=No.ZP.read("create_set_num_show_upsell_modal")||0;return!!yt.Z.user&&(yt.Z.user.type===i.XsQ.NO_UPGRADE||yt.Z.user.type===i.XsQ.GO)&&V.ZP.getNumFreeTerms()===Ds.Rj.MAX_TERMS&&null===No.ZP.read(i.VjB.CREATE_SET__UPSELL_MODAL)&&e<5}canFlipColumns(){var e,t;return!(null==(e=this.state.set)||!e.wordLang||null==(t=this.state.set)||!t.defLang)}getUserLocale(){var{user:e}=this.state;return(null==e?void 0:e.userLocalePreference)||(null==e?void 0:e.webLocale)}isSetContentTypeDiagrams(){return"diagrams"===this.props.setContentType}isSetContentTypePracticeQuestions(){return"practice-questions"===this.props.setContentType}maybeLogDebugForNullRichText(e,t){if(!(0,Fo.Z)(e)){var s=new Map;for(var r in e)if(e[r]){var i=e[r];null!==i.definitionRichText&&null!==i.wordRichText||s.set(r,i)}s.size>0&&ht.Z.debug("Rich text saved as null for terms during "+t,Object.fromEntries(s))}}}Wo.contextType=ss.Z;var zo=(0,d.Z)(Wo);s("./.linaria-cache/app/j/create_set/components/CreateSetPage.linaria.css");var qo=s("./node_modules/lodash/uniqBy.js"),Ko=s.n(qo);function Yo(e){var{mediaType:t}=e,s=null;switch(t){case i.DDH.IMAGE:s=e.image;break;case i.DDH.VIDEO:s=e.video;break;case i.DDH.TEXT:s=e.text;break;default:throw new Error("media type "+t+" not supported yet")}return 0===Object.keys(s).length?null:Object.assign({type:t},Pe()(s))}function Qo(e,t,s){return s.filter((s=>s.connectionModelId===e&&s.connectionType===t&&(s.text||s.image||s.video))).map(Yo).filter((e=>e))}function $o(e,t){return Qo(e,i.$Gk.MULTIPLE_CHOICE_PROMPT,t)}function Xo(e,t){return Qo(e,i.$Gk.MULTIPLE_CHOICE_HINT,t)}function Jo(e,t,s){var r=s.filter((t=>t.studiableItemId===e.id&&t.id)),n=r.map((e=>e.id)),o=t.filter((e=>n.includes(e.connectionModelId)));return r.map((e=>{var{isCorrect:t,rank:s,id:r}=e;return{isCorrect:!!t,optionId:r,rank:s||null,optionMedia:Qo(r,i.$Gk.MULTIPLE_CHOICE_OPTION,o),explanationMedia:Qo(r,i.$Gk.MULTIPLE_CHOICE_OPTION_EXPLANATION,o)}}))}function ea(e,t){return e.map((e=>{var s=Object.assign({},e);return Object.keys(t).forEach((e=>{t[e].id===s.optionId&&(s.isCorrect=!!t[e].isCorrect)})),s}))}function ta(e,t){var s={};switch(t.mediaType){case i.DDH.TEXT:s=t.text;break;case i.DDH.IMAGE:s=t.image;break;case i.DDH.VIDEO:s=t.video;break;default:throw new Error("media type not supported yet")}var r=Object.assign({},s,{type:t.mediaType}),n=!1,o=e.map((e=>e.type===t.mediaType?(n=!0,r):e));return n||o.push(r),o}var sa=s("./node_modules/redux-actions/lib/index.js");class ra extends gs.Z{}ra.URL_BASE="studiable-item-documents",ra.MODEL_NAME="studiableItem",ra.API_VERSION="3.4",ra.REQUIRED_FIELDS=["studiableContainerId","studiableContainerType"],ra.REQUIRES_FULL_MODEL_TO_UPDATE=!0;var ia=Object.assign({},_s.Z);ia.init(ra);var na=ia;class oa extends gs.Z{}oa.URL_BASE="studiable-items",oa.MODEL_NAME="studiableItem",oa.API_VERSION="3.4";var aa=Object.assign({},_s.Z);aa.init(oa);var la=aa;class da extends gs.Z{}da.URL_BASE="studiable-media-connections",da.MODEL_NAME="studiableMediaConnection",da.API_VERSION="3.4";var ua=Object.assign({},_s.Z);ua.init(da);var ca=ua,pa=s("./app/j/utils/ImageSourceHelper.ts"),ha=(0,Rr.Z)("MCQ_CREATION",{ADD_OPTION:null,ADD_STUDIABLE_ITEM:null,ADD_OR_UPDATE_STUDIABLE_MEDIA_CONNECTION:null,DELETE_MULTIPLE_CHOICE_OPTION:null,DELETE_STUDIABLE_MEDIA:null,DELETE_STUDIABLE_ITEM:null,MOVE_STUDIABLE_ITEM:null,SHOW_IMAGE_UPLOAD_ERROR_MODAL:null,SET_IMAGE_UPLOADING_STATUS:null,UPDATE_MEDIA_SAVE_STATUS:null,UPDATE_MULTIPLE_CHOICE_OPTION:null,UPDATE_MULTIPLE_CHOICE_OPTION_SAVE_STATUS:null,UPDATE_STUDIABLE_ITEM:null,UPDATE_SELECTED_MEDIA_CONNECTION:null}),ga=(0,sa.PH)(ha.ADD_OPTION),ma=(0,sa.PH)(ha.ADD_STUDIABLE_ITEM),_a=(0,sa.PH)(ha.ADD_OR_UPDATE_STUDIABLE_MEDIA_CONNECTION),fa=(0,sa.PH)(ha.DELETE_MULTIPLE_CHOICE_OPTION),va=(0,sa.PH)(ha.DELETE_STUDIABLE_MEDIA),Sa=(0,sa.PH)(ha.DELETE_STUDIABLE_ITEM),Ca=(0,sa.PH)(ha.MOVE_STUDIABLE_ITEM),ba=(0,sa.PH)(ha.SHOW_IMAGE_UPLOAD_ERROR_MODAL),ya=(0,sa.PH)(ha.SET_IMAGE_UPLOADING_STATUS),Ea=(0,sa.PH)(ha.UPDATE_SELECTED_MEDIA_CONNECTION),ja=(0,sa.PH)(ha.UPDATE_STUDIABLE_ITEM),xa=(0,sa.PH)(ha.UPDATE_MULTIPLE_CHOICE_OPTION),Ta=(0,sa.PH)(ha.UPDATE_MULTIPLE_CHOICE_OPTION_SAVE_STATUS),Ia=(0,sa.PH)(ha.UPDATE_MULTIPLE_CHOICE_OPTION_SAVE_STATUS),wa=function(e,t){return void 0===t&&(t=hs.studiableItems.NUM_MULTIPLE_CHOICE_OPTIONS),(s,r)=>{for(var n=r().get("createSet").get("setLuid"),o=la.getModel(e),{properties:a}=o,l=[],d=[],u=0;u<t;u++){var c={isCorrect:!1,studiableItemLuid:e};o.isNewRecord()||(c.studiableItemId=a.id),l.push(c)}var p=vs.bulkAdd(l),h=[],g=function(e){hs.studiableMediaConnections.SUPPORTED_MEDIA_TYPES.forEach((t=>{d.push({studiableContainerType:i.MG.SET,studiableContainerLuid:n,connectionModelLuid:e,connectionType:i.$Gk.MULTIPLE_CHOICE_OPTION,mediaType:t})}))};for(var m in p)g(m);var _=ca.bulkAdd(d),f=[];for(var v in p){var S=p[v];h.push(Object.assign({},S,{luid:v}))}for(var C in _)f.push(Object.assign({},_[C],{luid:C}));s(ga(h)),s(_a(f)),f.length>0&&s(Ea(f[0]))}};function Aa(e,t){return function(e){var t=Ai.Z.getModel(e);return t.isNewRecord()?t.save(e):Promise.resolve(t)}(t).then((t=>{var{properties:s}=t,r=na.getModel(e),n=la.getModel(e);return r.setAll({studiableContainerType:i.MG.SET,studiableContainerId:s.id}),n.setAll({studiableContainerType:i.MG.SET,studiableContainerId:s.id}),r.isNewRecord()?(r.setAll({promptMedia:[],options:[],hintMedia:[],type:i.zqd.MULTIPLE_CHOICE_QUESTION}),r.save(e)):r}))}var Oa=()=>(e,t)=>{var s=t().get("createSet").get("setLuid"),r={studiableContainerType:i.MG.SET,studiableContainerLuid:s,type:i.zqd.MULTIPLE_CHOICE_QUESTION,rank:1},n=la.add(r);na.add(r);var o=hs.studiableMediaConnections.SUPPORTED_MEDIA_TYPES.map((e=>({studiableContainerType:i.MG.SET,studiableContainerLuid:s,connectionModelLuid:n,connectionType:i.$Gk.MULTIPLE_CHOICE_PROMPT,mediaType:e}))),a=ca.bulkAdd(o),{properties:l}=la.getModel(n),d=Object.assign({},l,{luid:n}),u=[];for(var c in a)u.push(Object.assign({},a[c],{luid:c}));e(ma(d)),e(_a(u)),e(wa(n)),u.length>0&&e(Ea(u[0]))},Ra=e=>t=>{if(0===e.hintConnectionMedia.length){var s=hs.studiableMediaConnections.SUPPORTED_MEDIA_TYPES.map((t=>{var s={connectionType:i.$Gk.MULTIPLE_CHOICE_HINT,mediaType:t};return s.connectionModelId=e.id,s.connectionModelLuid=Pe()(e.luid),s})),r=ca.bulkAdd(s),n=[];for(var o in r)n.push(Object.assign({},r[o],{luid:o}));t(_a(n)),n.length>0&&t(Ea(n[0]))}},Da=e=>t=>{if(0===e.explanationConnectionMedia.length){var s=hs.studiableMediaConnections.SUPPORTED_MEDIA_TYPES.map((t=>{var s={connectionType:i.$Gk.MULTIPLE_CHOICE_OPTION_EXPLANATION,mediaType:t};return s.connectionModelId=e.id,s.connectionModelLuid=Pe()(e.luid),s})),r=ca.bulkAdd(s),n=[];for(var o in r)n.push(Object.assign({},r[o],{luid:o}));t(_a(n)),n.length>0&&t(Ea(n[0]))}},La=e=>t=>{e.luid&&na.del(e.luid).then(t(Sa(e)))},Pa=e=>t=>{t(Ca(e))},Ma=(e,t,s)=>r=>{var n=na.getModel(s),o=function(e,t,s){var r=Object.assign({},s),{connectionType:n,connectionModelId:o}=e;switch(n){case i.$Gk.MULTIPLE_CHOICE_OPTION:case i.$Gk.MULTIPLE_CHOICE_OPTION_EXPLANATION:r.options=Ko()(r.options.map((e=>{if(e.optionId===o){var s=Object.assign({},e);return n===i.$Gk.MULTIPLE_CHOICE_OPTION&&(s.optionMedia=s.optionMedia.filter((e=>e.type!==t))),n===i.$Gk.MULTIPLE_CHOICE_OPTION_EXPLANATION&&(s.explanationMedia=s.explanationMedia.filter((e=>e.type!==t))),s}return e})),"optionId");break;case i.$Gk.MULTIPLE_CHOICE_HINT:r.hintMedia=r.hintMedia.filter((e=>e.type!==t));break;case i.$Gk.MULTIPLE_CHOICE_PROMPT:r.promptMedia=r.promptMedia.filter((e=>e.type!==t));break;default:throw new Error("connection type "+n+" is not yet supported")}return r}(e,t,n.properties);na.save(s,o).then((()=>{switch(t){case i.DDH.TEXT:e.text&&delete e.text;break;case i.DDH.IMAGE:e.image&&delete e.image;break;case i.DDH.VIDEO:e.video&&delete e.video;break;default:throw new Error("media type "+t+" is not currently supported")}r(va(e));var s={connectionModelId:e.connectionModelId,connectionModelLuid:e.connectionModelLuid,connectionType:e.connectionType,mediaType:t},n=ca.add(s);r(_a([Object.assign({},s,{luid:n})]))}))},Za=(e,t)=>s=>{if(null!=e&&e.luid){var r=na.getModel(t),{properties:i}=r,n=Object.assign({},i,{options:[...i.options].filter((t=>t.optionId!==e.id))});r.setAll(n),na.save(t,n,!0).then((()=>{s(fa(e))}))}},ka=e=>(t,s)=>{var r=s().get("createSet"),i=r.get("optionSaveStatus").toJS(),n=r.get("mediaSaveStatus").toJS(),{options:o,studiableItemLuid:a}=e;i.promise.then((()=>{n.promise.then((()=>{var e=na.getModel(a),{properties:s}=e,r={};o.forEach((e=>{var t=vs.getModel(e.luid);t.set("isCorrect",e.isCorrect),r[e.luid]=t.properties})),e.setAll({options:ea(s.options,r)}),na.save(a,e.properties,!0).then((()=>{Object.keys(r).forEach((e=>{var s=r[e];t(xa([Object.assign({},s,{luid:e})]))}))}))}))}))},Ua=(e,t,s)=>(r,n)=>{var o=ca.getModel(t),a=n().get("createSet").get("studiableMediaConnections").toJS(),l=n().get("createSet").get("multipleChoiceOptions").toJS(),d=[],{properties:u}=o;for(var c in u)c.match(/[Ll]uid$/)&&d.push(c);d.forEach((e=>{delete u[e]})),o.setAll(Object.assign({},e));var p=na.getModel(s),h=Object.assign({},p.properties,{promptMedia:$o(p.properties.id,a),hintMedia:Xo(p.properties.id,a),options:Jo(p.properties,a,l)});h=function(e,t){var s=Object.assign({},e),{connectionType:r,connectionModelId:n}=t;switch(r){case i.$Gk.MULTIPLE_CHOICE_OPTION:case i.$Gk.MULTIPLE_CHOICE_OPTION_EXPLANATION:s.options=Ko()(s.options.map((e=>{if(e.optionId===n){var s=Object.assign({},e);return r===i.$Gk.MULTIPLE_CHOICE_OPTION&&(s.optionMedia=ta(e.optionMedia,t)),r===i.$Gk.MULTIPLE_CHOICE_OPTION_EXPLANATION&&(s.explanationMedia=ta(e.explanationMedia,t)),s}return e})),"optionId");break;case i.$Gk.MULTIPLE_CHOICE_HINT:s.hintMedia=ta(s.hintMedia,t);break;case i.$Gk.MULTIPLE_CHOICE_PROMPT:s.promptMedia=ta(s.promptMedia,t);break;default:throw new Error("connection type "+r+" is not yet supported")}return s}(h,e),p.setAll(Object.assign({},h));var g=na.save(s,h,!0);r(Ia({luid:e.connectionModelLuid,promise:g})),g.then((s=>{var[n,o]=s,{properties:{lastModified:a,timestamp:l}}=o,d=Object.assign({},e,{luid:t,lastModified:a,timestamp:l});r(_a([d])),e.connectionType===i.$Gk.MULTIPLE_CHOICE_OPTION&&r(Ta({luid:null,promise:Promise.resolve(!0)})),e.mediaType===i.DDH.IMAGE&&r(ya({image:null,isLoading:!1,connectionLuid:null,connectionType:null})),r(Ia({luid:null,promise:Promise.resolve(!0)}))}))},Na=(e,t)=>{var{mediaConnection:s,type:r,value:n,studiableContainerId:o,connectionModelId:a,studiableItemLuid:l}=t,d=s.map((e=>e)).filter((e=>e.mediaType===r)),u=Pe()(d[0].luid),c={},p=r===i.DDH.IMAGE?Object.assign({code:n.code},n):{};switch(r){case i.DDH.TEXT:delete n.ttsUrl,delete n.ttsSlowUrl,c.text=n;break;case i.DDH.IMAGE:c.image=p;break;case i.DDH.VIDEO:c.video=Object.assign({},n,{code:n.code||null});break;default:throw new Error("media type not supported yet")}var h=Object.assign({studiableContainerType:i.MG.SET,studiableContainerId:o,mediaType:r,connectionModelId:a,connectionType:d[0].connectionType},c);e(Ua(h,u,l))},Fa=e=>(t,s)=>{var{item:r,option:n,value:o,type:a}=e,l=s().get("createSet").get("setLuid"),d=s().get("createSet").get("studiableMediaConnections").toJS(),u=s().get("createSet").get("multipleChoiceOptions").toJS();Aa(Pe()(r.luid),l).then((e=>{la.getModel(Pe()(r.luid)).setAll({id:e.properties.id,lastModified:e.properties.lastModified});var s=function(e,t,s,r,n){var o=Ai.Z.getModel(e),a=vs.getModel(s),l=na.getModel(t),{properties:d}=o,{properties:u}=l;if(a.setAll({studiableContainerType:i.MG.SET,studiableContainerId:d.id,studiableItemId:u.id}),a.properties.id)return Promise.resolve(a);var c=$o(u.id,r),p=Xo(u.id,r),h=Jo(u,r,n),g=Ko()([...h,{isCorrect:!1,optionId:parseInt(s.split("-")[1],10),optionMedia:[],explanationMedia:[]}],"optionId");return l.setAll(Object.assign({},u,{promptMedia:c,hintMedia:p,options:g})),l.save(t)}(l,Pe()(r.luid),Pe()(n.luid),d,u);return t(Ta({luid:n.luid,promise:s})),s})).then((e=>{var s=e;if(e.properties.options){var i=e.properties.options[e.properties.options.length-1];(s=vs.getModel(Pe()(n.luid))).setAll({id:i.optionId})}var d=Ai.Z.getModel(l),u=la.getModel(Pe()(r.luid)),{properties:c}=d,{properties:p}=u,{properties:h}=s,{promptConnectionMedia:g,options:m}=r,{optionConnectionMedia:_,explanationConnectionMedia:f}=n;t(ja(Object.assign({},p,{luid:Pe()(r.luid)})));var v=g.map((e=>Object.assign({},e,{connectionModelId:p.id,studiableContainerId:c.id})));t(_a(v));var S=_.map((e=>Object.assign({},e,{studiableContainerId:c.id,connectionModelId:h.id})));t(_a(S));var C=m.map((e=>{var{luid:t}=e,s=vs.getModel(Pe()(t)),{properties:r}=s,i=Object.assign({},r,{studiableItemId:h.studiableItemId,luid:t});return e.luid===n.luid&&(i=Object.assign({},h,{luid:t})),i}));if(t(xa(C)),f.length>0){var b=f.map((e=>Object.assign({},e,{connectionModelId:h.id})));t(_a(b))}Na(t,{mediaConnection:_,type:a,value:o,studiableContainerId:c.id,connectionModelId:h.id,studiableItemLuid:Pe()(r.luid)})}))},Ba=e=>(t,s)=>{var{item:r,value:i,type:n}=e,o=s().get("createSet").get("setLuid");Aa(Pe()(r.luid),o).then((e=>{var s=Ai.Z.getModel(o),{properties:a}=s,{properties:l}=e,{promptConnectionMedia:d}=r;la.getModel(Pe()(r.luid)).setAll({id:e.properties.id,lastModified:e.properties.lastModified}),t(ja(Object.assign({},l,{luid:Pe()(r.luid)})));var u=d.map((e=>Object.assign({},e,{connectionModelId:l.id,studiableContainerId:a.id})));t(_a(u));var{hintConnectionMedia:c}=r;if(c.length>0){var p=c.map((e=>Object.assign({},e,{connectionModelId:l.id})));t(_a(p))}Na(t,{mediaConnection:d,type:n,value:i,studiableContainerId:a.id,connectionModelId:l.id,studiableItemLuid:Pe()(r.luid)});var{options:h}=r,g=h.map((e=>{var{luid:t}=e,s=vs.getModel(Pe()(t)),{properties:r}=s;return Object.assign({},r,{studiableItemId:l.id,luid:t})}));t(xa(g))}))},Ha=e=>(t,s)=>{var{item:r,value:i,type:n}=e,{hintConnectionMedia:o}=r,a=s().get("createSet").get("setLuid"),l=Ai.Z.getModel(a),{properties:d}=l;Na(t,{mediaConnection:o,type:n,value:i,studiableContainerId:d.id,connectionModelId:r.id,studiableItemLuid:Pe()(r.luid)})},Va=e=>(t,s)=>{var{value:r,type:i,option:n,item:o}=e,{explanationConnectionMedia:a}=n,l=s().get("createSet").get("setLuid"),d=Ai.Z.getModel(l),{properties:u}=d;Na(t,{mediaConnection:a,type:i,value:r,studiableContainerId:u.id,connectionModelId:n.id,studiableItemLuid:Pe()(o.luid)})},Ga=e=>t=>{var{file:s,selectedMediaConnection:r,parentStudiables:n}=e;if(["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e.file))>-1){var o=new FileReader;o.onload=e=>{var s=e.target?e.target.result:null;s&&s.length>0&&(0,pa.mw)(s).then((e=>{t(ya({image:Object.assign({image_url:s},e),isLoading:!0,connectionLuid:r.connectionModelLuid,connectionType:r.connectionType}))}))},o.readAsDataURL(e.file)}var a=q.Z.add({});q.Z.save(a,s).then((e=>{var[s,o]=e,{properties:a}=o,{item:l,option:d}=n,u={code:a.code,url:a._secureLegacyUrl,width:a.width,height:a.height};switch(r.connectionType){case i.$Gk.MULTIPLE_CHOICE_PROMPT:t(Ba({item:l,value:Object.assign({},u),type:i.DDH.IMAGE}));break;case i.$Gk.MULTIPLE_CHOICE_OPTION:t(Fa({item:l,option:Pe()(d),value:Object.assign({},u),type:i.DDH.IMAGE}));break;case i.$Gk.MULTIPLE_CHOICE_HINT:t(Ha({item:l,value:Object.assign({},u),type:i.DDH.IMAGE}));break;case i.$Gk.MULTIPLE_CHOICE_OPTION_EXPLANATION:t(Va({item:l,option:Pe()(d),value:Object.assign({},u),type:i.DDH.IMAGE}))}})).catch((()=>{t(ya({image:null,isLoading:!1,connectionLuid:null,connectionType:null})),t(ba(!0))}))},Wa=s("./app/j/legacyAssistant/utils/MediaDataSource.ts"),za=s("./app/j/test/utils/createStudiableMultipleChoiceQuestions.ts"),qa=(0,qt.createSelector)([e=>e.get("studiableItems"),e=>e.get("multipleChoiceOptions"),e=>e.get("studiableMediaConnections")],((e,t,s)=>{var r={studiableItems:e.toJS(),multipleChoiceOptions:t.toJS(),studiableMediaConnections:s.toJS()};return(0,za.Z)(r,new Wa.Z(r),!0)})),Ka=s("./app/j/utils/withImmutablePropsToJS.tsx"),Ya=(0,ce.Z)("createSet",{diagramImage:ae.hJ,imageUploadStatus:e=>e.get("imageUploadStatus"),isEditingDiagramImage:ae.IL,numDiagramShapes:ae.d_,selectedMediaConnection:e=>{var t;return null==(t=e.get("selectedMediaConnection"))?void 0:t.toJS()},showImageUploadErrorModal:e=>e.get("showImageUploadErrorModal"),studiableMultipleChoiceQuestions:qa,wordLang:ae.dj}),Qa=(0,de.connect)(Ya,(e=>{var t=(0,ue.bindActionCreators)({addOptionsForStudiableItem:wa,addOrUpdateStudiableMediaConnectionWithMedia:_a,createStudiableItem:Oa,deleteMultipleChoiceOption:Za,deleteStudiableMediaConnection:Ma,moveStudiableItem:Pa,removeStudiableItem:La,saveMultipleChoiceOption:ka,toggleShowImageUploadErrorModal:ba,toggleExplanation:Da,toggleHint:Ra,updateExplanationMedia:Va,updateHintMedia:Ha,updateOptionMedia:Fa,updateQuestionMedia:Ba,updateSelectedMediaConnection:Ea,uploadImageMedia:Ga},e);return Object.assign({},t)}),null,{context:n.tC})((0,Ka.Z)(zo)),$a=s("./app/j/core/legacy_store/LegacyStore.ts"),Xa=s("./app/j/utils/createOrAppendToMappedArray.ts"),Ja=new Map,el=new Map;function tl(e,t){var{models:s}=la;return(null!==s?Object.keys(s):[]).map((s=>function(e,t,s){var r=la.getModel(t),{properties:n}=r;return Ja.set(n.id,t),s.get(t)||ca.bulkAdd([{studiableContainerType:n.studiableContainerType,studiableContainerLuid:n.studiableContainerLuid,connectionModelLuid:n.luid,connectionModelId:n.id,connectionType:i.$Gk.MULTIPLE_CHOICE_PROMPT,mediaType:i.DDH.TEXT}]),Object.assign({},n,{studiableContainerLuid:e,studiableContainerType:i.MG.SET,luid:t})}(e,s,t)))}var sl=e=>{var t=function(e){var{models:t}=ca,s=new Map;return(null!==t?Object.keys(t):[]).forEach((t=>{var r=ca.getModel(t),{properties:n}=r,{connectionModelLuid:o}=n,a=Object.assign({},n,{studiableContainerLuid:e,studiableContainerType:i.MG.SET,luid:t});(0,Xa.Z)(s,o,a)})),s}(e),s=tl(e,t),r=function(e,t){var{models:s}=vs,r=null!==s?Object.keys(s):[],n=[],o=r.map((s=>{var r=vs.getModel(s),{properties:o}=r,a=Object.assign({},o,{studiableContainerType:i.MG.SET,studiableContainerLuid:e,luid:s}),l=Ja.get(o.studiableItemId);return l&&(a.studiableItemLuid=l),el.set(o.id,s),t.get(s)||n.push({studiableContainerType:a.studiableContainerType,studiableContainerLuid:a.studiableContainerLuid,connectionModelLuid:a.luid,connectionModelId:a.id,connectionType:i.$Gk.MULTIPLE_CHOICE_OPTION,mediaType:i.DDH.TEXT}),a}));return n.length>0&&ca.bulkAdd(n),o}(e,t),n=function(e){var{models:t}=ca,s=new Map;(null!==t?Object.keys(t):[]).forEach((t=>{var r,n=ca.getModel(t),{properties:o}=n,{connectionModelId:a,connectionType:l}=o,d=Object.assign({},o,{studiableContainerLuid:e,studiableContainerType:i.MG.SET,luid:t});switch(l){case i.$Gk.MULTIPLE_CHOICE_PROMPT:case i.$Gk.MULTIPLE_CHOICE_HINT:r=Ja.get(a);break;case i.$Gk.MULTIPLE_CHOICE_OPTION:case i.$Gk.MULTIPLE_CHOICE_OPTION_EXPLANATION:r=el.get(a)}r&&(d.connectionModelLuid=r);var u=o.connectionModelId+"_"+o.connectionType;(0,Xa.Z)(s,u,d)}));var r=[],n=function(e,t){var s=t.map((e=>e.mediaType));hs.studiableMediaConnections.SUPPORTED_MEDIA_TYPES.forEach((e=>{s.includes(e)||r.push({studiableContainerType:t[0].studiableContainerType,studiableContainerLuid:t[0].studiableContainerLuid,connectionModelLuid:t[0].connectionModelLuid,connectionModelId:t[0].connectionModelId,connectionType:t[0].connectionType,mediaType:e})}))};for(var[o,a]of s)n(0,a);var l=Array.from(s.values()).reduce(((e,t)=>e.concat(t)),[]);if(r.length>0){var d=ca.bulkAdd(r),u=[];for(var c in d)u.push(Object.assign({},d[c],{luid:c}));return l.concat(u)}return l}(e),o=n&&n.length>0?n[0]:null;return{imageUploadStatus:{image:null,isLoading:!1,connectionLuid:null,connectionType:null},mediaSaveStatus:{luid:null,promise:Promise.resolve(!0)},optionSaveStatus:{luid:null,promise:Promise.resolve(!0)},setLuid:e,studiableItems:s,studiableMediaConnections:n,multipleChoiceOptions:r,selectedMediaConnection:o,showImageUploadErrorModal:!1}},rl={[ha.ADD_OPTION]:(e,t)=>{var{payload:s}=t;return e.updateIn(["multipleChoiceOptions"],(e=>e.concat((0,xt.fromJS)(s))))},[ha.ADD_OR_UPDATE_STUDIABLE_MEDIA_CONNECTION]:(e,t)=>{var{payload:s}=t,r=e.get("studiableMediaConnections"),n=[],o=r,a=function(e){var t=o.findIndex((t=>t.get("luid")===e.luid));if(t>-1){var s=o.get(t);e.mediaType===i.DDH.TEXT&&(s=s.set("text",(0,xt.Map)()));var r=s.mergeDeep(e);o=o.set(t,r)}else n.push(e)};for(var l of s)a(l);return e.set("studiableMediaConnections",o.concat((0,xt.fromJS)(n)))},[ha.ADD_STUDIABLE_ITEM]:(e,t)=>{var{payload:s}=t;return e.updateIn(["studiableItems"],(e=>e.push((0,xt.fromJS)(s))))},[ha.DELETE_MULTIPLE_CHOICE_OPTION]:(e,t)=>{var{payload:s}=t,r=e.get("multipleChoiceOptions"),n=e.get("studiableMediaConnections"),o=r.filter((e=>e.get("luid")!==s.luid)),a=n.filter((e=>{var t=e.get("connectionType");return t!==i.$Gk.MULTIPLE_CHOICE_OPTION&&t!==i.$Gk.MULTIPLE_CHOICE_OPTION_EXPLANATION||e.get("connectionModelLuid")!==s.luid}));return e.set("multipleChoiceOptions",o).set("studiableMediaConnections",a)},[ha.DELETE_STUDIABLE_MEDIA]:(e,t)=>{var{payload:s}=t,r=e.get("studiableMediaConnections"),i=s.luid;return i&&(r=r.filter((e=>e.get("luid")!==i))),e.set("studiableMediaConnections",r)},[ha.DELETE_STUDIABLE_ITEM]:(e,t)=>{var{payload:s}=t,r=e.get("studiableItems"),n=e.get("multipleChoiceOptions"),o=e.get("studiableMediaConnections"),a=n.filter((e=>e.get("studiableItemLuid")===s.luid)).map((e=>e.get("luid"))),l=r.filter((e=>e.get("luid")!==s.luid)),d=n.filter((e=>e.get("studiableItemLuid")!==s.luid)),u=o.filter((e=>{var t=e.get("connectionType");if(t===i.$Gk.MULTIPLE_CHOICE_PROMPT||t===i.$Gk.MULTIPLE_CHOICE_HINT)return e.get("connectionModelLuid")!==s.luid;if(t===i.$Gk.MULTIPLE_CHOICE_OPTION||t===i.$Gk.MULTIPLE_CHOICE_OPTION_EXPLANATION){var r=e.get("connectionModelLuid");return r&&!a.includes(r)}return!0}));return e.set("studiableItems",l).set("multipleChoiceOptions",d).set("studiableMediaConnections",u)},[ha.MOVE_STUDIABLE_ITEM]:(e,t)=>{var{payload:s}=t,r=e.get("studiableItems"),i=r.findIndex((e=>e.id===s.id)),n=Pe()(r.get(i)),o=r.findIndex((e=>e.id===s.idAtNewPosition)),a=r;return a=i<o?r.delete(i).insert(o,n):r.delete(i).insert(o--,n),e.set("studiableItems",a)},[ha.SHOW_IMAGE_UPLOAD_ERROR_MODAL]:(e,t)=>{var{payload:s}=t;return e.set("showImageUploadErrorModal",s)},[ha.SET_IMAGE_UPLOADING_STATUS]:(e,t)=>{var{payload:s}=t;return e.set("imageUploadStatus",(0,xt.fromJS)(s))},[ha.UPDATE_MEDIA_SAVE_STATUS]:(e,t)=>{var{payload:s}=t;return e.set("mediaSaveStatus",(0,xt.fromJS)({luid:s.luid,promise:s.promise}))},[ha.UPDATE_MULTIPLE_CHOICE_OPTION]:(e,t)=>{var{payload:s}=t,r=e.get("multipleChoiceOptions"),i=[],n=r,o=function(e){var t=n.findIndex((t=>t.get("luid")===e.luid));if(t>-1){var s=n.get(t).mergeDeep((0,xt.fromJS)(e));n=n.set(t,s)}else i.push(e)};for(var a of s)o(a);return e.set("multipleChoiceOptions",n.concat((0,xt.fromJS)(i)))},[ha.UPDATE_MULTIPLE_CHOICE_OPTION_SAVE_STATUS]:(e,t)=>{var{payload:s}=t;return e.set("optionSaveStatus",(0,xt.fromJS)({luid:s.luid,promise:s.promise}))},[ha.UPDATE_STUDIABLE_ITEM]:(e,t)=>{var{payload:s}=t,r=e.get("studiableItems"),i=r.findIndex((e=>e.get("luid")===s.luid));if(i>=0){var n=r.set(i,(0,xt.fromJS)(s));return e.set("studiableItems",n)}return e},[ha.UPDATE_SELECTED_MEDIA_CONNECTION]:(e,t)=>{var{payload:s}=t;return e.set("selectedMediaConnection",(0,xt.fromJS)(s))}};function il(e){var t=[],s=[];return e.forEach((e=>{var r=function(e){var{id:t,lastModified:s,rank:r,studiableContainerId:n,studiableContainerType:o,timestamp:a}=e;return{id:t,lastModified:s,rank:r,studiableContainerId:n,studiableContainerType:o,timestamp:a,type:i.zqd.MULTIPLE_CHOICE_QUESTION}}(e);t.push(r),e.options.forEach((t=>{var r=function(e,t,s){var{optionId:r,isCorrect:i,rank:n}=e;return{id:r,isCorrect:i,lastModified:s,rank:n,studiableItemId:t}}(t,e.id,e.lastModified);s.push(r)}))})),{legacyStudiableItems:t,legacyMultipleChoiceOptions:s}}var nl=s("./app/j/diagrams/QLeafletDraw.ts"),ol=s("./node_modules/domready/ready.js"),al=s.n(ol),ll=s("./app/j/syncers/ClassSetSyncer.ts"),dl=s("./app/j/models/QClass.ts"),ul={};Object.assign(ul,_s.Z),ul.init(dl.Z);var cl=ul,pl=s("./app/j/syncers/DiagramShapeSyncer.ts"),hl=s("./app/j/syncers/ImageRefSyncer.ts"),gl=s("./app/j/utils/renderReactAppToDOM.tsx"),ml=s("./app/j/utils/xhp.ts");function _l(){return fl.apply(this,arguments)}function fl(){return(fl=(0,r.Z)((function*(){nr()(yt.Z.createSetData,"Create set data object required to load the create set page");var{canEditRichText:e,countryCode:t,diagramImage:s,diagramImageRef:r,diagramShapes:o,edgyDataInitialSchool:a,edgyDataInitialCourses:l,edgyEmptyStateData:d,isDiagramSet:u,isMobileWebView:c,maxAllowedDiagramShapeCount:p,misc:h,preselectedCourse:m,setContentType:_,shouldLogForRichTextDebugging:f,shouldShowEdgyData:v,shouldShowMCQUpsell:S,shouldShowTeacherCustomDistractorCreation:C,shouldShowVideoExplanationCreation:b,shouldShowTooltipAudio:y,shouldShowTooltipDiagram:E,shouldShowTooltipImage:j,shouldShowTooltipRichText:x,shouldUseStudiableServiceToDeleteDiagramShape:T,signupOrigin:I,user:w}=yt.Z.createSetData,{classSets:A,classes:O,definitionCustomAudios:R,images:D,set:L,studiableMediaConnections:P,studiableItemDocuments:M,termImages:Z,terms:k,wordCustomAudios:U}=yt.Z.createSetData,N=!(!L||0!==L.publishedTimestamp),F=!!w,{canEditPermissions:B,canUseDiagramUpload:H,canUseImageUpload:G,canUsePremiumDiagramFeatures:W,canUseVoiceRecording:z,classToAddTo:Y,didJustUpgrade:Q,folderToAddTo:$,hasCreatedSets:X,hideAutosavePrompt:J,isConfirmed:ee,isIOS:te,isMac:se,isUnderAge:re,recentLanguages:ie,shouldSaveDiagramShapeImmediately:ne,shouldSeeDiagramBlurTooltip:oe,shouldShowAd:le,voiceRecordingConfig:de,voiceRecordingUpsellImage:ue}=h,ce=re&&!ee?i.iQw.NOT_PUBLIC:i.iQw.PUBLIC_ACCESS;L||(L={accessType:ce}),k||(k=[]),D||(D=[]),Z||(Z=[]),U||(U=[]),R||(R=[]),O||(O=[]),P||(P=[]),A||(A=[]),Y&&A.push({classId:Y}),M||(M=[]);var pe=[];$&&pe.push({folderId:$}),yield(0,nl.C)();var he=Ai.Z.add(L);Ro.Z.setup(he,L),Do.Z.setup(w);var ge={[he]:L},me=cl.bulkAdd(O),_e=ll.Z.bulkAdd(A),fe=cs.Z.bulkAdd(pe),ve=K.Z.bulkAdd(k),Se=wi.bulkAdd(U),be=wi.bulkAdd(R),ye=q.Z.bulkAdd(D),Ee=pl.Z.bulkAdd(o||[]),je=s?q.Z.add(s):null,xe=r?hl.Z.add(r):null,{legacyStudiableItems:Te,legacyMultipleChoiceOptions:Ie}=il(M);la.bulkAdd(Te),vs.bulkAdd(Ie),ca.bulkAdd(P),na.bulkAdd(M);var we=!!s||"diagrams"===_;wi.configure(de),To.Z.setup(me),xo.Z.setup(_e,me,ge),us.setup(fe),ao.setup(ye),V.ZP.setup(ve,Se,be,ye,we),ro.setup(Object.assign({},Se,be)),Oo.Z.setup(L,me,_e,xo.Z.getClassMap(),B),Ao.setup(),uo.setup(),ko.Z.setup({ClassSetSyncer:ll.Z,ClassSyncer:cl,CustomAudioSyncer:wi,FolderSetSyncer:cs.Z,ImageSyncer:q.Z,MultipleChoiceOptionSyncer:vs,SetSyncer:Ai.Z,StudiableItemSyncer:la,StudiableItemDocumentSyncer:na,StudiableMediaConnectionSyncer:ca,TermSyncer:K.Z});var Ae={canEditPermissions:B,canEditRichText:e,canUseImageUpload:G,canUsePremiumDiagramFeatures:W,canUseVoiceRecording:z,didJustUpgrade:Q,hasCreatedSets:X,hideAutosavePrompt:J,isConfirmed:ee,isDiagramSet:u,isIOS:te,isMac:se,isMobileWebView:c,isResumingCreate:N,isSignedIn:F,isUnderAge:re,preselectedCourse:m,recentLanguages:ie,setContentType:_,shouldLogForRichTextDebugging:f,shouldShowAd:le,shouldShowMCQUpsell:S,shouldShowTeacherCustomDistractorCreation:C,shouldShowVideoExplanationCreation:b,shouldShowTooltipAudio:y,shouldShowTooltipDiagram:E,shouldShowTooltipImage:j,shouldShowTooltipRichText:x,signupOrigin:I,voiceRecordingUpsellImage:ue},Oe=Pe()((0,ml.EE)("SetPage")),Re={canUseDiagramUpload:H,canUseImageUpload:G,canUsePremiumDiagramFeatures:W,canUseVoiceRecording:z,diagramImage:s,diagramImageLuid:je,diagramImageRefLuid:xe,diagramShapes:Ee,isUnderAge:re,isTeacher:(null==w?void 0:w.selfIdentifiedTeacherStatus)===i.IXc.TEACHER,maxAllowedDiagramShapeCount:p,recentLanguages:ie,setContentType:_,setLuid:he,shouldSaveDiagramShapeImmediately:ne,shouldSeeDiagramBlurTooltip:oe,shouldShowTooltipDiagram:E,shouldUseStudiableServiceToDeleteDiagramShape:T,terms:ve},De=(0,sa.jZ)(Object.assign({},ae.ZP,rl),(0,xt.fromJS)(Object.assign({},Re,sl(Re.setLuid))));$a.Z.registerReducer("createSet",De),(0,Kt.ZP)(),(0,Vt.ZP)({countryCode:t,edgyDataInitialSchool:a,edgyDataInitialCourses:l,edgyEmptyStateData:d,shouldShowEdgyData:v,user:w}),Ro.Z.change(),(0,gl.Z)((0,g.jsx)(Ce.ZP,{children:(0,g.jsx)(n.ZP,{children:(0,g.jsx)(Qa,Object.assign({},Ae))})}),Oe)}))).apply(this,arguments)}pr().filter=function(e){var t=e.target||e.srcElement,{tagName:s}=t,r=t.getAttribute("class"),i="INPUT"!==s&&"SELECT"!==s,n=r&&r.indexOf("js-keymaster-allow")>=0;return i||n},al()((()=>{QWait("Quizlet.createSetData",_l)}))},"./app/j/create_set/diagrams.ts":(e,t,s)=>{"use strict";s.d(t,{yd:()=>Re,vi:()=>Ie,ZP:()=>nt,h8:()=>Be,ej:()=>He,LE:()=>Xe,CT:()=>Ye,_T:()=>rt,f8:()=>et,P5:()=>Qe,j0:()=>Ke,D6:()=>$,ZO:()=>Ee,hJ:()=>fe,f6:()=>ze,ky:()=>Se,kA:()=>Q,_:()=>ne,dg:()=>qe,En:()=>oe,IL:()=>Ge,cI:()=>Ve,Iq:()=>ae,jl:()=>he,d_:()=>de,Ry:()=>ge,ux:()=>me,xx:()=>ce,dn:()=>je,Ed:()=>re,S6:()=>ee,dj:()=>ie,UF:()=>X,xy:()=>J,O1:()=>pe,jS:()=>ye,V5:()=>Y,W0:()=>le,i_:()=>Oe,TY:()=>Ne,gz:()=>Ue,Ix:()=>it});s("./node_modules/core-js/modules/es.array.reduce.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.json.stringify.js"),s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/web.url.to-json.js");var r=s("./app/j/components/LegacyTermText.tsx"),i=s("./app/j/config/enums.ts"),n=s("./app/j/constants/MimeTypeConstants.ts"),o=s("./app/j/core/legacy_store/LegacyStore.ts"),a=s("./app/j/create_set/actions/SetActionCreators.ts"),l=s("./app/j/create_set/actions/TermActionCreators.ts"),d=s("./app/j/create_set/constants.ts"),u=(s("./app/j/create_set/constants/ImageConstants.ts"),s("./app/j/create_set/constants/SetConstants.ts")),c=s("./app/j/create_set/stores/SetStore.ts"),p=s("./app/j/create_set/stores/TermStore.ts"),h=s("./app/j/diagrams/DiagramConstants.ts"),g=(s("./app/j/dispatchers/AppDispatcher.ts"),s("./app/j/global/Rollbar.ts")),m=s("./app/j/i18n/$t.ts"),_=s("./node_modules/immutable/dist/immutable.js"),f=s("./node_modules/redux-actions/lib/index.js"),v=s("./node_modules/reselect/lib/index.js"),S=s("./app/j/syncers/DiagramShapeSyncer.ts"),C=s("./app/j/syncers/ImageRefSyncer.ts"),b=s("./app/j/syncers/ImageSyncer.ts"),y=s("./app/j/models/QModel.ts");class E extends y.Z{}E.URL_BASE="diagram-shapes",E.MODEL_NAME="diagramShape",E.PARTITION_COLUMN="termId";var j=s("./app/j/syncers/LegacySyncer.ts"),x=Object.assign({},j.Z);x.init(E);var T=x,I=s("./app/j/syncers/SetSyncer.ts"),w=s("./app/j/syncers/TermSyncer.ts"),A=s("./app/j/upgrade/UpsellsHelper.ts"),O=s("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");s("./node_modules/core-js/modules/es.array-buffer.slice.js"),s("./node_modules/core-js/modules/es.typed-array.uint8-clamped-array.js"),s("./node_modules/core-js/modules/esnext.typed-array.at.js"),s("./node_modules/core-js/modules/es.typed-array.sort.js"),s("./node_modules/core-js/modules/es.typed-array.to-locale-string.js");function R(){return new Worker(("string"==typeof window.__worker_public_path__?window.__worker_public_path__:"https://quizlet.com/a/j/dist/")+"BlurImageDataWorker.c9d481468237a20a84a4.worker.js")}class D{constructor(e){this.value=e}}function L(e){return new D(e)}function P(e){return e instanceof D}function M(e){return e instanceof D?e.value:e}var Z,k=(e,t,s,r)=>{var i,n,o;return Z||(i=0,n={},(o=new R).onmessage=e=>{var{id:t,returnValue:s}=function(e){return e.data}(e),r=n[t];r&&r(s)},Z={request(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];var a=i++;return new Promise((t=>{n[a]=t;var r=s.map(M),i=s.filter(P).map(M),l={args:r,command:e,id:a},d=i.length?[l,i]:[l];o.postMessage(...d)}))}}),Z.request("blur",e,t,s,r)};function U(e,t){return N.apply(this,arguments)}function N(){return(N=(0,O.Z)((function*(e,t){void 0===t&&(t=50);var{height:s,width:r}=e,i=L(yield Promise.resolve(e.data.buffer.slice(0))),n=yield k(i,r,s,t),o=new Uint8ClampedArray(n);return e.data.set(o),e}))).apply(this,arguments)}var F=s("./app/j/utils/FileListHelper.ts"),B=s("./app/j/utils/ImageSourceHelper.ts"),H=s("./app/j/utils/Leaflet.ts");var V=s("./app/j/utils/log-page-action.ts"),G=s("./app/j/utils/logNavigationEvent.ts"),W=s("./app/j/utils/logSubscriptionEvent.ts"),z=s("./app/j/utils/mapWithKeys.ts"),q=s("./app/j/view_models/ImageViewModel.ts");var K=e=>e.get("createSet"),Y=e=>e.get("terms"),Q=e=>e.get("diagramShapes"),$=e=>e.get("canUsePremiumDiagramFeatures"),X=e=>e.get("shouldSeeDiagramBlurTooltip"),J=e=>e.get("shouldShowTooltipDiagram"),ee=e=>e.get("setLuid"),te=e=>e.get("setStore"),se=(0,v.createSelector)(te,(e=>e.get("set"))),re=((0,v.createSelector)(se,(e=>e.id)),(0,v.createSelector)(se,(e=>e.defLang))),ie=(0,v.createSelector)(se,(e=>e.wordLang)),ne=(0,v.createSelector)([te,re],((e,t)=>e.get("setValidationErrors").has("requires_def_lang")&&!t)),oe=(0,v.createSelector)([te,ie],((e,t)=>e.get("setValidationErrors").has("requires_word_lang")&&!t)),ae=e=>e.get("isTeacher"),le=e=>e.get("upsellModalSource"),de=(0,v.createSelector)(Q,(e=>e.count())),ue=(0,v.createSelector)([de,e=>e.get("maxAllowedDiagramShapeCount"),$],((e,t,s)=>s||e<t)),ce=e=>e.get("recentLanguages").toJS(),pe=(0,v.createSelector)([Q,Y],((e,t)=>e.reduce(((e,s,r)=>{var i=""+s.get("termId"),n=t.findKey((e=>""+e.get("id")===i));return!n&&w.Z.contains(i)&&(n=i),e.set(""+r,n)}),(0,_.Map)()))),he=(0,v.createSelector)([Q,pe],((e,t)=>e.reduce(((e,s,r)=>{var i=S.Z.getModel(r),n=t.get(r),o=w.Z.getModel(n);return i.isNewRecord()&&o.isNewRecord()?e.add(r):e}),(0,_.Set)()))),ge=(0,v.createSelector)(Y,(e=>e.filter((e=>e.get("id"))).count())),me=(0,v.createSelector)(Y,(e=>e.filter((e=>e.get("definition"))).count())),_e=(0,v.createSelector)(Y,(e=>e.count()<=2)),fe=e=>e.get("diagramImage"),ve=e=>e.get("diagramImageRefLuid"),Se=e=>e.get("diagramImageUploadError"),Ce=(0,v.createSelector)(fe,(e=>e.get("_secureLegacyUrlLarge")||e.get("_secureLegacyUrl"))),be=(0,v.createSelector)([Y,pe],((e,t)=>e.filter(((e,s)=>!t.contains(s))))),ye=(0,v.createSelector)(be,(e=>t=>e.filter((e=>e.get(r.dR)&&0===e.get(r.dR).toLowerCase().indexOf(t.toLowerCase()))))),Ee=e=>fe(e)||e.get("isSavingDiagramImage")?d.u.EDIT:d.u.UPLOAD,je=e=>e.get("setContentType"),xe=e=>e.get("shouldSaveDiagramShapeImmediately"),Te=(0,f.PH)(d.a.UPSELL_MODAL_OPEN),Ie=(0,f.PH)(d.a.UPSELL_MODAL_CLOSE),we=(0,f.PH)(d.a.NEW_DIAGRAM_SHAPE,(e=>{var t,{termLuid:s,termProps:r}=(t={rank:p.ZP.getOrder().length-1},{termLuid:w.Z.add(t),termProps:(0,_.Map)(t)}),i={shape:JSON.stringify(e.geoJson),termId:s},n=S.Z.add(i);return(0,_.Map)({diagramShape:(0,_.fromJS)(i),diagramShapeLuid:n,term:r,termLuid:s})})),Ae=((0,f.PH)(d.a.SEARCH_DIAGRAMS),(0,f.PH)(d.a.SEARCH_DIAGRAMS_FAILURE),(0,f.PH)(d.a.SEARCH_DIAGRAMS_RESET)),Oe=((0,f.PH)(d.a.SEARCH_DIAGRAMS_SUCCESS),e=>{var{geoJson:t}=e;return(e,s)=>{var r=K(s());return $(r)||(0,H.AK)(t)?ue(r)?e(we({geoJson:t})):((0,W.ZP)({action:i.Mpk.CLICK,fullActionName:"upsell_modal_diagram__max_shapes"}),void window.open((0,A.Qq)("diagram_max_shapes"))):((0,W.ZP)({action:i.Mpk.CLICK,fullActionName:"upsell_modal_diagram__custom_shape"}),void e(Te({source:"diagram_custom_shape"})))}}),Re=(0,f.PH)(d.a.NEW_DIAGRAM_SHAPE_CANCEL),De=(0,f.PH)(d.a.UPLOAD_IMAGE),Le=(0,f.PH)(d.a.UPLOAD_IMAGE_SUCCESS),Pe=(0,f.PH)(d.a.UPLOAD_IMAGE_FAILURE),Me=e=>{var t=b.Z.getModel(e).getValidationErrors();return 0===t.length?(0,m.Z)("errors.generic.request_failed"):"invalid_format"===t[0].identifier?(0,m.Z)("create_set.diagrams.file_format_warning"):t[0].message},Ze=(0,f.PH)(d.a.EDIT_DIAGRAM_SHAPE,(e=>{var{diagramShapeLuid:t,diagramShapeUpdates:s}=e;s.shape&&"string"!=typeof s.shape&&(s.shape=JSON.stringify(s.shape));var r=S.Z.getModel(t);r.setAll(s);var i=r.toJSON();return(0,_.fromJS)({diagramShape:i,diagramShapeLuid:t})})),ke=(0,f.PH)(d.a.EDIT_TERM),Ue=e=>{var{termLuid:t,termUpdates:s}=e;return(e,r)=>{var i=K(r()),n=ee(i),o=w.Z.getModel(t);o.setAll(s||{});var a=o.toJSON();e(ke((0,_.fromJS)({termLuid:t,term:a})));var d=pe(i).findKey((e=>e===t)),u=S.Z.getModel(d),c=xe(i),p=o.isNewRecord()||u.isNewRecord(),h=l.Z.update({luid:t,props:a,setLuid:n,syncDelayOverride:c||p});return p?h.then((()=>{var s=w.Z.getModel(t).toJSON();e(ke((0,_.fromJS)({termLuid:t,term:s}))),e((e=>{var{diagramShapeLuid:t,termLuid:s}=e;return(e,r)=>{var i=w.Z.getModel(s),n={termId:i.get("id"),setId:i.get("setId")};null===i.get("id")&&xe(K(r()))&&(0,V.Z)("term_id_null_in_link_diagram_shape_to_term"),e(Ze({diagramShapeLuid:t,diagramShapeUpdates:n}));var o=S.Z.getModel(t);o.setAll(n),S.Z.save(t,o.toJSON(),!0).then((s=>{var[r,i]=s;e(Ze({diagramShapeLuid:t,diagramShapeUpdates:i.toJSON()}))}))}})({diagramShapeLuid:d,termLuid:t}))})):h}},Ne=e=>{var{diagramShapeLuid:t,diagramShapeUpdates:s}=e;return(e,r)=>{var i=K(r()),n=pe(i).get(t),o=w.Z.getModel(n),a=$(i),l=xe(i);if(!a&&s.shape&&!(0,H.AK)(s.shape)){var d=S.Z.getModel(t).get("shape");return e(Ze({diagramShapeLuid:t,diagramShapeUpdates:s})),e(Ze({diagramShapeLuid:t,diagramShapeUpdates:{shape:d}})),(0,V.Z)("upsell_modal_diagram__custom_shape"),void e(Te({source:"diagram_custom_shape"}))}return o.isNewRecord()?e(Ze({diagramShapeLuid:t,diagramShapeUpdates:s})):new Promise((r=>{e(Ze({diagramShapeLuid:t,diagramShapeUpdates:s})),S.Z.save(t,s,l).then(r)}))}},Fe=(0,f.PH)(d.a.DELETE_DIAGRAM_SHAPE_SUCCESS),Be=e=>{var{luid:t,termLuid:s}=e;return(e,r)=>{if(!_e(K(r()))||!s){var i=s?l.Z.del(s):Promise.resolve(),n=K(r()).get("shouldUseStudiableServiceToDeleteDiagramShape")?S.Z:T;i.then((()=>n.del(t))).then((()=>{e(Fe({luid:t,termLuid:s}))}))}}},He=e=>{var{texts:t,side:s}=e;return(e,r)=>{var i=ee(K(r()));a.Z.detectLanguage(i,s,t)}},Ve=e=>e.get("isSavingDiagramImage"),Ge=e=>e.get("isEditingDiagramImage"),We=e=>e.get("diagramImageEdits",(0,_.List)()),ze=(0,v.createSelector)(We,(e=>e.last())),qe=(0,v.createSelector)(We,(e=>e.count()>0)),Ke=(0,f.PH)(d.a.DIAGRAM_IMAGE_UNDO,(()=>(0,V.Z)("diagram_image_editor__undo"))),Ye=(0,f.PH)(d.a.DIAGRAM_IMAGE_CANCEL_EDIT,(()=>(0,V.Z)("diagram_image_editor__cancel"))),Qe=(0,f.PH)(d.a.DIAGRAM_IMAGE_START_EDIT,(()=>(0,V.Z)("diagram_image_editor__start"))),$e=(0,f.PH)(d.a.DIAGRAM_IMAGE_EDIT),Xe=e=>(t,s)=>{(0,V.Z)("diagram_image_editor__blur");var r=K(s()),i=ze(r)||Ce(r);((e,t)=>(0,B.f7)(t).then((s=>{var r=s.width/h.iR,i=(0,B.AE)(s),n=e.map((e=>{var t=Math.floor(e.x1*r),s=Math.floor(e.y1*r),n=Math.floor(e.x2*r),o=Math.floor(e.y2*r),a=n-t,l=o-s;return a&&l?Promise.resolve(i.getImageData(t,s,a,l)).then(U).then((e=>i.putImageData(e,t,s))):Promise.resolve()}));return Promise.all(n).then((()=>s.toDataURL("image/jpeg",1))).catch((e=>{throw g.Z.error(e,{imgUrl:t}),e}))})))([e],i).then((e=>t($e(e))))},Je=(0,f.PH)(d.a.DIAGRAM_IMAGE_SAVE),et=()=>(e,t)=>{(0,V.Z)("diagram_image_editor__save");var s=ze(K(t()));if(!s)return e(Ye());var r=ve(K(t())),i=b.Z.add({});e(Je()),(0,B._t)(s).then((e=>b.Z.save(i,e))).then((e=>{var[,t]=e;return C.Z.save(r,{imageId:t.get("id")},!0).then((e=>{var[,s]=e;return{image:t,imageRef:s}}))})).then((t=>{var{image:s,imageRef:r}=t;e(Ye()),e(Le({image:s.toJSON(),imageRef:r.toJSON()}))}))},tt=(0,f.PH)(d.a.DIAGRAM_IMAGE_DELETE),st=(0,f.PH)(d.a.DIAGRAM_IMAGE_DELETE_SUCCESS),rt=()=>(e,t)=>{var s=K(t()),r=ve(s),i=Q(s).keySeq();e(tt()),(0,V.Z)("diagram_image_editor__delete"),(i.count()?S.Z.bulkDel(i):Promise.resolve()).then((()=>C.Z.del(r))).then((()=>{e(st())}))},it=e=>{var{fileList:t}=e;return(e,s)=>{if(r=s(),!(e=>e.get("isUnderAge"))(K(r))||$(K(r))){var r,{matching:o,nonMatching:d,numTotal:c}=(0,F.e)(t,n.HT);if(o.length){(0,G.Z)("create_set_page",i.Qje.CREATE,"diagrams_add_image"),function(){for(var e=w.Z.models,t=Object.keys(e),s=0;s<Math.min(t.length,u.Rj.MIN_TERMS_BLANK_SET);s++){var r=t[s],i=e[r];i.isNewRecord()&&!w.Z.hasQueuedOpsForLuid(r)&&p.ZP.getPhantomRow()!==r&&0===Object.keys(i.getChanges()).length&&l.Z.del(r)}}();var h=o[0];(0,B.LZ)(h).then((t=>{var r={_secureLegacyUrl:t.src,height:t.height,width:t.width},n=b.Z.add({}),o=C.Z.add({}),l=ee(K(s()));e(Ae()),e(De({diagramImage:r,imageLuid:n,imageRefLuid:o})),a.Z.maybeCreateSet(l).then((()=>b.Z.save(n,h))).then((()=>e((e=>{var{setLuid:t,imageLuid:s,imageRefLuid:r}=e;return e=>{var n=b.Z.getModel(s);C.Z.save(r,{imageId:n.get("id"),imageType:i.rSr.DIAGRAM_BASE_IMAGE,modelId:I.Z.getModel(t).get("id"),modelType:i.BYJ.SET}).then((t=>{var[,s]=t;e(Le({image:n.toJSON(),imageRef:s.toJSON()}))})).catch((()=>{e(Pe({message:(0,m.Z)("create_set.diagrams.image_ref_warning")}))}))}})({imageLuid:n,imageRefLuid:o,setLuid:l})))).catch((()=>e((e=>{var{imageLuid:t}=e;return Pe({message:Me(t)})})({imageLuid:n}))))}))}else d.length?e(Pe({message:(0,m.Z)("create_set.diagrams.file_format_warning")})):c>0&&g.Z.error("invalid parseFileList result",{total:c,successes:o,failures:d,fileList:t})}else e(Pe({message:(0,m.Z)("create_set.diagrams.underage_error")}))}},nt={[d.a.DELETE_DIAGRAM_SHAPE_SUCCESS]:(e,t)=>{var{payload:s}=t;return e.deleteIn(["terms",s.termLuid]).deleteIn(["diagramShapes",s.luid])},[d.a.DIAGRAM_IMAGE_CANCEL_EDIT]:e=>e.set("isEditingDiagramImage",!1).set("diagramImageEdits",(0,_.List)()),[d.a.DIAGRAM_IMAGE_DELETE]:e=>e.set("isSavingDiagramImage",!0),[d.a.DIAGRAM_IMAGE_DELETE_SUCCESS]:e=>e.set("isEditingDiagramImage",!1).set("isSavingDiagramImage",!1).set("diagramShapes",(0,_.Map)()).delete("diagramImage").delete("diagramImageLuid").delete("diagramImageRefLuid"),[d.a.DIAGRAM_IMAGE_EDIT]:(e,t)=>{var{payload:s}=t;return e.update("diagramImageEdits",(e=>e.push(s)))},[d.a.DIAGRAM_IMAGE_SAVE]:e=>e.set("isSavingDiagramImage",!0),[d.a.DIAGRAM_IMAGE_START_EDIT]:e=>e.set("isEditingDiagramImage",!0).set("diagramImageEdits",(0,_.List)()),[d.a.DIAGRAM_IMAGE_UNDO]:e=>e.update("diagramImageEdits",(e=>e.butLast())),[d.a.EDIT_DIAGRAM_SHAPE]:(e,t)=>{var{payload:s}=t;return e.update("diagramShapes",(e=>e.set(s.get("diagramShapeLuid"),s.get("diagramShape"))))},[d.a.EDIT_TERM]:(e,t)=>{var{payload:s}=t;return e.update("terms",(e=>e.set(s.get("termLuid"),s.get("term"))))},[d.a.LEGACY_SET_STORE_UPDATE]:(e,t)=>{var{payload:s}=t;return e.set("setStore",s)},[d.a.LEGACY_TERM_STORE_UPDATE]:(e,t)=>{var{payload:s}=t,r=[],i=function(e,t,s){var r=e;return Object.keys(t).forEach((e=>{var i=t[e],n=Object.keys(i)[0];"$set"===n?r=r.set(e,(0,_.fromJS)(i.$set)):"$merge"===n?r=r.update(e,(0,_.Map)(),(e=>e.merge(i.$merge))):"$delete"===n&&(r=r.delete(e),s&&s(e))})),r}(e.get("terms"),s,(t=>{var s=pe(e).findKey((e=>e===t));r.push(s)}));return r.reduce(((e,t)=>e.deleteIn(["diagramShapes",t])),e.set("terms",i))},[d.a.NEW_DIAGRAM_SHAPE]:(e,t)=>{var{payload:s}=t;return e.update("terms",(e=>e.set(s.get("termLuid"),s.get("term")))).update("diagramShapes",(e=>e.set(s.get("diagramShapeLuid"),s.get("diagramShape"))))},[d.a.NEW_DIAGRAM_SHAPE_CANCEL]:(e,t)=>{var{payload:s}=t,{diagramShapeLuid:r}=s,i=pe(e).get(r);return e.deleteIn(["terms",i]).deleteIn(["diagramShapes",r])},[d.a.SEARCH_DIAGRAMS]:(e,t)=>{var{payload:s}=t;return e.set("imageSearchResults",{}).set("imageSearchLangs",s.langs).set("imageSearchQuery",s.query).set("imageSearchLoading",!0).set("imageSearchError",null)},[d.a.SEARCH_DIAGRAMS_FAILURE]:(e,t)=>{var{payload:s}=t;return e.set("imageSearchError",s.error)},[d.a.SEARCH_DIAGRAMS_RESET]:e=>e.set("imageSearchResults",{}).set("imageSearchLangs",null).set("imageSearchQuery","").set("imageSearchLoading",!1).set("imageSearchError",null),[d.a.SEARCH_DIAGRAMS_SUCCESS]:(e,t)=>{var{payload:s}=t;return e.set("imageSearchResults",(0,z.Z)(Object.keys(s.results).map((e=>[e,new q.Z(s.results[e])])))).set("imageSearchLoading",!1)},[d.a.UPLOAD_IMAGE]:(e,t)=>{var{payload:s}=t;return e.set("diagramImage",(0,_.fromJS)(Object.assign({},s.diagramImage))).set("diagramImageLuid",s.imageLuid).set("diagramImageRefLuid",s.imageRefLuid).set("isSavingDiagramImage",!0)},[d.a.UPLOAD_IMAGE_FAILURE]:(e,t)=>{var{payload:s}=t;return e.set("diagramImageUploadError",s.message).set("isSavingDiagramImage",!1).delete("diagramImage").delete("diagramImageLuid").delete("diagramImageRef").delete("diagramImageRefLuid")},[d.a.UPLOAD_IMAGE_SUCCESS]:(e,t)=>{var{payload:s}=t;return e.delete("diagramImageUploadError").set("diagramImage",(0,_.fromJS)(s.image)).set("diagramImageRef",(0,_.fromJS)(s.imageRef)).set("isSavingDiagramImage",!1)},[d.a.UPSELL_MODAL_CLOSE]:e=>e.delete("upsellModalSource"),[d.a.UPSELL_MODAL_OPEN]:(e,t)=>{var{payload:s}=t;return e.set("upsellModalSource",s.source)}},ot=(0,f.PH)(d.a.LEGACY_SET_STORE_UPDATE),at=(0,f.PH)(d.a.LEGACY_TERM_STORE_UPDATE);p.ZP.on(p.DT,(e=>{o.Z.dispatch(at(e))})),c.Z.addChangeListener((()=>{o.Z.dispatch(ot((0,_.fromJS)({set:c.Z.get(),setLuid:c.Z.getLuid(),detectLanguageResults:c.Z.getDetectLanguageResults(),setValidationErrors:c.Z.getValidationErrors(),setProfanityErrors:c.Z.getProfanityErrors(),isDiscardDisabled:c.Z.isDiscardDisabled(),isPublishDisabled:c.Z.isPublishDisabled(),isRedirecting:c.Z.isRedirecting(),shouldHideTerms:c.Z.shouldHideTerms(),openLangSelectSide:c.Z.getOpenLangSelectSide()})))}))},"./app/j/create_set/stores/ClassSetStore.ts":(e,t,s)=>{"use strict";s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./app/j/stores/Store.ts"),i=s("./app/j/create_set/constants/ClassSetConstants.ts"),n=s("./node_modules/immutability-helper/index.js"),o=s.n(n),a=s("./app/j/utils/delete-key.ts"),l={classSets:{},classSetClassMap:{},classSetSetMap:{},setup(e,t,s){for(var r in void 0===t&&(t={}),void 0===s&&(s={}),e){var n=e[r];this.classSets[r]=n}this.classes=t,this.sets=s,this._generateClassSetClassMap(t),this._generateClassSetSetMap(s),this.bindActions(i.Z.actions.BULK_DELETE,this._bulkDelete),this.bindActions(i.Z.actions.BULK_UPDATE,this._updateClassSets)},getAll(){return this.classSets},getClassMap(){return this.classSetClassMap},getSetMap(){return this.classSetSetMap},getUnsyncedClassSets(e){var t={};for(var s in this.classSets){var r=this.classSets[s];r.setId||(t[s]={classId:r.classId,setId:e})}return t},_bulkDelete(e){var{luids:t}=e;this.classSets=(0,a.Z)(this.classSets,t),this.classSetSetMap=(0,a.Z)(this.classSetSetMap,t),this.classSetClassMap=(0,a.Z)(this.classSetClassMap,t)},_generateClassSetClassMap(e){var t=this,s=function(s){var r=e[s],i=Object.keys(t.classSets).filter((e=>t.classSets[e].classId===r.id));t._associateClass(s,i)};for(var r in e)s(r)},_generateClassSetSetMap(e){var t=this,s=function(s){var r=e[s],i=Object.keys(t.classSets).filter((e=>t.classSets[e].setId===r.id));t._associateSet(s,i)};for(var r in e)s(r)},_associateSet(e,t){var s={};for(var r of t)this._ensureContains(r),s[r]=e;this.classSetSetMap=o()(this.classSetSetMap,{$merge:s})},_associateClass(e,t){var s={};for(var r of t)this._ensureContains(r),s[r]=e;this.classSetClassMap=o()(this.classSetClassMap,{$merge:s})},_ensureContains(e){if(!this._contains(e))throw new Error("LUID "+e+" not found")},_contains(e){return e in this.classSets},_updateClassSets(e){var{luidToProps:t}=e,s={};for(var r in t){var i=t[r];this.classSets[r]?s[r]={$merge:i}:s[r]={$set:i}}this.classSets=o()(this.classSets,s),this.classSetClassMap={},this.classSetSetMap={},this._generateClassSetClassMap(this.classes),this._generateClassSetSetMap(this.sets)}};(l=Object.assign(l,r.Z)).init(),t.Z=l},"./app/j/create_set/stores/ClassStore.ts":(e,t,s)=>{"use strict";s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./app/j/stores/Store.ts"),i={classes:{},setup(e){for(var t in e){var s=e[t];this.classes[t]=s}},getAll(){return this.classes}};(i=Object.assign(i,r.Z)).init(),t.Z=i},"./app/j/create_set/stores/SetPermissionStore.ts":(e,t,s)=>{"use strict";s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./app/j/config/enums.ts"),i=s("./app/j/create_set/constants/ClassSetConstants.ts"),n=s("./app/j/create_set/constants/SetPermissionConstants.ts"),o=s("./node_modules/immutability-helper/index.js"),a=s.n(o),l=s("./app/j/stores/Store.ts"),d=s("./app/j/utils/delete-key.ts"),u=s("./app/j/utils/property.ts"),c=Object.assign({permissions:{},selectedClassLuids:[],selectedEditableByClassLuids:[],persistedClassSets:{},setup(e,t,s,r,o){var l;this._canEditPermissions=o,this.persistedClassSets=s,this.permissions={viewableBy:this._getViewPermission(e,s),editableBy:this._getEditPermission(e,s)};var d=Object.keys(t),u=[],c=[];for(var p in s){var h=s[p];l=r[p],d.indexOf(l)>-1&&(u.push(l),h.canEdit&&c.push(l))}this.selectedClassLuids=a()(this.selectedClassLuids,{$push:u}),this.selectedEditableByClassLuids=a()(this.selectedEditableByClassLuids,{$push:c}),this.bindActions(n.Nw.TOGGLE_CLASS,this._toggleClass),this.bindActions(n.Nw.TOGGLE_CLASS_PERMISSIONS,this._toggleClassPermissions),this.bindActions(n.Nw.CHANGE_PERMISSION,this._changePermission),this.bindActions(i.Z.actions.BULK_DELETE_SUCCESS,this._removeFromPersistedClassSets),this.bindActions(i.Z.actions.BULK_UPDATE_SUCCESS,this._updatePersistedClassSets)},getPermissions(){return this.permissions},getSelectedClassLuids(){return this.selectedClassLuids},getSelectedEditableByClassLuids(){return this.selectedEditableByClassLuids},getPersistedClassSets(){return this.persistedClassSets},canEditPermissions(){return this._canEditPermissions},_changePermission(e){var{side:t,newPermission:s}=e,r=(0,u.Z)(this._getPermissionKeyForSide(t),s);this.permissions=a()(this.permissions,{$merge:r}),this._ensureEditingMatchesViewing()},_toggleClass(e){var{luid:t}=e,s=this.selectedClassLuids.indexOf(t),r=this.selectedEditableByClassLuids.indexOf(t);-1===s?this.selectedClassLuids=a()(this.selectedClassLuids,{$push:[t]}):(this.selectedClassLuids=a()(this.selectedClassLuids,{$splice:[[s,1]]}),this.selectedEditableByClassLuids=a()(this.selectedEditableByClassLuids,{$splice:[[r,1]]}))},_toggleClassPermissions(e){var{luid:t}=e,s=this.selectedEditableByClassLuids.indexOf(t);-1===s?(this.selectedEditableByClassLuids=a()(this.selectedEditableByClassLuids,{$push:[t]}),this.selectedClassLuids=a()(this.selectedClassLuids,{$push:[t]})):this.selectedEditableByClassLuids=a()(this.selectedEditableByClassLuids,{$splice:[[s,1]]})},_removeFromPersistedClassSets(e){var{models:t}=e,s=Object.keys(t);this.persistedClassSets=(0,d.Z)(this.persistedClassSets,s)},_updatePersistedClassSets(e){var{models:t}=e,s={};for(var r in t){var i=t[r];s[r]=i.getProperties()}this.persistedClassSets=a()(this.persistedClassSets,{$merge:s})},_ensureEditingMatchesViewing(){(this.permissions.viewableBy===n.mk.JUST_ME||this.permissions.viewableBy===n.mk.PASSWORD&&this.permissions.editableBy===n.mk.CLASSES)&&(this.permissions=a()(this.permissions,{$merge:{editableBy:n.mk.JUST_ME}}))},_getPermissionKeyForSide(e){switch(e){case n.mA.VIEWING:return"viewableBy";case n.mA.EDITING:return"editableBy";default:return""}},_getViewPermission(e,t){var s=Object.keys(t).length>0;return e.accessType===r.iQw.PUBLIC_ACCESS?n.mk.EVERYONE:e.passwordUse?n.mk.PASSWORD:s?n.mk.CLASSES:n.mk.JUST_ME},_getEditPermission(e,t){var s=!1;for(var r in t){t[r].canEdit&&(s=!0)}return e.passwordEdit?n.mk.PASSWORD:s?n.mk.CLASSES:n.mk.JUST_ME}},l.Z);c.init(),t.Z=c},"./app/j/create_set/stores/SetStore.ts":(e,t,s)=>{"use strict";s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./app/j/i18n/$t.ts"),i=s("./app/j/stores/Store.ts"),n=s("./app/j/create_set/stores/TermStore.ts"),o=s("./app/j/stores/SyncerStore.ts"),a=s("./app/j/create_set/constants/SetConstants.ts"),l=s("./app/j/create_set/constants/TermConstants.ts"),d=s("./app/j/view_models/SetViewModel.ts"),u=s("./node_modules/immutability-helper/index.js"),c=s.n(u),p=s("./app/j/utils/property.ts"),h=s("./app/j/utils/delete-key.ts"),g=s("./app/j/utils/validation-extractor.ts"),m=s("./app/j/utils/redirect.ts"),_=s("./app/j/utils/log-page-action.ts"),f=s("./app/j/errors/ValidationError.ts"),v=Object.assign({detectLanguageResults:{},discardDisabled:!1,hideTerms:!1,luid:null,openLangSelectSide:null,profanityErrors:{},publishDisabled:!1,redirecting:!1,set:{},setValidationErrors:{requires_def_lang:"",requires_word_lang:""},stickyHeaderHeight:0,validationErrors:{},wasPreviouslyPublished:!1,setup(e,t){this.luid=e,this.set=new d.Z(t),this.wasPreviouslyPublished=this.set.isPublished(),this.bindActions(a.Nw.UPDATE,this._update),this.bindActions(a.Nw.UPDATE_SUCCESS,this._updateSuccess),this.bindActions(a.Nw.PUBLISH,this._publish),this.bindActions(a.Nw.PUBLISH_SUCCESS,this._publishSuccess),this.bindActions(a.Nw.PUBLISH_FAILURE,this._publishFailure),this.bindActions(a.Nw.DISCARD,this._discard),this.bindActions(a.Nw.DISCARD_SUCCESS,this._discardSuccess),this.bindActions(a.Nw.DISCARD_FAILURE,this._discardFailure),this.bindActions(a.Nw.DETECT_LANGUAGE,this._detectLanguage),this.bindActions(a.Nw.DETECT_LANGUAGE_FAILURE,this._detectLanguageFailure),this.bindActions(a.Nw.DETECT_PROFANITY_SUCCESS,this._detectProfanitySuccess),this.bindActions(a.Nw.SHOW_LANG_SELECT,this._showLangSelect),this.bindActions(a.Nw.HIDE_LANG_SELECT,this._hideLangSelect),this.bindActions(a.Nw.SHOW_TERMS,this._showTerms),this.bindActions(a.Nw.HIDE_TERMS,this._hideTerms),this.bindActions(a.Nw.UPDATE_STICKY_HEADER_HEIGHT,this._updateStickyHeaderHeight),this.waitFor(n.ZP),this.bindActions(l.Nw.UPDATE_SUCCESS,this._termUpdateSuccess)},get(){return this.set},getLuid(){return this.luid},getDetectLanguageResults(){return this.detectLanguageResults},getValidationErrors(){return this.validationErrors},getProfanityErrors(){return this.profanityErrors},isRedirecting(){return this.redirecting},isPublishDisabled(){return this.publishDisabled},isDiscardDisabled(){return this.discardDisabled},shouldHideTerms(){return this.hideTerms},getOpenLangSelectSide(){return this.openLangSelectSide},getStickyHeaderHeight(){return this.stickyHeaderHeight},_update(e){var{props:t}=e;this.set=c()(this.set,{$merge:t})},_updateSuccess(e){var{model:t}=e,s=t.get("id");s&&(this.set=c()(this.set,{$merge:{id:s}}))},_publish(){this.publishDisabled=!0},_publishSuccess(e){var{model:t}=e;this._logIfStuck(),this.redirecting=!0;var s=this.wasPreviouslyPublished?"":"?new";(0,m.ZP)(""+t.get("_webUrl")+s)},_publishFailure(e){var{error:t,model:s}=e;this.publishDisabled=!1,t instanceof f.Z&&(this.validationErrors=(0,g.Z)(s.getValidationErrors()),!("min_terms"in this.validationErrors)&&n.ZP.getNumSyncedTerms()<2&&(this.validationErrors.min_terms=(0,r.Z)("create_set.validation_errors.not_enough_terms_error"))),Object.keys(this.validationErrors).forEach((e=>{var t=this.validationErrors[e];(0,_.Z)("new_create_set_publish_error",{identifier:e,message:t})}))},_termUpdateSuccess(){n.ZP.getNumSyncedTerms()>=2&&"min_terms"in this.validationErrors&&(this.validationErrors=(0,h.Z)(this.validationErrors,["min_terms"]))},_discard(){this.discardDisabled=!0},_discardSuccess(){this.redirecting=!0,(0,m.ZP)("/create-set")},_discardFailure(){this.discardDisabled=!1},_detectLanguage(e){var{side:t,text:s}=e,r=(0,p.Z)(t);r[t]={queryString:s,isLoading:!0,error:null},this.detectLanguageResults[t]&&Array.isArray(this.detectLanguageResults[t].data)?r[t].data=this.detectLanguageResults[t].data:r[t].data=null,this.detectLanguageResults=c()(this.detectLanguageResults,{$merge:r})},_detectLanguageFailure(e){var{side:t,error:s}=e;if(this.detectLanguageResults[t]){var r=(0,p.Z)(t,{$merge:{}});r[t].$merge={data:[],error:s,isLoading:!1},this.detectLanguageResults=c()(this.detectLanguageResults,r)}},_detectProfanitySuccess(e){var{field:t,results:s}=e,r={[t]:s.data&&s.data.detectProfanity&&s.data.detectProfanity.level>=2};this.profanityErrors=c()(this.profanityErrors,{$merge:r})},_showLangSelect(e){var{side:t,row:s,triggerAutodefine:r}=e;this.openLangSelectSide={side:t,row:s,triggerAutodefine:r}},_hideLangSelect(){this.openLangSelectSide=null},_showTerms(){this.hideTerms=!1},_hideTerms(){this.hideTerms=!0},_logIfStuck(){window.setTimeout((function(){var e=o.Z.getAllSyncing(),t={};t.syncing=e.length?e:"none",(0,_.Z)("new_create_set_stuck_saving",t)}),25e3)},_updateStickyHeaderHeight(e){this.stickyHeaderHeight=e.heightInPx}},i.Z);v.init(),t.Z=v},"./app/j/create_set/stores/TermStore.ts":(e,t,s)=>{"use strict";s.d(t,{DT:()=>R,ZP:()=>M});var r=s("./node_modules/lodash/reduce.js"),i=s.n(r),n=s("./node_modules/lodash/range.js"),o=s.n(n),a=(s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.array.reverse.js"),s("./node_modules/core-js/modules/es.array.sort.js"),s("./app/j/create_set/constants/CustomAudioConstants.ts")),l=s("./app/j/create_set/constants/ImageConstants.ts"),d=s("./app/j/create_set/constants/SetConstants.ts"),u=s("./app/j/create_set/constants/TermConstants.ts"),c=s("./app/j/global/Rollbar.ts"),p=s("./node_modules/immutability-helper/index.js"),h=s.n(p),g=s("./node_modules/lodash/size.js"),m=s.n(g),_=s("./app/j/stores/Store.ts"),f=s("./app/j/syncers/TermSyncer.ts"),v=s("./app/j/utils/delete-key.ts");function S(e){var t=typeof e;return"string"===t?"$:"+e:"number"===t?"n"+e:e}s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.string.match.js"),s("./node_modules/core-js/modules/es.regexp.constructor.js"),s("./node_modules/core-js/modules/es.regexp.to-string.js");var C=s("./app/j/global/Quizlet.ts"),b=s("./node_modules/esrever/esrever.js"),y=s.n(b),E={};function j(e,t){var s=function(e,t){if(void 0===t&&(t=C.Z.blackAndWhitelistObfuscatedRegexesByLang),void 0===E[e]){E[e]={};var s=void 0===t[e]?"en":e;Object.keys(t[s]).map((r=>(E[e][r]=t[s][r]?new RegExp(y().reverse(t[s][r]),"ig"):null,null)))}return E[e]}(t);if(!s||!s.black)return!1;var r=e;return r&&s.white&&(r=r.replace(s.white," ")),!!(" "+r+" ").match(s.black)}var x=s("./app/j/utils/log-page-action.ts"),T=s("./app/j/utils/ObjectHelper.ts"),I=s("./app/j/utils/property.ts"),w=s("./app/j/utils/trim.ts"),{hasOwnProperty:A}={},O="en",R="CHANGE_TERMS",D=o();function L(e,t){return e?!t||e.length!==t.length||!e.every(((e,s)=>{var r=t[s],{text:i}=e,{text:n}=r;return e.id===r.id&&i.plainText===n.plainText&&i.languageCode===n.languageCode&&(0,T.J)(i.richText,n.richText)})):!!t}var P=Object.assign({terms:{},order:[],wordsToLuids:{},ignoredDuplicateWords:[],termImageMap:{},termWordCustomAudioMap:{},termDefinitionCustomAudioMap:{},imageSearchResults:{},autodefineResults:{},profanityResults:{},wordSideSuggestions:null,definitionSideSuggestions:null,distractorSuggestions:null,distractorSuggestionsSelected:null,phantomRow:null,activeRow:null,activeSide:"word",activeContext:null,setup(e,t,s,r,i){for(var n in void 0===r&&(r={}),e){var o=e[n];this.terms[n]=Object.assign({},o)}this._reorder(),this._generateTermCustomAudioMap(s,t),i||this._createMinRows(),this._ensurePhantomRow();var c=Object.keys(e).filter((t=>null!==e[t].definitionImageId)).map((t=>({[t]:e[t]}))),p=Object.assign({},...c);this._generateTermImageMap(p,r),this._initWordsToLuids(),this.bindActions(u.Nw.ACTIVATE_ROW,this._activateRow),this.bindActions(u.Nw.ACTIVATE_SIDE,this._activateSide),this.bindActions(u.Nw.ACTIVATE_ROW_SIDE,this._activateRowSide),this.bindActions(u.Nw.ACTIVATE_OFFSET_ROW_CONTEXT,this._activateOffsetRowContext),this.bindActions(u.Nw.FLIP_COLUMNS,this._flipColumns),this.bindActions(u.Nw.CONTEXT_TOGGLE,this._contextToggle),this.bindActions(u.Nw.CONTEXT_RESET,this._contextReset),this.bindActions(u.Nw.LOCAL_BULK_CREATE,this._bulkCreate),this.bindActions(u.Nw.UPDATE,this._update),this.bindActions(u.Nw.UPDATE_SUCCESS,this._updateSuccess),this.bindActions(u.Nw.DELETE,this._delete),this.bindActions(u.Nw.MOVE,this._move),this.bindActions(u.Nw.AUTODEFINE,this._autodefine),this.bindActions(u.Nw.AUTODEFINE_SUCCESS,this._autodefineSuccess),this.bindActions(u.Nw.AUTODEFINE_FAILURE,this._autodefineFailure),this.bindActions(d.Nw.FOCUS_TITLE,this._deactivateRow),this.bindActions(l.Nw.BULK_CREATE,this._bulkAssociateImage),this.bindActions(l.Nw.REPLACE,this._associateImage),this.bindActions(l.Nw.DELETE,this._unassociateImage),this.bindActions(l.Nw.SEARCH,this._searchImage),this.bindActions(l.Nw.SEARCH_SUCCESS,this._searchImageSuccess),this.bindActions(l.Nw.SEARCH_FAILURE,this._searchImageFailure),this.bindActions(u.Nw.DELETE_IMAGE_SUCCESS,this._unassociateTermImage),this.bindActions(u.Nw.DELETE_IMAGE_SUCCESS,this._unassociateTermImage),this.bindActions(d.Nw.SHOW_LANG_SELECT,this._showLangSelect),this.bindActions(u.Nw.IGNORE_DUPLICATE_WORD,this._ignoreDuplicateWord),this.bindActions(u.Nw.AUTO_SUGGEST_SUCCESS,this._handleAutosuggestSuccess),this.bindActions(u.Nw.AUTO_SUGGEST_CLEAR,this._handleAutosuggestClear),this.bindActions(u.Nw.AUTO_SUGGEST_FAILURE,this._handleAutosuggestFailure),this.bindActions(u.Nw.CREATE_IMAGE_SUCCESS,this._associateTermImage),this.bindActions(a.Z.actions.CREATE_SUCCESS,this._associateCustomAudio),this.bindActions(a.Z.actions.DELETE,this._deassociateCustomAudio)},getAll(){return this.terms},getOrder(){return this.order},getTermWordCustomAudioMap(){return this.termWordCustomAudioMap},getTermDefinitionCustomAudioMap(){return this.termDefinitionCustomAudioMap},getImageMap(){return this.termImageMap},getImageSearchResults(){return this.imageSearchResults},getAutodefineResults(){return this.autodefineResults},getProfanityResults(){return this.profanityResults},getWordSideSuggestions(){return this.wordSideSuggestions},getDefinitionSideSuggestions(){return this.definitionSideSuggestions},getDistractorSuggestions(){return this.distractorSuggestions},getPhantomRow(){return this.phantomRow},getActiveRow(){return this.activeRow},getActiveSide(){return this.activeSide},getActiveContext(){return this.activeContext},getWordsToLuids(){return this.wordsToLuids},getIgnoredDuplicateWords(){return this.ignoredDuplicateWords},isBlankDefinitions(){for(var e in this.terms){if(this.terms[e].definition)return!1}return!0},isImagesOnly(){var e=!0;for(var t in this.terms){var s=this.terms[t],[r]=this.termImageMap[t],i=!(!t||!r);if((s.word||s.definition||i)&&(e=!1,s.definition||!i))return!1}return!e},getNumFreeTerms(){for(var e=this.order.length,t=0,s=this.order.length-1;s>=0;s--){var r=this.order[s],{word:i,definition:n}=this.terms[r];if(i||n)break;t++}return d.Rj.MAX_TERMS-e+t},getNumSyncedTerms(){var e=0;for(var t in this.terms){void 0!==this.terms[t].id&&(e+=1)}return e},getNumTotalTerms(){return m()(this.terms)},getNumUnsyncedTerms(){return this.getNumTotalTerms()-this.getNumSyncedTerms()},getIndicesToAdd(e){var t=d.Rj.MAX_TERMS-this.order.length;return e.slice(0,t)},getImagelessTermLuids(e,t){var s=this._getIndex(t),r=[];for(var i of Array.from(this.order.slice(s)))if(!this._isPhantomRow(i)){var[,n]=Array.from(this.termImageMap[i]||[null,null]);e[n]||r.push(i)}return r},getImportInfo(){var e,t=[];for(e=this.order.length-2;e>=0;e--){var s=this.order[e],r=this.terms[s];if(r.word||r.definition)break;t.push(s)}return t.reverse(),{startIndex:e+1,luidsToReplace:t}},getUnsavedTermUpdates(e){void 0===e&&(e=!1);var t={},s=this.getAll(),r=[];for(var i in s){var n=s[i];if(!(i in t)){var o=!1;if(f.Z.contains(i)){var a=f.Z.getModel(i);(a.hasChanges()||void 0!==n.word&&(0,w.Z)(n.word)!==a.get("word")||void 0!==n.definition&&(0,w.Z)(n.definition)!==a.get("definition")||void 0!==n.wordRichText&&n.wordRichText!==a.get("wordRichText")||void 0!==n.definitionRichText&&n.definitionRichText!==a.get("definitionRichText")||L(n.definitionCustomDistractors,a.get("definitionCustomDistractors")))&&(o=!0,e&&r.push(a.getProperties()))}else o=!0;o&&(e&&c.Z.debug("Previous state of models prior to successful syncing",r),t[i]={rank:n.rank,word:n.word,wordRichText:n.wordRichText,definition:n.definition,definitionRichText:n.definitionRichText})}}return t},hasTermLuid(e){return this._contains(e)},hasPhantomRow(){return this._hasPhantomRow()},_showLangSelect(){if(this.activeRow&&this.activeContext)return this.activeContext=null,[this.activeRow]},_activateSide(e){var{luid:t,activeSide:s}=e;return this.activeSide=s,[t]},_activateRowSide(e){var{luid:t,activeSide:s}=e;return this.activeSide=s,this._activateRow({luid:t})},_activateRow(e){var t,{luid:s}=e;this._isPhantomRow(s)&&(this.phantomRow=null),this._isActiveRow(s)||(this.activeRow=s),this.activeContext=null;var r=[s];return(t=this._ensurePhantomRow())&&r.push(t),r},_deactivateRow(){var e=this.activeRow?[this.activeRow]:[];return this.activeRow=null,e},_contextToggle(e){var{luid:t,context:s}=e,r=this._activateRow({luid:t});return this.activeContext=s,this._isActiveRow(t)||(this.activeRow=t),r},_contextReset(e){var{luid:t}=e;return this.activeContext=null,[t]},_activateOffsetRowContext(e){var{fromLuid:t,offset:s,context:r}=e,i=this._getIndex(t)+s,n=i<=this._getLastIndex()?this.order[i]:null;return null===n?[t]:this._contextToggle({luid:n,context:r}).concat([t])},_bulkCreate(e){for(var t,{luids:s,indices:r,activatePhantom:i}=e,n={},o={},a=0;a<s.length;a++){t=s[a];var l=r[a];n[t]={$set:{rank:l}},o[t]=[null,null]}this._setTerms(h()(this.terms,n),n),this.termImageMap=h()(this.termImageMap,{$merge:o});var d={};for(t of Array.from(s))d[t]=this.terms[t];return this._harmonizeRanks(d),i&&this._activateRow({luid:this.phantomRow}),s},_update(e){var t,{luidToProps:s,wordLang:r,defLang:i,checkForProfanity:n=!0}=e,o={},a={},l=Object.keys(s);for(t in s){var d=s[t],u=this.terms[t],{word:c}=d;u?(o[t]={$merge:d},c!==u.word&&l.push(this._detachLuidFromWordAndGetChangingLuids(t))):(o[t]={$set:Object.assign({},d)},a[t]=[null,null])}var p=this._attachLuidsToWordsAndGetChangingLuids(s);p&&(l=l.concat(p)),this._setTerms(h()(this.terms,o),o),this.termImageMap=h()(this.termImageMap,{$merge:a}),n&&(this.profanityResults=h()(this.profanityResults,{$merge:this._detectProfanity(s,r,i)}));var g={};for(t in s)g[t]=this.terms[t];return this._harmonizeRanks(g),l},_flipColumns(e){var{luidToProps:t}=e;return this._deactivateRow(),this._update({luidToProps:t,checkForProfanity:!1})},_ignoreDuplicateWord(e){var{word:t}=e;return this.ignoredDuplicateWords=h()(this.ignoredDuplicateWords,{$push:[S(t)]}),this.wordsToLuids[S(t)]},_updateSuccess(e){var{models:t}=e,s={};for(var r in t){var i=t[r],n=this.terms[r],o=i.get("id"),a=i.get("setId"),l=i.get("_wordTtsUrl"),d=i.get("_definitionTtsUrl"),u=i.get("definitionCustomDistractors");if(n){var c={};o&&!n.id&&(c.id=o),a&&!n.setId&&(c.setId=a),l!==n._wordTtsUrl&&(c._wordTtsUrl=l),d!==n._definitionTtsUrl&&(c._definitionTtsUrl=d),u&&(c.definitionCustomDistractors=u),m()(c)>0&&(s[r]={$merge:c})}}return m()(s)>0&&this._setTerms(h()(this.terms,s),s),Object.keys(s)},_delete(e){var t,{luid:s}=e;this._ensureContains(s),this._isPhantomRow(s)&&(this.phantomRow=null),this._contextReset(s);var r=this._getSiblingRow(s,1),i=this.order.indexOf(s);this.order=h()(this.order,{$splice:[[i,1]]});var n=[s];return n.push(this._detachLuidFromWordAndGetChangingLuids(s)),this._setTerms((0,v.Z)(this.terms,[s]),(0,I.Z)(s,{$delete:{}})),this._harmonizeRanks(),r&&!this._isActiveRow(r)&&(this.activeRow=r,n.push(r)),(t=this._ensurePhantomRow())&&n.push(t),n},_move(e){var{luid:t,oldIndex:s,newIndex:r}=e;this._ensureContains(t);var i=this.terms[t].rank,n=this._lookupByIndex(r),o=n?n.rank:i+(r-s),a=(0,I.Z)(t,{$merge:{}});a[t].$merge.rank=o,this._setTerms(h()(this.terms,a),a);var l=(0,I.Z)(t,this.terms[t]);return this._harmonizeRanks(l),[t]},_deassociateCustomAudio(e){var{termLuid:t,termSide:s}=e;return this._ensureContains(t),"word"===s?delete this.termWordCustomAudioMap[t]:"definition"===s&&delete this.termDefinitionCustomAudioMap[t],[t]},_associateCustomAudio(e){var{customAudioLuid:t,termLuid:s,termSide:r}=e;return this._ensureContains(s),"word"===r?this.termWordCustomAudioMap[s]=t:"definition"===r&&(this.termDefinitionCustomAudioMap[s]=t),[s]},_bulkAssociateImage(e){var t={};for(var s of Array.from(e)){this._ensureContains(s.termLuid);var[r]=Array.from(this.termImageMap[s.termLuid]);t[s.termLuid]=[r,s.imageLuid]}return this.termImageMap=h()(this.termImageMap,{$merge:t}),e.map((e=>e.termLuid))},_associateImage(e){var{luid:t,termLuid:s}=e;return this._bulkAssociateImage([{imageLuid:t,termLuid:s}])},_unassociateImage(e){var{termLuid:t}=e;this._ensureContains(t);var[s]=Array.from(this.termImageMap[t]);return this._setTermImageMapForLuid(t,[s,null]),[t]},_associateTermImage(e){var{luid:t,termLuid:s,imageLuid:r}=e;return this._ensureContains(s),this._setTermImageMapForLuid(s,[t,r]),[s]},_unassociateTermImage(e){var{termLuid:t}=e;return this._ensureContains(t),this._setTermImageMapForLuid(t,[null,null]),[t]},_searchImage(e){var{luid:t,query:s,lang:r}=e;this._ensureContains(t);var i=(0,I.Z)(t);return i[t]={results:{},imageLuids:[],lang:r,queryString:s,isLoading:!0,error:null},this.imageSearchResults=h()(this.imageSearchResults,{$merge:i}),[t]},_searchImageSuccess(e){var{luid:t,imageLuids:s}=e;if(this._ensureContains(t),!this.imageSearchResults[t])return[];var r=(0,I.Z)(t,{$merge:{}});return r[t].$merge={imageLuids:s,isLoading:!1},this.imageSearchResults=h()(this.imageSearchResults,r),[t]},_searchImageFailure(e){var{luid:t,error:s}=e;if(this._ensureContains(t),!this.imageSearchResults[t])return[];var r=(0,I.Z)(t,{$merge:{}});return r[t].$merge={error:s},this.imageSearchResults=h()(this.imageSearchResults,r),[t]},_autodefine(e){var{luid:t,query:s}=e;this._ensureContains(t);var r=(0,I.Z)(t);return r[t]={data:[],queryString:s,isLoading:!0,error:null},this.autodefineResults=h()(this.autodefineResults,{$merge:r}),[t]},_autodefineSuccess(e){var{luid:t,autodefineResults:s}=e;if(this._ensureContains(t),!this.autodefineResults[t])return[];var r=(0,I.Z)(t,{$merge:{}}),i=s.data.suggestions.suggestions;return 0===i.length?(0,x.Z)("new_create_set_select_autodefine_search_results_empty"):(0,x.Z)("new_create_set_select_autodefine_search_results_exist"),r[t].$merge={data:i,isLoading:!1},this.autodefineResults=h()(this.autodefineResults,r),[t]},_autodefineFailure(e){var{luid:t,error:s}=e;if(this._ensureContains(t),!this.autodefineResults[t])return[];var r=(0,I.Z)(t,{$merge:{}});return r[t].$merge={error:s,isLoading:!1},this.autodefineResults=h()(this.autodefineResults,r),[t]},_handleAutosuggestSuccess(e){var{suggestions:t,side:s}=e;return"word"===s&&(this.wordSideSuggestions=t,this.definitionSideSuggestions=null),"definition"===s&&(this.wordSideSuggestions=null,this.definitionSideSuggestions=t),"distractors"===s&&(this.distractorSuggestions=t),[]},_handleAutosuggestClear(e){return"word"===e&&(this.wordSideSuggestions=null),"definition"===e&&(this.definitionSideSuggestions=null,this.distractorSuggestions=null),"distractors"===e&&(this.distractorSuggestions=null),[]},_handleAutosuggestFailure(e){return c.Z.error("Failed to call autouggestion API",e),this.wordSideSuggestions=null,this.definitionSideSuggestions=null,[]},_harmonizeRanks(e){var t;void 0===e&&(e={});var s={},r=0;for(var i in e){for(void 0===(t=e[i].rank)&&(t=2501);s[t];)t++;s[t]=i,t>r&&(r=t)}for(var n of(t=0,this.order))if(!(n in e)){for(;s[t];)t++;s[t]=n}r=Math.max(t,r),t=0;for(var o=0,a=r,l=a>=0;l?o<=a:o>=a;l?o++:o--)if(o in s){var d=s[o];this.terms[d].rank=t,t++}this._reorder()},_generateTermCustomAudioMap(e,t){var s=i()(t,((e,t,s)=>{var{id:r}=t;return e[r]=s,e}),{}),r=i()(e,((e,t,s)=>{var{id:r}=t;return e[r]=s,e}),{});for(var n in this.terms){var{definitionCustomAudioId:o,wordCustomAudioId:a}=this.terms[n];o&&(this.termDefinitionCustomAudioMap[n]=r[o]),a&&(this.termWordCustomAudioMap[n]=s[a])}},_generateTermImageMap(e,t){var s;if(Object.keys(e).length!==Object.keys(t).length)throw new Error("termsWithImage and images must have the same length");var r={};for(var i in t)({id:s}=t[i]),r[s]=i;var n={};for(var o in e){var a=void 0;({id:s,definitionImageId:a}=e[o]);var l=r[a];if(!l)throw new Error("termImage must have corresponding image");n[s]=[o,l]}var d={};for(var u in this.terms)({id:s}=this.terms[u]),d[u]=n[s]||[null,null];this.termImageMap=h()(this.termImageMap,{$merge:d})},_setTermImageMapForLuid(e,t){var s=(0,I.Z)(e,t);this.termImageMap=h()(this.termImageMap,{$merge:s})},_reorder(){var e=Object.keys(this.terms);e.sort(((e,t)=>this.terms[e].rank-this.terms[t].rank)),this.order=e},_lookupByIndex(e){return e>=this.order.length||e<0?null:this.terms[this.order[e]]},_ensureContains(e){if(!this._contains(e))throw new Error("LUID "+e+" not found")},_contains(e){return this.order.indexOf(e)>-1&&e in this.terms},_hasPhantomRow(){return null!==this.phantomRow},_isPhantomRow(e){return e===this.phantomRow},_isActiveRow(e){return e===this.activeRow},_getNumTerms(){var e=this.order.length;return this._hasPhantomRow()&&(e-=1),e},_getIndex(e){return this.order.indexOf(e)},_getLastIndex(){return this._getNumTerms()-1},_getSiblingRow(e,t){var s=this._getIndex(e)+t,r=this._getLastIndex();return s<=r?this.order[s]:r>0&&t>0?this.order[r-1]:null},_ensurePhantomRow(){if(!(this.order.length>=d.Rj.MAX_TERMS||this._hasPhantomRow())){var e=this.order.length,t=f.Z.add(e);return this._bulkCreate({luids:[t],indices:[e]}),this.phantomRow=t,t}},_createMinRows(){var e=this.order.length,t=(0===this.order.length?d.Rj.MIN_TERMS_BLANK_SET:d.Rj.MIN_TERMS)-e;if(t>0){var s=D(e,e+t),r=Array.from(s).map((e=>f.Z.add(e)));this._bulkCreate({luids:r,indices:s})}},_initWordsToLuids(){var e={};for(var t in this.terms){var s=this.terms[t];if(void 0!==s.word&&""!==s.word){var r=S(s.word);e[r]&&e[r].$set?e[r].$set.push(t):e[r]={$set:[t]}}}this.wordsToLuids=h()(this.wordsToLuids,e)},_attachLuidsToWordsAndGetChangingLuids(e){var t={},s=[];for(var r in e){var{word:i}=e[r];if(i&&-1===this.ignoredDuplicateWords.indexOf(S(i))){var n=S(i);if(A.call(this.wordsToLuids,n)){var o=this.wordsToLuids[n];-1===o.indexOf(r)&&(t[n]&&t[n].$push?t[n].$push.push(r):t[n]={$push:[r]}),s=s.concat(o)}else t[n]&&t[n].$set?t[n].$set.push(r):t[n]={$set:[r]}}}return m()(t)>0&&(this.wordsToLuids=h()(this.wordsToLuids,t)),s},_detachLuidFromWordAndGetChangingLuids(e){var{word:t}=this.terms[e],s=S(t),r=this.wordsToLuids[s];if(!A.call(this.wordsToLuids,s)||-1===r.indexOf(e))return[];var i=r.indexOf(e),n=(0,I.Z)(s,{$splice:[[i,1]]});return this.wordsToLuids=h()(this.wordsToLuids,n),1===m()(this.wordsToLuids[s])?this.wordsToLuids[s]:void 0},_detectProfanity(e,t,s){var r={};for(var i in e){var{word:n,definition:o}=e[i];r[i]={word:{data:{level:n&&(j(n,t)||t!==O&&j(n,O))?3:0}},definition:{data:{level:o&&(j(o,s)||o!==O&&j(o,O))?3:0}}}}return r},_setTerms(e,t){this.terms=e,this.emit(R,t)}},_.Z);P.init();var M=P},"./app/j/create_set/stores/UserStore.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./app/j/stores/Store.ts"),i=s("./app/j/view_models/ViewModel.ts"),n=s("./app/j/utils/createViewModelFromJson.ts");class o extends i.Z{isUpgraded(){return this.type&&this.type>0}isSelfIdentifiedTeacher(){return 1===this.selfIdentifiedTeacherStatus}static fromJson(e){return(0,n.Z)(o,e)}}var a=(0,s("./app/j/utils/keyReflectDeep.ts").Z)("UserConstants",{actions:{UPDATE:null}}),l=s("./node_modules/immutability-helper/index.js"),d=s.n(l),u=Object.assign({user:null,setup(e){e&&(this.user=new o(e)),this.bindActions(a.actions.UPDATE,this._update)},getUser(){return this.user},_update(e){var{props:t}=e;this.user=d()(this.user,{$merge:t})}},r.Z);u.init();var c=u},"./app/j/create_set/utils/SetContentTypeHelper.ts":(e,t,s)=>{"use strict";s.d(t,{P:()=>r});var r=e=>"flashcards"===e||"diagrams"===e},"./app/j/diagrams/QLeafletDraw.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>m,C:()=>h});var r=s("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),i=s("./app/j/i18n/$t.ts"),n=()=>({draw:{handlers:{circle:{tooltip:{start:(0,i.Z)("create_set.diagrams.draw.handlers.circle.tooltip.start")},radius:(0,i.Z)("create_set.diagrams.draw.handlers.circle.radius")},marker:{tooltip:{start:(0,i.Z)("create_set.diagrams.draw.handlers.marker.tooltip.start")}},polygon:{tooltip:{cont:(0,i.Z)("create_set.diagrams.draw.handlers.polygon.tooltip.cont"),end:(0,i.Z)("create_set.diagrams.draw.handlers.polygon.tooltip.end"),start:(0,i.Z)("create_set.diagrams.draw.handlers.polygon.tooltip.start")}},polyline:{error:(0,i.Z)("create_set.diagrams.draw.handlers.polyline.error"),tooltip:{cont:(0,i.Z)("create_set.diagrams.draw.handlers.polyline.tooltip.cont"),end:(0,i.Z)("create_set.diagrams.draw.handlers.polyline.tooltip.end"),start:(0,i.Z)("create_set.diagrams.draw.handlers.polyline.tooltip.start")}},rectangle:{tooltip:{start:(0,i.Z)("create_set.diagrams.draw.handlers.rectangle.tooltip.start")}},simpleshape:{tooltip:{end:(0,i.Z)("create_set.diagrams.draw.handlers.simpleshape.tooltip.end")}}},toolbar:{actions:{text:(0,i.Z)("create_set.diagrams.draw.toolbar.actions.text"),title:(0,i.Z)("create_set.diagrams.draw.toolbar.actions.title")},finish:{text:(0,i.Z)("create_set.diagrams.draw.toolbar.finish.text"),title:(0,i.Z)("create_set.diagrams.draw.toolbar.finish.title")},undo:{text:(0,i.Z)("create_set.diagrams.draw.toolbar.undo.text"),title:(0,i.Z)("create_set.diagrams.draw.toolbar.undo.title")},buttons:{circle:(0,i.Z)("create_set.diagrams.draw.toolbar.buttons.circle"),marker:(0,i.Z)("create_set.diagrams.draw.toolbar.buttons.marker"),polygon:(0,i.Z)("create_set.diagrams.draw.toolbar.buttons.polygon"),polyline:(0,i.Z)("create_set.diagrams.draw.toolbar.buttons.polyline"),rectangle:(0,i.Z)("create_set.diagrams.draw.toolbar.buttons.rectangle")}}},edit:{handlers:{edit:{tooltip:{subtext:(0,i.Z)("create_set.diagrams.edit.handlers.edit.tooltip.subtext"),text:(0,i.Z)("create_set.diagrams.edit.handlers.edit.tooltip.text")}},remove:{tooltip:{text:(0,i.Z)("create_set.diagrams.edit.handlers.remove.tooltip.text")}}},toolbar:{actions:{save:{text:(0,i.Z)("create_set.diagrams.edit.toolbar.actions.save.text"),title:(0,i.Z)("create_set.diagrams.edit.toolbar.actions.save.title")},cancel:{text:(0,i.Z)("create_set.diagrams.edit.toolbar.actions.cancel.text"),title:(0,i.Z)("create_set.diagrams.edit.toolbar.actions.cancel.title")}},buttons:{edit:(0,i.Z)("create_set.diagrams.edit.toolbar.buttons.edit"),editDisabled:(0,i.Z)("create_set.diagrams.edit.toolbar.buttons.edit_disabled"),remove:(0,i.Z)("create_set.diagrams.edit.toolbar.buttons.remove"),removeDisabled:(0,i.Z)("create_set.diagrams.edit.toolbar.buttons.remove_disabled")}}}}),o=s("./app/j/diagrams/DiagramConstants.ts"),a=s("./app/j/diagrams/QLeaflet.ts"),l=s("./app/j/i18n/initLocalizationOnce.ts"),d=(s("./node_modules/leaflet-draw/dist/leaflet.draw.js"),new a.Z.DivIcon({iconSize:new a.Z.Point(o.Qt,o.Qt),className:"leaflet-div-icon leaflet-editing-icon"})),u=new a.Z.DivIcon({iconSize:new a.Z.Point(o.Qt,o.Qt),className:"leaflet-div-icon leaflet-editing-icon leaflet-editing-middle-marker-icon"});a.Z.Draw.Event.DRAWCANCELED="draw:canceled",a.Z.Polyline.addInitHook((function(){this.editing&&(this.editing.options.icon=d)}));var c=a.Z.Edit.PolyVerticesEdit.prototype._createMiddleMarker;a.Z.Edit.PolyVerticesEdit=a.Z.Edit.PolyVerticesEdit.extend({_createMiddleMarker(e,t){this.options.icon=u,c.call(this,e,t),this.options.icon=d}});var p=a.Z.Draw.Rectangle.prototype._onMouseDown;function h(){return g.apply(this,arguments)}function g(){return(g=(0,r.Z)((function*(){yield(0,l.Z)(),a.Z.drawLocal=n()}))).apply(this,arguments)}a.Z.Draw.Rectangle=a.Z.Draw.Rectangle.extend({_onMouseDown(e){this._map.fire(a.Z.Draw.Event.DRAWVERTEX),p.call(this,e)}});var m=a.Z.Draw},"./app/j/dispatchers/AppDispatcher.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var r=(0,s("./app/j/utils/keyReflectDeep.ts").Z)("AppDispatcherConstants",{VIEW_ACTION:null,SERVER_ACTION:null}),i=s("./node_modules/invariant/browser.js"),n=s.n(i);var o=new class extends class{constructor(){this._callbacks={},this._isDispatching=!1,this._isHandled={},this._isPending={},this._lastID=1}register(e){var t="ID_"+this._lastID++;return this._callbacks[t]=e,t}unregister(e){n()(this._callbacks[e],"Dispatcher.unregister(...): `%s` does not map to a registered callback.",e),delete this._callbacks[e]}waitFor(e){n()(this._isDispatching,"Dispatcher.waitFor(...): Must be invoked while dispatching.");for(var t=0;t<e.length;t++){var s=e[t];this._isPending[s]?n()(this._isHandled[s],"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",s):(n()(this._callbacks[s],"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",s),this._invokeCallback(s))}}dispatch(e){n()(!this._isDispatching,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch."),this._startDispatching(e);try{for(var t in this._callbacks)this._isPending[t]||this._invokeCallback(t)}finally{this._stopDispatching()}}isDispatching(){return this._isDispatching}_invokeCallback(e){this._isPending[e]=!0,this._pendingPayload&&this._callbacks[e](this._pendingPayload),this._isHandled[e]=!0}_startDispatching(e){for(var t in this._callbacks)({}).hasOwnProperty.call(this._callbacks,t)&&(this._isPending[t]=!1,this._isHandled[t]=!1);this._pendingPayload=e,this._isDispatching=!0}_stopDispatching(){delete this._pendingPayload,this._isDispatching=!1}}{viewAction(e,t){this.dispatch({source:r.VIEW_ACTION,actionType:e,payload:t})}serverAction(e,t){this.dispatch({source:r.SERVER_ACTION,actionType:e,payload:t})}}},"./app/j/edgy-data/actions.ts":(e,t,s)=>{"use strict";s.d(t,{B:()=>a,_:()=>l});s("./node_modules/core-js/modules/es.string.ends-with.js");var r=s("./app/j/edgy-data/index.ts"),i=s("./app/j/edgy-data/enrollment.ts"),n=s("./app/j/edgy-data/selectors.ts"),o=s("./app/j/utils/redirect.ts"),a=()=>(e,t)=>{var s=t(),a=(0,n.m_)(s),l=(0,n.js)(s),d=(0,n.PR)(t());if(setTimeout((()=>{e((0,r.Ds)(!1))}),100),(0,i.i)(d)&&!a&&l){var{href:u}=window.location;u.endsWith("/latest")||(0,o.ZP)("/latest")}},l=()=>e=>{e((0,r.Ds)(!1))}},"./app/j/edgy-data/enrollment.ts":(e,t,s)=>{"use strict";s.d(t,{i:()=>i});var r=s("./app/j/config/enums.ts"),i=e=>!(!e||e._isUnderAge||e.selfIdentifiedTeacherStatus===r.IXc.TEACHER)},"./app/j/edgy-data/hooks/useEdgyScreen.ts":(e,t,s)=>{"use strict";s.d(t,{Ql:()=>r,e0:()=>h,pg:()=>g,DI:()=>m});var r,i=s("./node_modules/lodash/intersection.js"),n=s.n(i),o=(s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./app/j/global/Rollbar.ts")),a=s("./node_modules/react/index.js");!function(e){e.COLLECT_COURSES="collect_courses",e.COLLECT_SCHOOL="collect_school",e.FINAL="final"}(r||(r={}));var l=[r.COLLECT_SCHOOL,r.COLLECT_COURSES,r.FINAL],d=[r.COLLECT_SCHOOL,r.COLLECT_COURSES],u=[r.COLLECT_SCHOOL,r.COLLECT_COURSES],c=(e,t)=>{var s=0;return u.forEach(((r,i)=>{var n=e.indexOf(r);n>=0&&t>=n&&(s=i+1)})),{max:n()(e,u).length,current:s}};function p(e,t){void 0===t&&(t=0);var[s,r]=(0,a.useState)(e[t]),[i,n]=(0,a.useState)(e.indexOf(s));function l(t){var a=i+t;if(function(e,t){return e>=0&&e<=t.length-1}(a,e))return r(e[a]),void n(a);o.Z.warning("Tried to calculate the next screen for EdgyData screen "+s+", but the screen either doesn't exist or is the last one available. Contact Discover."),r(e[0])}return(0,a.useEffect)((()=>{var s=e[t];r(s),n(e.indexOf(s))}),[e,t]),{active:s,advance:()=>l(1),goBack:()=>l(-1),progress:c(e,i)}}function h(e,t){void 0===e&&(e=r.COLLECT_SCHOOL),void 0===t&&(t=!1);var s=t?d:l,[i,n]=(0,a.useState)(s.indexOf(e));return(0,a.useEffect)((()=>{n(s.indexOf(e))}),[e,s]),p(s,i)}function g(){return p([r.COLLECT_SCHOOL])}function m(){return p([r.COLLECT_COURSES])}},"./app/j/edgy-data/index.ts":(e,t,s)=>{"use strict";s.d(t,{P6:()=>o.P6,Fq:()=>o.Fq,_1:()=>o._1,B$:()=>o.B$,HC:()=>o.HC,Z0:()=>o.Z0,oA:()=>o.oA,er:()=>o.er,IB:()=>o.IB,_R:()=>o._R,Oe:()=>o.Oe,zH:()=>o.zH,j$:()=>o.j$,DL:()=>o.DL,gU:()=>h,Ds:()=>g,qN:()=>m,XZ:()=>_,ZP:()=>f});var r=s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.cjs.production.min.js"),i=s("./app/j/core/default_store/DefaultStore.ts"),n=s("./app/j/edgy-data/hooks/useEdgyScreen.ts"),o=s("./app/j/edgy-data/thunks.ts"),a=s("./app/j/edgy-data/types.ts"),l=(0,r.createEntityAdapter)(),d=(0,r.createSlice)({name:a.e5,initialState:{courses:l.getInitialState({initialIds:null,codeEnrollments:null,departments:[]}),isCoursesLoading:!1,hasDismissedEdgyDataEmptyState:!1,isConfirmRemoveSchoolModalOpen:!1,isEdgyDataModalOpen:!1,isNativeAppWebView:!1,lastSeenEdgyEmptyNotification:0,maxNumOfCourses:50,schools:{selectedSchool:null,userCountryCode:null,initialSchool:null},shouldRedirectOnEnd:!0,shouldShowEdgyData:!0,startScreen:n.Ql.COLLECT_SCHOOL,user:null},reducers:{init(e,t){var s,r,i,n,o,a,d=t.payload;(e.shouldShowEdgyData=null==(s=d.shouldShowEdgyData)||s,e.schools.userCountryCode=null!=(r=d.countryCode)?r:null,d.isNativeAppWebView&&(e.isNativeAppWebView=d.isNativeAppWebView),d.edgyEmptyStateData)&&(e.hasDismissedEdgyDataEmptyState=null!=(i=d.edgyEmptyStateData.hasDismissedEdgyDataEmptyState)&&i,e.lastSeenEdgyEmptyNotification=null!=(n=d.edgyEmptyStateData.lastSeenEdgyEmptyNotification)?n:0);d.edgyDataInitialSchool&&(e.schools.selectedSchool=null!=(o=d.edgyDataInitialSchool)?o:null,e.schools.initialSchool=null!=(a=d.edgyDataInitialSchool)?a:null);d.edgyDataInitialCourses&&d.edgyDataInitialCourses.length>0&&(l.upsertMany(e.courses,d.edgyDataInitialCourses),e.courses.initialIds=d.edgyDataInitialCourses.map((e=>e.id))),d.maxNumOfCourses&&(e.maxNumOfCourses=d.maxNumOfCourses),d.user&&(e.user=d.user)},addCourse(e,t){l.addOne(e.courses,t)},setConfirmRemoveSchoolModalOpen(e,t){var{payload:s}=t;e.isConfirmRemoveSchoolModalOpen=s},setEdgyDataModalOpen(e,t){var{payload:s}=t;e.isEdgyDataModalOpen=s},setEdgyDataModalOptions(e,t){var{payload:s}=t,{startScreen:r,shouldRedirectOnEnd:i=!0}=s;e.startScreen=r,e.shouldRedirectOnEnd=i},setSelectedSchool(e,t){var{payload:s}=t;e.schools.selectedSchool=s}},extraReducers:e=>e.addCase(o.Oe.pending,((e,t)=>{var s=t.meta.arg;l.addOne(e.courses,s)})).addCase(o.oA.pending,((e,t)=>{var s=t.meta.arg;l.removeOne(e.courses,s.id)})).addCase(o._1.fulfilled,((e,t)=>{var{payload:s}=t;l.upsertMany(e.courses,s),e.courses.initialIds=s.map((e=>e.id))})).addCase(o.zH.pending,((e,t)=>{var s=t.meta.arg;e.schools.selectedSchool=s})).addCase(o.er.pending,(e=>{e.schools.selectedSchool=null,e.courses=l.getInitialState({initialIds:null,codeEnrollments:null,departments:[]})})).addCase(o.B$.fulfilled,((e,t)=>{var{payload:s}=t;e.schools.selectedSchool=s,e.schools.initialSchool=s})).addCase(o.j$.fulfilled,((e,t)=>{var{payload:s}=t;e.courses.codeEnrollments=s})).addCase(o.ow.fulfilled,((e,t)=>{var{payload:s}=t;e.courses.departments=s})).addCase(o.vU.fulfilled,((e,t)=>{var{payload:s}=t;if(null!==s){var r=s.map((e=>e.course));l.upsertMany(e.courses,r);var i=null;s.length>0&&(i=s[0].school),e.schools.selectedSchool=i}})).addMatcher((0,r.isAsyncThunkAction)(o.Oe,o.oA),((e,t)=>{e.isCoursesLoading=(0,r.isPending)(t)}))}),u=d.reducer,{init:c,addCourse:p,setConfirmRemoveSchoolModalOpen:h,setEdgyDataModalOpen:g,setSelectedSchool:m,setEdgyDataModalOptions:_}=d.actions;function f(e,t){void 0===t&&(t=(0,i.bh)()),t.registerReducer(a.e5,u),t.dispatch(d.actions.init(e))}},"./app/j/edgy-data/selectors.ts":(e,t,s)=>{"use strict";s.d(t,{a_:()=>u,HW:()=>c,Lo:()=>h,Ay:()=>g,Le:()=>m,vU:()=>_,Q0:()=>v,U3:()=>S,zQ:()=>C,G6:()=>b,NY:()=>E,Ho:()=>j,oC:()=>T,Ps:()=>I,TI:()=>w,bt:()=>R,vB:()=>D,q1:()=>L,uz:()=>P,m_:()=>M,js:()=>Z,M:()=>k,le:()=>U,PR:()=>N});var r=s("./node_modules/lodash/isEqual.js"),i=s.n(r),n=(s("./node_modules/core-js/modules/es.array.sort.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.cjs.production.min.js")),o=s("./app/j/core/default_store/DefaultStore.ts"),a=s("./app/j/edgy-data/types.ts"),l=s("./node_modules/reselect/lib/index.js"),d=(0,n.createEntityAdapter)(),u=(0,o.iu)(a.e5),c=(0,l.createSelector)([u],(e=>e.startScreen)),p=(0,l.createSelector)([u],(e=>e.schools)),h=(0,l.createSelector)([u],(e=>e.hasDismissedEdgyDataEmptyState)),g=(0,l.createSelector)([u],(e=>e.lastSeenEdgyEmptyNotification)),m=(0,l.createSelector)([p],(e=>e.selectedSchool)),_=(0,l.createSelector)([u],(e=>e.isCoursesLoading)),f=(0,l.createSelector)([p],(e=>e.initialSchool)),v=(0,l.createSelector)([u],(e=>e.shouldShowEdgyData)),S=(0,l.createSelector)([f],(e=>null!==e)),C=(0,l.createSelector)([m],(e=>null!==e)),b=(0,l.createSelector)([p],(e=>e.userCountryCode)),y=(0,l.createSelector)([u],(e=>e.courses)),E=(0,l.createSelector)([y],(e=>null!==e.initialIds)),j=(0,l.createSelector)([y],d.getSelectors().selectAll),x=(0,l.createSelector)([y],(e=>e.initialIds)),T=(0,l.createSelector)([y],(e=>e.codeEnrollments)),I=(0,l.createSelector)([y],(e=>e.departments)),w=(0,l.createSelector)([j],(e=>e.length>0)),A=(0,l.createSelector)([m,f],((e,t)=>(null==t?void 0:t.id)!==(null==e?void 0:e.id))),O=(0,l.createSelector)([j,x],((e,t)=>{var s=e.map((e=>e.id)).sort(),r=[...t||[]].sort();return!i()(s,r)})),R=(0,l.createSelector)([O,A],((e,t)=>e||t)),D=(0,l.createSelector)([f,j],((e,t)=>{var s,r=null!=(s=null==e?void 0:e.lastModified)?s:0,i=t.map((e=>e.lastModified||0));return Math.max(r,...i)})),L=(0,l.createSelector)([u],(e=>e.isEdgyDataModalOpen)),P=(0,l.createSelector)([u],(e=>e.isConfirmRemoveSchoolModalOpen)),M=(0,l.createSelector)([u],(e=>e.isNativeAppWebView)),Z=(0,l.createSelector)([u],(e=>e.shouldRedirectOnEnd)),k=(0,l.createSelector)([u],(e=>e.maxNumOfCourses)),U=(0,l.createSelector)([j,k],((e,t)=>e.length>=t)),N=(0,l.createSelector)([u],(e=>e.user))},"./app/j/edgy-data/thunks.ts":(e,t,s)=>{"use strict";s.d(t,{vU:()=>k,P6:()=>I,Fq:()=>x,ow:()=>E,_1:()=>y,B$:()=>O,HC:()=>Z,Z0:()=>M,oA:()=>A,er:()=>w,IB:()=>D,_R:()=>L,Oe:()=>T,zH:()=>R,j$:()=>j,DL:()=>P});var r=s("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),i=s("./node_modules/lodash/isUndefined.js"),n=s.n(i),o=(s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.cjs.production.min.js")),a=s("./app/j/config/enums.ts"),l=s("./app/j/edgy-data/selectors.ts"),d=s("./app/j/edgy-data/types.ts"),u=s("./app/j/edgy-data/utils.ts"),c=s("./app/j/models/QModel.ts");class p extends c.Z{}p.URL_BASE="courses",p.MODEL_NAME="course",p.CAN_BE_SEARCHED=!0,p.API_VERSION="3.4";class h extends c.Z{}h.API_VERSION="3.4",h.URL_BASE="course-memberships",h.MODEL_NAME="courseMembership",h.UNIQUE_KEYS=["courseId","userId","isActive"];class g extends c.Z{}g.URL_BASE="departments",g.MODEL_NAME="department",g.API_VERSION="3.4",g.ALLOW_SOFT_DELETE=!1;var m=s("./app/j/models/QSchool.ts");class _ extends c.Z{}_.URL_BASE="school-memberships",_.MODEL_NAME="schoolMembership",_.API_VERSION="3.4";var f=s("./node_modules/nullthrows/nullthrows.js"),v=s.n(f),S=s("./app/j/set_recommendation/actions.ts"),C=s("./app/j/utils/FetchWith.ts"),b=s("./app/j/utils/log-page-action.ts"),y=(0,o.createAsyncThunk)(d.e5+"/maybeFetchInitialCourses",(0,r.Z)((function*(){var e,t=yield(0,C.lN)("/webapi/3.4/course-memberships"),s=null!=t&&t.responses?t.responses[0]:null;return(null==s||null==(e=s.models)?void 0:e.course)||[]})),{condition:(e,t)=>{var{getState:s}=t;return!(0,l.NY)(s())}}),E=(0,o.createAsyncThunk)(d.e5+"/fetchSchoolDepartments",function(){var e=(0,r.Z)((function*(e,t){var{getState:s}=t,r=v()((0,l.Le)(s()));return(yield g.where({schoolId:r.id,isCanonical:1})).map((e=>e.getProperties())).filter((e=>!!e.id))}));return function(t,s){return e.apply(this,arguments)}}(),{condition(e,t){var{getState:s}=t;return null!==(0,l.Le)(s())}}),j=(0,o.createAsyncThunk)(d.e5+"/setCourseEnrollments",function(){var e=(0,r.Z)((function*(e,t){var{getState:s}=t,r=(0,l.Le)(s());return{showCourseCode:(0,u.JQ)(r)}}));return function(t,s){return e.apply(this,arguments)}}()),x=()=>e=>{e(y()),e(E()),e(j())},T=(0,o.createAsyncThunk)(d.e5+"/selectCourse",function(){var e=(0,r.Z)((function*(e,t){var{getState:s}=t,r=v()((0,l.PR)(s()),"Missing user in state"),i=new h({courseId:e.id,userId:r.id});yield i.save()}));return function(t,s){return e.apply(this,arguments)}}()),I=(0,o.createAsyncThunk)(d.e5+"/createCourse",function(){var e=(0,r.Z)((function*(e,t){var{dispatch:s,getState:r}=t,i=new p(e),n=null;try{n=yield i.save()}catch(d){var o;if("course.exists"!==d.message)throw d;var[a]=yield p.where({code:i.get("code")||"",countryCode:(0,l.G6)(r())||(null==(o=(0,l.PR)(r()))?void 0:o.countryCode),name:i.get("name")||""});if(!a)throw d;n=a}n&&s(T(n.getProperties()))}));return function(t,s){return e.apply(this,arguments)}}()),w=(0,o.createAsyncThunk)(d.e5+"/removeSchool",function(){var e=(0,r.Z)((function*(e,t){var{getState:s}=t,r=v()((0,l.PR)(s()),"Missing user in state"),i=new _({schoolId:e.id,userId:r.id});_.bulkDelete([i],null,!0)}));return function(t,s){return e.apply(this,arguments)}}()),A=(0,o.createAsyncThunk)(d.e5+"/removeCourse",function(){var e=(0,r.Z)((function*(e,t){var{getState:s}=t,r=v()((0,l.PR)(s()),"Missing user in state"),i=new h({courseId:e.id,userId:r.id});yield h.bulkDelete([i],null,!0)}));return function(t,s){return e.apply(this,arguments)}}()),O=(0,o.createAsyncThunk)(d.e5+"/maybeFetchInitialSchools",(0,r.Z)((function*(){var e=yield(0,C.lN)("/webapi/3.4/school-memberships"),t=null!=e&&e.responses?e.responses[0].models.school:null;return t?t[0]:null})),{condition:(e,t)=>{var{getState:s}=t;return!(0,l.U3)(s())}}),R=(0,o.createAsyncThunk)(d.e5+"/selectSchool",function(){var e=(0,r.Z)((function*(e){var t=new _({schoolId:e.id,relationshipType:a.UhK.MAIN});return(yield t.save()).getProperties()}));return function(t){return e.apply(this,arguments)}}()),D=(0,o.createAsyncThunk)(d.e5+"/saveSchool",function(){var e=(0,r.Z)((function*(e,t){var{rejectWithValue:s}=t,r=new m.Z(e);return yield r.save(),r.isValid()?r.getProperties():s(r.getValidationErrors())}));return function(t,s){return e.apply(this,arguments)}}()),L=(0,o.createAsyncThunk)(d.e5+"/saveSchoolData",function(){var e=(0,r.Z)((function*(e,t){var{getState:s}=t,r=s(),i=(0,l.Le)(r);if(i)return R(i)}));return function(t,s){return e.apply(this,arguments)}}()),P=(0,o.createAsyncThunk)(d.e5+"/setUserAsSelfLearner",(0,r.Z)((function*(){(0,b.Z)("set_self_learner_from_course_overview_card"),(0,C.cZ)("/webapi/3.4/users/set-self-learner")}))),M=(0,o.createAsyncThunk)(d.e5+"/recordSeenModal",(0,r.Z)((function*(){(0,C.cZ)("/users/saw-edgy-modal");var{href:e}=window.location;e.includes("/latest?")&&window&&window.history&&window.history.replaceState&&window.history.replaceState({},"","/latest")}))),Z=(0,o.createAsyncThunk)(d.e5+"/maybeRefreshRecommendations",(0,r.Z)((function*(){(0,S.aO)()})),{condition:(e,t)=>{var{getState:s}=t;return(0,l.bt)(s())}}),k=(0,o.createAsyncThunk)(d.e5+"/courseInstanceAddCourse",function(){var e=(0,r.Z)((function*(e){var{course:t,school:s}=e,r=yield(0,C.cZ)("/webapi/3.4/course-instance/add-course",{schoolId:s.id,courseId:t.id}),i=r.success,o=r.courseInstances;return!i||n()(o)?null:o}));return function(t){return e.apply(this,arguments)}}())},"./app/j/edgy-data/types.ts":(e,t,s)=>{"use strict";s.d(t,{sH:()=>i,e5:()=>n,K1:()=>r});var r,i=40,n="edgyData";!function(e){e.icon="icon",e.text="text"}(r||(r={}))},"./app/j/edgy-data/utils.ts":(e,t,s)=>{"use strict";s.d(t,{ZJ:()=>o,JQ:()=>a,CL:()=>d,k4:()=>u,WS:()=>c,Iw:()=>p,PP:()=>h,aS:()=>g});s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.regexp.test.js"),s("./node_modules/core-js/modules/es.string.trim.js");var r=s("./app/j/config/enums.ts"),i=s("./app/j/global/Rollbar.ts"),n=s("./app/j/hooks/useQMeasure.ts");function o(e){var t,s;return null!=(t=null==e||null==(s=e.username)?void 0:s.toUpperCase())?t:""}function a(e){return"us"===(null==e?void 0:e.countryCode)&&(null==e?void 0:e.level)===r.ZK_.UNIVERSITY}var l=/^\w+[-\s]\w+$/;function d(e){return void 0===e&&(e=""),l.test(e)}function u(e){var{name:t=""}=e;return d(e.code)||t.length>0}function c(e,t,s,r){return void 0===t&&(t=""),void 0===s&&(s=!1),void 0===r&&(r="•"),""===t.trim()&&""===e?(i.Z.warning("Course name and code both empty"),""):""===e?t:s&&""===t.trim()?e:s?t+" "+r+" "+e:e}function p(e){return c(e.name||"",e.code,!0)}var h=e=>{var{hasCourses:t,hasSchool:s,user:r}=e;return!(!r||!0!==r.isSelfLearner||s&&t)};function g(){return"experiment"===(0,n.Z)().getVariationAndEnroll("EdgyFlowModalV3[default,growth]")}},"./app/j/hocs/dragDropDecorator.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var r=s("./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js"),i=(s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/react/index.js")),n=s("./app/j/utils/HOCs.ts"),o=s("./node_modules/react/jsx-runtime.js"),a=["innerRef"];function l(){return(0,n.r)((e=>class extends i.Component{constructor(){super(...arguments),this.state={dragDropEvent:null,dragEnterEvent:null,isDropTarget:!1},this.handleDrop=e=>{e.persist(),this.setState({dragDropEvent:e,isDropTarget:!1},(()=>this.setState({dragDropEvent:null})))},this._dragCollection=[],this._onDragEnter=e=>{0===this._dragCollection.length&&(e.persist(),this.setState({isDropTarget:!0,dragEnterEvent:e},(()=>this.setState({dragEnterEvent:null})))),this._dragCollection=this._dragCollection.concat([e.target])},this._onDragLeave=e=>{this._dragCollection=this._dragCollection.filter((t=>t!==e.target)),0===this._dragCollection.length&&this.setState({isDropTarget:!1})},this._onDrop=e=>{this._dragCollection=[],this.handleDrop(e)}}render(){var t=this.props,{innerRef:s}=t,i=(0,r.Z)(t,a);return(0,o.jsx)(e,Object.assign({},i,this.state,{onDragEnter:this._onDragEnter,onDragLeave:this._onDragLeave,onDrop:this._onDrop,ref:s}))}}))}},"./app/j/hocs/stickyHeaderStateDecorator.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>u});s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/react/index.js"),i=s("./app/j/utils/BreakpointsHelper.ts"),n=s("./app/j/utils/breakpointSwitch.ts"),o=s("./app/j/utils/EventListener.ts"),a=s("./app/j/utils/HOCs.ts"),l=s("./app/j/utils/ScrollInfo.ts"),d=s("./node_modules/react/jsx-runtime.js");function u(e){return(0,a.r)((function(t){return class extends r.Component{constructor(){super(...arguments),this.state={isSticky:!1},this.onScroll=()=>{this.hasScheduledScrollRaf||(this.hasScheduledScrollRaf=!0,this.lastScrollTop=l.Z.getScrollTop(),window.requestAnimationFrame(this.updateSticky))},this.updateSticky=()=>{if(e.disableOnDesktop&&!(0,i.C1)())this.hasScheduledScrollRaf=!1;else{var t=this.getOffset(),s=this.lastScrollTop>t;s!==this.state.isSticky&&this.setState({isSticky:s}),this.hasScheduledScrollRaf=!1}}}componentDidMount(){this.scrollListener=o.Z.listen(window,"scroll",this.onScroll)}componentWillUnmount(){this.scrollListener&&this.scrollListener.remove()}getOffset(){var t=(0,n.b)();return e.headerOffsetTopMobile&&(0,i.RF)()?e.headerOffsetTopMobile:void 0!==e.headerOffsetTopTablet&&(0,i.C1)()&&t&&(0,i.TA)(t,"s")?e.headerOffsetTopTablet:e.headerOffsetTop}render(){return(0,d.jsx)(t,Object.assign({},this.props,{isSticky:this.state.isSticky}))}}}))}},"./app/j/hooks/usePrevious.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var r=s("./node_modules/react/index.js");function i(e){var t=(0,r.useRef)();return(0,r.useEffect)((()=>{t.current=e}),[e]),t.current}},"./app/j/i18n/displayHumanTime.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var r=s("./app/j/constants/TimeConstants.ts"),i=s("./app/j/utils/unix-timestamp.ts");function n(e,t,s){void 0===s&&(s=!1);var n=(0,i.S0)();if(!t)return e("human_time.blank_timestamp");var o=t<=n;if(!o&&!s)return e("human_time.past.almost_now");var a=Math.abs(n-t),l=30*r.ii;if(a<10)return e(o?"human_time.past.almost_now":"human_time.future.almost_now");if(a<r.sU)return e(o?"human_time.past.under_one_min":"human_time.future.under_one_min");if(a<r.RQ){var d=Math.round(a/r.sU);return e(o?"human_time.past.under_one_hour":"human_time.future.under_one_hour",{minutes:d})}if(a<r.ii&&a>=r.RQ){var u=Math.round(a/r.RQ);return e(o?"human_time.past.under_one_day":"human_time.future.under_one_day",{hours:u})}if(a<r.nU&&a>=r.ii){var c=Math.round(a/r.ii);return e(o?"human_time.past.under_one_week":"human_time.future.under_one_week",{days:c})}if(a<l&&a>=r.nU){var p=Math.round(a/r.nU);return e(o?"human_time.past.under_one_month":"human_time.future.under_one_month",{weeks:p})}if(a<r.zi&&a>=l){var h=Math.round(a/l);return e(o?"human_time.past.under_one_year":"human_time.future.under_one_year",{months:h})}var g=Math.round(a/r.zi);return e(o?"human_time.past.years":"human_time.future.years",{years:g})}},"./app/j/i18n/getLocalizedCountry.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var r=s("./app/j/global/Rollbar.ts");function i(e,t){switch(e){case"ad":return t("countries.ad");case"ae":return t("countries.ae");case"af":return t("countries.af");case"ag":return t("countries.ag");case"ai":return t("countries.ai");case"al":return t("countries.al");case"am":return t("countries.am");case"an":return t("countries.an");case"ao":return t("countries.ao");case"aq":return t("countries.aq");case"ar":return t("countries.ar");case"as":return t("countries.as");case"at":return t("countries.at");case"au":return t("countries.au");case"aw":return t("countries.aw");case"ax":return t("countries.ax");case"az":return t("countries.az");case"ba":return t("countries.ba");case"bb":return t("countries.bb");case"bd":return t("countries.bd");case"be":return t("countries.be");case"bf":return t("countries.bf");case"bg":return t("countries.bg");case"bh":return t("countries.bh");case"bi":return t("countries.bi");case"bj":return t("countries.bj");case"bl":return t("countries.bl");case"bm":return t("countries.bm");case"bn":return t("countries.bn");case"bo":return t("countries.bo");case"bq":return t("countries.bq");case"br":return t("countries.br");case"bs":return t("countries.bs");case"bt":return t("countries.bt");case"bv":return t("countries.bv");case"bw":return t("countries.bw");case"by":return t("countries.by");case"bz":return t("countries.bz");case"ca":return t("countries.ca");case"cc":return t("countries.cc");case"cd":return t("countries.cd");case"cf":return t("countries.cf");case"cg":return t("countries.cg");case"ch":return t("countries.ch");case"ci":return t("countries.ci");case"ck":return t("countries.ck");case"cl":return t("countries.cl");case"cm":return t("countries.cm");case"cn":return t("countries.cn");case"co":return t("countries.co");case"cr":return t("countries.cr");case"cs":return t("countries.cs");case"cu":return t("countries.cu");case"cv":return t("countries.cv");case"cw":return t("countries.cw");case"cx":return t("countries.cx");case"cy":return t("countries.cy");case"cz":return t("countries.cz");case"de":return t("countries.de");case"dj":return t("countries.dj");case"dk":return t("countries.dk");case"dm":return t("countries.dm");case"do":return t("countries.do");case"dz":return t("countries.dz");case"ec":return t("countries.ec");case"ee":return t("countries.ee");case"eg":return t("countries.eg");case"eh":return t("countries.eh");case"er":return t("countries.er");case"es":return t("countries.es");case"et":return t("countries.et");case"fi":return t("countries.fi");case"fj":return t("countries.fj");case"fk":return t("countries.fk");case"fm":return t("countries.fm");case"fo":return t("countries.fo");case"fr":return t("countries.fr");case"ga":return t("countries.ga");case"gb":return t("countries.gb");case"gd":return t("countries.gd");case"ge":return t("countries.ge");case"gf":return t("countries.gf");case"gg":return t("countries.gg");case"gh":return t("countries.gh");case"gi":return t("countries.gi");case"gl":return t("countries.gl");case"gm":return t("countries.gm");case"gn":return t("countries.gn");case"gp":return t("countries.gp");case"gq":return t("countries.gq");case"gr":return t("countries.gr");case"gs":return t("countries.gs");case"gt":return t("countries.gt");case"gu":return t("countries.gu");case"gw":return t("countries.gw");case"gy":return t("countries.gy");case"hk":return t("countries.hk");case"hm":return t("countries.hm");case"hn":return t("countries.hn");case"hr":return t("countries.hr");case"ht":return t("countries.ht");case"hu":return t("countries.hu");case"id":return t("countries.id");case"ie":return t("countries.ie");case"il":return t("countries.il");case"im":return t("countries.im");case"in":return t("countries.in");case"io":return t("countries.io");case"iq":return t("countries.iq");case"ir":return t("countries.ir");case"is":return t("countries.is");case"it":return t("countries.it");case"je":return t("countries.je");case"jm":return t("countries.jm");case"jo":return t("countries.jo");case"jp":return t("countries.jp");case"ke":return t("countries.ke");case"kg":return t("countries.kg");case"kh":return t("countries.kh");case"ki":return t("countries.ki");case"km":return t("countries.km");case"kn":return t("countries.kn");case"kp":return t("countries.kp");case"kr":return t("countries.kr");case"kw":return t("countries.kw");case"ky":return t("countries.ky");case"kz":return t("countries.kz");case"la":return t("countries.la");case"lb":return t("countries.lb");case"lc":return t("countries.lc");case"li":return t("countries.li");case"lk":return t("countries.lk");case"lr":return t("countries.lr");case"ls":return t("countries.ls");case"lt":return t("countries.lt");case"lu":return t("countries.lu");case"lv":return t("countries.lv");case"ly":return t("countries.ly");case"ma":return t("countries.ma");case"mc":return t("countries.mc");case"md":return t("countries.md");case"me":return t("countries.me");case"mf":return t("countries.mf");case"mg":return t("countries.mg");case"mh":return t("countries.mh");case"mk":return t("countries.mk");case"ml":return t("countries.ml");case"mm":return t("countries.mm");case"mn":return t("countries.mn");case"mo":return t("countries.mo");case"mp":return t("countries.mp");case"mq":return t("countries.mq");case"mr":return t("countries.mr");case"ms":return t("countries.ms");case"mt":return t("countries.mt");case"mu":return t("countries.mu");case"mv":return t("countries.mv");case"mw":return t("countries.mw");case"mx":return t("countries.mx");case"my":return t("countries.my");case"mz":return t("countries.mz");case"na":return t("countries.na");case"nc":return t("countries.nc");case"ne":return t("countries.ne");case"nf":return t("countries.nf");case"ng":return t("countries.ng");case"ni":return t("countries.ni");case"nl":return t("countries.nl");case"no":return t("countries.no");case"np":return t("countries.np");case"nr":return t("countries.nr");case"nu":return t("countries.nu");case"nz":return t("countries.nz");case"om":return t("countries.om");case"pa":return t("countries.pa");case"pe":return t("countries.pe");case"pf":return t("countries.pf");case"pg":return t("countries.pg");case"ph":return t("countries.ph");case"pk":return t("countries.pk");case"pl":return t("countries.pl");case"pm":return t("countries.pm");case"pn":return t("countries.pn");case"pr":return t("countries.pr");case"ps":return t("countries.ps");case"pt":return t("countries.pt");case"pw":return t("countries.pw");case"py":return t("countries.py");case"qa":return t("countries.qa");case"re":return t("countries.re");case"ro":return t("countries.ro");case"rs":return t("countries.rs");case"ru":return t("countries.ru");case"rw":return t("countries.rw");case"sa":return t("countries.sa");case"sb":return t("countries.sb");case"sc":return t("countries.sc");case"sd":return t("countries.sd");case"se":return t("countries.se");case"sg":return t("countries.sg");case"sh":return t("countries.sh");case"si":return t("countries.si");case"sj":return t("countries.sj");case"sk":return t("countries.sk");case"sl":return t("countries.sl");case"sm":return t("countries.sm");case"sn":return t("countries.sn");case"so":return t("countries.so");case"sr":return t("countries.sr");case"ss":return t("countries.ss");case"st":return t("countries.st");case"sv":return t("countries.sv");case"sx":return t("countries.sx");case"sy":return t("countries.sy");case"sz":return t("countries.sz");case"tc":return t("countries.tc");case"td":return t("countries.td");case"tf":return t("countries.tf");case"tg":return t("countries.tg");case"th":return t("countries.th");case"tj":return t("countries.tj");case"tk":return t("countries.tk");case"tl":return t("countries.tl");case"tm":return t("countries.tm");case"tn":return t("countries.tn");case"to":return t("countries.to");case"tr":return t("countries.tr");case"tt":return t("countries.tt");case"tv":return t("countries.tv");case"tw":return t("countries.tw");case"tz":return t("countries.tz");case"ua":return t("countries.ua");case"ug":return t("countries.ug");case"um":return t("countries.um");case"us":return t("countries.us");case"uy":return t("countries.uy");case"uz":return t("countries.uz");case"va":return t("countries.va");case"vc":return t("countries.vc");case"ve":return t("countries.ve");case"vg":return t("countries.vg");case"vi":return t("countries.vi");case"vn":return t("countries.vn");case"vu":return t("countries.vu");case"wf":return t("countries.wf");case"ws":return t("countries.ws");case"xk":return t("countries.xk");case"ye":return t("countries.ye");case"yt":return t("countries.yt");case"za":return t("countries.za");case"zm":return t("countries.zm");case"zw":return t("countries.zw");default:return r.Z.error("Invalid country in getLocalizedCountry()",{country:e}),e}}},"./app/j/i18n/getLocalizedLanguage.ts":(e,t,s)=>{"use strict";s.d(t,{w:()=>o,Z:()=>a});var r=s("./app/j/global/Rollbar.ts"),i=s("./app/j/i18n/$t.ts");function n(e){e?r.Z.warning("Unknown language code",{language:e}):r.Z.error("Empty language param",{language:e})}function o(e){switch(e){case"??":return(0,i.Z)("languages_uppercase.unknown");case"af":return(0,i.Z)("languages_uppercase.af");case"ak":return(0,i.Z)("languages_uppercase.ak");case"akk":return(0,i.Z)("languages_uppercase.akk");case"am":return(0,i.Z)("languages_uppercase.am");case"ang":return(0,i.Z)("languages_uppercase.ang");case"ar":return(0,i.Z)("languages_uppercase.ar");case"ase":return(0,i.Z)("languages_uppercase.ase");case"az":return(0,i.Z)("languages_uppercase.az");case"be":return(0,i.Z)("languages_uppercase.be");case"bg":return(0,i.Z)("languages_uppercase.bg");case"bh":return(0,i.Z)("languages_uppercase.bh");case"bn":return(0,i.Z)("languages_uppercase.bn");case"bo":return(0,i.Z)("languages_uppercase.bo");case"br":return(0,i.Z)("languages_uppercase.br");case"bs":return(0,i.Z)("languages_uppercase.bs");case"ca":return(0,i.Z)("languages_uppercase.ca");case"ceb":return(0,i.Z)("languages_uppercase.ceb");case"ch":return(0,i.Z)("languages_uppercase.ch");case"chem":return(0,i.Z)("languages_uppercase.chem");case"cho":return(0,i.Z)("languages_uppercase.cho");case"chr":return(0,i.Z)("languages_uppercase.chr");case"co":return(0,i.Z)("languages_uppercase.co");case"cop":return(0,i.Z)("languages_uppercase.cop");case"cs":return(0,i.Z)("languages_uppercase.cs");case"cy":return(0,i.Z)("languages_uppercase.cy");case"da":return(0,i.Z)("languages_uppercase.da");case"de":return(0,i.Z)("languages_uppercase.de");case"den":return(0,i.Z)("languages_uppercase.den");case"dv":return(0,i.Z)("languages_uppercase.dv");case"dyo":return(0,i.Z)("languages_uppercase.dyo");case"el":return(0,i.Z)("languages_uppercase.el");case"en":return(0,i.Z)("languages_uppercase.en");case"eo":return(0,i.Z)("languages_uppercase.eo");case"es":return(0,i.Z)("languages_uppercase.es");case"et":return(0,i.Z)("languages_uppercase.et");case"eu":return(0,i.Z)("languages_uppercase.eu");case"fa":return(0,i.Z)("languages_uppercase.fa");case"ff":return(0,i.Z)("languages_uppercase.ff");case"fi":return(0,i.Z)("languages_uppercase.fi");case"fil":return(0,i.Z)("languages_uppercase.fil");case"fo":return(0,i.Z)("languages_uppercase.fo");case"fr":return(0,i.Z)("languages_uppercase.fr");case"fy":return(0,i.Z)("languages_uppercase.fy");case"ga":return(0,i.Z)("languages_uppercase.ga");case"gd":return(0,i.Z)("languages_uppercase.gd");case"gl":return(0,i.Z)("languages_uppercase.gl");case"gn":return(0,i.Z)("languages_uppercase.gn");case"got":return(0,i.Z)("languages_uppercase.got");case"gu":return(0,i.Z)("languages_uppercase.gu");case"ha":return(0,i.Z)("languages_uppercase.ha");case"hai":return(0,i.Z)("languages_uppercase.hai");case"haw":return(0,i.Z)("languages_uppercase.haw");case"hi":return(0,i.Z)("languages_uppercase.hi");case"hil":return(0,i.Z)("languages_uppercase.hil");case"hmv":return(0,i.Z)("languages_uppercase.hmv");case"hr":return(0,i.Z)("languages_uppercase.hr");case"ht":return(0,i.Z)("languages_uppercase.ht");case"hu":return(0,i.Z)("languages_uppercase.hu");case"hy":return(0,i.Z)("languages_uppercase.hy");case"id":return(0,i.Z)("languages_uppercase.id");case"ig":return(0,i.Z)("languages_uppercase.ig");case"ipa":return(0,i.Z)("languages_uppercase.ipa");case"is":return(0,i.Z)("languages_uppercase.is");case"it":return(0,i.Z)("languages_uppercase.it");case"iu":return(0,i.Z)("languages_uppercase.iu");case"iw":return(0,i.Z)("languages_uppercase.iw");case"ja":return(0,i.Z)("languages_uppercase.ja");case"ja-ka":return(0,i.Z)("languages_uppercase.ja_ka");case"ja-ro":return(0,i.Z)("languages_uppercase.ja_ro");case"jv":return(0,i.Z)("languages_uppercase.jv");case"ka":return(0,i.Z)("languages_uppercase.ka");case"kg":return(0,i.Z)("languages_uppercase.kg");case"kin":return(0,i.Z)("languages_uppercase.kin");case"kio":return(0,i.Z)("languages_uppercase.kio");case"kk":return(0,i.Z)("languages_uppercase.kk");case"km":return(0,i.Z)("languages_uppercase.km");case"kn":return(0,i.Z)("languages_uppercase.kn");case"ko":return(0,i.Z)("languages_uppercase.ko");case"ksw":return(0,i.Z)("languages_uppercase.ksw");case"ku":return(0,i.Z)("languages_uppercase.ku");case"ky":return(0,i.Z)("languages_uppercase.ky");case"la":return(0,i.Z)("languages_uppercase.la");case"lb":return(0,i.Z)("languages_uppercase.lb");case"lkt":return(0,i.Z)("languages_uppercase.lkt");case"ln":return(0,i.Z)("languages_uppercase.ln");case"lo":return(0,i.Z)("languages_uppercase.lo");case"lt":return(0,i.Z)("languages_uppercase.lt");case"lua":return(0,i.Z)("languages_uppercase.lua");case"luo":return(0,i.Z)("languages_uppercase.luo");case"lv":return(0,i.Z)("languages_uppercase.lv");case"math":return(0,i.Z)("languages_uppercase.math");case"mg":return(0,i.Z)("languages_uppercase.mg");case"mh":return(0,i.Z)("languages_uppercase.mh");case"mi":return(0,i.Z)("languages_uppercase.mi");case"mjd":return(0,i.Z)("languages_uppercase.mjd");case"mk":return(0,i.Z)("languages_uppercase.mk");case"ml":return(0,i.Z)("languages_uppercase.ml");case"mn":return(0,i.Z)("languages_uppercase.mn");case"mnk":return(0,i.Z)("languages_uppercase.mnk");case"moh":return(0,i.Z)("languages_uppercase.moh");case"mr":return(0,i.Z)("languages_uppercase.mr");case"ms":return(0,i.Z)("languages_uppercase.ms");case"mt":return(0,i.Z)("languages_uppercase.mt");case"my":return(0,i.Z)("languages_uppercase.my");case"nah":return(0,i.Z)("languages_uppercase.nah");case"ne":return(0,i.Z)("languages_uppercase.ne");case"nl":return(0,i.Z)("languages_uppercase.nl");case"no":return(0,i.Z)("languages_uppercase.no");case"nv":return(0,i.Z)("languages_uppercase.nv");case"oc":return(0,i.Z)("languages_uppercase.oc");case"oj":return(0,i.Z)("languages_uppercase.oj");case"om":return(0,i.Z)("languages_uppercase.om");case"ood":return(0,i.Z)("languages_uppercase.ood");case"or":return(0,i.Z)("languages_uppercase.or");case"pa":return(0,i.Z)("languages_uppercase.pa");case"photo":return(0,i.Z)("languages_uppercase.photo");case"pi":return(0,i.Z)("languages_uppercase.pi");case"pl":return(0,i.Z)("languages_uppercase.pl");case"ps":return(0,i.Z)("languages_uppercase.ps");case"pt":return(0,i.Z)("languages_uppercase.pt");case"qu":return(0,i.Z)("languages_uppercase.qu");case"rar":return(0,i.Z)("languages_uppercase.rar");case"rm":return(0,i.Z)("languages_uppercase.rm");case"ro":return(0,i.Z)("languages_uppercase.ro");case"ru":return(0,i.Z)("languages_uppercase.ru");case"sa":return(0,i.Z)("languages_uppercase.sa");case"sd":return(0,i.Z)("languages_uppercase.sd");case"see":return(0,i.Z)("languages_uppercase.see");case"shn":return(0,i.Z)("languages_uppercase.shn");case"si":return(0,i.Z)("languages_uppercase.si");case"sk":return(0,i.Z)("languages_uppercase.sk");case"sl":return(0,i.Z)("languages_uppercase.sl");case"sm":return(0,i.Z)("languages_uppercase.sm");case"so":return(0,i.Z)("languages_uppercase.so");case"sq":return(0,i.Z)("languages_uppercase.sq");case"sr":return(0,i.Z)("languages_uppercase.sr");case"su":return(0,i.Z)("languages_uppercase.su");case"sv":return(0,i.Z)("languages_uppercase.sv");case"sw":return(0,i.Z)("languages_uppercase.sw");case"syc":return(0,i.Z)("languages_uppercase.syc");case"ta":return(0,i.Z)("languages_uppercase.ta");case"te":return(0,i.Z)("languages_uppercase.te");case"tet":return(0,i.Z)("languages_uppercase.tet");case"tg":return(0,i.Z)("languages_uppercase.tg");case"th":return(0,i.Z)("languages_uppercase.th");case"ti":return(0,i.Z)("languages_uppercase.ti");case"tl":return(0,i.Z)("languages_uppercase.tl");case"to":return(0,i.Z)("languages_uppercase.to");case"tr":return(0,i.Z)("languages_uppercase.tr");case"trc":return(0,i.Z)("languages_uppercase.trc");case"tt":return(0,i.Z)("languages_uppercase.tt");case"tyv":return(0,i.Z)("languages_uppercase.tyv");case"ug":return(0,i.Z)("languages_uppercase.ug");case"uk":return(0,i.Z)("languages_uppercase.uk");case"unm":return(0,i.Z)("languages_uppercase.unm");case"ur":return(0,i.Z)("languages_uppercase.ur");case"uz":return(0,i.Z)("languages_uppercase.uz");case"vi":return(0,i.Z)("languages_uppercase.vi");case"win":return(0,i.Z)("languages_uppercase.win");case"wo":return(0,i.Z)("languages_uppercase.wo");case"xh":return(0,i.Z)("languages_uppercase.xh");case"yi":return(0,i.Z)("languages_uppercase.yi");case"yo":return(0,i.Z)("languages_uppercase.yo");case"zh-CN":return(0,i.Z)("languages_uppercase.zh_cn");case"zh-pi":return(0,i.Z)("languages_uppercase.zh_pi");case"zh-TW":return(0,i.Z)("languages_uppercase.zh_tw");case"zu":return(0,i.Z)("languages_uppercase.zu");default:return n(e),e}}function a(e){switch(e){case"??":return(0,i.Z)("languages.unknown");case"af":return(0,i.Z)("languages.af");case"ak":return(0,i.Z)("languages.ak");case"akk":return(0,i.Z)("languages.akk");case"am":return(0,i.Z)("languages.am");case"ang":return(0,i.Z)("languages.ang");case"ar":return(0,i.Z)("languages.ar");case"ase":return(0,i.Z)("languages.ase");case"az":return(0,i.Z)("languages.az");case"be":return(0,i.Z)("languages.be");case"bg":return(0,i.Z)("languages.bg");case"bh":return(0,i.Z)("languages.bh");case"bn":return(0,i.Z)("languages.bn");case"bo":return(0,i.Z)("languages.bo");case"br":return(0,i.Z)("languages.br");case"bs":return(0,i.Z)("languages.bs");case"ca":return(0,i.Z)("languages.ca");case"ceb":return(0,i.Z)("languages.ceb");case"ch":return(0,i.Z)("languages.ch");case"chem":return(0,i.Z)("languages.chem");case"cho":return(0,i.Z)("languages.cho");case"chr":return(0,i.Z)("languages.chr");case"co":return(0,i.Z)("languages.co");case"cop":return(0,i.Z)("languages.cop");case"cs":return(0,i.Z)("languages.cs");case"cy":return(0,i.Z)("languages.cy");case"da":return(0,i.Z)("languages.da");case"de":return(0,i.Z)("languages.de");case"den":return(0,i.Z)("languages.den");case"dv":return(0,i.Z)("languages.dv");case"dyo":return(0,i.Z)("languages.dyo");case"el":return(0,i.Z)("languages.el");case"en":return(0,i.Z)("languages.en");case"eo":return(0,i.Z)("languages.eo");case"es":return(0,i.Z)("languages.es");case"et":return(0,i.Z)("languages.et");case"eu":return(0,i.Z)("languages.eu");case"fa":return(0,i.Z)("languages.fa");case"ff":return(0,i.Z)("languages.ff");case"fi":return(0,i.Z)("languages.fi");case"fil":return(0,i.Z)("languages.fil");case"fo":return(0,i.Z)("languages.fo");case"fr":return(0,i.Z)("languages.fr");case"fy":return(0,i.Z)("languages.fy");case"ga":return(0,i.Z)("languages.ga");case"gd":return(0,i.Z)("languages.gd");case"gl":return(0,i.Z)("languages.gl");case"gn":return(0,i.Z)("languages.gn");case"got":return(0,i.Z)("languages.got");case"gu":return(0,i.Z)("languages.gu");case"ha":return(0,i.Z)("languages.ha");case"hai":return(0,i.Z)("languages.hai");case"haw":return(0,i.Z)("languages.haw");case"hi":return(0,i.Z)("languages.hi");case"hil":return(0,i.Z)("languages.hil");case"hmv":return(0,i.Z)("languages.hmv");case"hr":return(0,i.Z)("languages.hr");case"ht":return(0,i.Z)("languages.ht");case"hu":return(0,i.Z)("languages.hu");case"hy":return(0,i.Z)("languages.hy");case"id":return(0,i.Z)("languages.id");case"ig":return(0,i.Z)("languages.ig");case"ipa":return(0,i.Z)("languages.ipa");case"is":return(0,i.Z)("languages.is");case"it":return(0,i.Z)("languages.it");case"iu":return(0,i.Z)("languages.iu");case"iw":return(0,i.Z)("languages.iw");case"ja":return(0,i.Z)("languages.ja");case"ja-ka":return(0,i.Z)("languages.ja_ka");case"ja-ro":return(0,i.Z)("languages.ja_ro");case"jv":return(0,i.Z)("languages.jv");case"ka":return(0,i.Z)("languages.ka");case"kg":return(0,i.Z)("languages.kg");case"kin":return(0,i.Z)("languages.kin");case"kio":return(0,i.Z)("languages.kio");case"kk":return(0,i.Z)("languages.kk");case"km":return(0,i.Z)("languages.km");case"kn":return(0,i.Z)("languages.kn");case"ko":return(0,i.Z)("languages.ko");case"ksw":return(0,i.Z)("languages.ksw");case"ku":return(0,i.Z)("languages.ku");case"ky":return(0,i.Z)("languages.ky");case"la":return(0,i.Z)("languages.la");case"lb":return(0,i.Z)("languages.lb");case"lkt":return(0,i.Z)("languages.lkt");case"ln":return(0,i.Z)("languages.ln");case"lo":return(0,i.Z)("languages.lo");case"lt":return(0,i.Z)("languages.lt");case"lua":return(0,i.Z)("languages.lua");case"luo":return(0,i.Z)("languages.luo");case"lv":return(0,i.Z)("languages.lv");case"math":return(0,i.Z)("languages.math");case"mg":return(0,i.Z)("languages.mg");case"mh":return(0,i.Z)("languages.mh");case"mi":return(0,i.Z)("languages.mi");case"mjd":return(0,i.Z)("languages.mjd");case"mk":return(0,i.Z)("languages.mk");case"ml":return(0,i.Z)("languages.ml");case"mn":return(0,i.Z)("languages.mn");case"mnk":return(0,i.Z)("languages.mnk");case"moh":return(0,i.Z)("languages.moh");case"mr":return(0,i.Z)("languages.mr");case"ms":return(0,i.Z)("languages.ms");case"mt":return(0,i.Z)("languages.mt");case"my":return(0,i.Z)("languages.my");case"nah":return(0,i.Z)("languages.nah");case"ne":return(0,i.Z)("languages.ne");case"nl":return(0,i.Z)("languages.nl");case"no":return(0,i.Z)("languages.no");case"nv":return(0,i.Z)("languages.nv");case"oc":return(0,i.Z)("languages.oc");case"oj":return(0,i.Z)("languages.oj");case"om":return(0,i.Z)("languages.om");case"ood":return(0,i.Z)("languages.ood");case"or":return(0,i.Z)("languages.or");case"pa":return(0,i.Z)("languages.pa");case"photo":return(0,i.Z)("languages.photo");case"pi":return(0,i.Z)("languages.pi");case"pl":return(0,i.Z)("languages.pl");case"ps":return(0,i.Z)("languages.ps");case"pt":return(0,i.Z)("languages.pt");case"qu":return(0,i.Z)("languages.qu");case"rar":return(0,i.Z)("languages.rar");case"rm":return(0,i.Z)("languages.rm");case"ro":return(0,i.Z)("languages.ro");case"ru":return(0,i.Z)("languages.ru");case"sa":return(0,i.Z)("languages.sa");case"sd":return(0,i.Z)("languages.sd");case"see":return(0,i.Z)("languages.see");case"shn":return(0,i.Z)("languages.shn");case"si":return(0,i.Z)("languages.si");case"sk":return(0,i.Z)("languages.sk");case"sl":return(0,i.Z)("languages.sl");case"sm":return(0,i.Z)("languages.sm");case"so":return(0,i.Z)("languages.so");case"sq":return(0,i.Z)("languages.sq");case"sr":return(0,i.Z)("languages.sr");case"su":return(0,i.Z)("languages.su");case"sv":return(0,i.Z)("languages.sv");case"sw":return(0,i.Z)("languages.sw");case"syc":return(0,i.Z)("languages.syc");case"ta":return(0,i.Z)("languages.ta");case"te":return(0,i.Z)("languages.te");case"tet":return(0,i.Z)("languages.tet");case"tg":return(0,i.Z)("languages.tg");case"th":return(0,i.Z)("languages.th");case"ti":return(0,i.Z)("languages.ti");case"tl":return(0,i.Z)("languages.tl");case"to":return(0,i.Z)("languages.to");case"tr":return(0,i.Z)("languages.tr");case"trc":return(0,i.Z)("languages.trc");case"tt":return(0,i.Z)("languages.tt");case"tyv":return(0,i.Z)("languages.tyv");case"ug":return(0,i.Z)("languages.ug");case"uk":return(0,i.Z)("languages.uk");case"unm":return(0,i.Z)("languages.unm");case"ur":return(0,i.Z)("languages.ur");case"uz":return(0,i.Z)("languages.uz");case"vi":return(0,i.Z)("languages.vi");case"win":return(0,i.Z)("languages.win");case"wo":return(0,i.Z)("languages.wo");case"xh":return(0,i.Z)("languages.xh");case"yi":return(0,i.Z)("languages.yi");case"yo":return(0,i.Z)("languages.yo");case"zh-CN":return(0,i.Z)("languages.zh_cn");case"zh-pi":return(0,i.Z)("languages.zh_pi");case"zh-TW":return(0,i.Z)("languages.zh_tw");case"zu":return(0,i.Z)("languages.zu");default:return n(e),e}}},"./app/j/legacyAssistant/utils/MediaDataSource.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js");var r=s("./app/j/utils/createOrAppendToMappedArray.ts");class i{constructor(e){this.mediaConnectionsMap=new Map;var t=null==e?void 0:e.studiableMediaConnections;t&&t.forEach((e=>{var t="connectionModelLuid"in e?e.connectionModelLuid:e.connectionModelId;(0,r.Z)(this.mediaConnectionsMap,t,e)}))}getMediaConnectionByMediaOwnerId(e,t){var s=[];return(this.mediaConnectionsMap.get(e)||[]).filter((e=>e.connectionType===t)).forEach((e=>{s.push(e)})),s}}},"./app/j/logged_in_homepage/selectors/feed.ts":(e,t,s)=>{"use strict";s.d(t,{Mt:()=>u,_H:()=>c,Pd:()=>p,qb:()=>h,g2:()=>g,ZX:()=>m,Lx:()=>_,bs:()=>f,b5:()=>v,q7:()=>S,f6:()=>C,BB:()=>b,o6:()=>j,at:()=>x,AM:()=>T,_3:()=>I,Hj:()=>w,N2:()=>A,Jl:()=>O,J:()=>R,Xt:()=>L,PJ:()=>P,t8:()=>M,aR:()=>Z,sO:()=>k});var r=s("./app/j/core/default_store/DefaultStore.ts"),i=s("./app/j/logged_in_homepage/types.ts"),n=s("./node_modules/reselect/lib/index.js"),o=s("./app/j/study_feed/utils/getGroupedFeedItemsByTime.ts"),a=s("./app/j/study_feed/utils/resolve.ts"),l=(0,r.iu)(i.EE),d=(0,n.createSelector)(l,(e=>e.feed)),u=(0,n.createSelector)(l,(e=>e.isFetchingFeed)),c=(0,n.createSelector)(l,(e=>e.isFeedFinished)),p=(0,n.createSelector)(l,(e=>e.userContentPurchases)),h=(0,n.createSelector)(l,(e=>e.activeModal)),g=(0,n.createSelector)(l,(e=>e.recommendationsVariant)),m=(0,n.createSelector)(l,(e=>e.shouldShowRecommendations)),_=(0,n.createSelector)(l,(e=>e.onboardingChecklistType)),f=(0,n.createSelector)(l,(e=>e.isExistingTeacher)),v=(0,n.createSelector)(l,(e=>e.addedSetToClass)),S=(0,n.createSelector)(l,(e=>e.createdClass)),C=(0,n.createSelector)(l,(e=>e.invitedStudentsToClass)),b=(0,n.createSelector)(l,(e=>e.liMerchBanner)),y=(0,n.createSelector)(l,(e=>e.models)),E=(0,n.createSelector)(l,(e=>e.classMemberships)),j=(0,n.createSelector)(l,(e=>e.hasStudiedInFlashcardsOrLearnMode)),x=(0,n.createSelector)(l,(e=>e.hasCreatedPaidFeatureSet)),T=(0,n.createSelector)(l,(e=>e.mostRecentlyCreatedOrStudiedOrVisitedSetId)),I=(0,n.createSelector)(l,(e=>e.mostRecentlyCreatedOrStudiedOrVisitedSetTitle)),w=(0,n.createSelector)(l,(e=>e.hasClickedOnProgressDashboard)),A=(0,n.createSelector)(l,(e=>e.hasStartedStudyPath)),O=(0,n.createSelector)(l,(e=>e.hasStudiedSetWithSmartGrading)),R=(0,n.createSelector)(l,(e=>e.lastStudiedSet)),D=(0,n.createSelector)(l,(e=>e.user)),L=(0,n.createSelector)(d,y,E,D,((e,t,s,r)=>{var i=(0,a.Z)(t,s,r);return e.map((e=>i(e))).filter((e=>!!e))})),P=((0,n.createSelector)(L,o.g),(0,n.createSelector)(l,(e=>e.isAntiRacismStudentMerchBannerEnabled))),M=(0,n.createSelector)(l,(e=>e.isExplanationsBetaBannerEnabled)),Z=(0,n.createSelector)(l,(e=>e.isExplanationsFeedEnabled)),k=(0,n.createSelector)(l,(e=>e.isExplanationsEnabledInMyLibrary))},"./app/j/logged_in_homepage/types.ts":(e,t,s)=>{"use strict";var r,i;s.d(t,{MQ:()=>r,lS:()=>i,EE:()=>n}),function(e){e.CONTROL="control",e.SCHOOL_AND_COURSES_FIRST="schoolAndCoursesFirst",e.COURSES_MILESTONE_FIRST="coursesMilestoneFirst"}(r||(r={})),function(e){e.STUDENT="student"}(i||(i={}));var n="loggedInHomepage"},"./app/j/models/ApiDetectProfanity.ts":(e,t,s)=>{"use strict";var r=s("./app/j/models/ApiData.ts");class i extends r.Z{}i.URL_BASE="detect-profanity",i.API_VERSION="3.1",t.Z=i},"./app/j/models/ApiValidateEmail.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var r=s("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),i=s("./app/j/models/ApiData.ts");class n extends i.Z{static validate(e,t,s,i,o){return(0,r.Z)((function*(){return(yield n.get({email:e,birth_day:t,birth_month:s,birth_year:i,shouldCheckEmailUniqueness:o}))[0].data.validateEmail}))()}}n.URL_BASE="validate-email",n.API_VERSION="3.3",n.ALLOW_MULTIPLE_REQUESTS=!1},"./app/j/models/QClass.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var r=s("./app/j/models/QModel.ts");class i extends r.Z{}i.URL_BASE="classes",i.MODEL_NAME="class"},"./app/j/models/QClassSet.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var r=s("./app/j/models/QModel.ts");class i extends r.Z{}i.URL_BASE="class-sets",i.MODEL_NAME="classSet",i.UNIQUE_KEYS=["setId","classId"]},"./app/j/models/QFolderSet.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var r=s("./app/j/models/QModel.ts");class i extends r.Z{}i.URL_BASE="folder-sets",i.MODEL_NAME="folderSet",i.UNIQUE_KEYS=["setId","folderId"]},"./app/j/models/QSchool.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var r=s("./app/j/models/QModel.ts");class i extends r.Z{}i.URL_BASE="schools",i.MODEL_NAME="school",i.CAN_BE_SEARCHED=!0,i.API_VERSION="3.4"},"./app/j/models/QSet.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var r=s("./app/j/i18n/$t.ts"),i=s("./app/j/models/QModel.ts");class n extends i.Z{isPublished(){return this.get("publishedTimestamp")>0}static _postValidationFailed(e){return e.forEach((e=>{e.unset("publishedTimestamp")})),e}static _validations(e){return e.forEach((e=>{e.isPublished()&&(this._validateTitle(e),0===e.get("mcqCount")&&(this._validatesWordLang(e),this._validatesDefinitionLang(e)))})),e}static _validateTitle(e){e.get("title")||e.addClientValidationError({identifier:"requires_title",message:(0,r.Z)("errors.model_validation.set.requires_title")})}static _validatesWordLang(e){e.get("wordLang")||e.addClientValidationError({identifier:"requires_word_lang",message:(0,r.Z)("errors.model_validation.set.requires_term_lang")})}static _validatesDefinitionLang(e){e.get("defLang")||e.addClientValidationError({identifier:"requires_def_lang",message:(0,r.Z)("errors.model_validation.set.requires_def_lang")})}}n.URL_BASE="sets",n.MODEL_NAME="set",n.CAN_BE_SEARCHED=!0},"./app/j/rich_text/RichTextContext.ts":(e,t,s)=>{"use strict";s.d(t,{K:()=>i,G:()=>n});var r=s("./node_modules/react/index.js"),{Provider:i,Consumer:n}=r.createContext({canEditRichText:!1,isSelfIdentifiedTeacher:!1,shouldShowRichText:!1})},"./app/j/rich_text/RichTextHelper.ts":(e,t,s)=>{"use strict";s.d(t,{F:()=>i});var r=s("./app/j/global/QuizletGlobalObject.ts"),i=()=>{var e=(0,r.Y)().user;return!(!e||e.isVerified||0!==e.type&&3!==e.type)}},"./app/j/rich_text/components/PMToolbar.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>h});s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js");var r=s("./node_modules/classnames/index.js"),i=s.n(r),n=s("./app/j/components/UIIcon.tsx"),o=s("./node_modules/prosemirror-commands/dist/index.js"),a=s("./node_modules/react/index.js"),l=s("./app/j/rich_text/constants.ts"),d=s("./app/j/rich_text/plugins/InlinePlugin.ts"),u=s("./app/j/utils/EventListener.ts"),c=s("./app/j/utils/log-rich-text-event.ts"),p=s("./node_modules/react/jsx-runtime.js");class h extends a.PureComponent{constructor(){super(...arguments),this.getActiveMarks=()=>{var{view:e}=this.props.editorView,{state:t}=e,s=d.z.getState(t),r=s?s.activeMarks:[];return new Set(r.map((e=>{var t;return null==e||null==(t=e.type)?void 0:t.name})))},this.handleMouseDown=e=>{e.preventDefault()},this.renderToolbarIcon=(e,t)=>{var s=i()("PMToolbar-icon",{"PMToolbar-icon--active":t});return(0,p.jsx)("div",{className:s,id:e,onClick:this.toggleMarkofType,children:(0,p.jsx)(n.Z,{icon:l.fI[e]})},"inlinestyle-"+e)},this.renderHighlighterIcon=(e,t)=>{var s=i()("PMToolbar-highlighter",[l.QK[e]],{"PMToolbar-highlighter--active":t});return(0,p.jsx)("div",{className:s,id:e,onClick:this.toggleMarkofType,children:(0,p.jsx)(n.Z,{icon:"check-rounded"})},"inlinestyle-"+e)},this.toggleMarkofType=e=>{var t=e.currentTarget.getAttribute("id"),{view:s}=this.props.editorView,{state:r,dispatch:i}=s,n=r.schema.marks[t];(0,o.w9)(n)(r,i),(0,c.Z)("rich_text_in_toolbar_clicked",t)},this.toolbarRef=a.createRef()}componentDidUpdate(){!this.toolbarMouseDownListener&&this.toolbarRef.current&&(this.toolbarMouseDownListener=u.Z.listen(this.toolbarRef.current,"mousedown",this.handleMouseDown))}componentWillUnmount(){this.toolbarMouseDownListener&&(this.toolbarMouseDownListener.remove(),this.toolbarMouseDownListener=null)}render(){if(!this.props.editorView.view)return null;var e=this.getActiveMarks(),t=i()("PMToolbar",{"PMToolbar-combinedToolbar":this.props.isInCombinedToolbar}),s=[l.oN.BOLD,l.oN.ITALIC,l.oN.UNDERLINE],r=this.props.isEmbeddedInline?[l.oN.BG_YELLOW]:[l.oN.BG_YELLOW,l.oN.BG_BLUE,l.oN.BG_PINK];return(0,p.jsxs)("div",{className:t,ref:this.toolbarRef,children:[s.map((t=>this.renderToolbarIcon(t,this.isActiveMark(t,e)))),r.map((t=>this.renderHighlighterIcon(t,this.isActiveMark(t,e))))]})}isActiveMark(e,t){return 0!==t.size&&t.has(e)}}},"./app/j/rich_text/components/RichTextEditor.tsx":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>K});s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js");var r=s("./node_modules/@quizlet/legacy-css-transition-group/dist/index.js"),i=s("./node_modules/prosemirror-state/dist/index.js"),n=s("./node_modules/react/index.js"),o=(s("./node_modules/core-js/modules/web.url.to-json.js"),s("./node_modules/core-js/modules/es.array.reduce.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/classnames/index.js")),a=s.n(o),l=s("./app/j/config/languages.ts"),d=s("./node_modules/prosemirror-view/dist/index.js"),u=s("./app/j/rich_text/EditorModelHelper.ts"),c=s("./node_modules/prosemirror-history/dist/history.js"),p=(s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/prosemirror-commands/dist/index.js")),h=s("./node_modules/prosemirror-keymap/dist/index.js"),g=s("./app/j/rich_text/constants.ts"),m="Mod-a",_="Mod-shift-z",f="Mod-z",v="Mod-b",S="Mod-i",C="Mod-u",b="Shift-Enter",y=(e,t)=>(s,r)=>{if(!(e in s.schema.marks))return(e,t)=>{};var i=s.schema.marks[e];return(0,p.w9)(i,t)(s,r)},E=(0,h.$f)(Object.assign({[m]:(e,t)=>((e,t)=>{var{tr:s,doc:r}=e;return t(s.setSelection(new i.TextSelection(r.resolve(0),r.resolve(r.content.size-1)))),!0})(e,t),[_]:(e,t)=>(0,c.KX)(e,t),[f]:(e,t)=>(0,c.Yw)(e,t),[v]:(e,t)=>y(g.oN.BOLD)(e,t),[S]:(e,t)=>y(g.oN.ITALIC,{level:1})(e,t),[C]:(e,t)=>y(g.oN.UNDERLINE,{level:2})(e,t)},p.YR,{[b]:p.YR.Enter}));var j=s("./app/j/rich_text/plugins/InlinePlugin.ts"),x=s("./app/j/utils/transformTermText.ts"),T=(e,t)=>{var s=(0,u.j3)(e.doc),r=(0,x.Z)(s,t[0],t[1]);if(s!==r){var n=(0,u.Eg)(r),o=new i.AllSelection(e.doc);return e.tr.setSelection(o).deleteSelection().replaceSelectionWith(n,!0)}},I=e=>new i.Plugin({appendTransaction:(t,s,r)=>T(r,e)}),w=new i.PluginKey(g.dm.PLACEHOLDER),A=function(e){return void 0===e&&(e=""),new i.Plugin({key:w,props:{attributes:t=>{var{doc:s}=t;return 1===s.childCount&&s.firstChild.isTextblock&&0===s.firstChild.content.size&&e.length>0?{"pm-placeholder":e,"aria-placeholder":e}:null}}})},O=(s("./node_modules/core-js/modules/es.regexp.to-string.js"),e=>new i.Plugin({props:{attributes:{tabIndex:e.toString()}}})),R=s("./app/j/rich_text/schema.ts"),D=e=>e.some((e=>l.xK.includes(e))),L=e=>{var{placeholder:t,pmJson:s,schema:r,selectionPosition:n,tabIndex:o,langs:a,labelId:l}=e,{anchor:d,head:p}=n,h=[E,(0,c.m8)(),j.Z,A(t)];o&&h.push(O(o)),l&&h.push(function(e){return new i.Plugin({props:{attributes:{role:"textbox","aria-multiline":"true","aria-labelledby":"editor-"+e}}})}(l));var g=i.EditorState.fromJSON({schema:r||R.Z,plugins:h},{doc:(0,u.ZL)(s),selection:{type:"text",anchor:d,head:p}});if(D(a)){var m=T(g,a);m&&(g=g.apply(m)),g.plugins.push(I(a))}return g},P=s("./app/j/utils/FontSize.ts"),M=s("./app/j/utils/ObjectHelper.ts"),Z=s("./app/j/utils/UserAgentHelper.ts"),k=s("./node_modules/react/jsx-runtime.js");class U extends n.Component{constructor(e){super(e),this.handleChange=()=>{this.pmJson=this.view.state.toJSON().doc,this.plainText=(0,u.j3)(this.view.state.doc);var e={plain:this.plainText,rich:this.pmJson};this.props.onChange(e),this.focusEditor()},this.handleBlur=e=>{this.props.onBlur(this.updateEvent(e,this.plainText))},this.handleClick=e=>{if((0,Z.G6)()&&!(0,Z.au)()){var t=e.target.closest("div.ProseMirror");t||(t=e.target.querySelector("div.ProseMirror")),t.blur(),t.focus()}},this.handleFocus=e=>{this.focusEditor(),this.props.updateView(this.view),this.props.onFocus(this.updateEvent(e,this.plainText))},this.handleKeyDown=(e,t)=>!!this.props.onEditorKeyDown&&this.props.onEditorKeyDown(t),this.handlePaste=(e,t)=>!!this.props.onPaste&&this.props.onPaste(t),this.updateEditorWithPlainText=e=>{var{state:t,dispatch:s}=this.view,r=(0,u.N_)(e),n=new i.AllSelection(t.doc);s(r.reduce(((e,t)=>e.replaceSelectionWith(t)),t.tr.setSelection(n).deleteSelection()))},this.updateEvent=(e,t)=>(e.target.value=t,e.currentTarget.value=t,e),this.focusEditor=()=>{document.body.contains(this.view.dom)&&this.view.focus()},this.blurEditor=()=>{document.body.contains(this.view.dom)&&this.view.dom.blur()},this.editorRef=n.createRef(),this.pmJson=e.pmJson,this.plainText=e.plainText,this.selectionPosition={anchor:1,head:1}}componentDidMount(){var e=L({placeholder:this.props.placeholder,pmJson:this.pmJson,selectionPosition:this.selectionPosition,schema:this.props.customSchema,tabIndex:this.props.tabIndex,langs:[this.props.lang,this.props.otherLang],labelId:this.props.labelId});this.view=new d.tk(this.editorRef.current,{state:e,dispatchTransaction:e=>{((e,t)=>{var s=e.state.apply(t);e.updateState(s)})(this.view,e),this.props.updateView(this.view),e.docChanged&&this.handleChange()},handleKeyDown:this.handleKeyDown,handlePaste:this.handlePaste}),this.props.autofocus&&this.focusEditor(),this.props.updateView(this.view)}componentDidUpdate(e){var t,s,r,i,n=""!==this.props.plainText&&!(0,M.J)(e.pmJson,this.props.pmJson)&&!(0,M.J)(this.props.pmJson,this.pmJson);if(e.plainText!==this.props.plainText&&this.props.plainText!==this.plainText&&(0,M.J)(e.pmJson,this.props.pmJson))this.plainText=this.props.plainText,this.updateEditorWithPlainText(this.plainText),this.focusEditor();else if(n||e.placeholder!==this.props.placeholder){this.plainText=this.props.plainText,this.pmJson=this.props.pmJson;var o=L({placeholder:this.props.placeholder,pmJson:this.pmJson,selectionPosition:this.selectionPosition,tabIndex:this.props.tabIndex,langs:[this.props.lang,this.props.otherLang],labelId:this.props.labelId});this.view.updateState(o),n&&this.focusEditor()}if(e.lang!==this.props.lang||e.otherLang!==this.props.otherLang){var a=(t=this.view,s=[this.props.lang,this.props.otherLang],r=this.props.placeholder,i=[E,(0,c.m8)(),j.Z,A(r)],D(s)&&i.push(I(s)),t.state.reconfigure({plugins:i}));this.view.updateState(a)}}componentWillUnmount(){this.view.destroy()}render(){var e=this.props.lang&&"lang-"+this.props.lang,t=this.props.lang&&1!==(0,P.CI)(this.props.lang)&&"is-scaled-lang",s=a()("PMEditor",e,t,"notranslate",{"is-rtl":l.cQ.includes(this.props.lang)});return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:s,"data-testid":"PMEditor",onBlur:this.handleBlur,onClick:this.handleClick,onFocus:this.handleFocus,ref:this.editorRef}),(0,k.jsx)("div",{className:"PMEditor-border"})]})}}var N=s("./app/j/rich_text/components/PMToolbar.tsx"),F=s("./app/j/utils/AccentHelper.ts"),B=s("./app/j/utils/arraysHaveSameElements.ts"),H=s("./app/j/utils/getScrollbarWidth.ts"),V=s("./app/j/utils/shallow-equal.ts"),G=s("./app/j/components/UISpecialCharacterButtonGroup.tsx"),W=s("./app/j/utils/EventListener.ts");class z extends n.Component{constructor(){super(...arguments),this.handleMouseDown=e=>{e.preventDefault()},this.handleClickCharButton=e=>{var{view:t}=this.props.editorView,{state:s,dispatch:r}=t;this.addCharToEditor(e)(s,r),t.focus()},this.toolbarRef=n.createRef()}componentDidMount(){this.toolbarRef.current&&(this.toolbarMouseDownListener=W.Z.listen(this.toolbarRef.current,"mousedown",this.handleMouseDown))}shouldComponentUpdate(e){return!(0,V.Z)(this.props,e,["languageCodes"])||!(0,B.Z)(this.props.languageCodes,e.languageCodes)}componentWillUnmount(){this.toolbarMouseDownListener&&(this.toolbarMouseDownListener.remove(),this.toolbarMouseDownListener=null)}getCharactersByLang(){var e=F.Z.getCharactersByLangForLangs(this.props.languageCodes);this.props.specificAccents.length>0&&this.props.languageCodes.length>0&&(e[this.props.languageCodes[0]]=this.props.specificAccents);return e}renderSpecialCharacterButtonGroup(){return(0,k.jsx)("div",{className:"SpecialCharacterToolbar-accentsBar",children:(0,k.jsx)("div",{className:"SpecialCharacterToolbar-accentsBarInner",children:(0,k.jsx)("div",{className:"SpecialCharacterToolbar-accentBarWrap",style:{marginRight:(0,H.Z)()},children:(0,k.jsx)(G.Z,{allowToggleUppercase:!0,charactersByLang:this.getCharactersByLang(),onClickButton:this.handleClickCharButton,variant:"small"})})})})}render(){return(0,k.jsx)("div",{className:"SpecialCharactersToolbar","data-testid":"SpecialCharactersToolbar",ref:this.toolbarRef,children:this.shouldRenderSpecialCharacterButtonGroup()?this.renderSpecialCharacterButtonGroup():null})}shouldRenderSpecialCharacterButtonGroup(){return this.getCharactersByLang()&&this.props.languageCodes&&this.props.languageCodes[0]&&this.getCharactersByLang()[this.props.languageCodes[0]].length>0}addCharToEditor(e){return(t,s)=>{s(t.tr.insertText(e))}}}var q=s("./app/j/rich_text/components/UpsellPMToolbar.tsx");class K extends n.PureComponent{constructor(){super(...arguments),this.state={editorView:{},isFocused:!1},this.handleEditorValueChange=e=>{this.props.onChange(e)},this.handleFocus=e=>{if(!(0,Z.G6)()){var t=this.getTextContentSize();this.setEditorCursorPosition(t)}this.setState({isFocused:!0}),this.props.onFocus&&this.props.onFocus(e)},this.handleBlur=e=>{this.setState({isFocused:!1}),this.props.onBlur&&this.props.onBlur(e)},this.updateView=e=>{this.setState({editorView:{view:e}},(()=>{this.props.onUpdatePMEditorView&&this.props.onUpdatePMEditorView(this.state.editorView)}))},this.editorWrapper=n.createRef(),this.pmEditor=n.createRef()}getPMJson(){return this.props.pmJson?"string"==typeof this.props.pmJson?JSON.parse(this.props.pmJson):this.props.pmJson:(0,u.Xd)(this.props.plainText)}getPlainText(){return this.props.plainText||""}getTextContentSize(){var{editorView:e}=this.state;return null!=e&&e.view?e.view.state.doc.content.size:0}renderPMEditor(){return(0,k.jsx)(U,{autofocus:this.props.autofocus,customSchema:this.props.canEditRichText?void 0:R.c,labelId:this.props.labelId,lang:this.props.lang,onBlur:this.handleBlur,onChange:this.handleEditorValueChange,onEditorKeyDown:this.props.onEditorKeyDown,onFocus:this.handleFocus,onPaste:this.props.onPaste,otherLang:this.props.otherLang,placeholder:this.props.placeholder,plainText:this.getPlainText(),pmJson:this.props.canEditRichText?this.getPMJson():(0,u.Xd)(this.getPlainText()),ref:this.pmEditor,tabIndex:this.props.tabIndex,updateView:this.updateView})}renderPMToolbar(){return this.props.canEditRichText?(0,k.jsx)(N.Z,{editorView:this.state.editorView,isEmbeddedInline:this.props.isEmbeddedInline}):(0,k.jsx)(q.Z,{isEmbeddedInline:this.props.isEmbeddedInline})}renderLabel(){return(0,k.jsxs)("span",{className:"RichTextEditor-label",children:[(0,k.jsx)("div",{className:"RichTextEditor-labelText",children:this.props.label}),this.props.labelAddOnContent]})}renderSpecialCharactersToolbar(){return(0,k.jsx)(z,{editorView:this.state.editorView,languageCodes:this.props.languageCodes,specificAccents:this.props.specificAccents})}render(){return(0,k.jsxs)("div",{"aria-invalid":this.props.invalid||void 0,className:"RichTextEditor",ref:this.editorWrapper,children:[this.shouldRenderPMToolbar()?this.renderPMToolbar():null,this.renderPMEditor(),(0,k.jsx)(r.uH,{transitionEnterTimeout:120,transitionLeaveTimeout:120,transitionName:"SpecialCharacterToolbar-animateAccentsBar",children:this.shouldRenderSpecialCharactersToolbar()&&this.state.isFocused?this.renderSpecialCharactersToolbar():null}),this.shouldRenderLabel()?this.renderLabel():null]})}focus(){this.pmEditor.current&&this.pmEditor.current.focusEditor()}setEditorCursorPosition(e){var{editorView:t}=this.state;e>0&&t&&t.view&&t.view.dispatch(t.view.state.tr.setSelection(i.TextSelection.near(t.view.state.doc.resolve(e))))}blur(){this.pmEditor.current&&this.pmEditor.current.blurEditor()}shouldRenderPMToolbar(){return(this.state.isFocused||this.props.alwaysShowToolbar)&&!this.props.shouldShowRichTextCombinedToolbar}shouldRenderLabel(){return this.props.label||this.props.labelAddOnContent}shouldRenderSpecialCharactersToolbar(){var e=F.Z.containsAccentLanguage(this.props.languageCodes);if(void 0!==this.props.userLocale&&null!==this.props.userLocale){var t,s=(null==(t=this.props.lang)?void 0:t.toLowerCase())===this.props.userLocale.toLowerCase();return e&&!s}return e}}K.defaultProps={autofocus:!1,languageCodes:[],specificAccents:[]}},"./app/j/rich_text/components/UpsellPMToolbar.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>T});s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js");var r=s("./node_modules/@linaria/react/lib/index.js"),i=s("./node_modules/classnames/index.js"),n=s.n(i),o=s("./app/j/components/UIIcon.tsx"),a=s("./app/j/config/enums.ts"),l=s("./app/j/global/Quizlet.ts"),d=s("./app/j/i18n/$t.ts"),u=s("./node_modules/nullthrows/nullthrows.js"),c=s.n(u),p=s("./node_modules/react/index.js"),h=s("./app/j/rich_text/constants.ts"),g=s("./app/j/upgrade/UpsellsHelper.ts"),m=s("./app/j/utils/EventListener.ts"),_=s("./app/j/utils/log-rich-text-event.ts"),f=s("./app/j/utils/logSubscriptionEvent.ts"),v=s("./app/j/utils/redirect.ts"),S=s("./node_modules/react/jsx-runtime.js"),C=(0,r.z)("button")({name:"BadgeButton",class:"b8441ig"}),b="consolidated_format_icon",y="consolidated_highlighter",E=Object.assign({},h.fI,{[b]:"text-format"}),j=Object.assign({},h.QK,{[y]:"PMToolbar--consolidatedHighlighterSwirl"}),x=e=>{var t=n()("badge","UpsellPMToolbar-upsellBadge",{plus:!e,teacher:e}),s=e?(0,d.Z)("global.user_badges.teacher"):(0,d.Z)("global.user_badges.plus");return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(C,{onClick:()=>(()=>{(0,f.ZP)({action:a.Mpk.CLICK,cta:s,fullActionName:"premium_badge_in_toolbar_clicked"});var e=(0,g.Qq)("rich_text_premium_badge");(0,v.YQ)(e)})(),type:"button",children:(0,S.jsx)("span",{className:t,children:s})})})};class T extends p.PureComponent{constructor(){super(...arguments),this.handleMouseDown=e=>{e.preventDefault()},this.onColorClick=e=>{this.onMarkClick(e,"rich_text_highlight")},this.onMarkClick=(e,t)=>{var s=c()(e.currentTarget.getAttribute("id"));(0,_.Z)("rich_text_upsell_in_toolbar_clicked",s),(0,f.ZP)({action:a.Mpk.CLICK,additional_info:{markName:s},fullActionName:"rich_text_upsell_in_toolbar_clicked"}),window.open((0,g.Qq)(t),"_blank")},this.onFormattingClick=e=>{this.onMarkClick(e,"rich_text_formatting")},this.renderToolbarIcon=(e,t)=>(0,S.jsx)("div",{className:"PMToolbar-icon",id:e,onClick:t,children:(0,S.jsx)(o.Z,{icon:E[e]})},"inlinestyle-"+e),this.renderHighlighterIcon=(e,t)=>{var s=n()("PMToolbar-highlighter",[j[e]]);return(0,S.jsx)("div",{className:s,id:e,onClick:t,children:(0,S.jsx)(o.Z,{icon:"check-rounded"})},"inlinestyle-"+e)},this.renderCondensedIcons=()=>(0,S.jsxs)(S.Fragment,{children:[this.renderToolbarIcon(b,this.onFormattingClick),this.renderHighlighterIcon(y,this.onColorClick)]}),this.isSelfIdentifiedTeacher=()=>{var e;return(null==(e=l.Z.user)?void 0:e.selfIdentifiedTeacherStatus)===a.IXc.TEACHER},this.toolbarRef=p.createRef()}componentDidMount(){!this.toolbarMouseDownListener&&this.toolbarRef.current&&(this.toolbarMouseDownListener=m.Z.listen(this.toolbarRef.current,"mousedown",this.handleMouseDown))}componentWillUnmount(){this.toolbarMouseDownListener&&(this.toolbarMouseDownListener.remove(),this.toolbarMouseDownListener=null)}render(){var e=n()("PMToolbar",{"PMToolbar-combinedToolbar":this.props.isInCombinedToolbar});return(0,S.jsxs)("div",{className:e,ref:this.toolbarRef,children:[this.renderCondensedIcons(),this.props.shouldHideOuterBadge?null:x(this.isSelfIdentifiedTeacher())]})}}s("./.linaria-cache/app/j/rich_text/components/UpsellPMToolbar.linaria.css")},"./app/j/rich_text/plugins/InlinePlugin.ts":(e,t,s)=>{"use strict";s.d(t,{z:()=>o});s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js");var r=s("./node_modules/prosemirror-state/dist/index.js"),i=s("./app/j/rich_text/constants.ts"),n=s("./app/j/utils/ObjectHelper.ts"),o=new r.PluginKey(i.dm.INLINE),a=e=>{var{selection:t}=e,{$from:s,$to:r}=t,i=[];return t.empty&&(i=[...e.storedMarks||r.marks()]),e.doc.nodesBetween(s.pos,r.pos,(e=>{e.marks&&(i=[...i,...e.marks])})),i},l=new r.Plugin({key:o,state:{init:(e,t)=>({activeMarks:a(t)}),apply:(e,t,s,r)=>((e,t,s)=>e.docChanged||t.selection!==s.selection||!(0,n.J)(t.storedMarks,s.storedMarks))(e,s,r)?{activeMarks:a(r)}:t}});t.Z=l},"./app/j/set_page_tags/index.ts":(e,t,s)=>{"use strict";s.d(t,{Ev:()=>c,mA:()=>h,MQ:()=>g,R6:()=>_,ZP:()=>v});var r=s("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),i=s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.cjs.production.min.js"),n=s("./app/j/config/enums.ts"),o=s("./app/j/core/default_store/DefaultStore.ts"),a=s("./node_modules/nullthrows/nullthrows.js"),l=s.n(a),d=s("./app/j/set_page_tags/utils/normalizeEdgyTag.ts"),u=s("./app/j/utils/FetchWith.ts"),c="setTags",p="/webapi/3.4/tag/set-feedback",h=(0,i.createAsyncThunk)(c+"/fetchTagFeedback",function(){var e=(0,r.Z)((function*(e){var{responses:t}=yield(0,u.lN)(p+"/course",{setId:e});return(0,d.Z)(t[0])}));return function(t){return e.apply(this,arguments)}}()),g=(0,i.createAsyncThunk)(c+"/saveTagFeedback",function(){var e=(0,r.Z)((function*(e,t){var{dispatch:s}=t;s(m(e)),s(h(e.setId))}));return function(t,s){return e.apply(this,arguments)}}()),m=(0,i.createAsyncThunk)(c+"/saveTagFeedback",function(){var e=(0,r.Z)((function*(e,t){var{dispatch:s}=t,r=l()(e.user,"Invalid attempt to save tag feedback for logged out user"),i={modelId:e.setId,tagId:e.tagId,personId:r.id,tagType:n.Tqe.COURSE,created:Date.now()};yield(0,u.cZ)(p+"/save",{data:[i]}),s(h(e.setId))}));return function(t,s){return e.apply(this,arguments)}}()),_=(0,i.createAsyncThunk)(c+"/saveTagRemoval",function(){var e=(0,r.Z)((function*(e,t){var{dispatch:s}=t,{setId:r}=e;try{yield(0,u.HL)(p+"/"+r),s(h(r))}catch(i){return null}}));return function(t,s){return e.apply(this,arguments)}}()),f=(0,i.createSlice)({name:c,initialState:{edgySetTags:[]},reducers:{},extraReducers:e=>{e.addCase(h.fulfilled,((e,t)=>{e.edgySetTags=t.payload}))}}).reducer;function v(e){void 0===e&&(e=(0,o.bh)()),e.registerReducer("setTags",f)}},"./app/j/set_page_tags/utils/normalizeEdgyTag.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var r=s("./node_modules/lodash/keyBy.js"),i=s.n(r);s("./node_modules/core-js/modules/es.object.assign.js");function n(e){if(!e||!e.models)return[];var{models:t}=e,{course:s,school:r,set:n,setTagFeedback:o,user:a}=t,l=i()(s,"id"),d=i()(r,"id"),u=i()(a,"id"),c=n.map((e=>Object.assign({},e,{_creator:u[e.creatorId]}))),p=i()(c,"id");return o.map((e=>({set:p[e.modelId],course:l[e.tagId],school:e.schoolId?d[e.schoolId]:void 0})))}},"./app/j/set_recommendation/actions.ts":(e,t,s)=>{"use strict";s.d(t,{Mp:()=>g,gd:()=>_,pc:()=>f,H_:()=>v,X$:()=>S,bs:()=>C,Et:()=>y,vn:()=>E,aO:()=>j,FM:()=>x,Wl:()=>T});var r=s("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),i=s("./app/j/components/SaveSetModal.tsx"),n=s("./app/j/core/selectors.ts"),o=s("./app/j/global/Rollbar.ts"),a=s("./app/j/set_recommendation/api.ts"),l=s("./app/j/set_recommendation/selectors.ts"),d=s("./app/j/set_recommendation/types.ts"),u=s("./node_modules/typesafe-actions/dist/typesafe-actions.umd.production.js"),c=s("./app/j/utils/logStudyFunnelEvent.ts"),p=s("./app/j/utils/UserAgentHelper.ts"),h=e=>(0,u.action)(d.eX.OPEN_SAVE_SET_MODAL,e),g=e=>(0,u.action)(d.eX.OPEN_HIDE_SET_MODAL,e),m=e=>(0,u.action)(d.eX.FORCE_MODAL_OPEN,e),_=()=>(0,u.action)(d.eX.CLOSE_MODALS),f=e=>t=>{t(h({tab:i.x.CLASS,set:e}))},v=e=>t=>{t(h({tab:i.x.FOLDER,set:e}))},S=()=>e=>{e(m({modal:d.nK.CREATE_CLASS}))},C=()=>e=>{e(m({modal:d.nK.CREATE_FOLDER}))},b=()=>function(){var e=(0,r.Z)((function*(e){var t,s=yield a.Fp();e((t=s,(0,u.action)(d.eX.SET_SCHOOLS,t)))}));return function(t){return e.apply(this,arguments)}}(),y=e=>function(){var t=(0,r.Z)((function*(t,s){var r=s();if(!(0,l.UC)(r)[e]){var i;t(b()),t((i={setId:e},(0,u.action)(d.eX.FETCH_SAVE_SET_DATA_ASYNC,i)));var{classes:n,folders:o}=yield a.MA(e);t((e=>(0,u.action)(d.eX.FETCH_SAVE_SET_DATA_ASYNC_SUCCESS,e))({setId:e,classes:n,folders:o}))}}));return function(e,s){return t.apply(this,arguments)}}(),E=()=>function(){var e=(0,r.Z)((function*(e){try{var t=yield a.vn((0,p.Be)());null!==t&&e((s=t,(0,u.action)(d.eX.SET_BEHAVIOR_RECOMMENDATIONS,s)))}catch(r){o.Z.warning(r,{response:null==r?void 0:r._response})}finally{e((0,u.action)(d.eX.SET_HAS_LOADED_BEHAVIOR_RECS))}var s}));return function(t){return e.apply(this,arguments)}}(),j=()=>function(){var e=(0,r.Z)((function*(e){try{var t=yield a.N0();e((s=t,(0,u.action)(d.eX.SET_EDGY_RECOMMENDATIONS,s)))}catch(r){o.Z.error(r)}finally{e((0,u.action)(d.eX.SET_HAS_LOADED_EDGY_RECS))}var s}));return function(t){return e.apply(this,arguments)}}(),x=()=>function(){var e=(0,r.Z)((function*(e){try{var t=yield a.FM();e((s=t,(0,u.action)(d.eX.SET_COURSE_OVERVIEW_RECOMMENDATIONS,s)))}catch(r){o.Z.error(r)}finally{e((0,u.action)(d.eX.SET_HAS_LOADED_COURSE_OVERVIEW_RECS))}var s}));return function(t){return e.apply(this,arguments)}}(),T=e=>(t,s)=>{var r,i=s(),p=(0,l.TN)(i),h=(0,n.PR)(s());p&&h?((0,c.QL)(p,e,(0,l._y)(i)),t((r=p,(0,u.action)(d.eX.REMOVE_SET,r))),t(_()),a.kp(p.id,h.id)):o.Z.error("Tried to mark recommendation as irrelevant, but either set or user was not provided",{set:p,user:h})}},"./app/j/set_recommendation/api.ts":(e,t,s)=>{"use strict";s.d(t,{vn:()=>f,FM:()=>C,N0:()=>v,MA:()=>m,Fp:()=>_,kp:()=>y});var r=s("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),i=s("./app/j/compatibility/fetch.ts"),n=s("./app/j/config/enums.ts"),o=s("./app/j/global/Rollbar.ts"),a=s("./node_modules/lodash/sortBy.js"),l=s.n(a),d=s("./node_modules/lodash/keyBy.js"),u=s.n(d);s("./node_modules/core-js/modules/es.object.assign.js");function c(e){if(!e)return null;var{algorithm:t,models:s,source:r={}}=e,{set:i,user:n}=s,o=u()(n,"id");return{algorithm:t,sets:i.map((e=>Object.assign({},e,{_creator:o[e.creatorId]}))),source:r}}function p(e){if(!e)return null;var{models:t,source:s}=e,{recommendedStudiable:r,recommendedTextbook:i,set:n,user:o,textbook:a}=t,d=u()(o,"id"),c=u()(n,"id"),p=u()(a,"isbn");return{sets:l()(r,(e=>e.rank)).slice(0,2).map((e=>{var t=c[e.studiableId];return Object.assign({},t,{_creator:d[t.creatorId]})})),textbooks:l()(i,(e=>e.rank)).slice(0,1).map((e=>Object.assign({},p[e.isbn]))),source:s}}var h=s("./app/j/utils/FetchWith.ts"),g=s("./app/j/utils/filterNull.ts"),m=function(){var e=(0,r.Z)((function*(e){return(yield(0,h.lN)("/webapi/3.4/sets/"+e+"/saveSetData")).responses}));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=(0,r.Z)((function*(){var e=yield(0,h.lN)("/webapi/3.4/school-memberships"),t=null!=e&&e.responses?e.responses[0].models.school:null;return null!=t?t:null}));return function(){return e.apply(this,arguments)}}(),f=function(){var e=(0,r.Z)((function*(e){void 0===e&&(e=!1);try{var t=yield(0,i.lN)("/webapi/3.4/sets/person-recommendations",{params:{algo:n.lXX.MERGED_USER_BASED_AND_ITEM_TO_ITEM}}).catch((t=>{if(e)return null;throw t}));return t?c(t.body.responses[0]):null}catch(s){return o.Z.error("Error fetching behavior recommendations",s),null}}));return function(t){return e.apply(this,arguments)}}();function v(){return S.apply(this,arguments)}function S(){return(S=(0,r.Z)((function*(){var e=yield(0,h.lN)("/webapi/3.4/sets/edgy-recommendations");if(!e._response.ok){var t=new Error("Failed to retrieve edgy recommendations");throw t._response=e._response,t}return(0,g.D)(e.responses.map(c))}))).apply(this,arguments)}function C(){return b.apply(this,arguments)}function b(){return(b=(0,r.Z)((function*(){var e=yield(0,h.lN)("/webapi/3.4/courses/overview-recommendations");if(!e._response.ok){var t=new Error("Failed to retrieve courses overview recommendations");throw t._response=e._response,t}return(0,g.D)(e.responses.map(p))}))).apply(this,arguments)}function y(e,t){return E.apply(this,arguments)}function E(){return(E=(0,r.Z)((function*(e,t){(0,h.cZ)("/webapi/3.4/irrelevant-recommendations",{data:[{personId:t,modelId:e,modelType:n.BYJ.SET,created:Date.now()}]})}))).apply(this,arguments)}},"./app/j/set_recommendation/selectors.ts":(e,t,s)=>{"use strict";s.d(t,{m$:()=>d,O8:()=>u,$9:()=>c,pO:()=>p,Q9:()=>h,wp:()=>g,TN:()=>m,_y:()=>_,UC:()=>f,K2:()=>v,Po:()=>S,aB:()=>C,NS:()=>b,oX:()=>y,w7:()=>E});s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./app/j/components/SaveSetModal.tsx"),i=s("./app/j/core/default_store/DefaultStore.ts"),n=s("./app/j/logged_in_homepage/selectors/feed.ts"),o=s("./node_modules/reselect/lib/index.js"),a=s("./app/j/set_recommendation/types.ts"),l=(0,i.iu)(a.e8),d=(0,o.createSelector)(l,n.Xt,((e,t)=>{if(null==e||!e.behaviorRecommendations||null==t||!t.length)return null==e?void 0:e.behaviorRecommendations;var s=e.behaviorRecommendations.sets.filter((e=>!t.find((t=>{var s;return(null==t||null==(s=t.set)?void 0:s.id)===e.id}))));return Object.assign({},e.behaviorRecommendations,{sets:s})})),u=(0,o.createSelector)(l,(e=>null==e?void 0:e.courseOverviewRecommendations)),c=(0,o.createSelector)(l,n.Xt,((e,t)=>null!=e&&e.edgyRecommendations&&null!=t&&t.length?e.edgyRecommendations.map((e=>Object.assign({},e,{sets:e.sets.filter((e=>!t.find((t=>{var s;return(null==t||null==(s=t.set)?void 0:s.id)===e.id}))))}))):null==e?void 0:e.edgyRecommendations)),p=(0,o.createSelector)(l,(e=>e.hasLoadedBehaviorRecs)),h=(0,o.createSelector)(l,(e=>e.hasLoadedCourseOverviewRecs)),g=(0,o.createSelector)(l,(e=>e.hasLoadedEdgyRecs)),m=(0,o.createSelector)(l,(e=>e.modals.currentSet)),_=(0,o.createSelector)(l,(e=>e.modals.studyFunnelData)),f=(0,o.createSelector)(l,(e=>e.saveSetData)),v=(0,o.createSelector)(m,f,((e,t)=>{var s;if(!e||null==(s=t[e.id])||!s.hasLoaded)throw new Error("Tried to acess unavailable save set data");return t[e.id]})),S=(0,o.createSelector)(l,(e=>e.modals)),C=(0,o.createSelector)(m,f,((e,t)=>{var s;return!!e&&!(null==(s=t[e.id])||!s.hasLoaded)})),b=(0,o.createSelector)(S,v,((e,t)=>{var{initialTab:s,forcedModal:i}=e,{classes:n,folders:o}=t;return i||(s!==r.x.FOLDER||o.length?s!==r.x.CLASS||n.length?a.nK.SAVE_SET:a.nK.CREATE_CLASS:a.nK.CREATE_FOLDER)})),y=(0,o.createSelector)(l,(e=>e.schools)),E=(0,o.createSelector)(l,(e=>e.userData.hasClasses))},"./app/j/set_recommendation/types.ts":(e,t,s)=>{"use strict";s.d(t,{e8:()=>n,nK:()=>r,eX:()=>i});var r,i,n="setRecommendation";!function(e){e.CREATE_CLASS="create_class",e.CREATE_FOLDER="create_folder",e.SAVE_SET="save_set",e.HIDE_SET="hide_set"}(r||(r={})),function(e){e.CLOSE_MODALS="SET_RECOMMENDATIONS.CLOSE_MODALS",e.FETCH_SAVE_SET_DATA_ASYNC="SET_RECOMMENDATIONS.FETCH_SAVE_SET_DATA_ASYNC",e.FETCH_SAVE_SET_DATA_ASYNC_SUCCESS="SET_RECOMMENDATIONS.FETCH_SAVE_SET_DATA_ASYNC_SUCCESS",e.FORCE_MODAL_OPEN="SET_RECOMMENDATIONS.FORCE_MODAL_OPEN",e.OPEN_HIDE_SET_MODAL="SET_RECOMMENDATIONS.OPEN_HIDE_SET_MODAL",e.OPEN_SAVE_SET_MODAL="SET_RECOMMENDATIONS.OPEN_SAVE_SET_MODAL",e.REMOVE_SET="SET_RECOMMENDATIONS.REMOVE_SET",e.SET_BEHAVIOR_RECOMMENDATIONS="SET_RECOMMENDATIONS.SET_BEHAVIOR_RECOMMENDATIONS",e.SET_COURSE_OVERVIEW_RECOMMENDATIONS="SET_RECOMMENDATIONS.SET_COURSE_OVERVIEW_RECOMMENDATIONS",e.SET_EDGY_RECOMMENDATIONS="SET_RECOMMENDATIONS.SET_EDGY_RECOMMENDATIONS",e.SET_HAS_LOADED_BEHAVIOR_RECS="SET_RECOMMENDATIONS.SET_HAS_LOADED_BEHAVIOR_RECS",e.SET_HAS_LOADED_COURSE_OVERVIEW_RECS="SET_RECOMMENDATIONS.SET_HAS_LOADED_COURSE_OVERVIEW_RECS",e.SET_HAS_LOADED_EDGY_RECS="SET_RECOMMENDATIONS.SET_HAS_LOADED_EDGY_RECS",e.SET_SCHOOLS="SET_RECOMMENDATIONS.SET_SCHOOLS"}(i||(i={}))},"./app/j/signup/components/LoginLink.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var r=s("./app/j/components/T.tsx"),i=s("./app/j/components/UILink.tsx"),n=(s("./node_modules/react/index.js"),s("./node_modules/react/jsx-runtime.js"));function o(e){var{cta:t,link:s,linkVariant:o,onClickLogin:a}=e;return(0,n.jsxs)("span",{children:[t||(0,n.jsx)(r.Z,{id:"global.sign_up_modal.already_have_account"})," ",(0,n.jsx)(i.Z,{onClick:a,variant:o,children:s||(0,n.jsx)(r.Z,{id:"global.sign_up_modal.log_in_link"})})]})}},"./app/j/signup/components/assemblified/utils.tsx":(e,t,s)=>{"use strict";s.d(t,{W0:()=>l,vV:()=>d,My:()=>u,iN:()=>c,j_:()=>p});var r=s("./app/j/assembly/AssemblyCheckbox.tsx"),i=s("./app/j/authentication/styles.tsx"),n=s("./app/j/components/UICheckbox.tsx"),o=s("./app/j/hooks/useQMeasure.ts"),a=(s("./node_modules/react/index.js"),s("./node_modules/react/jsx-runtime.js")),l=e=>"experiment"===e.getVariationAndEnroll("SignupAssemblificationV4[default,growth]"),d=()=>{var e=(0,o.Z)();return l(e)},u=()=>(e=>l(e)?r.Z:n.Z)((0,o.Z)()),c=(e,t)=>l(e)?(0,a.jsx)(i.W,{children:t}):t,p=()=>{var e=(0,o.Z)();return t=>c(e,t)}},"./app/j/site_nav/index.ts":(e,t,s)=>{"use strict";s.d(t,{Ty:()=>c,BS:()=>p,wk:()=>h,$W:()=>g,bs:()=>m,No:()=>_,Qv:()=>f,Tc:()=>v,y7:()=>S,PI:()=>C,d6:()=>b,di:()=>y,PR:()=>E,wC:()=>j,bf:()=>x,Wr:()=>T,gV:()=>I,zZ:()=>w,fs:()=>A,Ns:()=>R,Pc:()=>D,PZ:()=>L,B1:()=>P,Mo:()=>M,xC:()=>Z,vG:()=>k,OE:()=>U,LK:()=>N,EQ:()=>F,Zz:()=>B,BW:()=>H,GM:()=>V,AZ:()=>G,Sy:()=>W,ZP:()=>z});s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.cjs.production.min.js"),i=s("./app/j/config/enums.ts"),n=s("./app/j/core/default_store/DefaultStore.ts"),o=s("./node_modules/reselect/lib/index.js"),a=s("./app/j/site_nav/types.ts"),l="siteNav",d=(0,r.createSlice)({name:l,initialState:{activityCenterPendingNotifications:0,canCreateClass:!1,classInvitations:[],classMemberships:[],isClassProgressUpsellModalOpen:!1,isCreateClassModalOpen:!1,isCreateFolderModalOpen:!1,isCreateImageSetUpsellModalOpen:!1,isCreateSetModalOpen:!1,isMobileNavOpen:!1,onboardingFlow:null,openedAuthModal:null,userSchools:{},bookmarkedFolders:[],user:null,userPurchasesCount:0},reducers:{hydrate(e,t){var{payload:s}=t,{activityCenterPendingNotifications:r=0,bookmarkedFolders:i,canCreateClass:n,classInvitations:o,classMemberships:a,onboardingFlow:l,user:d,userPurchasesCount:u,userSchools:c}=s;Object.assign(e,{activityCenterPendingNotifications:r,bookmarkedFolders:i,canCreateClass:n,classInvitations:o,classMemberships:a,onboardingFlow:l,user:d,userPurchasesCount:u,userSchools:c})},clearClassNotification(e,t){var{payload:s}=t,r=e.classMemberships.find((e=>e.classId===s.classId&&e.userId===s.userId));r&&(r.numNotifications=0)},closeAuthModals(e){e.openedAuthModal=null},closeMobileNav(e){e.isMobileNavOpen=!1},openLoginModal(e){e.openedAuthModal=a.L.LOGIN},openLoginModalConfigured(e,t){var{payload:s}=t;e.openedAuthModal=a.L.LOGIN,e.loginFormOverrides=s,s.logHeaderAction("clicked_login")},openMobileNav(e){e.isMobileNavOpen=!0},openSignUpModal(e){e.openedAuthModal=a.L.SIGN_UP},openSignupModalConfigured(e,t){var{payload:{redir:s,screenName:r,signupOrigin:n,logPageAction:o,logAuthEvent:l}}=t;e.openedAuthModal=a.L.SIGN_UP,(n||s)&&(e.signupPropsOverrides={signupOrigin:n,redir:s}),o("open_signup_modal",{signupOrigin:n}),l(i.g4I.SIGNUP_FORM_OPENED,{auth_origin:n,screen_name:r})},openMagicLinkModal(e){e.openedAuthModal=a.L.MAGIC_LINK},toggleClassProgressUpsellModal(e){e.isClassProgressUpsellModalOpen=!e.isClassProgressUpsellModalOpen},toggleCreateImageSetUpsellModal(e){e.isCreateImageSetUpsellModalOpen=!e.isCreateImageSetUpsellModalOpen},toggleCreateSetModal(e){e.isCreateSetModalOpen=!e.isCreateSetModalOpen},toggleCreateClassModal(e){e.isCreateClassModalOpen=!e.isCreateClassModalOpen},toggleCreateFolderModal(e){e.isCreateFolderModalOpen=!e.isCreateFolderModalOpen},updateActivityCenterNotifications(e,t){var{payload:s}=t;e.activityCenterPendingNotifications=s}}}),u=(0,n.iu)(l),c=(0,o.createSelector)(u,(e=>e.canCreateClass)),p=(0,o.createSelector)(u,(e=>e.mainSchool)),h=(0,o.createSelector)(u,(e=>e.userSchools)),g=(0,o.createSelector)(u,(e=>e.activityCenterPendingNotifications)),m=((0,o.createSelector)(u,(e=>e.bookmarkedFolders)),(0,o.createSelector)(u,(e=>e.isClassProgressUpsellModalOpen))),_=(0,o.createSelector)(u,(e=>e.isCreateClassModalOpen)),f=(0,o.createSelector)(u,(e=>e.isCreateFolderModalOpen)),v=(0,o.createSelector)(u,(e=>e.isCreateImageSetUpsellModalOpen)),S=(0,o.createSelector)(u,(e=>e.isCreateSetModalOpen)),C=(0,o.createSelector)(u,(e=>e.isMobileNavOpen)),b=(0,o.createSelector)(u,(e=>e.onboardingFlow)),y=(0,o.createSelector)(u,(e=>e.openedAuthModal)),E=(0,o.createSelector)(u,(e=>e.user)),j=(0,o.createSelector)(u,(e=>e.userPurchasesCount)),x=(0,o.createSelector)(u,(e=>e.classInvitations.length)),T=(0,o.createSelector)(E,(e=>!(null==e||!e._isUnderAge))),I=(0,o.createSelector)(E,(e=>null==e?void 0:e.email)),w=(0,o.createSelector)(u,(e=>e.loginFormOverrides)),A=(0,o.createSelector)(u,(e=>e.signupPropsOverrides)),{hydrate:O,clearClassNotification:R,closeAuthModals:D,closeMobileNav:L,openMobileNav:P,openLoginModal:M,openLoginModalConfigured:Z,openMagicLinkModal:k,openSignUpModal:U,openSignupModalConfigured:N,toggleClassProgressUpsellModal:F,toggleCreateImageSetUpsellModal:B,toggleCreateSetModal:H,toggleCreateClassModal:V,toggleCreateFolderModal:G,updateActivityCenterNotifications:W}=d.actions;d.reducer;function z(e,t){void 0===t&&(t=(0,n.bh)()),t.registerReducer("siteNav",d.reducer),e&&t.dispatch(O(e))}},"./app/j/stores/Store.ts":(e,t,s)=>{"use strict";s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./app/j/dispatchers/AppDispatcher.ts"),i=s("./node_modules/events/events.js"),n="change",o={_handlers:null,_waitForTokens:null,dispatchToken:null,addChangeListener(e){this.on(n,e)},removeChangeListener(e){this.removeListener(n,e)},change(e){this.emit(n,e)},init(){this._handlers={},this._waitForTokens={},this.dispatchToken=r.Z.register((e=>{r.Z.waitFor(Object.keys(this._waitForTokens));var{actionType:t,payload:s}=e;if(!t)throw new Error("Action type unspecified");t in this._handlers&&this.change(this._handlers[t](s))}))},bindActions(e,t){if("string"!=typeof e)throw new Error("Action must be a string");if("function"!=typeof t)throw new Error("Handler must be a function");this._handlers[e]=t.bind(this)},waitFor(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];Array.from(t).forEach((e=>{this._waitForTokens[e.dispatchToken]=!0}))}};o=Object.assign(o,i.EventEmitter.prototype),t.Z=o},"./app/j/stores/SyncerStore.ts":(e,t,s)=>{"use strict";s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./app/j/stores/Store.ts"),i=s("./app/j/utils/log-page-action.ts"),n=s("./app/j/utils/tamperProofNow.ts"),o=Object.assign({syncerFirstFailure:{},syncerHasError:{},syncerLastSynced:{},syncerNextRetry:{},syncerNumRetries:{},syncers:{},syncerStatus:{},setup(e){var t=this;this.syncers=e;var s=function(e){var s,r=t.syncers[e];s=e,r.on("sync:begin",(()=>t._begin(s))),r.on("sync:end",(()=>t._end(s))),r.on("sync:error",(()=>t._error(s))),r.on("sync:recover",(()=>t._recover(s))),r.on("sync:wait",(e=>t._wait(s,e)))};for(var r in this.syncers)s(r)},isSyncing(e){if(e)return!!this.syncerStatus[e];for(var t in this.syncerStatus){if(this.syncerStatus[t])return!0}return!1},getAllSyncing(){return Object.keys(this.syncerStatus).filter((e=>this.syncerStatus[e]))},hasError(){for(var e in this.syncerHasError){if(this.syncerHasError[e])return!0}return!1},getLastSyncedTimestamp(){var e=0;for(var t in this.syncerLastSynced){var s=this.syncerLastSynced[t];s>e&&(e=s)}return 0===e?null:e},getNextRetryInSecs(){for(var e in this.syncerNextRetry){var t=this.syncerNextRetry[e];if(this.syncerHasError[e]&&"number"==typeof t)return t}return-1},_begin(e){return this.syncerStatus[e]=!0,this.syncerNumRetries[e]=0,this.change()},_end(e){return this.syncerHasError[e]||(this.syncerLastSynced[e]=(0,n.Z)()),this.syncerStatus[e]=!1,this.change()},_error(e){var t=(0,n.Z)();this.syncerNumRetries[e]+=1;var s=this.syncerNumRetries[e];return 1===s&&((0,i.Z)("new_create_set_sync_initial_error",this._getErrorLogData(e)),this.syncerFirstFailure[e]=t),(this.syncerFirstFailure[e]?t-this.syncerFirstFailure[e]>6e4:s>6)&&(this.syncerHasError[e]=!0,s%5==1&&(0,i.Z)("new_create_set_connection_error_modal",this._getErrorLogData(e))),this.change()},_recover(e){return(0,i.Z)("new_create_set_sync_recover",this._getErrorLogData(e)),this.syncerHasError[e]=!1,this.syncerNumRetries[e]=0,this.syncerFirstFailure[e]=null,this.change()},_wait(e,t){return this.syncerNextRetry[e]=t,this.change()},_getErrorLogData(e){var t={identifier:this.syncers[e].MODEL.MODEL_NAME+" syncer error",retry_count:this.syncerNumRetries[e],failure_duration:void 0};return this.syncerFirstFailure[e]&&(t.failure_duration=(0,n.Z)()-this.syncerFirstFailure[e]),t}},r.Z);o.init(),t.Z=o},"./app/j/study-modes/common/components/SpecialCharacterButtonGroup.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>g});s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.array.sort.js");var r=s("./node_modules/@linaria/react/lib/index.js"),i=s("./app/j/assembly/buttons/index.ts"),n=s("./app/j/assembly/buttons/types.ts"),o=s("./app/j/i18n/$t.ts"),a=s("./app/j/i18n/localeCompare.ts"),l=s("./node_modules/react/index.js"),d=s("./node_modules/react/jsx-runtime.js"),u=(0,r.z)("div")({name:"UppercaseSwitch",class:"u1jxe9b2"}),c=(0,r.z)("div")({name:"ButtonBar",class:"b1859v0f"}),p=(0,r.z)("span")({name:"Button",class:"bvhg5y9"});function h(e,t){return(0,a.Z)(e.character,t.character)}function g(e){var t,s,{charactersByLang:r,onClickButton:a}=e,[g,m]=(0,l.useState)(!1),_=()=>{m(!g)};return(0,d.jsxs)(c,{children:[(t=[],s=[],Object.keys(r).forEach((e=>{r[e].forEach((r=>{var i=g?r.toUpperCase():r;-1!==t.indexOf(i)||(t.push(i),s.push({character:i,lang:e}))}))})),s.sort(h)).map((e=>{var{character:t,lang:s}=e;return(0,d.jsx)(p,{children:(0,d.jsx)(i.B0,{lang:s,onClick:()=>a(t),text:t})},t)})),Object.keys(r).some((e=>r[e].some((e=>e!==e.toUpperCase()))))?(0,d.jsx)(u,{children:(0,d.jsx)(i.JZ,{alt:(0,o.Z)("global.icon.uppercase"),icon:"chevron-up-underline",onClick:_,variant:g?n.IQ.SECONDARY:n.IQ.TERTIARY})}):null]})}s("./.linaria-cache/app/j/study-modes/common/components/SpecialCharacterButtonGroup.linaria.css")},"./app/j/study-modes/common/components/SpecialCharacterInput.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>_});var r=s("./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js"),i=s("./node_modules/lodash/isEmpty.js"),n=s.n(i),o=(s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/@linaria/react/lib/index.js")),a=s("./app/j/assembly/AssemblyInput.tsx"),l=s("./app/j/components/UIBreakpoint.tsx"),d=s("./app/j/hooks/usePrevious.tsx"),u=s("./node_modules/react/index.js"),c=s("./app/j/study-modes/common/components/SpecialCharacterButtonGroup.tsx"),p=s("./app/j/utils/AccentHelper.ts"),h=s("./node_modules/react/jsx-runtime.js"),g=["hideSpecialChars","inputRef","languageCodes","onNativeMouseDown","specificAccents"],m=(0,o.z)("div")({name:"Collapsible",class:"cr8mmtp"});function _(e){var{hideSpecialChars:t=!1,inputRef:s,languageCodes:i,specificAccents:o=[]}=e,_=(0,r.Z)(e,g),[f,v]=(0,u.useState)(!t),S=(0,d.Z)(t);(0,u.useLayoutEffect)((()=>{var e;return!1===S&&t?e=setTimeout((()=>v(!1)),500):v(!0),()=>{e&&clearTimeout(e)}}),[t]);var C,b=e=>{var t,r,i=(r=s.current)&&null!==r.selectionStart?r.selectionStart:-1,n=(()=>{var e=s.current;return e&&null!==e.selectionEnd?e.selectionEnd:-1})();if(-1!==n){var o=(null==(t=s.current)?void 0:t.value)||"",a=o.slice(0,i)+e+o.slice(n),l=window.document.createEvent("Event");l.initEvent("input",!0,!0);var d=s.current;if(d){var u,c=Object.getOwnPropertyDescriptor(d.constructor.prototype,"value");null!=c&&c.set?c.set.call(d,a):d.value=a,d.dispatchEvent(l),((e,t)=>{var r=s.current;null==r||r.setSelectionRange(e,t)})(i+e.length,i+e.length),null==(u=s.current)||u.focus()}}};return(0,h.jsxs)("div",{children:[(0,h.jsx)(l.Z,{above:"s",children:(C=(()=>{var e=p.Z.getCharactersByLangForLangs(i);return o.length>0&&i.length>0&&(e[i[0]]=o),e})(),n()(C)?null:(0,h.jsx)(m,{className:t?"collapsed":"",children:f?(0,h.jsx)(c.Z,{charactersByLang:C,onClickButton:b}):null}))}),(0,h.jsx)(a.Z,Object.assign({ref:s},_))]})}s("./.linaria-cache/app/j/study-modes/common/components/SpecialCharacterInput.linaria.css")},"./app/j/study_feed/constants.ts":(e,t,s)=>{"use strict";s.d(t,{O$:()=>i,pY:()=>r});var r,i=(0,s("./app/j/utils/keyReflect.ts").Z)("FEED_INTERVALS",{NOW:null,TWO_MINS_AGO:null,FIFTEEN_MINS_AGO:null,FORTY_MINS_AGO:null,ONE_HOUR_AGO:null,TWO_HOURS_AGO:null,ONE_DAY_AGO:null,ONE_WEEK_AGO:null,TWO_WEEKS_AGO:null,ONE_MONTH_AGO:null,OLD:null});!function(e){e[e.USER_CREATED_SET=0]="USER_CREATED_SET",e[e.CLASS_CREATED_SET=1]="CLASS_CREATED_SET",e[e.CLASS_CREATED_FOLDER=2]="CLASS_CREATED_FOLDER",e[e.STUDIED_SET=3]="STUDIED_SET",e[e.STUDIED_COMBINED_SETS=4]="STUDIED_COMBINED_SETS",e[e.STUDIED_FOLDER=5]="STUDIED_FOLDER",e[e.CLASS=6]="CLASS",e[e.PURCHASED_STUDY_GUIDE=7]="PURCHASED_STUDY_GUIDE",e[e.PURCHASED_PREP_PACK=8]="PURCHASED_PREP_PACK",e[e.PURCHASED_SET=9]="PURCHASED_SET",e[e.EXPLANATIONS_QUESTION=10]="EXPLANATIONS_QUESTION",e[e.EXPLANATIONS_TEXTBOOK_EXERCISE=11]="EXPLANATIONS_TEXTBOOK_EXERCISE"}(r||(r={}))},"./app/j/study_feed/feed-items.ts":(e,t,s)=>{"use strict";s.d(t,{ew:()=>n,FL:()=>o,F_:()=>a,Ic:()=>l,MV:()=>d,Dq:()=>u,Km:()=>c});var r=s("./app/j/config/enums.ts"),i=s("./app/j/study_feed/constants.ts"),n=e=>{var{creator:t,localId:s,set:r,timestamp:n}=e;return{feedItemType:i.pY.USER_CREATED_SET,creator:t,localId:s,set:r,timestamp:n}},o=e=>{var{creator:t,localId:s,sessions:r,set:n,timestamp:o}=e;return{feedItemType:i.pY.STUDIED_SET,creator:t,localId:s,sessions:r,set:n,timestamp:o}},a=e=>{var{localId:t,set:s,canViewerDeleteClassSet:r=!1,creator:n,class:o,classProgressLink:a,timestamp:l}=e;return{feedItemType:i.pY.CLASS_CREATED_SET,localId:t,canViewerDeleteClassSet:r,class:o,classProgressLink:a,creator:n,set:s,timestamp:l}},l=e=>{var{localId:t,folder:s,creator:r,class:n,timestamp:o,canEdit:a}=e;return{feedItemType:i.pY.CLASS_CREATED_FOLDER,localId:t,folder:s,creator:r,class:n,timestamp:o,canEdit:a}},d=e=>{var{localId:t,folder:s,sets:r,timestamp:n,sessions:o}=e;return{feedItemType:i.pY.STUDIED_COMBINED_SETS,localId:t,folder:s,sets:r,timestamp:n,sessions:o}},u=e=>{var{localId:t,folder:s,creator:r,timestamp:n,sessions:o}=e;return{feedItemType:i.pY.STUDIED_FOLDER,localId:t,folder:s,creator:r,timestamp:n,sessions:o}},c=e=>{var t,s,n,o,{localId:a,model:l,modelType:d,creator:u,timestamp:c}=e;switch(d){case r.BYJ.SET:t=i.pY.PURCHASED_SET,s=l;break;case r.BYJ.PREP_PACK:t=i.pY.PURCHASED_PREP_PACK,o=l;break;case r.BYJ.FOLDER:default:t=i.pY.PURCHASED_STUDY_GUIDE,n=l}return{feedItemType:t,localId:a,prepPack:o,set:s,folder:n,modelType:d,creator:u,timestamp:c}}},"./app/j/study_feed/utils/getGroupedFeedItemsByTime.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>g,g:()=>m});s("./node_modules/core-js/modules/es.object.values.js");var r=s("./app/j/constants/TimeConstants.ts"),i=s("./app/j/i18n/$t.ts"),n=s("./node_modules/immutable/dist/immutable.js"),o=s("./app/j/study_feed/constants.ts"),a=s("./app/j/utils/DateFormatters.ts");function l(e){return{name:e,items:[]}}function d(e){return(0,n.fromJS)(l(e))}function u(e){return t=>t.update("items",(t=>t.push(e)))}function c(e){var t=new Date(Date.now())-new Date(e);return t>2*r.kg?o.O$.TWO_WEEKS_AGO:t>r.kg?o.O$.ONE_WEEK_AGO:t>r.Kh?o.O$.ONE_DAY_AGO:t>2*r.iL?o.O$.TWO_HOURS_AGO:t>r.iL?o.O$.ONE_HOUR_AGO:t>40*r.A_?o.O$.FORTY_MINS_AGO:t>15*r.A_?o.O$.FIFTEEN_MINS_AGO:t>2*r.A_?o.O$.TWO_MINS_AGO:o.O$.NOW}function p(e){var t=new Date(Date.now()),s=new Date(e);return s.getMonth()===t.getMonth()&&s.getFullYear()===t.getFullYear()}function h(e){switch(e){case o.O$.NOW:return(0,i.Z)("study_feed.timestamp_groups.current_timestamp_label");case o.O$.TWO_MINS_AGO:return(0,i.Z)("study_feed.timestamp_groups.at_least_two_mins_old_label");case o.O$.FIFTEEN_MINS_AGO:return(0,i.Z)("study_feed.timestamp_groups.at_least_fifteen_mins_old_label");case o.O$.FORTY_MINS_AGO:return(0,i.Z)("study_feed.timestamp_groups.at_least_forty_mins_old_label");case o.O$.ONE_HOUR_AGO:return(0,i.Z)("study_feed.timestamp_groups.at_least_one_hour_old_label");case o.O$.TWO_HOURS_AGO:return(0,i.Z)("study_feed.timestamp_groups.at_least_two_hours_old_label");case o.O$.ONE_DAY_AGO:return(0,i.Z)("study_feed.timestamp_groups.at_least_one_day_old_label");case o.O$.ONE_WEEK_AGO:return(0,i.Z)("study_feed.timestamp_groups.at_least_one_week_old_label");case o.O$.TWO_WEEKS_AGO:return(0,i.Z)("study_feed.timestamp_groups.at_least_two_weeks_old_label");case o.O$.OLD:return(0,i.Z)("study_feed.timestamp_groups.no_timestamp_label");default:return null}}function g(e){var t=new n.OrderedMap,s=new n.OrderedMap,l=d(h(o.O$.OLD));return e.forEach((e=>{var n=e.get("timestamp");if(n)if(p(n*r.NO)){var o=c(n*r.NO),g=h(o);t=t.update(o,d(g),u(e))}else{var m=new Date(n*r.NO),_=m.getMonth()+"-"+m.getFullYear(),f=(0,a.p6)(m,{month:"long",year:"numeric"}),v=(0,i.Z)("study_feed.timestamp_groups.at_least_one_month_old_label",{monthAndYear:f});s=s.update(_,d(v),u(e))}else l=l.update("items",(t=>t.push(e)))})),t.toList().concat(s.toList()).push(l).filterNot((e=>e.get("items").isEmpty()))}var m=e=>{var t={},s={},n={name:h(o.O$.OLD),items:[]};return e.forEach((e=>{var o=e.timestamp;if(o)if(p(o*r.NO)){var d=c(o*r.NO),u=h(d);t[d]||(t[d]=l(u)),t[d].items.push(e)}else{var g=new Date(o*r.NO),m=g.getMonth()+"-"+g.getFullYear(),_=(0,a.p6)(g,{month:"long",year:"numeric"}),f=(0,i.Z)("study_feed.timestamp_groups.at_least_one_month_old_label",{monthAndYear:_});s[m]||(s[m]=l(f)),s[m].items.push(e)}else n.items.push(e)})),Object.values(t).concat(Object.values(s)).concat(n).filter((e=>e.items.length))}},"./app/j/study_feed/utils/resolve.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>h});s("./node_modules/core-js/modules/es.object.values.js");var r=s("./app/j/config/enums.ts"),i=s("./node_modules/immer/dist/immer.cjs.production.min.js"),n=s("./app/j/study_feed/constants.ts"),o=s("./app/j/study_feed/feed-items.ts"),a=(e,t)=>(t.set||{})[e],l=(e,t)=>(t.user||{})[e],d=(e,t)=>(t.folder||{})[e],u=(e,t)=>{if(!t.folderSet)return[];var s=t.folderSet;return Object.values(s).filter((t=>""+t.folderId==""+e))};function c(e,t,s,i){var n=a(e.setId,t),d=((e,t)=>(t.class||{})[e])(e.classId,t),u=d.id,c=s.find((e=>e.classId===u)),p=function(e,t,s,i){return s.type===r.XsQ.TEACHER&&i&&i.level===r.tJV.ADMIN?"/"+e.id+"/teacher/"+t:void 0}(n,u,i,c);return(0,o.F_)({localId:e.localId,set:n,classProgressLink:p,creator:l(n.creatorId,t),class:d,timestamp:e.timestamp})}function p(e,t){var s=((e,t)=>(t.session||{})[e])(e.id,t);if(!s)return null;var n=e.timestamp;if(s.itemType===r.MG.SET){var c=a(s.itemId,t),p=l(c.creatorId,t);return(0,o.FL)({localId:e.localId,set:c,timestamp:n,creator:p,sessions:void 0})}var h=d(s.itemId,t),g=h.personId?l(h.personId,t):void 0,m=u(h.id,t);if((h=(0,i.default)(h,(e=>{e.folderSets=m}))).isHidden){var _=((e,t)=>u(e,t).map((e=>a(e.setId,t))).filter((e=>void 0!==e)))(h.id,t),f=_.map((e=>(0,i.default)(e,(s=>{s.creator=l(e.creatorId,t)}))));return f.length?(0,o.MV)({localId:e.localId,folder:h,timestamp:n,sessions:void 0,sets:f}):null}return(0,o.Dq)({localId:e.localId,folder:h,timestamp:n,creator:g,sessions:void 0})}function h(e,t,s){var h=t=>function(e,t){var s=a(e.id,t);return(0,o.ew)({localId:e.localId,set:s,creator:l(s.creatorId,t),timestamp:e.timestamp})}(t,e),g=t=>function(e,t){var s,n,c=e.timestamp,p=e.modelType;switch(p){case r.BYJ.PREP_PACK:s=((e,t)=>(t.prepPack||{})[e])(e.modelId,t),n=s.creatorId;break;case r.BYJ.SET:n=(s=a(e.modelId,t)).creatorId;break;case r.BYJ.FOLDER:if(n=(s=d(e.modelId,t)).personId,t.folderSet){var h=u(s.id,t);s=(0,i.default)(s,(e=>{e.folderSets=h}))}break;default:return null}var g=l(n,t);return(0,o.Km)({localId:e.localId,model:s,modelType:p,creator:g,timestamp:c})}(t,e),m=t=>((e,t)=>{var s=((e,t)=>(t.question||{})[e])(e.id,t);if(!s)return null;var{localId:r,timestamp:i}=e;return{localId:r,timestamp:i,explanationQuestion:s,feedItemType:n.pY.EXPLANATIONS_QUESTION}})(t,e),_=t=>((e,t)=>{var s=((e,t)=>(t.textbookExercise||{})[e])(e.id,t);if(!s)return null;var{localId:i,timestamp:o}=e;return{textbookExercise:s,timestamp:o,localId:i,modelType:r.BYJ.TEXTBOOK_EXERCISE,feedItemType:n.pY.EXPLANATIONS_TEXTBOOK_EXERCISE}})(t,e);return r=>{switch(r.type){case"set":return h(r);case"session":return(t=>p(t,e))(r);case"classSet":return(r=>c(r,e,t,s))(r);case"userContentPurchase":return g(r);case"question":return m(r);case"textbookExercise":return _(r);default:throw new Error("Unrecognized feed item type")}}}},"./app/j/syncers/ClassSetSyncer.ts":(e,t,s)=>{"use strict";s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./app/j/models/QClassSet.ts"),i=s("./app/j/syncers/LegacySyncer.ts"),n={};Object.assign(n,i.Z),n.init(r.Z),t.Z=n},"./app/j/syncers/DiagramShapeSyncer.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./app/j/models/QModel.ts");class i extends r.Z{}i.URL_BASE="diagram-shapes",i.MODEL_NAME="diagramShape",i.PARTITION_COLUMN="termId",i.REQUIRED_FIELDS=["setId"];var n=s("./app/j/syncers/LegacySyncer.ts"),o=Object.assign({},n.Z);o.init(i);var a=o},"./app/j/syncers/FolderSetSyncer.ts":(e,t,s)=>{"use strict";s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./app/j/models/QFolderSet.ts"),i=s("./app/j/syncers/LegacySyncer.ts"),n={};Object.assign(n,i.Z),n.init(r.Z),t.Z=n},"./app/j/syncers/ImageRefSyncer.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./app/j/models/QModel.ts");class i extends r.Z{}i.URL_BASE="image-refs",i.MODEL_NAME="imageRef";var n=s("./app/j/syncers/LegacySyncer.ts"),o=Object.assign({},n.Z);o.init(i);var a=o},"./app/j/syncers/ImageSyncer.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>u});s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.search.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./app/j/errors/ValidationError.ts"),i=s("./app/j/models/QModel.ts");class n extends i.Z{static searchDiagrams(e,t,s){return void 0===t&&(t=1),void 0===s&&(s={}),n.search(e,t,Object.assign({},s,{diagrams:!0}))}}n.URL_BASE="images",n.MODEL_NAME="image",n.CAN_BE_SEARCHED=!0,n.MERGE_CONFLICTING_MODELS=!0;var o=s("./app/j/syncers/LegacySyncer.ts"),a=s("./app/j/syncers/Uploader.ts"),l={uploadIndexMap:{},uploader:null,init(e){this.MODEL=e,o.Z.init.call(this,this.MODEL);var t=(0,a.x)({url:n._getBaseUrl()});t.on("before",(()=>this.emit("sync:begin"))),t.on("complete",(()=>this.emit("sync:end"))),this.uploader=t},save(e,t,s){return void 0===s&&(s={}),new Promise(((i,o)=>{this.uploader.upload(e,t,{onProgress(e){var{luid:t,progress:r}=e,{onProgress:i}=s;"function"==typeof i&&i([t,r])}}).then((e=>{var{luid:t,response:s}=e,a=this.getModel(t),l=n._checkServerResponse(s);if(l)o([l,t,a]);else if(n._updateModelsWithServerResponse([a],s),a.isValid())i([t,a]);else{var d=new r.Z("Validation errors while saving image: id="+a.get("id"));o([d,t,a])}})).catch((e=>{var{luid:t,error:s}=e,r=this.getModel(t);o([s,t,r])}))}))},search(e,t,s){return void 0===t&&(t=null),void 0===s&&(s={}),this.MODEL.search(e,t,s).then(this.bulkAdd.bind(this))},searchDiagrams(e,t,s){return void 0===t&&(t=null),void 0===s&&(s={}),this.MODEL.searchDiagrams(e,t,s).then(this.bulkAdd.bind(this))}},d=Object.assign({},o.Z,l);d.init(n);var u=d},"./app/j/syncers/SetSyncer.ts":(e,t,s)=>{"use strict";s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./app/j/models/QSet.ts"),i=s("./app/j/syncers/LegacySyncer.ts"),n=Object.assign({},i.Z);n.init(r.Z),t.Z=n},"./app/j/syncers/TermSyncer.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});s("./node_modules/core-js/modules/es.object.assign.js");var r=s("./app/j/models/QModel.ts");class i extends r.Z{}i.URL_BASE="terms",i.MODEL_NAME="term",i.PARTITION_COLUMN="setId";var n=s("./app/j/syncers/LegacySyncer.ts"),o=Object.assign({},n.Z);o.init(i),o.setShouldSyncDelay(!0);var a=o},"./app/j/test/utils/createStudiableMultipleChoiceQuestions.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.array.sort.js"),s("./node_modules/core-js/modules/es.array.reduce.js");var r=s("./app/j/config/enums.ts"),i=s("./app/j/global/Rollbar.ts"),n=s("./app/j/test/utils/QTestModeTypes.ts"),o=s("./app/j/utils/createOrAppendToMappedArray.ts"),a=s("./app/j/utils/shuffle-array.ts");function l(e){return e.reduce(((e,t)=>e+(t.isCorrect?1:0)),0)}function d(e,t,s){if(void 0===s&&(s=!1),!e)return[];var{multipleChoiceOptions:d,studiableItems:u}=e,c=function(e,t){var s=new Map;for(var r of e){var i=t&&"studiableItemLuid"in r?r.studiableItemLuid:r.studiableItemId;(0,o.Z)(s,i,r)}return s}(d,s),p=u.filter((e=>e.type===r.zqd.MULTIPLE_CHOICE_QUESTION)).map((e=>{var o="luid"in e?e.luid:e.id,d=t.getMediaConnectionByMediaOwnerId(o,r.$Gk.MULTIPLE_CHOICE_PROMPT);if(!d&&!s)throw new Error("No prompt media found for studiable item "+o);var u=t.getMediaConnectionByMediaOwnerId(o,r.$Gk.MULTIPLE_CHOICE_HINT),p=c.get(o)||[];p&&0!==p.length||s||i.Z.warning("No multiple choice options found for studiable item "+e.id);var h=function(e,t,s){return s||(null===(t[0]||{rank:1}).rank?(0,a.Z)(t):t.sort(((e,t)=>(e.rank||0)-(t.rank||0)))),t.map(((t,i)=>{var n="luid"in t?t.luid:t.id,o=e.getMediaConnectionByMediaOwnerId(n,r.$Gk.MULTIPLE_CHOICE_OPTION);if(!o&&!s)throw new Error("No option media found for multiple choice option "+t.id);return{explanationConnectionMedia:e.getMediaConnectionByMediaOwnerId(n,r.$Gk.MULTIPLE_CHOICE_OPTION_EXPLANATION),id:t.id,isCorrect:t.isCorrect||!1,luid:"luid"in t?t.luid:void 0,optionConnectionMedia:o,rank:t.rank||1+i}}))}(t,p,s),g=l(h);return 0!==g||s||i.Z.warning("No correct options found for studiable item "+e.id),{hasMultipleCorrectOptions:g>1,hintConnectionMedia:u,id:e.id,luid:"luid"in e?e.luid:void 0,options:h,promptConnectionMedia:d,questionType:(0,n.Q)().multipleChoice,rank:e.rank||1,studiableItemType:e.type}}));return s?p:p.filter((e=>e.options.length>0&&l(e.options)>0))}},"./app/j/tracking/AnalyticsTrackingHelper.ts":(e,t,s)=>{"use strict";s.d(t,{Op:()=>r,Kx:()=>l,F6:()=>d,I$:()=>u,Jl:()=>c,hI:()=>p,jz:()=>h,D3:()=>g,WR:()=>m,PM:()=>_,Nh:()=>f,wH:()=>v,xi:()=>S,rY:()=>C,bN:()=>b,qj:()=>y,G7:()=>E,hY:()=>j});s("./node_modules/core-js/modules/es.number.to-fixed.js"),s("./node_modules/core-js/modules/es.object.assign.js");var r,i=s("./app/j/config/enums.ts"),n=s("./app/j/global/Rollbar.ts"),o=s("./app/j/tracking/BrazeHelper.ts");!function(e){e.PRODUCT="product",e.PRODUCT_GROUP="product_group"}(r||(r={}));var a=e=>{var t=window;t.dataLayer&&t.dataLayer.push(e)},l=()=>{a({event:"initiatecheckout"})},d=(e,t,s,r)=>{r?((e,t,s)=>{a({event:"FreeTrial",action:"Start",value:Math.round(e),valueFB:null==e?void 0:e.toFixed(2),product:s,currency:(t||"").toUpperCase(),nonInteraction:!0})})(e,t,s):((e,t,s)=>{var r={action:"Complete",valueFB:null==e?void 0:e.toFixed(2),value:Math.round(e),product:s,currency:(t||"").toUpperCase(),nonInteraction:!0};a(Object.assign({},r,{event:"Purchase"})),a(Object.assign({},r,{event:"Purchase "+s}))})(e,t,s)},u=e=>{a(e)},c=e=>{a(e)},p=e=>{a(Object.assign({},e,{event:"initiatecheckout"}))},h=e=>{a(Object.assign({event:"ViewContent"},e))},g=e=>{var t=(e=>{switch(e){case i.BYJ.PREP_PACK:return"Prep Pack";case i.BYJ.FOLDER:case i.BYJ.SET:return"Supplemental";default:return"Unknown"}})(e.modelType),s={action:"Complete",content_type:e.content_type,product:t,valueFB:(e.priceValue/100).toFixed(2),value:Math.round(e.priceValue/100),content_name:e.title,content_ids:e.content_ids,currency:(e.priceCurrency||"").toUpperCase()};a(Object.assign({},s,{event:"Purchase"})),a(Object.assign({},s,{event:"Purchase "+t}))},m=e=>{a(Object.assign({event:"ViewContent"},e))},_=e=>{a({event:"study-set-create",studySetSource:e})},f=e=>{a({event:"study-set-publish",studySetSource:e})},v=(e,t)=>{a({event:"product-impressions",ecommerce:{currencyCode:t,impressions:e}})},S=e=>{var t={event:"product-impressions",ecommerce:{currencyCode:e.currentCode,impressions:e.impressions}};a(t)},C=e=>{var t={event:"product-click",ecommerce:{currencyCode:e.currentCode,click:{actionField:{list:"categories"},products:e.productClick[0]}}};a(t)},b=(e,t)=>t.impressionGo&&t.impressionGo[0]&&e===t.impressionGo[0].id?t.impressionGo[0]:t.impressionPlus&&t.impressionPlus[0]&&e===t.impressionPlus[0].id?t.impressionPlus[0]:void 0,y=e=>{try{var t={name:e.name,id:e.id,price:e.price,brand:e.brand,category:e.category,quantity:"1"};r={event:"add-to-cart",ecommerce:{currencyCode:(s={products:[t],currentCode:"usd"}).currentCode,add:{actionField:{list:"categories"},products:[s.products[0]]}}},a(r)}catch(i){n.Z.error("Unable to track GA event",{e:i})}var s,r},E=()=>{a({event:"after-login"})},j=()=>{o.Is()}},"./app/j/tracking/isFacebookBlocked.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});s("./node_modules/core-js/modules/es.promise.js");var r=s("./app/j/utils/isDomainAccessible.ts"),i=s("./app/j/utils/Cookie.ts"),n=s("./app/j/config/enums.ts");function o(e){return null===i.ZP.read(n.VjB.SIGNUP__HIDE_FB_BUTTON)&&i.ZP.write(n.VjB.SIGNUP__HIDE_FB_BUTTON,e,{duration:.020833333333333332}),"1"===e}function a(){try{var e=i.ZP.read(n.VjB.SIGNUP__HIDE_FB_BUTTON);return null!==e?Promise.resolve("1"===e):(0,r.Z)("https://facebook.com").then((()=>o("0"))).catch((()=>o("1")))}catch(t){return Promise.resolve(!1)}}},"./app/j/utils/AccentHelper.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var r=s("./node_modules/lodash/uniq.js"),i=s.n(r),n={af:["á","à","â","ä","ç","é","è","ê","ë","í","ì","î","ï","ó","ò","ô","ö","ú","ù","ü","û","ý","ÿ"],akk:["ā","â","ē","ê","ī","î","ō","ô","ū","û","ḫ","ṣ","š","ṭ","₀","₁","₂","₃","₄","₅","₆","₇","₈","₉"],ang:["æ","ð","þ"],ar:["ا","ب","ت","ث","ج","ح","خ","د","ذ","ر","ز","س","ش","ص","ض","ط","ظ","ع","غ","ف","ق","ك","ل","م","ن","ه","و","ي","ء","ة","ى"],bg:["а","б","в","г","д","е","ж","з","и","й","к","л","м","н","о","п","р","с","т","у","ф","х","ц","ч","ш","щ","ъ","ь","ю","я"],bs:["ć","đ","č","š","ž"],chem:["←","↑","→","↓","↔","∙","°","⁻","⁺","⁰","¹","²","³","⁴","⁵","⁶","⁷","⁸","⁹","ⁿ","₋","₀","₁","₂","₃","₄","₅","₆","₇","₈","₉","⇌","ε","∆","₊","ₙ"],cs:["á","č","ď","é","ě","í","ň","ó","p","ř","š","ť","ú","ů","ý","ž"],cy:["â","ä","á","à","ê","ë","é","è","î","ï","í","ì","ô","ö","ó","ò","û","ü","ú","ù","ŵ","ẅ","ẃ","ẁ","ŷ","ÿ","ý","ỳ"],da:["å","æ","ø"],de:["ä","ö","ü","ß","⸚"],dyo:["á","é","í","ó","ñ","ú","Ŋ"],el:["α","β","γ","δ","ε","ζ","η","θ","ι","κ","λ","μ","ν","ξ","ο","π","ρ","σ","ς","τ","υ","φ","χ","ψ","ω"],es:["á","é","í","ó","ú","ü","ñ","¿","¡","°"],fi:["å","ä","ö"],fr:["à","â","ç","è","é","ê","ë","î","ï","ô","œ","ù","û","ü"],gd:["à","á","è","é","ì","í","ò","ó","ù","ú"],ga:["à","á","è","é","ì","í","ò","ó","ù","ú"],hai:["g̱","ḵ","x̱"],haw:["ā","ē","ī","ō","ū"],hr:["ć","đ","č","š","ž"],hu:["á","é","í","ó","ö","ő","ú","ü","ű"],is:["á","æ","ð","é","í","ó","ö","ø","þ","ú","ý"],it:["à","è","é","ì","ò","ó","ù"],iw:["א","בּ","ב","ג","ד","ה","ו","ז","ח","ט","י","כּ","כ","ך","ל","מ","ם","נ","ן","ס","ע","פּ","פ","ף","צ","ץ","ק","ר","שׁ","שׂ","ש","תּ","ת"],ku:["ç","é","ê","í","î","ş","ú","û"],la:["ā","æ","ē","ī","ō","œ","ū","ȳ"],lkt:["á","ą","ą́","č","é","ǧ","ȟ","í","į","ó","š","ú","ų","ž","ŋ","ʼ"],math:["+","−","±","×","÷","%","=","≠","≈","≡","<",">","≤","≥","≅","∼","½","¼","¾","√","⁰","¹","²","³","⁴","⁵","⁶","⁷","⁸","⁹","ⁿ","⁺","⁻","∧","₀","₁","₂","₃","₄","₅","₆","₇","₈","₉","π","∞","∆","∑","ƒ","∫","‖","|","⊥","∠","∩","∪","∈","∋","∃","⊂","⊃","⊆","⊇","∉","⊄","°","α","β","γ","δ","ε","η","θ","ι","κ","λ","µ","∨","Ω","ω","ℵ","∅","∀","⊕","⊗","←","↑","→","↓","↔","∴","∵","σ","⌒","₊","ₙ"],mi:["ā","ē","ī","ō","ū"],nl:["á","à","â","ä","ç","é","è","ê","ë","í","ì","î","ï","ó","ò","ô","ö","ú","ù","ü","û","ý","ÿ"],no:["å","æ","ø"],ood:["ă","ḍ","ĕ","ĭ","ñ","ŋ","ŏ","ṣ","ŭ"],pl:["ą","ć","ę","ń","ł","ó","ś","ź","ż"],pt:["à","á","â","ã","ç","é","ê","í","ó","ô","õ","ú","ü"],rar:["ā","ē","ī","ō","ū","ʻ","ꞌ"],ro:["ă","â","î","ș","ş","ț","ţ"],ru:["а","á","б","в","г","д","е","é","ё","ж","з","и","и́","й","к","л","м","н","о","ó","п","р","с","т","у","у́","ф","х","ц","ч","ш","щ","ъ","ы","ы́","ь","э","ю","ю́","я","я́"],sk:["á","ä","č","é","ě","í","ĺ","ľ","ň","ó","ô","ŕ","š","ť","ú","ý","ž"],sr:["ć","đ","č","š","ž"],sv:["å","ä","ö"],tet:["ñ","á","é","í","ó","ú"],tr:["ı","ö","ü","ç","ğ","ş"],tyv:["а","б","в","г","д","е","ё","ж","з","и","й","к","л","м","н","ң","о","ө","п","р","с","т","у","ү","ф","х","ц","ч","ш","щ","ъ","ы","ь","э","ю","я"],vi:["á","ǎ","â","đ","ê","ô","ơ","ư"],wo:["à","é","ë","ó","ñ","Ŋ"],"zh-pi":["ā","á","ǎ","à","ē","é","ě","è","ī","í","ǐ","ì","ō","ó","ǒ","ò","ū","ú","ǔ","ù","ǖ","ǘ","ǚ","ǜ","ü"]},o=s("./app/j/config/languages.ts"),a=s("./app/j/utils/ensureArray.ts"),l={containsAccentLanguage:e=>(0,a.Z)(e).some((e=>e in n&&n[e].length>0)),containsHardLanguage:e=>(0,a.Z)(e).some((e=>o.GK.indexOf(e)>-1)),getCharactersByLangForLangs(e){var t={};return i()(e).filter((e=>e)).forEach((e=>{n[e]&&(t[e]=n[e])})),t}}},"./app/j/utils/AudioPlayer.ts":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});s("./node_modules/core-js/modules/es.promise.js");var r=s("./app/j/global/Rollbar.ts"),i=s("./node_modules/howler/dist/howler.js"),n=s("./app/j/utils/MemoizedCache.ts"),o=!1,a=new n.Z;function l(e,t,s){var r=new i.Howl({src:[e]});return r.once("load",(()=>{t&&t(r.duration())})),r.once("loaderror",(()=>{s&&s(e)})),r}function d(e,t){var{onLoad:s,onError:r,onEnd:i,onStop:n}=t,o=a.memoize(e,(()=>l(e,s,r)));return o.once("playerror",(()=>{r&&r(e)})),o.once("end",(()=>{i&&i(e)})),o.once("stop",(()=>{n&&n(e)})),o}class u{constructor(){this.volume=1,i.Howler.autoSuspend=!1,i.Howler.autoUnlock=!1}borrowWebAudioContext(){i.Howler.volume(this.volume);var e=i.Howler.usingWebAudio?i.Howler.ctx:null;if(!e)return Promise.reject();switch(e.state){case"suspended":return e.resume().then((()=>e));case"running":return Promise.resolve(e);default:return Promise.reject()}}clearAllFinishListeners(){a.cache.forEach((e=>{e.off("end")}))}preload(e,t){var{onError:s,onLoad:i}=void 0===t?{}:t,n=a.get(e);if(i&&n&&"loaded"===n.state())i(n.duration());else try{a.memoize(e,(()=>l(e,i,s)))}catch(d){if(o)return;r.Z.warning("AudioPlayer instance failed to loadClip in preload",d,{url:e}),o=!0}}play(e,t){var{onError:s,onFinish:i,onStop:n}=void 0===t?{}:t;try{d(e,{onError:s,onEnd:i,onStop:n}).play()}catch(o){r.Z.error("AudioPlayer prepareClipToPlay failed in play()",o)}}loop(e,t){var{onError:s,onLoop:i,onStop:n}=void 0===t?{}:t;try{var o=d(e,{onError:s,onEnd:i,onStop:n}),a=o.play();o.loop(!0,a)}catch(l){r.Z.error("AudioPlayer prepareClipToPlay failed in loop()",l)}}isPlaying(e){var t=a.get(e);return!!t&&t.playing()}destruct(e){var t=a.get(e);t&&(t.unload(),a.delete(e))}stop(e){var t=a.get(e);t&&(t.once("fade",(()=>{t.stop(),t.volume(this.volume)})),t.fade(this.volume,0,300))}stopAll(){a.cache.forEach((e=>e.stop()))}getVolume(){return this.volume}setVolume(e){this.volume=e,i.Howler.volume(e)}}},"./app/j/utils/DataTransferHelper.ts":(e,t,s)=>{"use strict";s.d(t,{XX:()=>h,FB:()=>g,IL:()=>p,U5:()=>_,t9:()=>m});var r=s("./node_modules/lodash/partition.js"),i=s.n(r),n=(s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.match.js"),s("./app/j/constants/MimeTypeConstants.ts")),o=(s("./node_modules/core-js/modules/es.array.reduce.js"),s("./app/j/utils/ensureArray.ts")),a="string";function l(e){return Array.from(e)}function d(e){return l(e).reduce(((e,t)=>e.concat((0,o.Z)(t.getAsFile()))),[])}var u=s("./app/j/utils/FileHelper.ts"),c=s("./app/j/utils/FileListHelper.ts");function p(e){var{types:t}=e;return!t||Array.from(t).some((e=>n.lD.indexOf(e)>-1))}function h(e){var t=g(e);if(e.items){var s=l(e.items),[r,n]=i()(s,(e=>{var{kind:t}=e;return t===a}));return!!function(e){return e.some((e=>{var{type:t}=e;return"text/rtf"===t}))}(r)||!function(e,t){if(1!==e.length)return!1;var s=e[0].getAsFile();return!!s&&s.name===t}(n,t)&&0===n.length}return e.files?0===e.files.length:!!t}function g(e){for(var t=0;t<n.lD.length;t++)try{var s=e.getData(n.lD[t]);if(s)return s}catch(r){continue}return""}function m(e,t){return(0,u.t)(function(e){var{files:t,items:s}=e;return s?d(s):t?(0,c.k)(t):[]}(e),t)}function _(e){var t=null==e||null==e.getData?void 0:e.getData("text/html");return null==t?void 0:t.match(/src\s*=\s*".+?"/)}},"./app/j/utils/DateHelper.ts":(e,t,s)=>{"use strict";s.d(t,{Rp:()=>i,Qd:()=>n,rI:()=>o});var r=s("./app/j/constants/TimeConstants.ts"),i=(e,t,s)=>{var r=new Date(e,t,s);return e===r.getFullYear()&&t===r.getMonth()&&s===r.getDate()},n=e=>{var t=Math.floor(e/r.RQ),s=Math.floor((e-t*r.RQ)/r.sU),i=e-t*r.RQ-s*r.sU;return t<10&&(t="0"+t),s<10&&(s="0"+s),i<10&&(i="0"+i),"00"===t?s+":"+i:t+":"+s+":"+i},o=e=>({days:Math.floor(e/r.ii),hours:Math.floor(e%r.ii/r.RQ)})},"./app/j/utils/FileHelper.ts":(e,t,s)=>{"use strict";s.d(t,{t:()=>n});var r=s("./node_modules/lodash/partition.js"),i=s.n(r);s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js");function n(e,t){var[s,r]=i()(e,(e=>function(e,t){var{type:s}=e;return t.indexOf(s)>-1}(e,t)));return{matching:s,nonMatching:r,numTotal:s.length+r.length}}},"./app/j/utils/FileListHelper.ts":(e,t,s)=>{"use strict";s.d(t,{k:()=>i,e:()=>n});var r=s("./app/j/utils/FileHelper.ts");function i(e){return Array.from(e)}function n(e,t){return(0,r.t)(i(e),t)}},"./app/j/utils/ImageSourceHelper.ts":(e,t,s)=>{"use strict";s.d(t,{AE:()=>n,mw:()=>a,f7:()=>l,_t:()=>c,LZ:()=>p});s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/es.array-buffer.slice.js"),s("./node_modules/core-js/modules/es.typed-array.uint8-array.js"),s("./node_modules/core-js/modules/esnext.typed-array.at.js"),s("./node_modules/core-js/modules/es.typed-array.sort.js"),s("./node_modules/core-js/modules/es.typed-array.to-locale-string.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/web.url.js"),s("./node_modules/core-js/modules/web.url-search-params.js");var r=s("./node_modules/nullthrows/nullthrows.js"),i=s.n(r);function n(e){return i()(e.getContext("2d"))}function o(e){return new Promise((t=>{var s=new Image;s.setAttribute("crossOrigin","anonymous"),s.onload=()=>t(s),s.src=e}))}function a(e){return o(e).then((e=>({width:e.naturalWidth,height:e.naturalHeight})))}function l(e){return o(e).then((e=>{var{naturalHeight:t,naturalWidth:s}=e,r=document.createElement("canvas");r.width=s,r.height=t;var i=n(r);return i.fillStyle="white",i.fillRect(0,0,s,t),i.drawImage(e,0,0),r}))}function d(e,t,s){void 0===t&&(t="image/jpeg"),void 0===s&&(s=1);for(var r=this.toDataURL(t,s),i=atob(function(e){var t=e.split(",",2);return null!=t&&t[1]?t[1]:""}(r)),n=i.length,o=new Uint8Array(n),a=0;a<n;a++)o[a]=i.charCodeAt(a);e(new Blob([o],{type:t}))}function u(e){return new Promise((t=>(e.toBlob||d).call(e,t)))}function c(e){return l(e).then(u)}function p(e){return o(function(e){return URL.createObjectURL(e)}(e))}},"./app/j/utils/LogCreateSetNavigationClick.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var r=s("./app/j/compatibility/logger/classComponentLoggers.ts");function i(e,t){var{loggerConfig:s,loggers:i}=t;s?(0,r.Pv)(s,"create_set_navigation_"+e+"_click"):null!=i&&i.logPageAction&&i.logPageAction("create_set_navigation_"+e+"_click")}},"./app/j/utils/ObjectHelper.ts":(e,t,s)=>{"use strict";s.d(t,{J:()=>r});s("./node_modules/core-js/modules/es.json.stringify.js");var r=(e,t)=>e&&t?JSON.stringify(e)===JSON.stringify(t):e===t},"./app/j/utils/VisibilityTracker.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var r=s("./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js"),i=(s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.assign.js"),s("./node_modules/@researchgate/react-intersection-observer/lib/js/index.js")),n=(s("./node_modules/intersection-observer/intersection-observer.js"),s("./node_modules/react/index.js")),o=s("./node_modules/react/jsx-runtime.js"),a=["children"];class l extends n.PureComponent{constructor(){super(...arguments),this.state={isIntersecting:!1},this.handleChange=(e,t)=>{var{isIntersecting:s}=e;s&&this.props.once&&t(),this.setState({isIntersecting:s}),this.props.onIntersect&&s&&this.props.onIntersect()}}render(){var e=this.props,{children:t}=e,s=(0,r.Z)(e,a);return(0,o.jsx)(i.ZP,Object.assign({},s,{onChange:this.handleChange,children:t(this.state.isIntersecting)}))}}l.defaultProps={disabled:!1,once:!1,threshold:0}},"./app/j/utils/arraysHaveSameElements.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});s("./node_modules/core-js/modules/es.array.sort.js");function r(e,t){if(null==e||null==t)return e===t;if(e.length!==t.length)return!1;e.sort(),t.sort();for(var s=0;s<e.length;++s)if(e[s]!==t[s])return!1;return!0}},"./app/j/utils/bound-index.ts":(e,t,s)=>{"use strict";function r(e,t){return(e%t+t)%t}s.d(t,{Z:()=>r})},"./app/j/utils/createOrAppendToMappedArray.ts":(e,t,s)=>{"use strict";function r(e,t,s){var r=e.get(t);r||(r=[],e.set(t,r)),r.push(s)}s.d(t,{Z:()=>r})},"./app/j/utils/createScopedSelector.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var r=s("./node_modules/reselect/lib/index.js");function i(e,t){return(0,r.createSelector)((t=>t.get(e)),((e,t)=>t),(e=>e),(0,r.createStructuredSelector)(t))}},"./app/j/utils/createViewModelFromJson.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var r=s("./app/j/models/QModel.ts");function i(e,t){if(Array.isArray(t))return t.map((t=>new e(t)));if(t instanceof r.Z)return new e(t.properties);if(t instanceof Object){var s={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=t[i];s[i]=new e(n)}return s}return new e(t)}},"./app/j/utils/delete-key.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});s("./node_modules/core-js/modules/es.object.assign.js");function r(e,t){for(var s=Object.assign({},e),r=0;r<t.length;r++)delete s[t[r]];return s}},"./app/j/utils/diff.ts":(e,t,s)=>{"use strict";s.d(t,{NL:()=>i,D$:()=>n,JZ:()=>o});s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.match.js");function r(e){var{ignoreCase:t}=e;this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32,this.ignoreCase=t}var i=-1,n=1,o=0;r.Diff,r.prototype.diff_main=function(e,t,s,r){void 0===s&&(s=!0),void 0===r&&(r=void 0),void 0===r&&(r=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var i=r;if(null==e||null==t)throw new Error("Null input. (diff_main)");if(e==t)return e?[[o,e]]:[];var n=this.diff_commonPrefix(e,t),a=e.substring(0,n);e=e.substring(n),t=t.substring(n),n=this.diff_commonSuffix(e,t);var l=e.substring(e.length-n);e=e.substring(0,e.length-n),t=t.substring(0,t.length-n);var d=this.diff_compute_(e,t,s,i);return a&&d.unshift([o,a]),l&&d.push([o,l]),this.diff_cleanupMerge(d),d},r.prototype.diff_compute_=function(e,t,s,r){var a;if(!e)return[[n,t]];if(!t)return[[i,e]];var l=e.length>t.length?e:t,d=e.length>t.length?t:e,u=l.indexOf(d);if(-1!=u)return a=[[n,l.substring(0,u)],[o,d],[n,l.substring(u+d.length)]],e.length>t.length&&(a[0][0]=a[2][0]=i),a;if(1==d.length)return[[i,e],[n,t]];l=d=null;var c=this.diff_halfMatch_(e,t);if(c){var p=c[0],h=c[1],g=c[2],m=c[3],_=c[4],f=this.diff_main(p,g,s,r),v=this.diff_main(h,m,s,r);return f.concat([[o,_]],v)}return this.diff_bisect_(e,t,r)},r.prototype.diff_bisect_=function(e,t,s){for(var r=e.length,o=t.length,a=Math.ceil((r+o)/2),l=a,d=2*a,u=new Array(d),c=new Array(d),p=0;p<d;p++)u[p]=-1,c[p]=-1;u[l+1]=0,c[l+1]=0;for(var h=r-o,g=h%2!=0,m=0,_=0,f=0,v=0,S=0;S<a&&!((new Date).getTime()>s);S++){for(var C=-S+m;C<=S-_;C+=2){for(var b=l+C,y=(I=C==-S||C!=S&&u[b-1]<u[b+1]?u[b+1]:u[b-1]+1)-C;I<r&&y<o&&e.charAt(I)==t.charAt(y);)I++,y++;if(u[b]=I,I>r)_+=2;else if(y>o)m+=2;else if(g){if((x=l+h-C)>=0&&x<d&&-1!=c[x])if(I>=(j=r-c[x]))return this.diff_bisectSplit_(e,t,I,y,s)}}for(var E=-S+f;E<=S-v;E+=2){for(var j,x=l+E,T=(j=E==-S||E!=S&&c[x-1]<c[x+1]?c[x+1]:c[x-1]+1)-E;j<r&&T<o&&e.charAt(r-j-1)==t.charAt(o-T-1);)j++,T++;if(c[x]=j,j>r)v+=2;else if(T>o)f+=2;else if(!g){if((b=l+h-E)>=0&&b<d&&-1!=u[b]){var I;y=l+(I=u[b])-b;if(I>=(j=r-j))return this.diff_bisectSplit_(e,t,I,y,s)}}}}return[[i,e],[n,t]]},r.prototype.diff_bisectSplit_=function(e,t,s,r,i){var n=e.substring(0,s),o=t.substring(0,r),a=e.substring(s),l=t.substring(r),d=this.diff_main(n,o,!1,i),u=this.diff_main(a,l,!1,i);return d.concat(u)},r.prototype.diff_commonPrefix=function(e,t){var s=this.ignoreCase?e.charAt(0).toLowerCase()!=t.charAt(0).toLowerCase():e.charAt(0)!=t.charAt(0);if(!e||!t||s)return 0;for(var r=0,i=Math.min(e.length,t.length),n=i,o=0;r<n;){var a=e.substring(o,n),l=t.substring(o,n);this.ignoreCase&&(a=a.toLowerCase(),l=l.toLowerCase()),a==l?o=r=n:i=n,n=Math.floor((i-r)/2+r)}return n},r.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1).toLowerCase()!=t.charAt(t.length-1).toLowerCase())return 0;for(var s=0,r=Math.min(e.length,t.length),i=r,n=0;s<i;){var o=e.substring(e.length-i,e.length-n),a=t.substring(t.length-i,t.length-n);this.ignoreCase&&(o=o.toLowerCase(),a=a.toLowerCase()),o==a?n=s=i:r=i,i=Math.floor((r-s)/2+s)}return i},r.prototype.diff_commonOverlap_=function(e,t){var s=e.length,r=t.length;if(0==s||0==r)return 0;s>r?e=e.substring(s-r):s<r&&(t=t.substring(0,s));var i=Math.min(s,r);if(e==t)return i;for(var n=0,o=1;;){var a=e.substring(i-o),l=t.indexOf(a);if(-1==l)return n;o+=l,0!=l&&e.substring(i-o)!=t.substring(0,o)||(n=o,o++)}},r.prototype.diff_halfMatch_=function(e,t){if(this.Diff_Timeout<=0)return null;var s=e.length>t.length?e:t,r=e.length>t.length?t:e;if(s.length<4||2*r.length<s.length)return null;var i=this;function n(e,t,s){for(var r,n,o,a,l=e.substring(s,s+Math.floor(e.length/4)),d=-1,u="";-1!=(d=t.indexOf(l,d+1));){var c=i.diff_commonPrefix(e.substring(s),t.substring(d)),p=i.diff_commonSuffix(e.substring(0,s),t.substring(0,d));u.length<p+c&&(u=t.substring(d-p,d)+t.substring(d,d+c),r=e.substring(0,s-p),n=e.substring(s+c),o=t.substring(0,d-p),a=t.substring(d+c))}return 2*u.length>=e.length?[r,n,o,a,u]:null}var o,a,l,d,u,c=n(s,r,Math.ceil(s.length/4)),p=n(s,r,Math.ceil(s.length/2));return c||p?(o=p?c&&c[4].length>p[4].length?c:p:c,e.length>t.length?(a=o[0],l=o[1],d=o[2],u=o[3]):(d=o[0],u=o[1],a=o[2],l=o[3]),[a,l,d,u,o[4]]):null},r.prototype.diff_cleanupSemantic=function(e){for(var t=!1,s=[],r=0,a=null,l=0,d=0,u=0,c=0,p=0;l<e.length;)e[l][0]==o?(s[r++]=l,d=c,u=p,c=0,p=0,a=e[l][1]):(e[l][0]==n?c+=e[l][1].length:p+=e[l][1].length,null!==a&&a.length<=Math.max(d,u)&&a.length<=Math.max(c,p)&&(e.splice(s[r-1],0,[i,a]),e[s[r-1]+1][0]=n,r--,l=--r>0?s[r-1]:-1,d=0,u=0,c=0,p=0,a=null,t=!0)),l++;for(t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),l=1;l<e.length;){if(e[l-1][0]==i&&e[l][0]==n){var h=e[l-1][1],g=e[l][1],m=this.diff_commonOverlap_(h,g);m&&(e.splice(l,0,[o,g.substring(0,m)]),e[l-1][1]=h.substring(0,h.length-m),e[l+1][1]=g.substring(m),l++),l++}l++}},r.prototype.diff_cleanupSemanticLossless=function(e){var t=/[^a-zA-Z0-9]/,s=/\s/,r=/[\r\n]/,i=/\n\r?\n$/,n=/^\r?\n\r?\n/;function a(e,o){if(!e||!o)return 5;var a=0;return(e.charAt(e.length-1).match(t)||o.charAt(0).match(t))&&(a++,(e.charAt(e.length-1).match(s)||o.charAt(0).match(s))&&(a++,(e.charAt(e.length-1).match(r)||o.charAt(0).match(r))&&(a++,(e.match(i)||o.match(n))&&a++))),a}for(var l=1;l<e.length-1;){if(e[l-1][0]==o&&e[l+1][0]==o){var d=e[l-1][1],u=e[l][1],c=e[l+1][1],p=this.diff_commonSuffix(d,u);if(p){var h=u.substring(u.length-p);d=d.substring(0,d.length-p),u=h+u.substring(0,u.length-p),c=h+c}for(var g=d,m=u,_=c,f=a(d,u)+a(u,c);u.charAt(0)===c.charAt(0);){d+=u.charAt(0),u=u.substring(1)+c.charAt(0),c=c.substring(1);var v=a(d,u)+a(u,c);v>=f&&(f=v,g=d,m=u,_=c)}e[l-1][1]!=g&&(g?e[l-1][1]=g:(e.splice(l-1,1),l--),e[l][1]=m,_?e[l+1][1]=_:(e.splice(l+1,1),l--))}l++}},r.prototype.diff_cleanupEfficiency=function(e){for(var t=!1,s=[],r=0,a="",l=0,d=!1,u=!1,c=!1,p=!1;l<e.length;)e[l][0]==o?(e[l][1].length<this.Diff_EditCost&&(c||p)?(s[r++]=l,d=c,u=p,a=e[l][1]):(r=0,a=""),c=p=!1):(e[l][0]==i?p=!0:c=!0,a&&(d&&u&&c&&p||a.length<this.Diff_EditCost/2&&d+u+c+p==3)&&(e.splice(s[r-1],0,[i,a]),e[s[r-1]+1][0]=n,r--,a="",d&&u?(c=p=!0,r=0):(l=--r>0?s[r-1]:-1,c=p=!1),t=!0)),l++;t&&this.diff_cleanupMerge(e)},r.prototype.diff_cleanupMerge=function(e){e.push([o,""]);for(var t,s=0,r=0,a=0,l="",d="";s<e.length;)switch(e[s][0]){case n:a++,d+=e[s][1],s++;break;case i:r++,l+=e[s][1],s++;break;case o:r+a>1?(0!==r&&0!==a&&(0!==(t=this.diff_commonPrefix(d,l))&&(s-r-a>0&&e[s-r-a-1][0]==o?e[s-r-a-1][1]+=d.substring(0,t):(e.splice(0,0,[o,d.substring(0,t)]),s++),d=d.substring(t),l=l.substring(t)),0!==(t=this.diff_commonSuffix(d,l))&&(e[s][1]=d.substring(d.length-t)+e[s][1],d=d.substring(0,d.length-t),l=l.substring(0,l.length-t))),0===r?e.splice(s-r-a,r+a,[n,d]):0===a?e.splice(s-r-a,r+a,[i,l]):e.splice(s-r-a,r+a,[i,l],[n,d]),s=s-r-a+(r?1:0)+(a?1:0)+1):0!==s&&e[s-1][0]==o?(e[s-1][1]+=e[s][1],e.splice(s,1)):s++,a=0,r=0,l="",d=""}""===e[e.length-1][1]&&e.pop();var u=!1;for(s=1;s<e.length-1;)e[s-1][0]==o&&e[s+1][0]==o&&(e[s][1].substring(e[s][1].length-e[s-1][1].length)==e[s-1][1]?(e[s][1]=e[s-1][1]+e[s][1].substring(0,e[s][1].length-e[s-1][1].length),e[s+1][1]=e[s-1][1]+e[s+1][1],e.splice(s-1,1),u=!0):e[s][1].substring(0,e[s+1][1].length)==e[s+1][1]&&(e[s-1][1]+=e[s+1][1],e[s][1]=e[s][1].substring(e[s+1][1].length)+e[s+1][1],e.splice(s+1,1),u=!0)),s++;u&&this.diff_cleanupMerge(e)},r.prototype.diff_levenshtein=function(e){for(var t=0,s=0,r=0,a=0;a<e.length;a++){var l=e[a][0],d=e[a][1];switch(l){case n:s+=d.length;break;case i:r+=d.length;break;case o:t+=Math.max(s,r),s=0,r=0}}return t+=Math.max(s,r)},t.ZP=r},"./app/j/utils/findDOMParent.ts":(e,t,s)=>{"use strict";function r(e,t){return e&&e!==window.document?t(e)?e:r(e.parentNode,t):null}s.d(t,{Z:()=>r})},"./app/j/utils/getDimensions.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});s("./node_modules/core-js/modules/es.parse-int.js");function r(e){var t=parseInt(e.offsetHeight||0,10),s=parseInt(e.offsetWidth||0,10),r=window.getComputedStyle(e)||{},i=parseInt(r.paddingLeft,10)||0,n=parseInt(r.paddingRight,10)||0;return{height:t-(parseInt(r.paddingTop,10)||0)-(parseInt(r.paddingBottom,10)||0),width:s-i-n}}},"./app/j/utils/getScrollbarWidth.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var r=null;function i(){if(null===r){var e=document.createElement("div");e.style.height="100px",e.style.overflow="scroll",e.style.position="absolute",e.style.top="-9999px",e.style.width="100px",document.body&&document.body.appendChild(e),r=e.offsetWidth-e.clientWidth,document.body&&document.body.removeChild(e)}return Number.isNaN(r)?0:r}},"./app/j/utils/is-element-active.ts":(e,t,s)=>{"use strict";function r(e){return window.document.activeElement===e}s.d(t,{Z:()=>r})},"./app/j/utils/is-empty.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var r=s("./node_modules/lodash/size.js"),i=s.n(r);function n(e){return 0===i()(e)}},"./app/j/utils/isDomainAccessible.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});s("./node_modules/core-js/modules/es.promise.js");function r(e,t){return void 0===t&&(t=5e3),new Promise(((s,r)=>{var i=new Image,n=window.setTimeout((()=>{r(new Error("Domain "+e+" timed out"))}),t);i.onabort=()=>{clearTimeout(n),r(new Error("Domain "+e+" aborted"))},i.onerror=()=>{clearTimeout(n),r(new Error("Domain "+e+" errored"))},i.onload=()=>{clearTimeout(n),s()},i.src=e+"/favicon.ico"}))}},"./app/j/utils/log-rich-text-event.ts":(e,t,s)=>{"use strict";var r=s("./app/j/utils/log-page-action.ts"),i=s("./node_modules/lodash/debounce.js"),n=s.n(i)()(((e,t)=>(0,r.Z)(e,t)),1e3);t.Z=n},"./app/j/utils/mapWithKeys.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});s("./node_modules/core-js/modules/es.array.reduce.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.assign.js");function r(e){return e.reduce(((e,t)=>{var[s,r]=t;return Object.assign({},e,{[s]:r})}),{})}},"./app/j/utils/maybeConfirmPageHide.ts":(e,t,s)=>{"use strict";function r(e){var t=t=>{var s=e();if(void 0!==s)return t.preventDefault(),(t||window.event).returnValue=s,s};return window.addEventListener("beforeunload",t,!0),{remove(){window.removeEventListener("beforeunload",t,!0)}}}s.d(t,{Z:()=>r})},"./app/j/utils/parseAge.ts":(e,t,s)=>{"use strict";function r(e,t,s){var r=t-1;if(Number.isNaN(r)||Number.isNaN(e)||Number.isNaN(s)||-1===t||-1===e||-1===s)return 1/0;var i=new Date,n=new Date(e,r,s),o=i.getFullYear()-n.getFullYear(),a=i.getMonth()-n.getMonth();return(a<0||0===a&&i.getDate()<n.getDate())&&o--,o}s.d(t,{Z:()=>r})},"./app/j/utils/schools.ts":(e,t,s)=>{"use strict";s.d(t,{L:()=>n});var r=s("./app/j/i18n/$t.ts"),i=s("./app/j/i18n/getLocalizedCountry.ts");function n(e,t,s){void 0===t&&(t=!0),void 0===s&&(s=r.Z);var n=[e.city];if("us"===e.countryCode)n.push(e.state);else if(e.countryCode){var o=(0,i.Z)(e.countryCode,s);n.push(o)}var a=n.join(", ");return t?[e.name,a].join(" · "):a}},"./app/j/utils/transformTermText.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var r=s("./node_modules/@quizlet/pinyin-converter/kotlin_com_quizlet_shared_pinyin_converter.js"),i=s("./app/j/config/languages.ts"),n=(e,t)=>e.indexOf(t)>=0;function o(e,t,s){return e&&function(e,t){return!n(i.go,e)&&(n(i.xK,e)||n(i.xK,t))}(t,s)?r.PinyinConverter.convert(e):e}},"./app/j/view_models/ImageViewModel.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var r=s("./app/j/view_models/ViewModel.ts");class i extends r.Z{getPath(){return this._legacyUrl}getSquarePath(){return this._legacyUrlSquare}getSecurePath(){return this._secureLegacyUrl}getSmallSecurePath(){return this._secureLegacyUrlSmall}getSquareSecurePath(){return this._secureLegacyUrlSquare}}},"./app/j/view_models/SetViewModel.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});s("./node_modules/core-js/modules/es.symbol.description.js");var r=s("./app/j/utils/createViewModelFromJson.ts"),i=s("./app/j/utils/html-escape.ts"),n=s("./app/j/utils/trim.ts"),o=s("./app/j/view_models/ViewModel.ts");class a extends o.Z{isPublished(){return!!(this.publishedTimestamp&&this.publishedTimestamp>0)}displayTitle(){return(0,i.Z)(this.title)}displayDescription(){return(0,n.Z)((0,i.Z)(this.description))}getModePath(e){return"/"+this.id+"/"+e}static fromJson(e){return(0,r.Z)(a,e)}}},"./app/j/view_models/ViewModel.ts":(e,t,s)=>{"use strict";s("./node_modules/core-js/modules/es.object.assign.js");var r=class{constructor(e){Object.assign(this,e)}};t.Z=r},"./node_modules/core-js/internals/array-buffer-native.js":e=>{e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},"./node_modules/core-js/internals/array-buffer-view-core.js":(e,t,s)=>{"use strict";var r,i,n,o=s("./node_modules/core-js/internals/array-buffer-native.js"),a=s("./node_modules/core-js/internals/descriptors.js"),l=s("./node_modules/core-js/internals/global.js"),d=s("./node_modules/core-js/internals/is-callable.js"),u=s("./node_modules/core-js/internals/is-object.js"),c=s("./node_modules/core-js/internals/has-own-property.js"),p=s("./node_modules/core-js/internals/classof.js"),h=s("./node_modules/core-js/internals/try-to-string.js"),g=s("./node_modules/core-js/internals/create-non-enumerable-property.js"),m=s("./node_modules/core-js/internals/redefine.js"),_=s("./node_modules/core-js/internals/object-define-property.js").f,f=s("./node_modules/core-js/internals/object-is-prototype-of.js"),v=s("./node_modules/core-js/internals/object-get-prototype-of.js"),S=s("./node_modules/core-js/internals/object-set-prototype-of.js"),C=s("./node_modules/core-js/internals/well-known-symbol.js"),b=s("./node_modules/core-js/internals/uid.js"),y=l.Int8Array,E=y&&y.prototype,j=l.Uint8ClampedArray,x=j&&j.prototype,T=y&&v(y),I=E&&v(E),w=Object.prototype,A=l.TypeError,O=C("toStringTag"),R=b("TYPED_ARRAY_TAG"),D=b("TYPED_ARRAY_CONSTRUCTOR"),L=o&&!!S&&"Opera"!==p(l.opera),P=!1,M={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Z={BigInt64Array:8,BigUint64Array:8},k=function(e){if(!u(e))return!1;var t=p(e);return c(M,t)||c(Z,t)};for(r in M)(n=(i=l[r])&&i.prototype)?g(n,D,i):L=!1;for(r in Z)(n=(i=l[r])&&i.prototype)&&g(n,D,i);if((!L||!d(T)||T===Function.prototype)&&(T=function(){throw A("Incorrect invocation")},L))for(r in M)l[r]&&S(l[r],T);if((!L||!I||I===w)&&(I=T.prototype,L))for(r in M)l[r]&&S(l[r].prototype,I);if(L&&v(x)!==I&&S(x,I),a&&!c(I,O))for(r in P=!0,_(I,O,{get:function(){return u(this)?this[R]:void 0}}),M)l[r]&&g(l[r],R,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:L,TYPED_ARRAY_CONSTRUCTOR:D,TYPED_ARRAY_TAG:P&&R,aTypedArray:function(e){if(k(e))return e;throw A("Target is not a typed array")},aTypedArrayConstructor:function(e){if(d(e)&&(!S||f(T,e)))return e;throw A(h(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,s){if(a){if(s)for(var r in M){var i=l[r];if(i&&c(i.prototype,e))try{delete i.prototype[e]}catch(n){}}I[e]&&!s||m(I,e,s?t:L&&E[e]||t)}},exportTypedArrayStaticMethod:function(e,t,s){var r,i;if(a){if(S){if(s)for(r in M)if((i=l[r])&&c(i,e))try{delete i[e]}catch(n){}if(T[e]&&!s)return;try{return m(T,e,s?t:L&&T[e]||t)}catch(n){}}for(r in M)!(i=l[r])||i[e]&&!s||m(i,e,t)}},isView:function(e){if(!u(e))return!1;var t=p(e);return"DataView"===t||c(M,t)||c(Z,t)},isTypedArray:k,TypedArray:T,TypedArrayPrototype:I}},"./node_modules/core-js/internals/array-buffer.js":(e,t,s)=>{"use strict";var r=s("./node_modules/core-js/internals/global.js"),i=s("./node_modules/core-js/internals/function-uncurry-this.js"),n=s("./node_modules/core-js/internals/descriptors.js"),o=s("./node_modules/core-js/internals/array-buffer-native.js"),a=s("./node_modules/core-js/internals/function-name.js"),l=s("./node_modules/core-js/internals/create-non-enumerable-property.js"),d=s("./node_modules/core-js/internals/redefine-all.js"),u=s("./node_modules/core-js/internals/fails.js"),c=s("./node_modules/core-js/internals/an-instance.js"),p=s("./node_modules/core-js/internals/to-integer-or-infinity.js"),h=s("./node_modules/core-js/internals/to-length.js"),g=s("./node_modules/core-js/internals/to-index.js"),m=s("./node_modules/core-js/internals/ieee754.js"),_=s("./node_modules/core-js/internals/object-get-prototype-of.js"),f=s("./node_modules/core-js/internals/object-set-prototype-of.js"),v=s("./node_modules/core-js/internals/object-get-own-property-names.js").f,S=s("./node_modules/core-js/internals/object-define-property.js").f,C=s("./node_modules/core-js/internals/array-fill.js"),b=s("./node_modules/core-js/internals/array-slice-simple.js"),y=s("./node_modules/core-js/internals/set-to-string-tag.js"),E=s("./node_modules/core-js/internals/internal-state.js"),j=a.PROPER,x=a.CONFIGURABLE,T=E.get,I=E.set,w="ArrayBuffer",A="DataView",O="Wrong index",R=r.ArrayBuffer,D=R,L=D&&D.prototype,P=r.DataView,M=P&&P.prototype,Z=Object.prototype,k=r.Array,U=r.RangeError,N=i(C),F=i([].reverse),B=m.pack,H=m.unpack,V=function(e){return[255&e]},G=function(e){return[255&e,e>>8&255]},W=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},z=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},q=function(e){return B(e,23,4)},K=function(e){return B(e,52,8)},Y=function(e,t){S(e.prototype,t,{get:function(){return T(this)[t]}})},Q=function(e,t,s,r){var i=g(s),n=T(e);if(i+t>n.byteLength)throw U(O);var o=T(n.buffer).bytes,a=i+n.byteOffset,l=b(o,a,a+t);return r?l:F(l)},$=function(e,t,s,r,i,n){var o=g(s),a=T(e);if(o+t>a.byteLength)throw U(O);for(var l=T(a.buffer).bytes,d=o+a.byteOffset,u=r(+i),c=0;c<t;c++)l[d+c]=u[n?c:t-c-1]};if(o){var X=j&&R.name!==w;if(u((function(){R(1)}))&&u((function(){new R(-1)}))&&!u((function(){return new R,new R(1.5),new R(NaN),X&&!x})))X&&x&&l(R,"name",w);else{(D=function(e){return c(this,L),new R(g(e))}).prototype=L;for(var J,ee=v(R),te=0;ee.length>te;)(J=ee[te++])in D||l(D,J,R[J]);L.constructor=D}f&&_(M)!==Z&&f(M,Z);var se=new P(new D(2)),re=i(M.setInt8);se.setInt8(0,2147483648),se.setInt8(1,2147483649),!se.getInt8(0)&&se.getInt8(1)||d(M,{setInt8:function(e,t){re(this,e,t<<24>>24)},setUint8:function(e,t){re(this,e,t<<24>>24)}},{unsafe:!0})}else L=(D=function(e){c(this,L);var t=g(e);I(this,{bytes:N(k(t),0),byteLength:t}),n||(this.byteLength=t)}).prototype,M=(P=function(e,t,s){c(this,M),c(e,L);var r=T(e).byteLength,i=p(t);if(i<0||i>r)throw U("Wrong offset");if(i+(s=void 0===s?r-i:h(s))>r)throw U("Wrong length");I(this,{buffer:e,byteLength:s,byteOffset:i}),n||(this.buffer=e,this.byteLength=s,this.byteOffset=i)}).prototype,n&&(Y(D,"byteLength"),Y(P,"buffer"),Y(P,"byteLength"),Y(P,"byteOffset")),d(M,{getInt8:function(e){return Q(this,1,e)[0]<<24>>24},getUint8:function(e){return Q(this,1,e)[0]},getInt16:function(e){var t=Q(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=Q(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return z(Q(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return z(Q(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return H(Q(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return H(Q(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){$(this,1,e,V,t)},setUint8:function(e,t){$(this,1,e,V,t)},setInt16:function(e,t){$(this,2,e,G,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){$(this,2,e,G,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){$(this,4,e,W,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){$(this,4,e,W,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){$(this,4,e,q,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){$(this,8,e,K,t,arguments.length>2?arguments[2]:void 0)}});y(D,w),y(P,A),e.exports={ArrayBuffer:D,DataView:P}},"./node_modules/core-js/internals/array-fill.js":(e,t,s)=>{"use strict";var r=s("./node_modules/core-js/internals/to-object.js"),i=s("./node_modules/core-js/internals/to-absolute-index.js"),n=s("./node_modules/core-js/internals/length-of-array-like.js");e.exports=function(e){for(var t=r(this),s=n(t),o=arguments.length,a=i(o>1?arguments[1]:void 0,s),l=o>2?arguments[2]:void 0,d=void 0===l?s:i(l,s);d>a;)t[a++]=e;return t}},"./node_modules/core-js/internals/define-well-known-symbol.js":(e,t,s)=>{var r=s("./node_modules/core-js/internals/path.js"),i=s("./node_modules/core-js/internals/has-own-property.js"),n=s("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),o=s("./node_modules/core-js/internals/object-define-property.js").f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||o(t,e,{value:n.f(e)})}},"./node_modules/core-js/internals/ieee754.js":(e,t,s)=>{var r=s("./node_modules/core-js/internals/global.js").Array,i=Math.abs,n=Math.pow,o=Math.floor,a=Math.log,l=Math.LN2;e.exports={pack:function(e,t,s){var d,u,c,p=r(s),h=8*s-t-1,g=(1<<h)-1,m=g>>1,_=23===t?n(2,-24)-n(2,-77):0,f=e<0||0===e&&1/e<0?1:0,v=0;for((e=i(e))!=e||e===1/0?(u=e!=e?1:0,d=g):(d=o(a(e)/l),e*(c=n(2,-d))<1&&(d--,c*=2),(e+=d+m>=1?_/c:_*n(2,1-m))*c>=2&&(d++,c/=2),d+m>=g?(u=0,d=g):d+m>=1?(u=(e*c-1)*n(2,t),d+=m):(u=e*n(2,m-1)*n(2,t),d=0));t>=8;)p[v++]=255&u,u/=256,t-=8;for(d=d<<t|u,h+=t;h>0;)p[v++]=255&d,d/=256,h-=8;return p[--v]|=128*f,p},unpack:function(e,t){var s,r=e.length,i=8*r-t-1,o=(1<<i)-1,a=o>>1,l=i-7,d=r-1,u=e[d--],c=127&u;for(u>>=7;l>0;)c=256*c+e[d--],l-=8;for(s=c&(1<<-l)-1,c>>=-l,l+=t;l>0;)s=256*s+e[d--],l-=8;if(0===c)c=1-a;else{if(c===o)return s?NaN:u?-1/0:1/0;s+=n(2,t),c-=a}return(u?-1:1)*s*n(2,c-t)}}},"./node_modules/core-js/internals/is-integral-number.js":(e,t,s)=>{var r=s("./node_modules/core-js/internals/is-object.js"),i=Math.floor;e.exports=Number.isInteger||function(e){return!r(e)&&isFinite(e)&&i(e)===e}},"./node_modules/core-js/internals/path.js":(e,t,s)=>{var r=s("./node_modules/core-js/internals/global.js");e.exports=r},"./node_modules/core-js/internals/string-repeat.js":(e,t,s)=>{"use strict";var r=s("./node_modules/core-js/internals/global.js"),i=s("./node_modules/core-js/internals/to-integer-or-infinity.js"),n=s("./node_modules/core-js/internals/to-string.js"),o=s("./node_modules/core-js/internals/require-object-coercible.js"),a=r.RangeError;e.exports=function(e){var t=n(o(this)),s="",r=i(e);if(r<0||r==1/0)throw a("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(s+=t);return s}},"./node_modules/core-js/internals/this-number-value.js":(e,t,s)=>{var r=s("./node_modules/core-js/internals/function-uncurry-this.js");e.exports=r(1..valueOf)},"./node_modules/core-js/internals/to-index.js":(e,t,s)=>{var r=s("./node_modules/core-js/internals/global.js"),i=s("./node_modules/core-js/internals/to-integer-or-infinity.js"),n=s("./node_modules/core-js/internals/to-length.js"),o=r.RangeError;e.exports=function(e){if(void 0===e)return 0;var t=i(e),s=n(t);if(t!==s)throw o("Wrong length or index");return s}},"./node_modules/core-js/internals/to-offset.js":(e,t,s)=>{var r=s("./node_modules/core-js/internals/global.js"),i=s("./node_modules/core-js/internals/to-positive-integer.js"),n=r.RangeError;e.exports=function(e,t){var s=i(e);if(s%t)throw n("Wrong offset");return s}},"./node_modules/core-js/internals/to-positive-integer.js":(e,t,s)=>{var r=s("./node_modules/core-js/internals/global.js"),i=s("./node_modules/core-js/internals/to-integer-or-infinity.js"),n=r.RangeError;e.exports=function(e){var t=i(e);if(t<0)throw n("The argument can't be less than 0");return t}},"./node_modules/core-js/internals/typed-array-constructor.js":(e,t,s)=>{"use strict";var r=s("./node_modules/core-js/internals/export.js"),i=s("./node_modules/core-js/internals/global.js"),n=s("./node_modules/core-js/internals/function-call.js"),o=s("./node_modules/core-js/internals/descriptors.js"),a=s("./node_modules/core-js/internals/typed-array-constructors-require-wrappers.js"),l=s("./node_modules/core-js/internals/array-buffer-view-core.js"),d=s("./node_modules/core-js/internals/array-buffer.js"),u=s("./node_modules/core-js/internals/an-instance.js"),c=s("./node_modules/core-js/internals/create-property-descriptor.js"),p=s("./node_modules/core-js/internals/create-non-enumerable-property.js"),h=s("./node_modules/core-js/internals/is-integral-number.js"),g=s("./node_modules/core-js/internals/to-length.js"),m=s("./node_modules/core-js/internals/to-index.js"),_=s("./node_modules/core-js/internals/to-offset.js"),f=s("./node_modules/core-js/internals/to-property-key.js"),v=s("./node_modules/core-js/internals/has-own-property.js"),S=s("./node_modules/core-js/internals/classof.js"),C=s("./node_modules/core-js/internals/is-object.js"),b=s("./node_modules/core-js/internals/is-symbol.js"),y=s("./node_modules/core-js/internals/object-create.js"),E=s("./node_modules/core-js/internals/object-is-prototype-of.js"),j=s("./node_modules/core-js/internals/object-set-prototype-of.js"),x=s("./node_modules/core-js/internals/object-get-own-property-names.js").f,T=s("./node_modules/core-js/internals/typed-array-from.js"),I=s("./node_modules/core-js/internals/array-iteration.js").forEach,w=s("./node_modules/core-js/internals/set-species.js"),A=s("./node_modules/core-js/internals/object-define-property.js"),O=s("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),R=s("./node_modules/core-js/internals/internal-state.js"),D=s("./node_modules/core-js/internals/inherit-if-required.js"),L=R.get,P=R.set,M=A.f,Z=O.f,k=Math.round,U=i.RangeError,N=d.ArrayBuffer,F=N.prototype,B=d.DataView,H=l.NATIVE_ARRAY_BUFFER_VIEWS,V=l.TYPED_ARRAY_CONSTRUCTOR,G=l.TYPED_ARRAY_TAG,W=l.TypedArray,z=l.TypedArrayPrototype,q=l.aTypedArrayConstructor,K=l.isTypedArray,Y="BYTES_PER_ELEMENT",Q="Wrong length",$=function(e,t){q(e);for(var s=0,r=t.length,i=new e(r);r>s;)i[s]=t[s++];return i},X=function(e,t){M(e,t,{get:function(){return L(this)[t]}})},J=function(e){var t;return E(F,e)||"ArrayBuffer"==(t=S(e))||"SharedArrayBuffer"==t},ee=function(e,t){return K(e)&&!b(t)&&t in e&&h(+t)&&t>=0},te=function(e,t){return t=f(t),ee(e,t)?c(2,e[t]):Z(e,t)},se=function(e,t,s){return t=f(t),!(ee(e,t)&&C(s)&&v(s,"value"))||v(s,"get")||v(s,"set")||s.configurable||v(s,"writable")&&!s.writable||v(s,"enumerable")&&!s.enumerable?M(e,t,s):(e[t]=s.value,e)};o?(H||(O.f=te,A.f=se,X(z,"buffer"),X(z,"byteOffset"),X(z,"byteLength"),X(z,"length")),r({target:"Object",stat:!0,forced:!H},{getOwnPropertyDescriptor:te,defineProperty:se}),e.exports=function(e,t,s){var o=e.match(/\d+$/)[0]/8,l=e+(s?"Clamped":"")+"Array",d="get"+e,c="set"+e,h=i[l],f=h,v=f&&f.prototype,S={},b=function(e,t){M(e,t,{get:function(){return function(e,t){var s=L(e);return s.view[d](t*o+s.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,r){var i=L(e);s&&(r=(r=k(r))<0?0:r>255?255:255&r),i.view[c](t*o+i.byteOffset,r,!0)}(this,t,e)},enumerable:!0})};H?a&&(f=t((function(e,t,s,r){return u(e,v),D(C(t)?J(t)?void 0!==r?new h(t,_(s,o),r):void 0!==s?new h(t,_(s,o)):new h(t):K(t)?$(f,t):n(T,f,t):new h(m(t)),e,f)})),j&&j(f,W),I(x(h),(function(e){e in f||p(f,e,h[e])})),f.prototype=v):(f=t((function(e,t,s,r){u(e,v);var i,a,l,d=0,c=0;if(C(t)){if(!J(t))return K(t)?$(f,t):n(T,f,t);i=t,c=_(s,o);var p=t.byteLength;if(void 0===r){if(p%o)throw U(Q);if((a=p-c)<0)throw U(Q)}else if((a=g(r)*o)+c>p)throw U(Q);l=a/o}else l=m(t),i=new N(a=l*o);for(P(e,{buffer:i,byteOffset:c,byteLength:a,length:l,view:new B(i)});d<l;)b(e,d++)})),j&&j(f,W),v=f.prototype=y(z)),v.constructor!==f&&p(v,"constructor",f),p(v,V,f),G&&p(v,G,l),S[l]=f,r({global:!0,forced:f!=h,sham:!H},S),Y in f||p(f,Y,o),Y in v||p(v,Y,o),w(l)}):e.exports=function(){}},"./node_modules/core-js/internals/typed-array-constructors-require-wrappers.js":(e,t,s)=>{var r=s("./node_modules/core-js/internals/global.js"),i=s("./node_modules/core-js/internals/fails.js"),n=s("./node_modules/core-js/internals/check-correctness-of-iteration.js"),o=s("./node_modules/core-js/internals/array-buffer-view-core.js").NATIVE_ARRAY_BUFFER_VIEWS,a=r.ArrayBuffer,l=r.Int8Array;e.exports=!o||!i((function(){l(1)}))||!i((function(){new l(-1)}))||!n((function(e){new l,new l(null),new l(1.5),new l(e)}),!0)||i((function(){return 1!==new l(new a(2),1,void 0).length}))},"./node_modules/core-js/internals/typed-array-from.js":(e,t,s)=>{var r=s("./node_modules/core-js/internals/function-bind-context.js"),i=s("./node_modules/core-js/internals/function-call.js"),n=s("./node_modules/core-js/internals/a-constructor.js"),o=s("./node_modules/core-js/internals/to-object.js"),a=s("./node_modules/core-js/internals/length-of-array-like.js"),l=s("./node_modules/core-js/internals/get-iterator.js"),d=s("./node_modules/core-js/internals/get-iterator-method.js"),u=s("./node_modules/core-js/internals/is-array-iterator-method.js"),c=s("./node_modules/core-js/internals/array-buffer-view-core.js").aTypedArrayConstructor;e.exports=function(e){var t,s,p,h,g,m,_=n(this),f=o(e),v=arguments.length,S=v>1?arguments[1]:void 0,C=void 0!==S,b=d(f);if(b&&!u(b))for(m=(g=l(f,b)).next,f=[];!(h=i(m,g)).done;)f.push(h.value);for(C&&v>2&&(S=r(S,arguments[2])),s=a(f),p=new(c(_))(s),t=0;s>t;t++)p[t]=C?S(f[t],t):f[t];return p}},"./node_modules/core-js/internals/well-known-symbol-wrapped.js":(e,t,s)=>{var r=s("./node_modules/core-js/internals/well-known-symbol.js");t.f=r},"./node_modules/core-js/modules/es.array-buffer.slice.js":(e,t,s)=>{"use strict";var r=s("./node_modules/core-js/internals/export.js"),i=s("./node_modules/core-js/internals/function-uncurry-this.js"),n=s("./node_modules/core-js/internals/fails.js"),o=s("./node_modules/core-js/internals/array-buffer.js"),a=s("./node_modules/core-js/internals/an-object.js"),l=s("./node_modules/core-js/internals/to-absolute-index.js"),d=s("./node_modules/core-js/internals/to-length.js"),u=s("./node_modules/core-js/internals/species-constructor.js"),c=o.ArrayBuffer,p=o.DataView,h=p.prototype,g=i(c.prototype.slice),m=i(h.getUint8),_=i(h.setUint8);r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:n((function(){return!new c(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(g&&void 0===t)return g(a(this),e);for(var s=a(this).byteLength,r=l(e,s),i=l(void 0===t?s:t,s),n=new(u(this,c))(d(i-r)),o=new p(this),h=new p(n),f=0;r<i;)_(h,f++,m(o,r++));return n}})},"./node_modules/core-js/modules/es.number.to-fixed.js":(e,t,s)=>{"use strict";var r=s("./node_modules/core-js/internals/export.js"),i=s("./node_modules/core-js/internals/global.js"),n=s("./node_modules/core-js/internals/function-uncurry-this.js"),o=s("./node_modules/core-js/internals/to-integer-or-infinity.js"),a=s("./node_modules/core-js/internals/this-number-value.js"),l=s("./node_modules/core-js/internals/string-repeat.js"),d=s("./node_modules/core-js/internals/fails.js"),u=i.RangeError,c=i.String,p=Math.floor,h=n(l),g=n("".slice),m=n(1..toFixed),_=function(e,t,s){return 0===t?s:t%2==1?_(e,t-1,s*e):_(e*e,t/2,s)},f=function(e,t,s){for(var r=-1,i=s;++r<6;)i+=t*e[r],e[r]=i%1e7,i=p(i/1e7)},v=function(e,t){for(var s=6,r=0;--s>=0;)r+=e[s],e[s]=p(r/t),r=r%t*1e7},S=function(e){for(var t=6,s="";--t>=0;)if(""!==s||0===t||0!==e[t]){var r=c(e[t]);s=""===s?r:s+h("0",7-r.length)+r}return s};r({target:"Number",proto:!0,forced:d((function(){return"0.000"!==m(8e-5,3)||"1"!==m(.9,0)||"1.25"!==m(1.255,2)||"1000000000000000128"!==m(0xde0b6b3a7640080,0)}))||!d((function(){m({})}))},{toFixed:function(e){var t,s,r,i,n=a(this),l=o(e),d=[0,0,0,0,0,0],p="",m="0";if(l<0||l>20)throw u("Incorrect fraction digits");if(n!=n)return"NaN";if(n<=-1e21||n>=1e21)return c(n);if(n<0&&(p="-",n=-n),n>1e-21)if(s=(t=function(e){for(var t=0,s=e;s>=4096;)t+=12,s/=4096;for(;s>=2;)t+=1,s/=2;return t}(n*_(2,69,1))-69)<0?n*_(2,-t,1):n/_(2,t,1),s*=4503599627370496,(t=52-t)>0){for(f(d,0,s),r=l;r>=7;)f(d,1e7,0),r-=7;for(f(d,_(10,r,1),0),r=t-1;r>=23;)v(d,1<<23),r-=23;v(d,1<<r),f(d,1,1),v(d,2),m=S(d)}else f(d,0,s),f(d,1<<-t,0),m=S(d)+h("0",l);return m=l>0?p+((i=m.length)<=l?"0."+h("0",l-i)+m:g(m,0,i-l)+"."+g(m,i-l)):p+m}})},"./node_modules/core-js/modules/es.object.from-entries.js":(e,t,s)=>{var r=s("./node_modules/core-js/internals/export.js"),i=s("./node_modules/core-js/internals/iterate.js"),n=s("./node_modules/core-js/internals/create-property.js");r({target:"Object",stat:!0},{fromEntries:function(e){var t={};return i(e,(function(e,s){n(t,e,s)}),{AS_ENTRIES:!0}),t}})},"./node_modules/core-js/modules/es.promise.finally.js":(e,t,s)=>{"use strict";var r=s("./node_modules/core-js/internals/export.js"),i=s("./node_modules/core-js/internals/is-pure.js"),n=s("./node_modules/core-js/internals/native-promise-constructor.js"),o=s("./node_modules/core-js/internals/fails.js"),a=s("./node_modules/core-js/internals/get-built-in.js"),l=s("./node_modules/core-js/internals/is-callable.js"),d=s("./node_modules/core-js/internals/species-constructor.js"),u=s("./node_modules/core-js/internals/promise-resolve.js"),c=s("./node_modules/core-js/internals/redefine.js");if(r({target:"Promise",proto:!0,real:!0,forced:!!n&&o((function(){n.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=d(this,a("Promise")),s=l(e);return this.then(s?function(s){return u(t,e()).then((function(){return s}))}:e,s?function(s){return u(t,e()).then((function(){throw s}))}:e)}}),!i&&l(n)){var p=a("Promise").prototype.finally;n.prototype.finally!==p&&c(n.prototype,"finally",p,{unsafe:!0})}},"./node_modules/core-js/modules/es.symbol.replace.js":(e,t,s)=>{s("./node_modules/core-js/internals/define-well-known-symbol.js")("replace")},"./node_modules/core-js/modules/es.typed-array.at.js":(e,t,s)=>{"use strict";var r=s("./node_modules/core-js/internals/array-buffer-view-core.js"),i=s("./node_modules/core-js/internals/length-of-array-like.js"),n=s("./node_modules/core-js/internals/to-integer-or-infinity.js"),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("at",(function(e){var t=o(this),s=i(t),r=n(e),a=r>=0?r:s+r;return a<0||a>=s?void 0:t[a]}))},"./node_modules/core-js/modules/es.typed-array.sort.js":(e,t,s)=>{"use strict";var r=s("./node_modules/core-js/internals/global.js"),i=s("./node_modules/core-js/internals/function-uncurry-this.js"),n=s("./node_modules/core-js/internals/fails.js"),o=s("./node_modules/core-js/internals/a-callable.js"),a=s("./node_modules/core-js/internals/array-sort.js"),l=s("./node_modules/core-js/internals/array-buffer-view-core.js"),d=s("./node_modules/core-js/internals/engine-ff-version.js"),u=s("./node_modules/core-js/internals/engine-is-ie-or-edge.js"),c=s("./node_modules/core-js/internals/engine-v8-version.js"),p=s("./node_modules/core-js/internals/engine-webkit-version.js"),h=r.Array,g=l.aTypedArray,m=l.exportTypedArrayMethod,_=r.Uint16Array,f=_&&i(_.prototype.sort),v=!(!f||n((function(){f(new _(2),null)}))&&n((function(){f(new _(2),{})}))),S=!!f&&!n((function(){if(c)return c<74;if(d)return d<67;if(u)return!0;if(p)return p<602;var e,t,s=new _(516),r=h(516);for(e=0;e<516;e++)t=e%4,s[e]=515-e,r[e]=e-2*t+3;for(f(s,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(s[e]!==r[e])return!0}));m("sort",(function(e){return void 0!==e&&o(e),S?f(this,e):a(g(this),function(e){return function(t,s){return void 0!==e?+e(t,s)||0:s!=s?-1:t!=t?1:0===t&&0===s?1/t>0&&1/s<0?1:-1:t>s}}(e))}),!S||v)},"./node_modules/core-js/modules/es.typed-array.to-locale-string.js":(e,t,s)=>{"use strict";var r=s("./node_modules/core-js/internals/global.js"),i=s("./node_modules/core-js/internals/function-apply.js"),n=s("./node_modules/core-js/internals/array-buffer-view-core.js"),o=s("./node_modules/core-js/internals/fails.js"),a=s("./node_modules/core-js/internals/array-slice.js"),l=r.Int8Array,d=n.aTypedArray,u=n.exportTypedArrayMethod,c=[].toLocaleString,p=!!l&&o((function(){c.call(new l(1))}));u("toLocaleString",(function(){return i(c,p?a(d(this)):d(this),a(arguments))}),o((function(){return[1,2].toLocaleString()!=new l([1,2]).toLocaleString()}))||!o((function(){l.prototype.toLocaleString.call([1,2])})))},"./node_modules/core-js/modules/es.typed-array.uint8-array.js":(e,t,s)=>{s("./node_modules/core-js/internals/typed-array-constructor.js")("Uint8",(function(e){return function(t,s,r){return e(this,t,s,r)}}))},"./node_modules/core-js/modules/es.typed-array.uint8-clamped-array.js":(e,t,s)=>{s("./node_modules/core-js/internals/typed-array-constructor.js")("Uint8",(function(e){return function(t,s,r){return e(this,t,s,r)}}),!0)},"./node_modules/core-js/modules/esnext.typed-array.at.js":(e,t,s)=>{s("./node_modules/core-js/modules/es.typed-array.at.js")},"./node_modules/esrever/esrever.js":function(e,t,s){var r;/*! https://mths.be/esrever v0.2.0 by @mathias */e=s.nmd(e),function(i){var n=t,o=(e&&e.exports,"object"==typeof s.g&&s.g);o.global!==o&&o.window;var a=/([\0-\u02FF\u0370-\u1AAF\u1B00-\u1DBF\u1E00-\u20CF\u2100-\uD7FF\uE000-\uFE1F\uFE30-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])([\u0300-\u036F\u1AB0-\u1AFF\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]+)/g,l=/([\uD800-\uDBFF])([\uDC00-\uDFFF])/g,d=function(e){for(var t="",s=(e=e.replace(a,(function(e,t,s){return d(s)+t})).replace(l,"$2$1")).length;s--;)t+=e.charAt(s);return t},u={version:"0.2.0",reverse:d};void 0===(r=function(){return u}.call(t,s,t,e))||(e.exports=r)}()},"./node_modules/howler/dist/howler.js":(e,t,s)=>{var r;
/*!
 *  howler.js v2.2.1
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */!function(){"use strict";var i=function(){this.init()};i.prototype={init:function(){var e=this||n;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||n;if(e=parseFloat(e),t.ctx||h(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,n.ctx.currentTime);for(var s=0;s<t._howls.length;s++)if(!t._howls[s]._webAudio)for(var r=t._howls[s]._getSoundIds(),i=0;i<r.length;i++){var o=t._howls[s]._soundById(r[i]);o&&o._node&&(o._node.volume=o._volume*e)}return t}return t._volume},mute:function(e){var t=this||n;t.ctx||h(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,n.ctx.currentTime);for(var s=0;s<t._howls.length;s++)if(!t._howls[s]._webAudio)for(var r=t._howls[s]._getSoundIds(),i=0;i<r.length;i++){var o=t._howls[s]._soundById(r[i]);o&&o._node&&(o._node.muted=!!e||o._muted)}return t},stop:function(){for(var e=this||n,t=0;t<e._howls.length;t++)e._howls[t].stop();return e},unload:function(){for(var e=this||n,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,h()),e},codecs:function(e){return(this||n)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||n;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(t){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||n,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(o){return e}if(!t||"function"!=typeof t.canPlayType)return e;var s=t.canPlayType("audio/mpeg;").replace(/^no$/,""),r=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),i=r&&parseInt(r[0].split("/")[1],10)<33;return e._codecs={mp3:!(i||!s&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!s,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(t.canPlayType('audio/wav; codecs="1"')||t.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||n;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function(s){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var r=new Audio;r._unlocked=!0,e._releaseHtml5Audio(r)}catch(s){e.noAudio=!0;break}for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var n=e._howls[i]._getSoundIds(),o=0;o<n.length;o++){var a=e._howls[i]._soundById(n[o]);a&&a._node&&!a._node._unlocked&&(a._node._unlocked=!0,a._node.load())}e._autoResume();var l=e.ctx.createBufferSource();l.buffer=e._scratchBuffer,l.connect(e.ctx.destination),void 0===l.start?l.noteOn(0):l.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),l.onended=function(){l.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0);for(var s=0;s<e._howls.length;s++)e._howls[s]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),e}},_obtainHtml5Audio:function(){var e=this||n;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=(new Audio).play();return t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)&&t.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(e){var t=this||n;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&n.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var s=0;s<e._howls[t]._sounds.length;s++)if(!e._howls[t]._sounds[s]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout((function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var t=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(t,t)}}),3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&n.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then((function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")})),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var n=new i,o=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};o.prototype={init:function(e){var t=this;return n.ctx||h(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=n.usingWebAudio&&!t._html5,void 0!==n.ctx&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&"none"!==t._preload&&t.load(),t},load:function(){var e=this,t=null;if(n.noAudio)e._emit("loaderror",null,"No audio support.");else{"string"==typeof e._src&&(e._src=[e._src]);for(var s=0;s<e._src.length;s++){var r,i;if(e._format&&e._format[s])r=e._format[s];else{if("string"!=typeof(i=e._src[s])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(r=/^data:audio\/([^;,]+);/i.exec(i))||(r=/\.([^.]+)$/.exec(i.split("?",1)[0])),r&&(r=r[1].toLowerCase())}if(r||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),r&&n.codecs(r)){t=e._src[s];break}}if(t)return e._src=t,e._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new a(e),e._webAudio&&d(e),e;e._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,t){var s=this,r=null;if("number"==typeof e)r=e,e=null;else{if("string"==typeof e&&"loaded"===s._state&&!s._sprite[e])return null;if(void 0===e&&(e="__default",!s._playLock)){for(var i=0,o=0;o<s._sounds.length;o++)s._sounds[o]._paused&&!s._sounds[o]._ended&&(i++,r=s._sounds[o]._id);1===i?e=null:r=null}}var a=r?s._soundById(r):s._inactiveSound();if(!a)return null;if(r&&!e&&(e=a._sprite||"__default"),"loaded"!==s._state){a._sprite=e,a._ended=!1;var l=a._id;return s._queue.push({event:"play",action:function(){s.play(l)}}),l}if(r&&!a._paused)return t||s._loadQueue("play"),a._id;s._webAudio&&n._autoResume();var d=Math.max(0,a._seek>0?a._seek:s._sprite[e][0]/1e3),u=Math.max(0,(s._sprite[e][0]+s._sprite[e][1])/1e3-d),c=1e3*u/Math.abs(a._rate),p=s._sprite[e][0]/1e3,h=(s._sprite[e][0]+s._sprite[e][1])/1e3;a._sprite=e,a._ended=!1;var g=function(){a._paused=!1,a._seek=d,a._start=p,a._stop=h,a._loop=!(!a._loop&&!s._sprite[e][2])};if(!(d>=h)){var m=a._node;if(s._webAudio){var _=function(){s._playLock=!1,g(),s._refreshBuffer(a);var e=a._muted||s._muted?0:a._volume;m.gain.setValueAtTime(e,n.ctx.currentTime),a._playStart=n.ctx.currentTime,void 0===m.bufferSource.start?a._loop?m.bufferSource.noteGrainOn(0,d,86400):m.bufferSource.noteGrainOn(0,d,u):a._loop?m.bufferSource.start(0,d,86400):m.bufferSource.start(0,d,u),c!==1/0&&(s._endTimers[a._id]=setTimeout(s._ended.bind(s,a),c)),t||setTimeout((function(){s._emit("play",a._id),s._loadQueue()}),0)};"running"===n.state&&"interrupted"!==n.ctx.state?_():(s._playLock=!0,s.once("resume",_),s._clearTimer(a._id))}else{var f=function(){m.currentTime=d,m.muted=a._muted||s._muted||n._muted||m.muted,m.volume=a._volume*n.volume(),m.playbackRate=a._rate;try{var r=m.play();if(r&&"undefined"!=typeof Promise&&(r instanceof Promise||"function"==typeof r.then)?(s._playLock=!0,g(),r.then((function(){s._playLock=!1,m._unlocked=!0,t||(s._emit("play",a._id),s._loadQueue())})).catch((function(){s._playLock=!1,s._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),a._ended=!0,a._paused=!0}))):t||(s._playLock=!1,g(),s._emit("play",a._id),s._loadQueue()),m.playbackRate=a._rate,m.paused)return void s._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||a._loop?s._endTimers[a._id]=setTimeout(s._ended.bind(s,a),c):(s._endTimers[a._id]=function(){s._ended(a),m.removeEventListener("ended",s._endTimers[a._id],!1)},m.addEventListener("ended",s._endTimers[a._id],!1))}catch(i){s._emit("playerror",a._id,i)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===m.src&&(m.src=s._src,m.load());var v=window&&window.ejecta||!m.readyState&&n._navigator.isCocoonJS;if(m.readyState>=3||v)f();else{s._playLock=!0;var S=function(){f(),m.removeEventListener(n._canPlayEvent,S,!1)};m.addEventListener(n._canPlayEvent,S,!1),s._clearTimer(a._id)}}return a._id}s._ended(a)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var s=t._getSoundIds(e),r=0;r<s.length;r++){t._clearTimer(s[r]);var i=t._soundById(s[r]);if(i&&!i._paused&&(i._seek=t.seek(s[r]),i._rateSeek=0,i._paused=!0,t._stopFade(s[r]),i._node))if(t._webAudio){if(!i._node.bufferSource)continue;void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),t._cleanBuffer(i._node)}else isNaN(i._node.duration)&&i._node.duration!==1/0||i._node.pause();arguments[1]||t._emit("pause",i?i._id:null)}return t},stop:function(e,t){var s=this;if("loaded"!==s._state||s._playLock)return s._queue.push({event:"stop",action:function(){s.stop(e)}}),s;for(var r=s._getSoundIds(e),i=0;i<r.length;i++){s._clearTimer(r[i]);var n=s._soundById(r[i]);n&&(n._seek=n._start||0,n._rateSeek=0,n._paused=!0,n._ended=!0,s._stopFade(r[i]),n._node&&(s._webAudio?n._node.bufferSource&&(void 0===n._node.bufferSource.stop?n._node.bufferSource.noteOff(0):n._node.bufferSource.stop(0),s._cleanBuffer(n._node)):isNaN(n._node.duration)&&n._node.duration!==1/0||(n._node.currentTime=n._start||0,n._node.pause(),n._node.duration===1/0&&s._clearSound(n._node))),t||s._emit("stop",n._id))}return s},mute:function(e,t){var s=this;if("loaded"!==s._state||s._playLock)return s._queue.push({event:"mute",action:function(){s.mute(e,t)}}),s;if(void 0===t){if("boolean"!=typeof e)return s._muted;s._muted=e}for(var r=s._getSoundIds(t),i=0;i<r.length;i++){var o=s._soundById(r[i]);o&&(o._muted=e,o._interval&&s._stopFade(o._id),s._webAudio&&o._node?o._node.gain.setValueAtTime(e?0:o._volume,n.ctx.currentTime):o._node&&(o._node.muted=!!n._muted||e),s._emit("mute",o._id))}return s},volume:function(){var e,t,s,r=this,i=arguments;if(0===i.length)return r._volume;if(1===i.length||2===i.length&&void 0===i[1]){var o=r._getSoundIds(),a=o.indexOf(i[0]);a>=0?t=parseInt(i[0],10):e=parseFloat(i[0])}else i.length>=2&&(e=parseFloat(i[0]),t=parseInt(i[1],10));if(!(void 0!==e&&e>=0&&e<=1))return(s=t?r._soundById(t):r._sounds[0])?s._volume:0;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,i)}}),r;void 0===t&&(r._volume=e),t=r._getSoundIds(t);for(var l=0;l<t.length;l++)(s=r._soundById(t[l]))&&(s._volume=e,i[2]||r._stopFade(t[l]),r._webAudio&&s._node&&!s._muted?s._node.gain.setValueAtTime(e,n.ctx.currentTime):s._node&&!s._muted&&(s._node.volume=e*n.volume()),r._emit("volume",s._id));return r},fade:function(e,t,s,r){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"fade",action:function(){i.fade(e,t,s,r)}}),i;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),s=parseFloat(s),i.volume(e,r);for(var o=i._getSoundIds(r),a=0;a<o.length;a++){var l=i._soundById(o[a]);if(l){if(r||i._stopFade(o[a]),i._webAudio&&!l._muted){var d=n.ctx.currentTime,u=d+s/1e3;l._volume=e,l._node.gain.setValueAtTime(e,d),l._node.gain.linearRampToValueAtTime(t,u)}i._startFadeInterval(l,e,t,s,o[a],void 0===r)}}return i},_startFadeInterval:function(e,t,s,r,i,n){var o=this,a=t,l=s-t,d=Math.abs(l/.01),u=Math.max(4,d>0?r/d:r),c=Date.now();e._fadeTo=s,e._interval=setInterval((function(){var i=(Date.now()-c)/r;c=Date.now(),a+=l*i,a=Math.round(100*a)/100,a=l<0?Math.max(s,a):Math.min(s,a),o._webAudio?e._volume=a:o.volume(a,e._id,!0),n&&(o._volume=a),(s<t&&a<=s||s>t&&a>=s)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,o.volume(s,e._id),o._emit("fade",e._id))}),u)},_stopFade:function(e){var t=this,s=t._soundById(e);return s&&s._interval&&(t._webAudio&&s._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(s._interval),s._interval=null,t.volume(s._fadeTo,e),s._fadeTo=null,t._emit("fade",e)),t},loop:function(){var e,t,s,r=this,i=arguments;if(0===i.length)return r._loop;if(1===i.length){if("boolean"!=typeof i[0])return!!(s=r._soundById(parseInt(i[0],10)))&&s._loop;e=i[0],r._loop=e}else 2===i.length&&(e=i[0],t=parseInt(i[1],10));for(var n=r._getSoundIds(t),o=0;o<n.length;o++)(s=r._soundById(n[o]))&&(s._loop=e,r._webAudio&&s._node&&s._node.bufferSource&&(s._node.bufferSource.loop=e,e&&(s._node.bufferSource.loopStart=s._start||0,s._node.bufferSource.loopEnd=s._stop)));return r},rate:function(){var e,t,s,r=this,i=arguments;if(0===i.length)t=r._sounds[0]._id;else if(1===i.length){var o=r._getSoundIds(),a=o.indexOf(i[0]);a>=0?t=parseInt(i[0],10):e=parseFloat(i[0])}else 2===i.length&&(e=parseFloat(i[0]),t=parseInt(i[1],10));if("number"!=typeof e)return(s=r._soundById(t))?s._rate:r._rate;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,i)}}),r;void 0===t&&(r._rate=e),t=r._getSoundIds(t);for(var l=0;l<t.length;l++)if(s=r._soundById(t[l])){r.playing(t[l])&&(s._rateSeek=r.seek(t[l]),s._playStart=r._webAudio?n.ctx.currentTime:s._playStart),s._rate=e,r._webAudio&&s._node&&s._node.bufferSource?s._node.bufferSource.playbackRate.setValueAtTime(e,n.ctx.currentTime):s._node&&(s._node.playbackRate=e);var d=r.seek(t[l]),u=(r._sprite[s._sprite][0]+r._sprite[s._sprite][1])/1e3-d,c=1e3*u/Math.abs(s._rate);!r._endTimers[t[l]]&&s._paused||(r._clearTimer(t[l]),r._endTimers[t[l]]=setTimeout(r._ended.bind(r,s),c)),r._emit("rate",s._id)}return r},seek:function(){var e,t,s=this,r=arguments;if(0===r.length)t=s._sounds[0]._id;else if(1===r.length){var i=s._getSoundIds(),o=i.indexOf(r[0]);o>=0?t=parseInt(r[0],10):s._sounds.length&&(t=s._sounds[0]._id,e=parseFloat(r[0]))}else 2===r.length&&(e=parseFloat(r[0]),t=parseInt(r[1],10));if(void 0===t)return s;if("number"==typeof e&&("loaded"!==s._state||s._playLock))return s._queue.push({event:"seek",action:function(){s.seek.apply(s,r)}}),s;var a=s._soundById(t);if(a){if(!("number"==typeof e&&e>=0)){if(s._webAudio){var l=s.playing(t)?n.ctx.currentTime-a._playStart:0,d=a._rateSeek?a._rateSeek-a._seek:0;return a._seek+(d+l*Math.abs(a._rate))}return a._node.currentTime}var u=s.playing(t);u&&s.pause(t,!0),a._seek=e,a._ended=!1,s._clearTimer(t),s._webAudio||!a._node||isNaN(a._node.duration)||(a._node.currentTime=e);var c=function(){s._emit("seek",t),u&&s.play(t,!0)};if(u&&!s._webAudio){var p=function(){s._playLock?setTimeout(p,0):c()};setTimeout(p,0)}else c()}return s},playing:function(e){var t=this;if("number"==typeof e){var s=t._soundById(e);return!!s&&!s._paused}for(var r=0;r<t._sounds.length;r++)if(!t._sounds[r]._paused)return!0;return!1},duration:function(e){var t=this,s=t._duration,r=t._soundById(e);return r&&(s=t._sprite[r._sprite][1]/1e3),s},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,s=0;s<t.length;s++)t[s]._paused||e.stop(t[s]._id),e._webAudio||(e._clearSound(t[s]._node),t[s]._node.removeEventListener("error",t[s]._errorFn,!1),t[s]._node.removeEventListener(n._canPlayEvent,t[s]._loadFn,!1),t[s]._node.removeEventListener("ended",t[s]._endFn,!1),n._releaseHtml5Audio(t[s]._node)),delete t[s]._node,e._clearTimer(t[s]._id);var r=n._howls.indexOf(e);r>=0&&n._howls.splice(r,1);var i=!0;for(s=0;s<n._howls.length;s++)if(n._howls[s]._src===e._src||e._src.indexOf(n._howls[s]._src)>=0){i=!1;break}return l&&i&&delete l[e._src],n.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,s,r){var i=this["_on"+e];return"function"==typeof t&&i.push(r?{id:s,fn:t,once:r}:{id:s,fn:t}),this},off:function(e,t,s){var r=this,i=r["_on"+e],n=0;if("number"==typeof t&&(s=t,t=null),t||s)for(n=0;n<i.length;n++){var o=s===i[n].id;if(t===i[n].fn&&o||!t&&o){i.splice(n,1);break}}else if(e)r["_on"+e]=[];else{var a=Object.keys(r);for(n=0;n<a.length;n++)0===a[n].indexOf("_on")&&Array.isArray(r[a[n]])&&(r[a[n]]=[])}return r},once:function(e,t,s){return this.on(e,t,s,1),this},_emit:function(e,t,s){for(var r=this,i=r["_on"+e],n=i.length-1;n>=0;n--)i[n].id&&i[n].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,s)}.bind(r,i[n].fn),0),i[n].once&&r.off(e,i[n].fn,i[n].id));return r._loadQueue(e),r},_loadQueue:function(e){var t=this;if(t._queue.length>0){var s=t._queue[0];s.event===e&&(t._queue.shift(),t._loadQueue()),e||s.action()}return t},_ended:function(e){var t=this,s=e._sprite;if(!t._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(t._ended.bind(t,e),100),t;var r=!(!e._loop&&!t._sprite[s][2]);if(t._emit("end",e._id),!t._webAudio&&r&&t.stop(e._id,!0).play(e._id),t._webAudio&&r){t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=n.ctx.currentTime;var i=1e3*(e._stop-e._start)/Math.abs(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),i)}return t._webAudio&&!r&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),n._autoSuspend()),t._webAudio||r||t.stop(e._id,!0),t},_clearTimer:function(e){var t=this;if(t._endTimers[e]){if("function"!=typeof t._endTimers[e])clearTimeout(t._endTimers[e]);else{var s=t._soundById(e);s&&s._node&&s._node.removeEventListener("ended",t._endTimers[e],!1)}delete t._endTimers[e]}return t},_soundById:function(e){for(var t=this,s=0;s<t._sounds.length;s++)if(e===t._sounds[s]._id)return t._sounds[s];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new a(e)},_drain:function(){var e=this,t=e._pool,s=0,r=0;if(!(e._sounds.length<t)){for(r=0;r<e._sounds.length;r++)e._sounds[r]._ended&&s++;for(r=e._sounds.length-1;r>=0;r--){if(s<=t)return;e._sounds[r]._ended&&(e._webAudio&&e._sounds[r]._node&&e._sounds[r]._node.disconnect(0),e._sounds.splice(r,1),s--)}}},_getSoundIds:function(e){if(void 0===e){for(var t=[],s=0;s<this._sounds.length;s++)t.push(this._sounds[s]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=n.ctx.createBufferSource(),e._node.bufferSource.buffer=l[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,n.ctx.currentTime),this},_cleanBuffer:function(e){var t=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(n._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=n._scratchBuffer}catch(s){}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var a=function(e){this._parent=e,this.init()};a.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++n._counter,t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,s=n._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node=void 0===n.ctx.createGain?n.ctx.createGainNode():n.ctx.createGain(),e._node.gain.setValueAtTime(s,n.ctx.currentTime),e._node.paused=!0,e._node.connect(n.masterGain)):n.noAudio||(e._node=n._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(n._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=t._src,e._node.preload=!0===t._preload?"auto":t._preload,e._node.volume=s*n.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++n._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,t=e._parent;t._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),e._node.removeEventListener(n._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,t=e._parent;t._duration===1/0&&(t._duration=Math.ceil(10*e._node.duration)/10,t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=1e3*t._duration),t._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var l={},d=function(e){var t=e._src;if(l[t])return e._duration=l[t].duration,void p(e);if(/^data:[^;]+;base64,/.test(t)){for(var s=atob(t.split(",")[1]),r=new Uint8Array(s.length),i=0;i<s.length;++i)r[i]=s.charCodeAt(i);c(r.buffer,e)}else{var n=new XMLHttpRequest;n.open(e._xhr.method,t,!0),n.withCredentials=e._xhr.withCredentials,n.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach((function(t){n.setRequestHeader(t,e._xhr.headers[t])})),n.onload=function(){var t=(n.status+"")[0];"0"===t||"2"===t||"3"===t?c(n.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+n.status+".")},n.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete l[t],e.load())},u(n)}},u=function(e){try{e.send()}catch(t){e.onerror()}},c=function(e,t){var s=function(){t._emit("loaderror",null,"Decoding audio data failed.")},r=function(e){e&&t._sounds.length>0?(l[t._src]=e,p(t,e)):s()};"undefined"!=typeof Promise&&1===n.ctx.decodeAudioData.length?n.ctx.decodeAudioData(e).then(r).catch(s):n.ctx.decodeAudioData(e,r,s)},p=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},h=function(){if(n.usingWebAudio){try{"undefined"!=typeof AudioContext?n.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch(i){n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),t=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),s=t?parseInt(t[1],10):null;if(e&&s&&s<9){var r=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());n._navigator&&!r&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=void 0===n.ctx.createGain?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:n._volume,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};void 0===(r=function(){return{Howler:n,Howl:o}}.apply(t,[]))||(e.exports=r),t.Howler=n,t.Howl=o,void 0!==s.g?(s.g.HowlerGlobal=i,s.g.Howler=n,s.g.Howl=o,s.g.Sound=a):"undefined"!=typeof window&&(window.HowlerGlobal=i,window.Howler=n,window.Howl=o,window.Sound=a)}(),
/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.1
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
function(){"use strict";var e;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){var t=this;if(!t.ctx||!t.ctx.listener)return t;for(var s=t._howls.length-1;s>=0;s--)t._howls[s].stereo(e);return t},HowlerGlobal.prototype.pos=function(e,t,s){var r=this;return r.ctx&&r.ctx.listener?(t="number"!=typeof t?r._pos[1]:t,s="number"!=typeof s?r._pos[2]:s,"number"!=typeof e?r._pos:(r._pos=[e,t,s],void 0!==r.ctx.listener.positionX?(r.ctx.listener.positionX.setTargetAtTime(r._pos[0],Howler.ctx.currentTime,.1),r.ctx.listener.positionY.setTargetAtTime(r._pos[1],Howler.ctx.currentTime,.1),r.ctx.listener.positionZ.setTargetAtTime(r._pos[2],Howler.ctx.currentTime,.1)):r.ctx.listener.setPosition(r._pos[0],r._pos[1],r._pos[2]),r)):r},HowlerGlobal.prototype.orientation=function(e,t,s,r,i,n){var o=this;if(!o.ctx||!o.ctx.listener)return o;var a=o._orientation;return t="number"!=typeof t?a[1]:t,s="number"!=typeof s?a[2]:s,r="number"!=typeof r?a[3]:r,i="number"!=typeof i?a[4]:i,n="number"!=typeof n?a[5]:n,"number"!=typeof e?a:(o._orientation=[e,t,s,r,i,n],void 0!==o.ctx.listener.forwardX?(o.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),o.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),o.ctx.listener.forwardZ.setTargetAtTime(s,Howler.ctx.currentTime,.1),o.ctx.listener.upX.setTargetAtTime(r,Howler.ctx.currentTime,.1),o.ctx.listener.upY.setTargetAtTime(i,Howler.ctx.currentTime,.1),o.ctx.listener.upZ.setTargetAtTime(n,Howler.ctx.currentTime,.1)):o.ctx.listener.setOrientation(e,t,s,r,i,n),o)},Howl.prototype.init=(e=Howl.prototype.init,function(t){var s=this;return s._orientation=t.orientation||[1,0,0],s._stereo=t.stereo||null,s._pos=t.pos||null,s._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},s._onstereo=t.onstereo?[{fn:t.onstereo}]:[],s._onpos=t.onpos?[{fn:t.onpos}]:[],s._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}),Howl.prototype.stereo=function(e,s){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"stereo",action:function(){r.stereo(e,s)}}),r;var i=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===s){if("number"!=typeof e)return r._stereo;r._stereo=e,r._pos=[e,0,0]}for(var n=r._getSoundIds(s),o=0;o<n.length;o++){var a=r._soundById(n[o]);if(a){if("number"!=typeof e)return a._stereo;a._stereo=e,a._pos=[e,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",a._panner&&a._panner.pan||t(a,i),"spatial"===i?void 0!==a._panner.positionX?(a._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),a._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),a._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):a._panner.setPosition(e,0,0):a._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)),r._emit("stereo",a._id)}}return r},Howl.prototype.pos=function(e,s,r,i){var n=this;if(!n._webAudio)return n;if("loaded"!==n._state)return n._queue.push({event:"pos",action:function(){n.pos(e,s,r,i)}}),n;if(s="number"!=typeof s?0:s,r="number"!=typeof r?-.5:r,void 0===i){if("number"!=typeof e)return n._pos;n._pos=[e,s,r]}for(var o=n._getSoundIds(i),a=0;a<o.length;a++){var l=n._soundById(o[a]);if(l){if("number"!=typeof e)return l._pos;l._pos=[e,s,r],l._node&&(l._panner&&!l._panner.pan||t(l,"spatial"),void 0!==l._panner.positionX?(l._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(s,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):l._panner.setPosition(e,s,r)),n._emit("pos",l._id)}}return n},Howl.prototype.orientation=function(e,s,r,i){var n=this;if(!n._webAudio)return n;if("loaded"!==n._state)return n._queue.push({event:"orientation",action:function(){n.orientation(e,s,r,i)}}),n;if(s="number"!=typeof s?n._orientation[1]:s,r="number"!=typeof r?n._orientation[2]:r,void 0===i){if("number"!=typeof e)return n._orientation;n._orientation=[e,s,r]}for(var o=n._getSoundIds(i),a=0;a<o.length;a++){var l=n._soundById(o[a]);if(l){if("number"!=typeof e)return l._orientation;l._orientation=[e,s,r],l._node&&(l._panner||(l._pos||(l._pos=n._pos||[0,0,-.5]),t(l,"spatial")),void 0!==l._panner.orientationX?(l._panner.orientationX.setValueAtTime(e,Howler.ctx.currentTime),l._panner.orientationY.setValueAtTime(s,Howler.ctx.currentTime),l._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):l._panner.setOrientation(e,s,r)),n._emit("orientation",l._id)}}return n},Howl.prototype.pannerAttr=function(){var e,s,r,i=this,n=arguments;if(!i._webAudio)return i;if(0===n.length)return i._pannerAttr;if(1===n.length){if("object"!=typeof n[0])return(r=i._soundById(parseInt(n[0],10)))?r._pannerAttr:i._pannerAttr;e=n[0],void 0===s&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),i._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:i._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:i._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:i._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:i._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:i._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:i._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:i._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:i._panningModel})}else 2===n.length&&(e=n[0],s=parseInt(n[1],10));for(var o=i._getSoundIds(s),a=0;a<o.length;a++)if(r=i._soundById(o[a])){var l=r._pannerAttr;l={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:l.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:l.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:l.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:l.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:l.maxDistance,refDistance:void 0!==e.refDistance?e.refDistance:l.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:l.rolloffFactor,panningModel:void 0!==e.panningModel?e.panningModel:l.panningModel};var d=r._panner;d?(d.coneInnerAngle=l.coneInnerAngle,d.coneOuterAngle=l.coneOuterAngle,d.coneOuterGain=l.coneOuterGain,d.distanceModel=l.distanceModel,d.maxDistance=l.maxDistance,d.refDistance=l.refDistance,d.rolloffFactor=l.rolloffFactor,d.panningModel=l.panningModel):(r._pos||(r._pos=i._pos||[0,0,-.5]),t(r,"spatial"))}return i},Sound.prototype.init=function(e){return function(){var t=this,s=t._parent;t._orientation=s._orientation,t._stereo=s._stereo,t._pos=s._pos,t._pannerAttr=s._pannerAttr,e.call(this),t._stereo?s.stereo(t._stereo):t._pos&&s.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this,s=t._parent;return t._orientation=s._orientation,t._stereo=s._stereo,t._pos=s._pos,t._pannerAttr=s._pannerAttr,t._stereo?s.stereo(t._stereo):t._pos?s.pos(t._pos[0],t._pos[1],t._pos[2],t._id):t._panner&&(t._panner.disconnect(0),t._panner=void 0,s._refreshBuffer(t)),e.call(this)}}(Sound.prototype.reset);var t=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}()},"./node_modules/immutability-helper/index.js":(e,t,s)=>{var r=s("./node_modules/invariant/browser.js"),i=Object.prototype.hasOwnProperty,n=Array.prototype.splice,o=Object.prototype.toString,a=function(e){return o.call(e).slice(8,-1)},l=Object.assign||function(e,t){return d(t).forEach((function(s){i.call(t,s)&&(e[s]=t[s])})),e},d="function"==typeof Object.getOwnPropertySymbols?function(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.keys(e)};function u(e){if(Array.isArray(e))return l(e.constructor(e.length),e);if("Map"===a(e))return new Map(e);if("Set"===a(e))return new Set(e);if(e&&"object"==typeof e){var t=Object.getPrototypeOf(e);return l(Object.create(t),e)}return e}function c(){var e=l({},p);return t.extend=function(t,s){e[t]=s},t.isEquals=function(e,t){return e===t},t;function t(s,n){"function"==typeof n&&(n={$apply:n}),Array.isArray(s)&&Array.isArray(n)||r(!Array.isArray(n),"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."),r("object"==typeof n&&null!==n,"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: %s.",Object.keys(e).join(", "));var o=s;return d(n).forEach((function(r){if(i.call(e,r)){var l=s===o;o=e[r](n[r],o,n,s),l&&t.isEquals(o,s)&&(o=s)}else{var d="Map"===a(s)?t(s.get(r),n[r]):t(s[r],n[r]);t.isEquals(d,o[r])&&(void 0!==d||i.call(s,r))||(o===s&&(o=u(s)),"Map"===a(o)?o.set(r,d):o[r]=d)}})),o}}var p={$push:function(e,t,s){return g(t,s,"$push"),e.length?t.concat(e):t},$unshift:function(e,t,s){return g(t,s,"$unshift"),e.length?e.concat(t):t},$splice:function(e,t,s,i){return function(e,t){r(Array.isArray(e),"Expected $splice target to be an array; got %s",e),_(t.$splice)}(t,s),e.forEach((function(e){_(e),t===i&&e.length&&(t=u(i)),n.apply(t,e)})),t},$set:function(e,t,s){return function(e){r(1===Object.keys(e).length,"Cannot have more than one key in an object with $set")}(s),e},$toggle:function(e,t){m(e,"$toggle");var s=e.length?u(t):t;return e.forEach((function(e){s[e]=!t[e]})),s},$unset:function(e,t,s,r){return m(e,"$unset"),e.forEach((function(e){Object.hasOwnProperty.call(t,e)&&(t===r&&(t=u(r)),delete t[e])})),t},$add:function(e,t,s,r){return f(t,"$add"),m(e,"$add"),"Map"===a(t)?e.forEach((function(e){var s=e[0],i=e[1];t===r&&t.get(s)!==i&&(t=u(r)),t.set(s,i)})):e.forEach((function(e){t!==r||t.has(e)||(t=u(r)),t.add(e)})),t},$remove:function(e,t,s,r){return f(t,"$remove"),m(e,"$remove"),e.forEach((function(e){t===r&&t.has(e)&&(t=u(r)),t.delete(e)})),t},$merge:function(e,t,s,i){var n,o;return n=t,r((o=e)&&"object"==typeof o,"update(): $merge expects a spec of type 'object'; got %s",o),r(n&&"object"==typeof n,"update(): $merge expects a target of type 'object'; got %s",n),d(e).forEach((function(s){e[s]!==t[s]&&(t===i&&(t=u(i)),t[s]=e[s])})),t},$apply:function(e,t){var s;return r("function"==typeof(s=e),"update(): expected spec of $apply to be a function; got %s.",s),e(t)}},h=c();function g(e,t,s){r(Array.isArray(e),"update(): expected target of %s to be an array; got %s.",s,e),m(t[s],s)}function m(e,t){r(Array.isArray(e),"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",t,e)}function _(e){r(Array.isArray(e),"update(): expected spec of $splice to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",e)}function f(e,t){var s=a(e);r("Map"===s||"Set"===s,"update(): %s expects a target of type Set or Map; got %s",t,s)}e.exports=h,e.exports.default=h,e.exports.newContext=c},"./node_modules/keymaster/keymaster.js":function(e){!function(t){var s,r={},i={16:!1,18:!1,17:!1,91:!1},n=[],o={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},a={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},l={96:48,97:49,98:50,99:51,100:52,101:53,102:54,103:55,104:56,105:57};for(code=function(e){return a[e]||e.toUpperCase().charCodeAt(0)},_downKeys=[],s=1;s<20;s++)a["f"+s]=111+s;function d(e,t){for(var s=e.length;s--;)if(e[s]===t)return s;return-1}function u(e,t){if(e.length!=t.length)return!1;for(var s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}var c={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function p(e){for(s in i)i[s]=e[c[s]]}function h(e,t,s){var i,n;i=v(e),void 0===s&&(s=t,t="all");for(var o=0;o<i.length;o++)n=[],(e=i[o].split("+")).length>1&&(n=S(e),e=[e[e.length-1]]),e=e[0],(e=code(e))in r||(r[e]=[]),r[e].push({shortcut:i[o],scope:t,method:s,key:i[o],mods:n})}for(s in o)h[s]=!1;function g(e){n=e?[e]:[]}function m(){return n.length?n[n.length-1]:"all"}function _(e){n.push(e)}function f(e){var t=m();if(!Array.isArray(t))return!1;var s=t.indexOf(e);s>=0&&(t.splice(s,1),0==t.length?n.pop():n[n.length-1]=t)}function v(e){var t;return""==(t=(e=e.replace(/\s/g,"")).split(","))[t.length-1]&&(t[t.length-2]+=","),t}function S(e){for(var t=e.slice(0,e.length-1),s=0;s<t.length;s++)t[s]=o[t[s]];return t}function C(e,t,s){e.addEventListener?e.addEventListener(t,s,!1):e.attachEvent&&e.attachEvent("on"+t,(function(){s(window.event)}))}C(document,"keydown",(function(e){!function(e){var t,s,n,a,u,c;if(t=l[e.keyCode]||e.keyCode,-1==d(_downKeys,t)&&_downKeys.push(t),93!=t&&224!=t||(t=91),t in i)for(n in i[t]=!0,o)o[n]==t&&(h[n]=!0);else if(p(e),h.filter.call(this,e)&&t in r)for(c=m(),a=0;a<r[t].length;a++)if(s=r[t][a],Array.isArray(c)&&c.indexOf(s.scope)>=0||s.scope==c||"all"==s.scope){for(n in u=s.mods.length>0,i)(!i[n]&&d(s.mods,+n)>-1||i[n]&&-1==d(s.mods,+n))&&(u=!1);(0!=s.mods.length||i[16]||i[18]||i[17]||i[91])&&!u||!1===s.method(e,s)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}(e)})),C(document,"keyup",(function(e){var t,s=e.keyCode,r=d(_downKeys,s);if(r>=0&&_downKeys.splice(r,1),93!=s&&224!=s||(s=91),s in i)for(t in i[s]=!1,o)o[t]==s&&(h[t]=!1)})),C(window,"focus",(function(){for(s in i)i[s]=!1;for(s in o)h[s]=!1}));var b=t.key;t.key=h,t.key.setScope=g,t.key.getScope=m,t.key.pushScope=_,t.key.popScope=function(e){newScope=[];for(var t=0;t<n.length&&n[t]!==e;t++)newScope.push(n[t]);n=newScope,f(e)},t.key.deleteScope=function(e){var t,s,i;for(t in r)for(s=r[t],i=0;i<s.length;)s[i].scope===e?s.splice(i,1):i++},t.key.addOverlappingScope=function(e){var t=m(),s=[];"all"!=t?(Array.isArray(t)?s=t:s.push(t),s.indexOf(e)>-1||(s.push(e),Array.isArray(t)?n[n.length-1]=s:_(s))):g(e)},t.key.removeOverlappingScope=f,t.key.filter=function(e){var t,s=(t=(t=e.target||e.srcElement)instanceof HTMLDocument?t.documentElement:t).tagName,r=t.classList;if(!(r instanceof DOMTokenList))throw console.info("Event",e),new Error("Browser does not support classList");var i="INPUT"!==s&&"SELECT"!==s&&"TEXTAREA"!==s,n=r.contains("js-keymaster-allow");return i||n},t.key.isPressed=function(e){return"string"==typeof e&&(e=code(e)),-1!=d(_downKeys,e)},t.key.getPressedKeyCodes=function(){return _downKeys.slice(0)},t.key.noConflict=function(){var e=t.key;return t.key=b,e},t.key.unbind=function(e,t){var s,i,n,o,a,l=[];for(s=v(e),o=0;o<s.length;o++){if((i=s[o].split("+")).length>1&&(l=S(i)),e=i[i.length-1],e=code(e),void 0===t&&(t=m()),!r[e])return;for(n=0;n<r[e].length;n++)(a=r[e][n]).scope===t&&u(a.mods,l)&&(r[e][n]={})}},e.exports=h}(this)},"./node_modules/lodash/_baseIntersection.js":(e,t,s)=>{var r=s("./node_modules/lodash/_SetCache.js"),i=s("./node_modules/lodash/_arrayIncludes.js"),n=s("./node_modules/lodash/_arrayIncludesWith.js"),o=s("./node_modules/lodash/_arrayMap.js"),a=s("./node_modules/lodash/_baseUnary.js"),l=s("./node_modules/lodash/_cacheHas.js"),d=Math.min;e.exports=function(e,t,s){for(var u=s?n:i,c=e[0].length,p=e.length,h=p,g=Array(p),m=1/0,_=[];h--;){var f=e[h];h&&t&&(f=o(f,a(t))),m=d(f.length,m),g[h]=!s&&(t||c>=120&&f.length>=120)?new r(h&&f):void 0}f=e[0];var v=-1,S=g[0];e:for(;++v<c&&_.length<m;){var C=f[v],b=t?t(C):C;if(C=s||0!==C?C:0,!(S?l(S,b):u(_,b,s))){for(h=p;--h;){var y=g[h];if(!(y?l(y,b):u(e[h],b,s)))continue e}S&&S.push(b),_.push(C)}}return _}},"./node_modules/lodash/_baseMap.js":(e,t,s)=>{var r=s("./node_modules/lodash/_baseEach.js"),i=s("./node_modules/lodash/isArrayLike.js");e.exports=function(e,t){var s=-1,n=i(e)?Array(e.length):[];return r(e,(function(e,r,i){n[++s]=t(e,r,i)})),n}},"./node_modules/lodash/_baseOrderBy.js":(e,t,s)=>{var r=s("./node_modules/lodash/_arrayMap.js"),i=s("./node_modules/lodash/_baseGet.js"),n=s("./node_modules/lodash/_baseIteratee.js"),o=s("./node_modules/lodash/_baseMap.js"),a=s("./node_modules/lodash/_baseSortBy.js"),l=s("./node_modules/lodash/_baseUnary.js"),d=s("./node_modules/lodash/_compareMultiple.js"),u=s("./node_modules/lodash/identity.js"),c=s("./node_modules/lodash/isArray.js");e.exports=function(e,t,s){t=t.length?r(t,(function(e){return c(e)?function(t){return i(t,1===e.length?e[0]:e)}:e})):[u];var p=-1;t=r(t,l(n));var h=o(e,(function(e,s,i){return{criteria:r(t,(function(t){return t(e)})),index:++p,value:e}}));return a(h,(function(e,t){return d(e,t,s)}))}},"./node_modules/lodash/_baseRepeat.js":e=>{var t=Math.floor;e.exports=function(e,s){var r="";if(!e||s<1||s>9007199254740991)return r;do{s%2&&(r+=e),(s=t(s/2))&&(e+=e)}while(s);return r}},"./node_modules/lodash/_baseSortBy.js":e=>{e.exports=function(e,t){var s=e.length;for(e.sort(t);s--;)e[s]=e[s].value;return e}},"./node_modules/lodash/_castArrayLikeObject.js":(e,t,s)=>{var r=s("./node_modules/lodash/isArrayLikeObject.js");e.exports=function(e){return r(e)?e:[]}},"./node_modules/lodash/_compareAscending.js":(e,t,s)=>{var r=s("./node_modules/lodash/isSymbol.js");e.exports=function(e,t){if(e!==t){var s=void 0!==e,i=null===e,n=e==e,o=r(e),a=void 0!==t,l=null===t,d=t==t,u=r(t);if(!l&&!u&&!o&&e>t||o&&a&&d&&!l&&!u||i&&a&&d||!s&&d||!n)return 1;if(!i&&!o&&!u&&e<t||u&&s&&n&&!i&&!o||l&&s&&n||!a&&n||!d)return-1}return 0}},"./node_modules/lodash/_compareMultiple.js":(e,t,s)=>{var r=s("./node_modules/lodash/_compareAscending.js");e.exports=function(e,t,s){for(var i=-1,n=e.criteria,o=t.criteria,a=n.length,l=s.length;++i<a;){var d=r(n[i],o[i]);if(d)return i>=l?d:d*("desc"==s[i]?-1:1)}return e.index-t.index}},"./node_modules/lodash/_createFind.js":(e,t,s)=>{var r=s("./node_modules/lodash/_baseIteratee.js"),i=s("./node_modules/lodash/isArrayLike.js"),n=s("./node_modules/lodash/keys.js");e.exports=function(e){return function(t,s,o){var a=Object(t);if(!i(t)){var l=r(s,3);t=n(t),s=function(e){return l(a[e],e,a)}}var d=e(t,s,o);return d>-1?a[l?t[d]:d]:void 0}}},"./node_modules/lodash/_createPadding.js":(e,t,s)=>{var r=s("./node_modules/lodash/_baseRepeat.js"),i=s("./node_modules/lodash/_baseToString.js"),n=s("./node_modules/lodash/_castSlice.js"),o=s("./node_modules/lodash/_hasUnicode.js"),a=s("./node_modules/lodash/_stringSize.js"),l=s("./node_modules/lodash/_stringToArray.js"),d=Math.ceil;e.exports=function(e,t){var s=(t=void 0===t?" ":i(t)).length;if(s<2)return s?r(t,e):t;var u=r(t,d(e/a(t)));return o(t)?n(l(u),0,e).join(""):u.slice(0,e)}},"./node_modules/lodash/capitalize.js":(e,t,s)=>{var r=s("./node_modules/lodash/toString.js"),i=s("./node_modules/lodash/upperFirst.js");e.exports=function(e){return i(r(e).toLowerCase())}},"./node_modules/lodash/find.js":(e,t,s)=>{var r=s("./node_modules/lodash/_createFind.js")(s("./node_modules/lodash/findIndex.js"));e.exports=r},"./node_modules/lodash/findIndex.js":(e,t,s)=>{var r=s("./node_modules/lodash/_baseFindIndex.js"),i=s("./node_modules/lodash/_baseIteratee.js"),n=s("./node_modules/lodash/toInteger.js"),o=Math.max;e.exports=function(e,t,s){var a=null==e?0:e.length;if(!a)return-1;var l=null==s?0:n(s);return l<0&&(l=o(a+l,0)),r(e,i(t,3),l)}},"./node_modules/lodash/intersection.js":(e,t,s)=>{var r=s("./node_modules/lodash/_arrayMap.js"),i=s("./node_modules/lodash/_baseIntersection.js"),n=s("./node_modules/lodash/_baseRest.js"),o=s("./node_modules/lodash/_castArrayLikeObject.js"),a=n((function(e){var t=r(e,o);return t.length&&t[0]===e[0]?i(t):[]}));e.exports=a},"./node_modules/lodash/isEmpty.js":(e,t,s)=>{var r=s("./node_modules/lodash/_baseKeys.js"),i=s("./node_modules/lodash/_getTag.js"),n=s("./node_modules/lodash/isArguments.js"),o=s("./node_modules/lodash/isArray.js"),a=s("./node_modules/lodash/isArrayLike.js"),l=s("./node_modules/lodash/isBuffer.js"),d=s("./node_modules/lodash/_isPrototype.js"),u=s("./node_modules/lodash/isTypedArray.js"),c=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(a(e)&&(o(e)||"string"==typeof e||"function"==typeof e.splice||l(e)||u(e)||n(e)))return!e.length;var t=i(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(d(e))return!r(e).length;for(var s in e)if(c.call(e,s))return!1;return!0}},"./node_modules/lodash/isUndefined.js":e=>{e.exports=function(e){return void 0===e}},"./node_modules/lodash/padStart.js":(e,t,s)=>{var r=s("./node_modules/lodash/_createPadding.js"),i=s("./node_modules/lodash/_stringSize.js"),n=s("./node_modules/lodash/toInteger.js"),o=s("./node_modules/lodash/toString.js");e.exports=function(e,t,s){e=o(e);var a=(t=n(t))?i(e):0;return t&&a<t?r(t-a,s)+e:e}},"./node_modules/lodash/partition.js":(e,t,s)=>{var r=s("./node_modules/lodash/_createAggregator.js")((function(e,t,s){e[s?0:1].push(t)}),(function(){return[[],[]]}));e.exports=r},"./node_modules/lodash/sortBy.js":(e,t,s)=>{var r=s("./node_modules/lodash/_baseFlatten.js"),i=s("./node_modules/lodash/_baseOrderBy.js"),n=s("./node_modules/lodash/_baseRest.js"),o=s("./node_modules/lodash/_isIterateeCall.js"),a=n((function(e,t){if(null==e)return[];var s=t.length;return s>1&&o(e,t[0],t[1])?t=[]:s>2&&o(t[0],t[1],t[2])&&(t=[t[0]]),i(e,r(t,1),[])}));e.exports=a},"./node_modules/lodash/uniq.js":(e,t,s)=>{var r=s("./node_modules/lodash/_baseUniq.js");e.exports=function(e){return e&&e.length?r(e):[]}},"./node_modules/lodash/uniqBy.js":(e,t,s)=>{var r=s("./node_modules/lodash/_baseIteratee.js"),i=s("./node_modules/lodash/_baseUniq.js");e.exports=function(e,t){return e&&e.length?i(e,r(t,2)):[]}},"./app/c/create_set/index.styl":()=>{},"./.linaria-cache/app/j/assembly/AssemblyAutoExpandTextarea.linaria.css":(e,t,s)=>{"use strict";s.r(t)},"./.linaria-cache/app/j/assembly/AssemblyCheckbox.linaria.css":(e,t,s)=>{"use strict";s.r(t)},"./.linaria-cache/app/j/assembly/AssemblyNotice.linaria.css":(e,t,s)=>{"use strict";s.r(t)},"./.linaria-cache/app/j/assembly/AssemblyTextarea.linaria.css":(e,t,s)=>{"use strict";s.r(t)},"./.linaria-cache/app/j/authentication/components/AuthModalFullPage.linaria.css":(e,t,s)=>{"use strict";s.r(t)},"./.linaria-cache/app/j/authentication/components/ValidationErrors.linaria.css":(e,t,s)=>{"use strict";s.r(t)},"./.linaria-cache/app/j/authentication/styles.linaria.css":(e,t,s)=>{"use strict";s.r(t)},"./.linaria-cache/app/j/components/MagicLinkPromptModal.linaria.css":(e,t,s)=>{"use strict";s.r(t)},"./.linaria-cache/app/j/components/SchoolAutosuggestWithAssembly.linaria.css":(e,t,s)=>{"use strict";s.r(t)},"./.linaria-cache/app/j/components/SchoolCreator.linaria.css":(e,t,s)=>{"use strict";s.r(t)},"./.linaria-cache/app/j/components/SchoolSelectorWithAssembly.linaria.css":(e,t,s)=>{"use strict";s.r(t)},"./.linaria-cache/app/j/components/SignupWithEmailForm.linaria.css":(e,t,s)=>{"use strict";s.r(t)},"./.linaria-cache/app/j/components/SpecialCharacterTextarea.linaria.css":(e,t,s)=>{"use strict";s.r(t)},"./.linaria-cache/app/j/create_set/components/CreateSetDiagramUploader.linaria.css":(e,t,s)=>{"use strict";s.r(t)},"./.linaria-cache/app/j/create_set/components/CreateSetHeader.linaria.css":(e,t,s)=>{"use strict";s.r(t)},"./.linaria-cache/app/j/create_set/components/CreateSetPage.linaria.css":(e,t,s)=>{"use strict";s.r(t)},"./.linaria-cache/app/j/create_set/components/CreateSetPermissionsControls.linaria.css":(e,t,s)=>{"use strict";s.r(t)},"./.linaria-cache/app/j/create_set/components/ImageUploadContext.linaria.css":(e,t,s)=>{"use strict";s.r(t)},"./.linaria-cache/app/j/create_set/components/StudiableItemToolbar.linaria.css":(e,t,s)=>{"use strict";s.r(t)},"./.linaria-cache/app/j/edgy-data/components/EdgyDataCourseSelector.linaria.css":(e,t,s)=>{"use strict";s.r(t)},"./.linaria-cache/app/j/rich_text/components/UpsellPMToolbar.linaria.css":(e,t,s)=>{"use strict";s.r(t)},"./.linaria-cache/app/j/signup/components/EmailField.linaria.css":(e,t,s)=>{"use strict";s.r(t)},"./.linaria-cache/app/j/signup/components/SignupWithCtas.linaria.css":(e,t,s)=>{"use strict";s.r(t)},"./.linaria-cache/app/j/signup/components/TosCheckbox.linaria.css":(e,t,s)=>{"use strict";s.r(t)},"./.linaria-cache/app/j/signup/components/assemblified/BirthdateDropdowns.linaria.css":(e,t,s)=>{"use strict";s.r(t)},"./.linaria-cache/app/j/signup/components/assemblified/BirthdateLegend.linaria.css":(e,t,s)=>{"use strict";s.r(t)},"./.linaria-cache/app/j/signup/components/assemblified/UsernameField.linaria.css":(e,t,s)=>{"use strict";s.r(t)},"./.linaria-cache/app/j/study-modes/common/components/SpecialCharacterButtonGroup.linaria.css":(e,t,s)=>{"use strict";s.r(t)},"./.linaria-cache/app/j/study-modes/common/components/SpecialCharacterInput.linaria.css":(e,t,s)=>{"use strict";s.r(t)},"./node_modules/react-autosuggest/dist/Autosuggest.js":(e,t,s)=>{"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},i=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}(),n=s("./node_modules/react/index.js"),o=c(n),a=c(s("./node_modules/prop-types/index.js")),l=c(s("./node_modules/shallow-equal/arrays/index.js")),d=c(s("./node_modules/react-autowhatever/dist/index.js")),u=s("./node_modules/react-autosuggest/dist/theme.js");function c(e){return e&&e.__esModule?e:{default:e}}var p=function(){return!0},h=function(e){function t(e){var s=e.alwaysRenderSuggestions;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return g.call(r),r.state={isFocused:!1,isCollapsed:!s,highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null},r.justPressedUpDown=!1,r.justMouseEntered=!1,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.onDocumentMouseDown),this.input=this.autowhatever.input,this.suggestionsContainer=this.autowhatever.itemsContainer}},{key:"componentWillReceiveProps",value:function(e){(0,l.default)(e.suggestions,this.props.suggestions)?e.highlightFirstSuggestion&&e.suggestions.length>0&&!1===this.justPressedUpDown&&!1===this.justMouseEntered&&this.highlightFirstSuggestion():this.willRenderSuggestions(e)?this.state.isCollapsed&&!this.justSelectedSuggestion&&this.revealSuggestions():this.resetHighlightedSuggestion()}},{key:"componentDidUpdate",value:function(e,t){var s=this.props,r=s.suggestions,i=s.onSuggestionHighlighted,n=s.highlightFirstSuggestion;if(!(0,l.default)(r,e.suggestions)&&r.length>0&&n)this.highlightFirstSuggestion();else if(i){var o=this.getHighlightedSuggestion();o!=t.highlightedSuggestion&&i({suggestion:o})}}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.onDocumentMouseDown)}},{key:"updateHighlightedSuggestion",value:function(e,t,s){var r=this;this.setState((function(i){var n=i.valueBeforeUpDown;return null===t?n=null:null===n&&void 0!==s&&(n=s),{highlightedSectionIndex:e,highlightedSuggestionIndex:t,highlightedSuggestion:null===t?null:r.getSuggestion(e,t),valueBeforeUpDown:n}}))}},{key:"resetHighlightedSuggestion",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setState((function(t){var s=t.valueBeforeUpDown;return{highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:e?null:s}}))}},{key:"revealSuggestions",value:function(){this.setState({isCollapsed:!1})}},{key:"closeSuggestions",value:function(){this.setState({highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null,isCollapsed:!0})}},{key:"getSuggestion",value:function(e,t){var s=this.props,r=s.suggestions,i=s.multiSection,n=s.getSectionSuggestions;return i?n(r[e])[t]:r[t]}},{key:"getHighlightedSuggestion",value:function(){var e=this.state,t=e.highlightedSectionIndex,s=e.highlightedSuggestionIndex;return null===s?null:this.getSuggestion(t,s)}},{key:"getSuggestionValueByIndex",value:function(e,t){return(0,this.props.getSuggestionValue)(this.getSuggestion(e,t))}},{key:"getSuggestionIndices",value:function(e){var t=e.getAttribute("data-section-index"),s=e.getAttribute("data-suggestion-index");return{sectionIndex:"string"==typeof t?parseInt(t,10):null,suggestionIndex:parseInt(s,10)}}},{key:"findSuggestionElement",value:function(e){var t=e;do{if(null!==t.getAttribute("data-suggestion-index"))return t;t=t.parentNode}while(null!==t);throw console.error("Clicked element:",e),new Error("Couldn't find suggestion element")}},{key:"maybeCallOnChange",value:function(e,t,s){var r=this.props.inputProps,i=r.value,n=r.onChange;t!==i&&n(e,{newValue:t,method:s})}},{key:"willRenderSuggestions",value:function(e){var t=e.suggestions,s=e.inputProps,r=e.shouldRenderSuggestions,i=s.value;return t.length>0&&r(i)}},{key:"getQuery",value:function(){var e=this.props.inputProps.value,t=this.state.valueBeforeUpDown;return(null===t?e:t).trim()}},{key:"render",value:function(){var e=this,t=this.props,s=t.suggestions,i=t.renderInputComponent,n=t.onSuggestionsFetchRequested,a=t.renderSuggestion,l=t.inputProps,c=t.multiSection,h=t.renderSectionTitle,g=t.id,m=t.getSectionSuggestions,_=t.theme,f=t.getSuggestionValue,v=t.alwaysRenderSuggestions,S=t.highlightFirstSuggestion,C=this.state,b=C.isFocused,y=C.isCollapsed,E=C.highlightedSectionIndex,j=C.highlightedSuggestionIndex,x=C.valueBeforeUpDown,T=v?p:this.props.shouldRenderSuggestions,I=l.value,w=l.onFocus,A=l.onKeyDown,O=this.willRenderSuggestions(this.props),R=v||b&&!y&&O,D=R?s:[],L=r({},l,{onFocus:function(t){if(!e.justSelectedSuggestion&&!e.justClickedOnSuggestionsContainer){var s=T(I);e.setState({isFocused:!0,isCollapsed:!s}),w&&w(t),s&&n({value:I,reason:"input-focused"})}},onBlur:function(t){e.justClickedOnSuggestionsContainer?e.input.focus():(e.blurEvent=t,e.justSelectedSuggestion||(e.onBlur(),e.onSuggestionsClearRequested()))},onChange:function(t){var s=t.target.value,i=T(s);e.maybeCallOnChange(t,s,"type"),e.setState(r({},S?{}:{highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null},{valueBeforeUpDown:null,isCollapsed:!i})),i?n({value:s,reason:"input-changed"}):e.onSuggestionsClearRequested()},onKeyDown:function(t,r){var i=t.keyCode;switch(i){case 40:case 38:if(y)T(I)&&(n({value:I,reason:"suggestions-revealed"}),e.revealSuggestions());else if(s.length>0){var o=r.newHighlightedSectionIndex,a=r.newHighlightedItemIndex,l=void 0;l=null===a?null===x?I:x:e.getSuggestionValueByIndex(o,a),e.updateHighlightedSuggestion(o,a,I),e.maybeCallOnChange(t,l,40===i?"down":"up")}t.preventDefault(),e.justPressedUpDown=!0,setTimeout((function(){e.justPressedUpDown=!1}));break;case 13:if(229===t.keyCode)break;var d=e.getHighlightedSuggestion();if(R&&!v&&e.closeSuggestions(),null!=d){var u=f(d);e.maybeCallOnChange(t,u,"enter"),e.onSuggestionSelected(t,{suggestion:d,suggestionValue:u,suggestionIndex:j,sectionIndex:E,method:"enter"}),e.justSelectedSuggestion=!0,setTimeout((function(){e.justSelectedSuggestion=!1}))}break;case 27:R&&t.preventDefault();var c=R&&!v;if(null===x){if(!c){e.maybeCallOnChange(t,"","escape"),T("")?n({value:"",reason:"escape-pressed"}):e.onSuggestionsClearRequested()}}else e.maybeCallOnChange(t,x,"escape");c?(e.onSuggestionsClearRequested(),e.closeSuggestions()):e.resetHighlightedSuggestion()}A&&A(t)}}),P={query:this.getQuery()};return o.default.createElement(d.default,{multiSection:c,items:D,renderInputComponent:i,renderItemsContainer:this.renderSuggestionsContainer,renderItem:a,renderItemData:P,renderSectionTitle:h,getSectionItems:m,highlightedSectionIndex:E,highlightedItemIndex:j,inputProps:L,itemProps:this.itemProps,theme:(0,u.mapToAutowhateverTheme)(_),id:g,ref:this.storeAutowhateverRef})}}]),t}(n.Component);h.propTypes={suggestions:a.default.array.isRequired,onSuggestionsFetchRequested:function(e,t){var s=e[t];if("function"!=typeof s)throw new Error("'onSuggestionsFetchRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsFetchRequestedProp")},onSuggestionsClearRequested:function(e,t){var s=e[t];if(!1===e.alwaysRenderSuggestions&&"function"!=typeof s)throw new Error("'onSuggestionsClearRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsClearRequestedProp")},onSuggestionSelected:a.default.func,onSuggestionHighlighted:a.default.func,renderInputComponent:a.default.func,renderSuggestionsContainer:a.default.func,getSuggestionValue:a.default.func.isRequired,renderSuggestion:a.default.func.isRequired,inputProps:function(e,t){var s=e[t];if(!s.hasOwnProperty("value"))throw new Error("'inputProps' must have 'value'.");if(!s.hasOwnProperty("onChange"))throw new Error("'inputProps' must have 'onChange'.")},shouldRenderSuggestions:a.default.func,alwaysRenderSuggestions:a.default.bool,multiSection:a.default.bool,renderSectionTitle:function(e,t){var s=e[t];if(!0===e.multiSection&&"function"!=typeof s)throw new Error("'renderSectionTitle' must be implemented. See: https://github.com/moroshko/react-autosuggest#renderSectionTitleProp")},getSectionSuggestions:function(e,t){var s=e[t];if(!0===e.multiSection&&"function"!=typeof s)throw new Error("'getSectionSuggestions' must be implemented. See: https://github.com/moroshko/react-autosuggest#getSectionSuggestionsProp")},focusInputOnSuggestionClick:a.default.bool,highlightFirstSuggestion:a.default.bool,theme:a.default.object,id:a.default.string},h.defaultProps={renderSuggestionsContainer:function(e){var t=e.containerProps,s=e.children;return o.default.createElement("div",t,s)},shouldRenderSuggestions:function(e){return e.trim().length>0},alwaysRenderSuggestions:!1,multiSection:!1,focusInputOnSuggestionClick:!0,highlightFirstSuggestion:!1,theme:u.defaultTheme,id:"1"};var g=function(){var e=this;this.onDocumentMouseDown=function(t){e.justClickedOnSuggestionsContainer=!1;for(var s=t.detail&&t.detail.target||t.target;null!==s&&s!==document;){if(null!==s.getAttribute("data-suggestion-index"))return;if(s===e.suggestionsContainer)return void(e.justClickedOnSuggestionsContainer=!0);s=s.parentNode}},this.storeAutowhateverRef=function(t){null!==t&&(e.autowhatever=t)},this.onSuggestionMouseEnter=function(t,s){var r=s.sectionIndex,i=s.itemIndex;e.updateHighlightedSuggestion(r,i),e.justMouseEntered=!0,setTimeout((function(){e.justMouseEntered=!1}))},this.highlightFirstSuggestion=function(){e.updateHighlightedSuggestion(e.props.multiSection?0:null,0)},this.onSuggestionMouseDown=function(){e.justSelectedSuggestion=!0},this.onSuggestionsClearRequested=function(){var t=e.props.onSuggestionsClearRequested;t&&t()},this.onSuggestionSelected=function(t,s){var r=e.props,i=r.alwaysRenderSuggestions,n=r.onSuggestionSelected,o=r.onSuggestionsFetchRequested;n&&n(t,s),i?o({value:s.suggestionValue,reason:"suggestion-selected"}):e.onSuggestionsClearRequested(),e.resetHighlightedSuggestion()},this.onSuggestionClick=function(t){var s=e.props,r=s.alwaysRenderSuggestions,i=s.focusInputOnSuggestionClick,n=e.getSuggestionIndices(e.findSuggestionElement(t.target)),o=n.sectionIndex,a=n.suggestionIndex,l=e.getSuggestion(o,a),d=e.props.getSuggestionValue(l);e.maybeCallOnChange(t,d,"click"),e.onSuggestionSelected(t,{suggestion:l,suggestionValue:d,suggestionIndex:a,sectionIndex:o,method:"click"}),r||e.closeSuggestions(),!0===i?e.input.focus():e.onBlur(),setTimeout((function(){e.justSelectedSuggestion=!1}))},this.onBlur=function(){var t=e.props,s=t.inputProps,r=t.shouldRenderSuggestions,i=s.value,n=s.onBlur,o=e.getHighlightedSuggestion(),a=r(i);e.setState({isFocused:!1,highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null,isCollapsed:!a}),n&&n(e.blurEvent,{highlightedSuggestion:o})},this.resetHighlightedSuggestionOnMouseLeave=function(){e.resetHighlightedSuggestion(!1)},this.itemProps=function(t){return{"data-section-index":t.sectionIndex,"data-suggestion-index":t.itemIndex,onMouseEnter:e.onSuggestionMouseEnter,onMouseLeave:e.resetHighlightedSuggestionOnMouseLeave,onMouseDown:e.onSuggestionMouseDown,onTouchStart:e.onSuggestionMouseDown,onClick:e.onSuggestionClick}},this.renderSuggestionsContainer=function(t){var s=t.containerProps,r=t.children;return(0,e.props.renderSuggestionsContainer)({containerProps:s,children:r,query:e.getQuery()})}};t.default=h},"./node_modules/react-autosuggest/dist/index.js":(e,t,s)=>{"use strict";e.exports=s("./node_modules/react-autosuggest/dist/Autosuggest.js").default},"./node_modules/react-autosuggest/dist/theme.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.defaultTheme={container:"react-autosuggest__container",containerOpen:"react-autosuggest__container--open",input:"react-autosuggest__input",inputOpen:"react-autosuggest__input--open",inputFocused:"react-autosuggest__input--focused",suggestionsContainer:"react-autosuggest__suggestions-container",suggestionsContainerOpen:"react-autosuggest__suggestions-container--open",suggestionsList:"react-autosuggest__suggestions-list",suggestion:"react-autosuggest__suggestion",suggestionFirst:"react-autosuggest__suggestion--first",suggestionHighlighted:"react-autosuggest__suggestion--highlighted",sectionContainer:"react-autosuggest__section-container",sectionContainerFirst:"react-autosuggest__section-container--first",sectionTitle:"react-autosuggest__section-title"},t.mapToAutowhateverTheme=function(e){var t={};for(var s in e)switch(s){case"suggestionsContainer":t.itemsContainer=e[s];break;case"suggestionsContainerOpen":t.itemsContainerOpen=e[s];break;case"suggestion":t.item=e[s];break;case"suggestionFirst":t.itemFirst=e[s];break;case"suggestionHighlighted":t.itemHighlighted=e[s];break;case"suggestionsList":t.itemsList=e[s];break;default:t[s]=e[s]}return t}},"./node_modules/react-autowhatever/dist/Autowhatever.js":(e,t,s)=>{"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var s=[],r=!0,i=!1,n=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done)&&(s.push(o.value),!t||s.length!==t);r=!0);}catch(l){i=!0,n=l}finally{try{!r&&a.return&&a.return()}finally{if(i)throw n}}return s}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}(),o=s("./node_modules/react/index.js"),a=h(o),l=h(s("./node_modules/prop-types/index.js")),d=h(s("./node_modules/section-iterator/dist/index.js")),u=h(s("./node_modules/react-themeable/dist/index.js")),c=h(s("./node_modules/react-autowhatever/dist/SectionTitle.js")),p=h(s("./node_modules/react-autowhatever/dist/ItemsList.js"));function h(e){return e&&e.__esModule?e:{default:e}}var g={},m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.storeInputReference=function(e){null!==e&&(s.input=e)},s.storeItemsContainerReference=function(e){null!==e&&(s.itemsContainer=e)},s.onHighlightedItemChange=function(e){s.highlightedItem=e},s.getItemId=function(e,t){return null===t?null:"react-autowhatever-"+s.props.id+"-"+(null===e?"":"section-"+e)+"-item-"+t},s.onFocus=function(e){var t=s.props.inputProps;s.setState({isInputFocused:!0}),t.onFocus&&t.onFocus(e)},s.onBlur=function(e){var t=s.props.inputProps;s.setState({isInputFocused:!1}),t.onBlur&&t.onBlur(e)},s.onKeyDown=function(e){var t=s.props,r=t.inputProps,n=t.highlightedSectionIndex,o=t.highlightedItemIndex;switch(e.key){case"ArrowDown":case"ArrowUp":var a="ArrowDown"===e.key?"next":"prev",l=s.sectionIterator[a]([n,o]),d=i(l,2),u=d[0],c=d[1];r.onKeyDown(e,{newHighlightedSectionIndex:u,newHighlightedItemIndex:c});break;default:r.onKeyDown(e,{highlightedSectionIndex:n,highlightedItemIndex:o})}},s.highlightedItem=null,s.state={isInputFocused:!1},s.setSectionsItems(e),s.setSectionIterator(e),s.setTheme(e),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentDidMount",value:function(){this.ensureHighlightedItemIsVisible()}},{key:"componentWillReceiveProps",value:function(e){e.items!==this.props.items&&this.setSectionsItems(e),e.items===this.props.items&&e.multiSection===this.props.multiSection||this.setSectionIterator(e),e.theme!==this.props.theme&&this.setTheme(e)}},{key:"componentDidUpdate",value:function(){this.ensureHighlightedItemIsVisible()}},{key:"setSectionsItems",value:function(e){e.multiSection&&(this.sectionsItems=e.items.map((function(t){return e.getSectionItems(t)})),this.sectionsLengths=this.sectionsItems.map((function(e){return e.length})),this.allSectionsAreEmpty=this.sectionsLengths.every((function(e){return 0===e})))}},{key:"setSectionIterator",value:function(e){this.sectionIterator=(0,d.default)({multiSection:e.multiSection,data:e.multiSection?this.sectionsLengths:e.items.length})}},{key:"setTheme",value:function(e){this.theme=(0,u.default)(e.theme)}},{key:"renderSections",value:function(){var e=this;if(this.allSectionsAreEmpty)return null;var t=this.theme,s=this.props,r=s.id,i=s.items,n=s.renderItem,o=s.renderItemData,l=s.renderSectionTitle,d=s.highlightedSectionIndex,u=s.highlightedItemIndex,h=s.itemProps;return i.map((function(s,i){var g="react-autowhatever-"+r+"-",m=g+"section-"+i+"-",_=0===i;return a.default.createElement("div",t(m+"container","sectionContainer",_&&"sectionContainerFirst"),a.default.createElement(c.default,{section:s,renderSectionTitle:l,theme:t,sectionKeyPrefix:m}),a.default.createElement(p.default,{items:e.sectionsItems[i],itemProps:h,renderItem:n,renderItemData:o,sectionIndex:i,highlightedItemIndex:d===i?u:null,onHighlightedItemChange:e.onHighlightedItemChange,getItemId:e.getItemId,theme:t,keyPrefix:g,ref:e.storeItemsListReference}))}))}},{key:"renderItems",value:function(){var e=this.props.items;if(0===e.length)return null;var t=this.theme,s=this.props,r=s.id,i=s.renderItem,n=s.renderItemData,o=s.highlightedSectionIndex,l=s.highlightedItemIndex,d=s.itemProps;return a.default.createElement(p.default,{items:e,itemProps:d,renderItem:i,renderItemData:n,highlightedItemIndex:null===o?l:null,onHighlightedItemChange:this.onHighlightedItemChange,getItemId:this.getItemId,theme:t,keyPrefix:"react-autowhatever-"+r+"-"})}},{key:"ensureHighlightedItemIsVisible",value:function(){var e=this.highlightedItem;if(e){var t=this.itemsContainer,s=e.offsetParent===t?e.offsetTop:e.offsetTop-t.offsetTop,r=t.scrollTop;s<r?r=s:s+e.offsetHeight>r+t.offsetHeight&&(r=s+e.offsetHeight-t.offsetHeight),r!==t.scrollTop&&(t.scrollTop=r)}}},{key:"render",value:function(){var e=this.theme,t=this.props,s=t.id,i=t.multiSection,n=t.renderInputComponent,o=t.renderItemsContainer,l=t.highlightedSectionIndex,d=t.highlightedItemIndex,u=this.state.isInputFocused,c=i?this.renderSections():this.renderItems(),p=null!==c,h=this.getItemId(l,d),g="react-autowhatever-"+s,m=r({role:"combobox","aria-haspopup":"listbox","aria-owns":g,"aria-expanded":p},e("react-autowhatever-"+s+"-container","container",p&&"containerOpen"),this.props.containerProps),_=n(r({type:"text",value:"",autoComplete:"off","aria-autocomplete":"list","aria-controls":g,"aria-activedescendant":h},e("react-autowhatever-"+s+"-input","input",p&&"inputOpen",u&&"inputFocused"),this.props.inputProps,{onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.props.inputProps.onKeyDown&&this.onKeyDown,ref:this.storeInputReference})),f=o({containerProps:r({id:g,role:"listbox"},e("react-autowhatever-"+s+"-items-container","itemsContainer",p&&"itemsContainerOpen"),{ref:this.storeItemsContainerReference}),children:c});return a.default.createElement("div",m,_,f)}}]),t}(o.Component);m.propTypes={id:l.default.string,multiSection:l.default.bool,renderInputComponent:l.default.func,renderItemsContainer:l.default.func,items:l.default.array.isRequired,renderItem:l.default.func,renderItemData:l.default.object,renderSectionTitle:l.default.func,getSectionItems:l.default.func,containerProps:l.default.object,inputProps:l.default.object,itemProps:l.default.oneOfType([l.default.object,l.default.func]),highlightedSectionIndex:l.default.number,highlightedItemIndex:l.default.number,theme:l.default.oneOfType([l.default.object,l.default.array])},m.defaultProps={id:"1",multiSection:!1,renderInputComponent:function(e){return a.default.createElement("input",e)},renderItemsContainer:function(e){var t=e.containerProps,s=e.children;return a.default.createElement("div",t,s)},renderItem:function(){throw new Error("`renderItem` must be provided")},renderItemData:g,renderSectionTitle:function(){throw new Error("`renderSectionTitle` must be provided")},getSectionItems:function(){throw new Error("`getSectionItems` must be provided")},containerProps:g,inputProps:g,itemProps:g,highlightedSectionIndex:null,highlightedItemIndex:null,theme:{container:"react-autowhatever__container",containerOpen:"react-autowhatever__container--open",input:"react-autowhatever__input",inputOpen:"react-autowhatever__input--open",inputFocused:"react-autowhatever__input--focused",itemsContainer:"react-autowhatever__items-container",itemsContainerOpen:"react-autowhatever__items-container--open",itemsList:"react-autowhatever__items-list",item:"react-autowhatever__item",itemFirst:"react-autowhatever__item--first",itemHighlighted:"react-autowhatever__item--highlighted",sectionContainer:"react-autowhatever__section-container",sectionContainerFirst:"react-autowhatever__section-container--first",sectionTitle:"react-autowhatever__section-title"}},t.default=m},"./node_modules/react-autowhatever/dist/Item.js":(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},i=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}(),n=s("./node_modules/react/index.js"),o=d(n),a=d(s("./node_modules/prop-types/index.js")),l=d(s("./node_modules/react-autowhatever/dist/compareObjects.js"));function d(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e,s,r;u(this,t);for(var i=arguments.length,n=Array(i),o=0;o<i;o++)n[o]=arguments[o];return s=r=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n))),r.storeItemReference=function(e){null!==e&&(r.item=e)},r.onMouseEnter=function(e){var t=r.props,s=t.sectionIndex,i=t.itemIndex;r.props.onMouseEnter(e,{sectionIndex:s,itemIndex:i})},r.onMouseLeave=function(e){var t=r.props,s=t.sectionIndex,i=t.itemIndex;r.props.onMouseLeave(e,{sectionIndex:s,itemIndex:i})},r.onMouseDown=function(e){var t=r.props,s=t.sectionIndex,i=t.itemIndex;r.props.onMouseDown(e,{sectionIndex:s,itemIndex:i})},r.onClick=function(e){var t=r.props,s=t.sectionIndex,i=t.itemIndex;r.props.onClick(e,{sectionIndex:s,itemIndex:i})},c(r,s)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"shouldComponentUpdate",value:function(e){return(0,l.default)(e,this.props,["renderItemData"])}},{key:"render",value:function(){var e=this.props,t=e.isHighlighted,s=e.item,i=e.renderItem,n=e.renderItemData,a=function(e,t){var s={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s}(e,["isHighlighted","item","renderItem","renderItemData"]);return delete a.sectionIndex,delete a.itemIndex,"function"==typeof a.onMouseEnter&&(a.onMouseEnter=this.onMouseEnter),"function"==typeof a.onMouseLeave&&(a.onMouseLeave=this.onMouseLeave),"function"==typeof a.onMouseDown&&(a.onMouseDown=this.onMouseDown),"function"==typeof a.onClick&&(a.onClick=this.onClick),o.default.createElement("li",r({role:"option"},a,{ref:this.storeItemReference}),i(s,r({isHighlighted:t},n)))}}]),t}(n.Component);p.propTypes={sectionIndex:a.default.number,isHighlighted:a.default.bool.isRequired,itemIndex:a.default.number.isRequired,item:a.default.any.isRequired,renderItem:a.default.func.isRequired,renderItemData:a.default.object.isRequired,onMouseEnter:a.default.func,onMouseLeave:a.default.func,onMouseDown:a.default.func,onClick:a.default.func},t.default=p},"./node_modules/react-autowhatever/dist/ItemsList.js":(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},i=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}(),n=s("./node_modules/react/index.js"),o=u(n),a=u(s("./node_modules/prop-types/index.js")),l=u(s("./node_modules/react-autowhatever/dist/Item.js")),d=u(s("./node_modules/react-autowhatever/dist/compareObjects.js"));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=function(e){function t(){var e,s,r;c(this,t);for(var i=arguments.length,n=Array(i),o=0;o<i;o++)n[o]=arguments[o];return s=r=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n))),r.storeHighlightedItemReference=function(e){r.props.onHighlightedItemChange(null===e?null:e.item)},p(r,s)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"shouldComponentUpdate",value:function(e){return(0,d.default)(e,this.props,["itemProps"])}},{key:"render",value:function(){var e=this,t=this.props,s=t.items,i=t.itemProps,n=t.renderItem,a=t.renderItemData,d=t.sectionIndex,u=t.highlightedItemIndex,c=t.getItemId,p=t.theme,h=t.keyPrefix,g=null===d?h:h+"section-"+d+"-",m="function"==typeof i;return o.default.createElement("ul",r({role:"listbox"},p(g+"items-list","itemsList")),s.map((function(t,s){var h=0===s,_=s===u,f=g+"item-"+s,v=m?i({sectionIndex:d,itemIndex:s}):i,S=r({id:c(d,s),"aria-selected":_},p(f,"item",h&&"itemFirst",_&&"itemHighlighted"),v);return _&&(S.ref=e.storeHighlightedItemReference),o.default.createElement(l.default,r({},S,{sectionIndex:d,isHighlighted:_,itemIndex:s,item:t,renderItem:n,renderItemData:a}))})))}}]),t}(n.Component);h.propTypes={items:a.default.array.isRequired,itemProps:a.default.oneOfType([a.default.object,a.default.func]),renderItem:a.default.func.isRequired,renderItemData:a.default.object.isRequired,sectionIndex:a.default.number,highlightedItemIndex:a.default.number,onHighlightedItemChange:a.default.func.isRequired,getItemId:a.default.func.isRequired,theme:a.default.func.isRequired,keyPrefix:a.default.string.isRequired},h.defaultProps={sectionIndex:null},t.default=h},"./node_modules/react-autowhatever/dist/SectionTitle.js":(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}(),i=s("./node_modules/react/index.js"),n=l(i),o=l(s("./node_modules/prop-types/index.js")),a=l(s("./node_modules/react-autowhatever/dist/compareObjects.js"));function l(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){return d(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"shouldComponentUpdate",value:function(e){return(0,a.default)(e,this.props)}},{key:"render",value:function(){var e=this.props,t=e.section,s=e.renderSectionTitle,r=e.theme,i=e.sectionKeyPrefix,o=s(t);return o?n.default.createElement("div",r(i+"title","sectionTitle"),o):null}}]),t}(i.Component);c.propTypes={section:o.default.any.isRequired,renderSectionTitle:o.default.func.isRequired,theme:o.default.func.isRequired,sectionKeyPrefix:o.default.string.isRequired},t.default=c},"./node_modules/react-autowhatever/dist/compareObjects.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e===t)return!1;var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!0;var o={},a=void 0,l=void 0;for(a=0,l=r.length;a<l;a++)o[r[a]]=!0;for(a=0,l=i.length;a<l;a++){var d=i[a],u=e[d],c=t[d];if(u!==c){if(!o[d]||null===u||null===c||"object"!==(void 0===u?"undefined":s(u))||"object"!==(void 0===c?"undefined":s(c)))return!0;var p=Object.keys(u),h=Object.keys(c);if(p.length!==h.length)return!0;for(var g=0,m=p.length;g<m;g++){var _=p[g];if(u[_]!==c[_])return!0}}}return!1}},"./node_modules/react-autowhatever/dist/index.js":(e,t,s)=>{"use strict";e.exports=s("./node_modules/react-autowhatever/dist/Autowhatever.js").default},"./node_modules/react-input-autosize/lib/AutosizeInput.js":(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},i=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}(),n=s("./node_modules/react/index.js"),o=l(n),a=l(s("./node_modules/prop-types/index.js"));function l(e){return e&&e.__esModule?e:{default:e}}var d={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},u=["extraWidth","injectStyles","inputClassName","inputRef","inputStyle","minWidth","onAutosize","placeholderIsMinWidth"],c=function(e,t){t.style.fontSize=e.fontSize,t.style.fontFamily=e.fontFamily,t.style.fontWeight=e.fontWeight,t.style.fontStyle=e.fontStyle,t.style.letterSpacing=e.letterSpacing,t.style.textTransform=e.textTransform},p=!("undefined"==typeof window||!window.navigator)&&/MSIE |Trident\/|Edge\//.test(window.navigator.userAgent),h=function(){return p?"_"+Math.random().toString(36).substr(2,12):void 0},g=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.inputRef=function(e){s.input=e,"function"==typeof s.props.inputRef&&s.props.inputRef(e)},s.placeHolderSizerRef=function(e){s.placeHolderSizer=e},s.sizerRef=function(e){s.sizer=e},s.state={inputWidth:e.minWidth,inputId:e.id||h()},s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){this.mounted=!0,this.copyInputStyles(),this.updateInputWidth()}},{key:"componentWillReceiveProps",value:function(e){var t=e.id;t!==this.props.id&&this.setState({inputId:t||h()})}},{key:"componentDidUpdate",value:function(e,t){t.inputWidth!==this.state.inputWidth&&"function"==typeof this.props.onAutosize&&this.props.onAutosize(this.state.inputWidth),this.updateInputWidth()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"copyInputStyles",value:function(){if(this.mounted&&window.getComputedStyle){var e=this.input&&window.getComputedStyle(this.input);e&&(c(e,this.sizer),this.placeHolderSizer&&c(e,this.placeHolderSizer))}}},{key:"updateInputWidth",value:function(){if(this.mounted&&this.sizer&&void 0!==this.sizer.scrollWidth){var e=void 0;e=this.props.placeholder&&(!this.props.value||this.props.value&&this.props.placeholderIsMinWidth)?Math.max(this.sizer.scrollWidth,this.placeHolderSizer.scrollWidth)+2:this.sizer.scrollWidth+2,(e+="number"===this.props.type&&void 0===this.props.extraWidth?16:parseInt(this.props.extraWidth)||0)<this.props.minWidth&&(e=this.props.minWidth),e!==this.state.inputWidth&&this.setState({inputWidth:e})}}},{key:"getInput",value:function(){return this.input}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"select",value:function(){this.input.select()}},{key:"renderStyles",value:function(){var e=this.props.injectStyles;return p&&e?o.default.createElement("style",{dangerouslySetInnerHTML:{__html:"input#"+this.state.inputId+"::-ms-clear {display: none;}"}}):null}},{key:"render",value:function(){var e=[this.props.defaultValue,this.props.value,""].reduce((function(e,t){return null!=e?e:t})),t=r({},this.props.style);t.display||(t.display="inline-block");var s=r({boxSizing:"content-box",width:this.state.inputWidth+"px"},this.props.inputStyle),i=function(e,t){var s={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s}(this.props,[]);return function(e){u.forEach((function(t){return delete e[t]}))}(i),i.className=this.props.inputClassName,i.id=this.state.inputId,i.style=s,o.default.createElement("div",{className:this.props.className,style:t},this.renderStyles(),o.default.createElement("input",r({},i,{ref:this.inputRef})),o.default.createElement("div",{ref:this.sizerRef,style:d},e),this.props.placeholder?o.default.createElement("div",{ref:this.placeHolderSizerRef,style:d},this.props.placeholder):null)}}]),t}(n.Component);g.propTypes={className:a.default.string,defaultValue:a.default.any,extraWidth:a.default.oneOfType([a.default.number,a.default.string]),id:a.default.string,injectStyles:a.default.bool,inputClassName:a.default.string,inputRef:a.default.func,inputStyle:a.default.object,minWidth:a.default.oneOfType([a.default.number,a.default.string]),onAutosize:a.default.func,onChange:a.default.func,placeholder:a.default.string,placeholderIsMinWidth:a.default.bool,style:a.default.object,value:a.default.any},g.defaultProps={minWidth:1,injectStyles:!0},t.default=g},"./node_modules/react-select/lib/Async.js":(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},i=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}(),n=s("./node_modules/react/index.js"),o=u(n),a=u(s("./node_modules/prop-types/index.js")),l=u(s("./node_modules/react-select/lib/Select.js")),d=u(s("./node_modules/react-select/lib/utils/stripDiacritics.js"));function u(e){return e&&e.__esModule?e:{default:e}}var c={autoload:a.default.bool.isRequired,cache:a.default.any,children:a.default.func.isRequired,ignoreAccents:a.default.bool,ignoreCase:a.default.bool,loadOptions:a.default.func.isRequired,loadingPlaceholder:a.default.oneOfType([a.default.string,a.default.node]),multi:a.default.bool,noResultsText:a.default.oneOfType([a.default.string,a.default.node]),onChange:a.default.func,onInputChange:a.default.func,options:a.default.array.isRequired,placeholder:a.default.oneOfType([a.default.string,a.default.node]),searchPromptText:a.default.oneOfType([a.default.string,a.default.node]),value:a.default.any},p={},h={autoload:!0,cache:p,children:function(e){return o.default.createElement(l.default,e)},ignoreAccents:!0,ignoreCase:!0,loadingPlaceholder:"Loading...",options:[],searchPromptText:"Type to search"},g=function(e){function t(e,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,s));return r._cache=e.cache===p?{}:e.cache,r.state={inputValue:"",isLoading:!1,options:e.options},r.onInputChange=r.onInputChange.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){this.props.autoload&&this.loadOptions("")}},{key:"componentWillReceiveProps",value:function(e){e.options!==this.props.options&&this.setState({options:e.options})}},{key:"componentWillUnmount",value:function(){this._callback=null}},{key:"loadOptions",value:function(e){var t=this,s=this.props.loadOptions,r=this._cache;if(r&&Object.prototype.hasOwnProperty.call(r,e))this.setState({options:r[e]});else{var i=function s(i,n){if(s===t._callback){t._callback=null;var o=n&&n.options||[];r&&(r[e]=o),t.setState({isLoading:!1,options:o})}};this._callback=i;var n=s(e,i);n&&n.then((function(e){return i(0,e)}),(function(e){return i()})),this._callback&&!this.state.isLoading&&this.setState({isLoading:!0})}}},{key:"onInputChange",value:function(e){var t=this.props,s=t.ignoreAccents,r=t.ignoreCase,i=t.onInputChange,n=e;return s&&(n=(0,d.default)(n)),r&&(n=n.toLowerCase()),i&&i(n),this.setState({inputValue:e}),this.loadOptions(n),e}},{key:"noResultsText",value:function(){var e=this.props,t=e.loadingPlaceholder,s=e.noResultsText,r=e.searchPromptText,i=this.state,n=i.inputValue;return i.isLoading?t:n&&s?s:r}},{key:"focus",value:function(){this.select.focus()}},{key:"render",value:function(){var e=this,t=this.props,s=t.children,i=t.loadingPlaceholder,n=(t.multi,t.onChange,t.placeholder),o=(t.value,this.state),a=o.isLoading,l=o.options,d={noResultsText:this.noResultsText(),placeholder:a?i:n,options:a&&i?[]:l,ref:function(t){return e.select=t}};return s(r({},this.props,d,{isLoading:a,onInputChange:this.onInputChange}))}}]),t}(n.Component);t.default=g,g.propTypes=c,g.defaultProps=h},"./node_modules/react-select/lib/AsyncCreatable.js":(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},i=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}(),n=d(s("./node_modules/react/index.js")),o=d(s("./node_modules/react-select/lib/Select.js")),a=d(s("./node_modules/react-select/lib/Async.js")),l=d(s("./node_modules/react-select/lib/Creatable.js"));function d(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce((function(t,s){var r=e[s];return void 0!==r&&(t[s]=r),t}),t)}var h=function(e){function t(){return u(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"focus",value:function(){this.select.focus()}},{key:"render",value:function(){var e=this;return n.default.createElement(a.default,this.props,(function(t){return n.default.createElement(l.default,e.props,(function(s){return n.default.createElement(o.default,r({},p(t,p(s,{})),{onInputChange:function(e){return s.onInputChange(e),t.onInputChange(e)},ref:function(r){e.select=r,s.ref(r),t.ref(r)}}))}))}))}}]),t}(n.default.Component);t.default=h},"./node_modules/react-select/lib/Creatable.js":(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},i=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}(),n=u(s("./node_modules/react/index.js")),o=u(s("./node_modules/prop-types/index.js")),a=u(s("./node_modules/react-select/lib/Select.js")),l=u(s("./node_modules/react-select/lib/utils/defaultFilterOptions.js")),d=u(s("./node_modules/react-select/lib/utils/defaultMenuRenderer.js"));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,s));return r.filterOptions=r.filterOptions.bind(r),r.menuRenderer=r.menuRenderer.bind(r),r.onInputKeyDown=r.onInputKeyDown.bind(r),r.onInputChange=r.onInputChange.bind(r),r.onOptionSelect=r.onOptionSelect.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"createNewOption",value:function(){var e=this.props,t=e.isValidNewOption,s=e.newOptionCreator,r=e.onNewOptionClick,i=e.options,n=void 0===i?[]:i;e.shouldKeyDownEventCreateNewOption;if(t({label:this.inputValue})){var o=s({label:this.inputValue,labelKey:this.labelKey,valueKey:this.valueKey});this.isOptionUnique({option:o})&&(r?r(o):(n.unshift(o),this.select.selectValue(o)))}}},{key:"filterOptions",value:function(){var e=this.props,t=e.filterOptions,s=e.isValidNewOption,r=(e.options,e.promptTextCreator),i=(arguments.length<=2?void 0:arguments[2])||[],n=t.apply(void 0,arguments)||[];if(s({label:this.inputValue})){var o=this.props.newOptionCreator,a=o({label:this.inputValue,labelKey:this.labelKey,valueKey:this.valueKey}),l=this.isOptionUnique({option:a,options:i.concat(n)});if(l){var d=r(this.inputValue);this._createPlaceholderOption=o({label:d,labelKey:this.labelKey,valueKey:this.valueKey}),n.unshift(this._createPlaceholderOption)}}return n}},{key:"isOptionUnique",value:function(e){var t=e.option,s=e.options,r=this.props.isOptionUnique;return s=s||this.select.filterOptions(),r({labelKey:this.labelKey,option:t,options:s,valueKey:this.valueKey})}},{key:"menuRenderer",value:function(e){var t=this.props.menuRenderer;return t(r({},e,{onSelect:this.onOptionSelect,selectValue:this.onOptionSelect}))}},{key:"onInputChange",value:function(e){var t=this.props.onInputChange;t&&t(e),this.inputValue=e}},{key:"onInputKeyDown",value:function(e){var t=this.props,s=t.shouldKeyDownEventCreateNewOption,r=t.onInputKeyDown,i=this.select.getFocusedOption();i&&i===this._createPlaceholderOption&&s({keyCode:e.keyCode})?(this.createNewOption(),e.preventDefault()):r&&r(e)}},{key:"onOptionSelect",value:function(e,t){e===this._createPlaceholderOption?this.createNewOption():this.select.selectValue(e)}},{key:"focus",value:function(){this.select.focus()}},{key:"render",value:function(){var e=this,t=this.props,s=(t.newOptionCreator,t.shouldKeyDownEventCreateNewOption,function(e,t){var s={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s}(t,["newOptionCreator","shouldKeyDownEventCreateNewOption"])),i=this.props.children;return i||(i=p),i(r({},s,{allowCreate:!0,filterOptions:this.filterOptions,menuRenderer:this.menuRenderer,onInputChange:this.onInputChange,onInputKeyDown:this.onInputKeyDown,ref:function(t){e.select=t,t&&(e.labelKey=t.props.labelKey,e.valueKey=t.props.valueKey)}}))}}]),t}(n.default.Component);function p(e){return n.default.createElement(a.default,e)}function h(e){var t=e.option,s=e.options,r=e.labelKey,i=e.valueKey;return 0===s.filter((function(e){return e[r]===t[r]||e[i]===t[i]})).length}function g(e){return!!e.label}function m(e){var t=e.label,s=e.labelKey,r={};return r[e.valueKey]=t,r[s]=t,r.className="Select-create-option-placeholder",r}function _(e){return'Create option "'+e+'"'}function f(e){switch(e.keyCode){case 9:case 13:case 188:return!0}return!1}c.isOptionUnique=h,c.isValidNewOption=g,c.newOptionCreator=m,c.promptTextCreator=_,c.shouldKeyDownEventCreateNewOption=f,c.defaultProps={filterOptions:l.default,isOptionUnique:h,isValidNewOption:g,menuRenderer:d.default,newOptionCreator:m,promptTextCreator:_,shouldKeyDownEventCreateNewOption:f},c.propTypes={children:o.default.func,filterOptions:o.default.any,isOptionUnique:o.default.func,isValidNewOption:o.default.func,menuRenderer:o.default.any,newOptionCreator:o.default.func,onInputChange:o.default.func,onInputKeyDown:o.default.func,onNewOptionClick:o.default.func,options:o.default.array,promptTextCreator:o.default.func,shouldKeyDownEventCreateNewOption:o.default.func},t.default=c},"./node_modules/react-select/lib/Option.js":(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}(),i=a(s("./node_modules/react/index.js")),n=a(s("./node_modules/prop-types/index.js")),o=a(s("./node_modules/classnames/index.js"));function a(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.handleMouseDown=s.handleMouseDown.bind(s),s.handleMouseEnter=s.handleMouseEnter.bind(s),s.handleMouseMove=s.handleMouseMove.bind(s),s.handleTouchStart=s.handleTouchStart.bind(s),s.handleTouchEnd=s.handleTouchEnd.bind(s),s.handleTouchMove=s.handleTouchMove.bind(s),s.onFocus=s.onFocus.bind(s),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"blockEvent",value:function(e){e.preventDefault(),e.stopPropagation(),"A"===e.target.tagName&&"href"in e.target&&(e.target.target?window.open(e.target.href,e.target.target):window.location.href=e.target.href)}},{key:"handleMouseDown",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.onSelect(this.props.option,e)}},{key:"handleMouseEnter",value:function(e){this.onFocus(e)}},{key:"handleMouseMove",value:function(e){this.onFocus(e)}},{key:"handleTouchEnd",value:function(e){this.dragging||this.handleMouseDown(e)}},{key:"handleTouchMove",value:function(e){this.dragging=!0}},{key:"handleTouchStart",value:function(e){this.dragging=!1}},{key:"onFocus",value:function(e){this.props.isFocused||this.props.onFocus(this.props.option,e)}},{key:"render",value:function(){var e=this.props,t=e.option,s=e.instancePrefix,r=e.optionIndex,n=(0,o.default)(this.props.className,t.className);return t.disabled?i.default.createElement("div",{className:n,onMouseDown:this.blockEvent,onClick:this.blockEvent},this.props.children):i.default.createElement("div",{className:n,style:t.style,role:"option",onMouseDown:this.handleMouseDown,onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd,id:s+"-option-"+r,title:t.title},this.props.children)}}]),t}(i.default.Component);l.propTypes={children:n.default.node,className:n.default.string,instancePrefix:n.default.string.isRequired,isDisabled:n.default.bool,isFocused:n.default.bool,isSelected:n.default.bool,onFocus:n.default.func,onSelect:n.default.func,onUnfocus:n.default.func,option:n.default.object.isRequired,optionIndex:n.default.number},t.default=l},"./node_modules/react-select/lib/Select.js":(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}(),o=f(s("./node_modules/react/index.js")),a=f(s("./node_modules/prop-types/index.js")),l=f(s("./node_modules/react-dom/index.js")),d=f(s("./node_modules/react-input-autosize/lib/AutosizeInput.js")),u=f(s("./node_modules/classnames/index.js")),c=f(s("./node_modules/react-select/lib/utils/defaultArrowRenderer.js")),p=f(s("./node_modules/react-select/lib/utils/defaultFilterOptions.js")),h=f(s("./node_modules/react-select/lib/utils/defaultMenuRenderer.js")),g=f(s("./node_modules/react-select/lib/utils/defaultClearRenderer.js")),m=f(s("./node_modules/react-select/lib/Option.js")),_=f(s("./node_modules/react-select/lib/Value.js"));function f(e){return e&&e.__esModule?e:{default:e}}function v(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
/*!
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 Copyright (c) 2017 Jed Watson.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 Licensed under the MIT License (MIT), see
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 http://jedwatson.github.io/react-select
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               */
var S=function(e){return"string"==typeof e?e:null!==e&&JSON.stringify(e)||""},C=a.default.oneOfType([a.default.string,a.default.node]),b=1,y=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return["clearValue","focusOption","handleInputBlur","handleInputChange","handleInputFocus","handleInputValueChange","handleKeyDown","handleMenuScroll","handleMouseDown","handleMouseDownOnArrow","handleMouseDownOnMenu","handleRequired","handleTouchOutside","handleTouchMove","handleTouchStart","handleTouchEnd","handleTouchEndClearValue","handleValueClick","getOptionLabel","onOptionRef","removeValue","selectValue"].forEach((function(e){return s[e]=s[e].bind(s)})),s.state={inputValue:"",isFocused:!1,isOpen:!1,isPseudoFocused:!1,required:!1},s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentWillMount",value:function(){this._instancePrefix="react-select-"+(this.props.instanceId||++b)+"-";var e=this.getValueArray(this.props.value);this.props.required&&this.setState({required:this.handleRequired(e[0],this.props.multi)})}},{key:"componentDidMount",value:function(){this.props.autofocus&&this.focus()}},{key:"componentWillReceiveProps",value:function(e){var t=this.getValueArray(e.value,e);e.required?this.setState({required:this.handleRequired(t[0],e.multi)}):this.props.required&&this.setState({required:!1})}},{key:"componentWillUpdate",value:function(e,t){if(t.isOpen!==this.state.isOpen){this.toggleTouchOutsideEvent(t.isOpen);var s=t.isOpen?e.onOpen:e.onClose;s&&s()}}},{key:"componentDidUpdate",value:function(e,t){if(this.menu&&this.focused&&this.state.isOpen&&!this.hasScrolledToOption){var s=l.default.findDOMNode(this.focused);l.default.findDOMNode(this.menu).scrollTop=s.offsetTop,this.hasScrolledToOption=!0}else this.state.isOpen||(this.hasScrolledToOption=!1);if(this._scrollToFocusedOptionOnUpdate&&this.focused&&this.menu){this._scrollToFocusedOptionOnUpdate=!1;var r=l.default.findDOMNode(this.focused),i=l.default.findDOMNode(this.menu),n=r.getBoundingClientRect(),o=i.getBoundingClientRect();n.bottom>o.bottom?i.scrollTop=r.offsetTop+r.clientHeight-i.offsetHeight:n.top<o.top&&(i.scrollTop=r.offsetTop)}if(this.props.scrollMenuIntoView&&this.menuContainer){var a=this.menuContainer.getBoundingClientRect();window.innerHeight<a.bottom+this.props.menuBuffer&&window.scrollBy(0,a.bottom+this.props.menuBuffer-window.innerHeight)}e.disabled!==this.props.disabled&&(this.setState({isFocused:!1}),this.closeMenu())}},{key:"componentWillUnmount",value:function(){!document.removeEventListener&&document.detachEvent?document.detachEvent("ontouchstart",this.handleTouchOutside):document.removeEventListener("touchstart",this.handleTouchOutside)}},{key:"toggleTouchOutsideEvent",value:function(e){e?!document.addEventListener&&document.attachEvent?document.attachEvent("ontouchstart",this.handleTouchOutside):document.addEventListener("touchstart",this.handleTouchOutside):!document.removeEventListener&&document.detachEvent?document.detachEvent("ontouchstart",this.handleTouchOutside):document.removeEventListener("touchstart",this.handleTouchOutside)}},{key:"handleTouchOutside",value:function(e){this.wrapper&&!this.wrapper.contains(e.target)&&this.closeMenu()}},{key:"focus",value:function(){this.input&&this.input.focus()}},{key:"blurInput",value:function(){this.input&&this.input.blur()}},{key:"handleTouchMove",value:function(e){this.dragging=!0}},{key:"handleTouchStart",value:function(e){this.dragging=!1}},{key:"handleTouchEnd",value:function(e){this.dragging||this.handleMouseDown(e)}},{key:"handleTouchEndClearValue",value:function(e){this.dragging||this.clearValue(e)}},{key:"handleMouseDown",value:function(e){if(!(this.props.disabled||"mousedown"===e.type&&0!==e.button)&&"INPUT"!==e.target.tagName){if(e.stopPropagation(),e.preventDefault(),!this.props.searchable)return this.focus(),this.setState({isOpen:!this.state.isOpen});if(this.state.isFocused){this.focus();var t=this.input;"function"==typeof t.getInput&&(t=t.getInput()),t.value="",this.setState({isOpen:!0,isPseudoFocused:!1})}else this._openAfterFocus=this.props.openOnClick,this.focus()}}},{key:"handleMouseDownOnArrow",value:function(e){this.props.disabled||"mousedown"===e.type&&0!==e.button||this.state.isOpen&&(e.stopPropagation(),e.preventDefault(),this.closeMenu())}},{key:"handleMouseDownOnMenu",value:function(e){this.props.disabled||"mousedown"===e.type&&0!==e.button||(e.stopPropagation(),e.preventDefault(),this._openAfterFocus=!0,this.focus())}},{key:"closeMenu",value:function(){this.props.onCloseResetsInput?this.setState({isOpen:!1,isPseudoFocused:this.state.isFocused&&!this.props.multi,inputValue:this.handleInputValueChange("")}):this.setState({isOpen:!1,isPseudoFocused:this.state.isFocused&&!this.props.multi}),this.hasScrolledToOption=!1}},{key:"handleInputFocus",value:function(e){if(!this.props.disabled){var t=this.state.isOpen||this._openAfterFocus||this.props.openOnFocus;this.props.onFocus&&this.props.onFocus(e),this.setState({isFocused:!0,isOpen:t}),this._openAfterFocus=!1}}},{key:"handleInputBlur",value:function(e){if(!this.menu||this.menu!==document.activeElement&&!this.menu.contains(document.activeElement)){this.props.onBlur&&this.props.onBlur(e);var t={isFocused:!1,isOpen:!1,isPseudoFocused:!1};this.props.onBlurResetsInput&&(t.inputValue=this.handleInputValueChange("")),this.setState(t)}else this.focus()}},{key:"handleInputChange",value:function(e){var t=e.target.value;this.state.inputValue!==e.target.value&&(t=this.handleInputValueChange(t)),this.setState({isOpen:!0,isPseudoFocused:!1,inputValue:t})}},{key:"handleInputValueChange",value:function(e){if(this.props.onInputChange){var t=this.props.onInputChange(e);null!=t&&"object"!==(void 0===t?"undefined":i(t))&&(e=""+t)}return e}},{key:"handleKeyDown",value:function(e){if(!(this.props.disabled||"function"==typeof this.props.onInputKeyDown&&(this.props.onInputKeyDown(e),e.defaultPrevented))){switch(e.keyCode){case 8:return void(!this.state.inputValue&&this.props.backspaceRemoves&&(e.preventDefault(),this.popValue()));case 9:if(e.shiftKey||!this.state.isOpen||!this.props.tabSelectsValue)return;return void this.selectFocusedOption();case 13:if(!this.state.isOpen)return;e.stopPropagation(),this.selectFocusedOption();break;case 27:this.state.isOpen?(this.closeMenu(),e.stopPropagation()):this.props.clearable&&this.props.escapeClearsValue&&(this.clearValue(e),e.stopPropagation());break;case 38:this.focusPreviousOption();break;case 40:this.focusNextOption();break;case 33:this.focusPageUpOption();break;case 34:this.focusPageDownOption();break;case 35:if(e.shiftKey)return;this.focusEndOption();break;case 36:if(e.shiftKey)return;this.focusStartOption();break;case 46:return void(!this.state.inputValue&&this.props.deleteRemoves&&(e.preventDefault(),this.popValue()));default:return}e.preventDefault()}}},{key:"handleValueClick",value:function(e,t){this.props.onValueClick&&this.props.onValueClick(e,t)}},{key:"handleMenuScroll",value:function(e){if(this.props.onMenuScrollToBottom){var t=e.target;t.scrollHeight>t.offsetHeight&&t.scrollHeight-t.offsetHeight-t.scrollTop<=0&&this.props.onMenuScrollToBottom()}}},{key:"handleRequired",value:function(e,t){return!e||(t?0===e.length:0===Object.keys(e).length)}},{key:"getOptionLabel",value:function(e){return e[this.props.labelKey]}},{key:"getValueArray",value:function(e,t){var s=this,r="object"===(void 0===t?"undefined":i(t))?t:this.props;if(r.multi){if("string"==typeof e&&(e=e.split(r.delimiter)),!Array.isArray(e)){if(null==e)return[];e=[e]}return e.map((function(e){return s.expandValue(e,r)})).filter((function(e){return e}))}var n=this.expandValue(e,r);return n?[n]:[]}},{key:"expandValue",value:function(e,t){var s=void 0===e?"undefined":i(e);if("string"!==s&&"number"!==s&&"boolean"!==s)return e;var r=t.options,n=t.valueKey;if(r)for(var o=0;o<r.length;o++)if(r[o][n]===e)return r[o]}},{key:"setValue",value:function(e){var t=this;if(this.props.autoBlur&&this.blurInput(),this.props.required){var s=this.handleRequired(e,this.props.multi);this.setState({required:s})}this.props.onChange&&(this.props.simpleValue&&e&&(e=this.props.multi?e.map((function(e){return e[t.props.valueKey]})).join(this.props.delimiter):e[this.props.valueKey]),this.props.onChange(e))}},{key:"selectValue",value:function(e){var t=this;if(this.props.closeOnSelect&&(this.hasScrolledToOption=!1),this.props.multi){var s=this.props.onSelectResetsInput?"":this.state.inputValue;this.setState({focusedIndex:null,inputValue:this.handleInputValueChange(s),isOpen:!this.props.closeOnSelect},(function(){t.addValue(e)}))}else this.setState({inputValue:this.handleInputValueChange(""),isOpen:!this.props.closeOnSelect,isPseudoFocused:this.state.isFocused},(function(){t.setValue(e)}))}},{key:"addValue",value:function(e){var t=this.getValueArray(this.props.value),s=this._visibleOptions.filter((function(e){return!e.disabled})),r=s.indexOf(e);this.setValue(t.concat(e)),s.length-1===r?this.focusOption(s[r-1]):s.length>r&&this.focusOption(s[r+1])}},{key:"popValue",value:function(){var e=this.getValueArray(this.props.value);e.length&&!1!==e[e.length-1].clearableValue&&this.setValue(this.props.multi?e.slice(0,e.length-1):null)}},{key:"removeValue",value:function(e){var t=this.getValueArray(this.props.value);this.setValue(t.filter((function(t){return t!==e}))),this.focus()}},{key:"clearValue",value:function(e){e&&"mousedown"===e.type&&0!==e.button||(e.stopPropagation(),e.preventDefault(),this.setValue(this.getResetValue()),this.setState({isOpen:!1,inputValue:this.handleInputValueChange("")},this.focus))}},{key:"getResetValue",value:function(){return void 0!==this.props.resetValue?this.props.resetValue:this.props.multi?[]:null}},{key:"focusOption",value:function(e){this.setState({focusedOption:e})}},{key:"focusNextOption",value:function(){this.focusAdjacentOption("next")}},{key:"focusPreviousOption",value:function(){this.focusAdjacentOption("previous")}},{key:"focusPageUpOption",value:function(){this.focusAdjacentOption("page_up")}},{key:"focusPageDownOption",value:function(){this.focusAdjacentOption("page_down")}},{key:"focusStartOption",value:function(){this.focusAdjacentOption("start")}},{key:"focusEndOption",value:function(){this.focusAdjacentOption("end")}},{key:"focusAdjacentOption",value:function(e){var t=this._visibleOptions.map((function(e,t){return{option:e,index:t}})).filter((function(e){return!e.option.disabled}));if(this._scrollToFocusedOptionOnUpdate=!0,this.state.isOpen){if(t.length){for(var s=-1,r=0;r<t.length;r++)if(this._focusedOption===t[r].option){s=r;break}if("next"===e&&-1!==s)s=(s+1)%t.length;else if("previous"===e)s>0?s-=1:s=t.length-1;else if("start"===e)s=0;else if("end"===e)s=t.length-1;else if("page_up"===e){s=(i=s-this.props.pageSize)<0?0:i}else if("page_down"===e){var i;s=(i=s+this.props.pageSize)>t.length-1?t.length-1:i}-1===s&&(s=0),this.setState({focusedIndex:t[s].index,focusedOption:t[s].option})}}else this.setState({isOpen:!0,inputValue:"",focusedOption:this._focusedOption||(t.length?t["next"===e?0:t.length-1].option:null)})}},{key:"getFocusedOption",value:function(){return this._focusedOption}},{key:"getInputValue",value:function(){return this.state.inputValue}},{key:"selectFocusedOption",value:function(){if(this._focusedOption)return this.selectValue(this._focusedOption)}},{key:"renderLoading",value:function(){if(this.props.isLoading)return o.default.createElement("span",{className:"Select-loading-zone","aria-hidden":"true"},o.default.createElement("span",{className:"Select-loading"}))}},{key:"renderValue",value:function(e,t){var s=this,r=this.props.valueRenderer||this.getOptionLabel,i=this.props.valueComponent;if(!e.length)return this.state.inputValue?null:o.default.createElement("div",{className:"Select-placeholder"},this.props.placeholder);var n=this.props.onValueClick?this.handleValueClick:null;return this.props.multi?e.map((function(e,t){return o.default.createElement(i,{id:s._instancePrefix+"-value-"+t,instancePrefix:s._instancePrefix,disabled:s.props.disabled||!1===e.clearableValue,key:"value-"+t+"-"+e[s.props.valueKey],onClick:n,onRemove:s.removeValue,value:e},r(e,t),o.default.createElement("span",{className:"Select-aria-only"}," "))})):this.state.inputValue?void 0:(t&&(n=null),o.default.createElement(i,{id:this._instancePrefix+"-value-item",disabled:this.props.disabled,instancePrefix:this._instancePrefix,onClick:n,value:e[0]},r(e[0])))}},{key:"renderInput",value:function(e,t){var s,i=this,n=(0,u.default)("Select-input",this.props.inputProps.className),a=!!this.state.isOpen,l=(0,u.default)((v(s={},this._instancePrefix+"-list",a),v(s,this._instancePrefix+"-backspace-remove-message",this.props.multi&&!this.props.disabled&&this.state.isFocused&&!this.state.inputValue),s)),c=r({},this.props.inputProps,{role:"combobox","aria-expanded":""+a,"aria-owns":l,"aria-haspopup":""+a,"aria-activedescendant":a?this._instancePrefix+"-option-"+t:this._instancePrefix+"-value","aria-describedby":this.props["aria-describedby"],"aria-labelledby":this.props["aria-labelledby"],"aria-label":this.props["aria-label"],className:n,tabIndex:this.props.tabIndex,onBlur:this.handleInputBlur,onChange:this.handleInputChange,onFocus:this.handleInputFocus,ref:function(e){return i.input=e},required:this.state.required,value:this.state.inputValue});if(this.props.inputRenderer)return this.props.inputRenderer(c);if(this.props.disabled||!this.props.searchable){var p=this.props.inputProps,h=(p.inputClassName,function(e,t){var s={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s}(p,["inputClassName"])),g=(0,u.default)(v({},this._instancePrefix+"-list",a));return o.default.createElement("div",r({},h,{role:"combobox","aria-expanded":a,"aria-owns":g,"aria-activedescendant":a?this._instancePrefix+"-option-"+t:this._instancePrefix+"-value",className:n,tabIndex:this.props.tabIndex||0,onBlur:this.handleInputBlur,onFocus:this.handleInputFocus,ref:function(e){return i.input=e},"aria-readonly":""+!!this.props.disabled,style:{border:0,width:1,display:"inline-block"}}))}return this.props.autosize?o.default.createElement(d.default,r({},c,{minWidth:"5"})):o.default.createElement("div",{className:n},o.default.createElement("input",c))}},{key:"renderClear",value:function(){if(!(!this.props.clearable||void 0===this.props.value||null===this.props.value||this.props.multi&&!this.props.value.length||this.props.disabled||this.props.isLoading)){var e=this.props.clearRenderer();return o.default.createElement("span",{className:"Select-clear-zone",title:this.props.multi?this.props.clearAllText:this.props.clearValueText,"aria-label":this.props.multi?this.props.clearAllText:this.props.clearValueText,onMouseDown:this.clearValue,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEndClearValue},e)}}},{key:"renderArrow",value:function(){var e=this.handleMouseDownOnArrow,t=this.state.isOpen,s=this.props.arrowRenderer({onMouseDown:e,isOpen:t});return o.default.createElement("span",{className:"Select-arrow-zone",onMouseDown:e},s)}},{key:"filterOptions",value:function(e){var t=this.state.inputValue,s=this.props.options||[];if(this.props.filterOptions){var r="function"==typeof this.props.filterOptions?this.props.filterOptions:p.default;return r(s,t,e,{filterOption:this.props.filterOption,ignoreAccents:this.props.ignoreAccents,ignoreCase:this.props.ignoreCase,labelKey:this.props.labelKey,matchPos:this.props.matchPos,matchProp:this.props.matchProp,valueKey:this.props.valueKey})}return s}},{key:"onOptionRef",value:function(e,t){t&&(this.focused=e)}},{key:"renderMenu",value:function(e,t,s){return e&&e.length?this.props.menuRenderer({focusedOption:s,focusOption:this.focusOption,instancePrefix:this._instancePrefix,labelKey:this.props.labelKey,onFocus:this.focusOption,onSelect:this.selectValue,optionClassName:this.props.optionClassName,optionComponent:this.props.optionComponent,optionRenderer:this.props.optionRenderer||this.getOptionLabel,options:e,selectValue:this.selectValue,valueArray:t,valueKey:this.props.valueKey,onOptionRef:this.onOptionRef}):this.props.noResultsText?o.default.createElement("div",{className:"Select-noresults"},this.props.noResultsText):null}},{key:"renderHiddenField",value:function(e){var t=this;if(this.props.name){if(this.props.joinValues){var s=e.map((function(e){return S(e[t.props.valueKey])})).join(this.props.delimiter);return o.default.createElement("input",{type:"hidden",ref:function(e){return t.value=e},name:this.props.name,value:s,disabled:this.props.disabled})}return e.map((function(e,s){return o.default.createElement("input",{key:"hidden."+s,type:"hidden",ref:"value"+s,name:t.props.name,value:S(e[t.props.valueKey]),disabled:t.props.disabled})}))}}},{key:"getFocusableOptionIndex",value:function(e){var t=this._visibleOptions;if(!t.length)return null;var s=this.props.valueKey,r=this.state.focusedOption||e;if(r&&!r.disabled){var i=-1;if(t.some((function(e,t){var n=e[s]===r[s];return n&&(i=t),n})),-1!==i)return i}for(var n=0;n<t.length;n++)if(!t[n].disabled)return n;return null}},{key:"renderOuter",value:function(e,t,s){var r=this,i=this.renderMenu(e,t,s);return i?o.default.createElement("div",{ref:function(e){return r.menuContainer=e},className:"Select-menu-outer",style:this.props.menuContainerStyle},o.default.createElement("div",{ref:function(e){return r.menu=e},role:"listbox",tabIndex:-1,className:"Select-menu",id:this._instancePrefix+"-list",style:this.props.menuStyle,onScroll:this.handleMenuScroll,onMouseDown:this.handleMouseDownOnMenu},i)):null}},{key:"render",value:function(){var e=this,t=this.getValueArray(this.props.value),s=this._visibleOptions=this.filterOptions(this.props.multi?this.getValueArray(this.props.value):null),r=this.state.isOpen;this.props.multi&&!s.length&&t.length&&!this.state.inputValue&&(r=!1);var i=this.getFocusableOptionIndex(t[0]),n=null;n=this._focusedOption=null!==i?s[i]:null;var a=(0,u.default)("Select",this.props.className,{"Select--multi":this.props.multi,"Select--single":!this.props.multi,"is-clearable":this.props.clearable,"is-disabled":this.props.disabled,"is-focused":this.state.isFocused,"is-loading":this.props.isLoading,"is-open":r,"is-pseudo-focused":this.state.isPseudoFocused,"is-searchable":this.props.searchable,"has-value":t.length}),l=null;return this.props.multi&&!this.props.disabled&&t.length&&!this.state.inputValue&&this.state.isFocused&&this.props.backspaceRemoves&&(l=o.default.createElement("span",{id:this._instancePrefix+"-backspace-remove-message",className:"Select-aria-only","aria-live":"assertive"},this.props.backspaceToRemoveMessage.replace("{label}",t[t.length-1][this.props.labelKey]))),o.default.createElement("div",{ref:function(t){return e.wrapper=t},className:a,style:this.props.wrapperStyle},this.renderHiddenField(t),o.default.createElement("div",{ref:function(t){return e.control=t},className:"Select-control",style:this.props.style,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,onTouchEnd:this.handleTouchEnd,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove},o.default.createElement("span",{className:"Select-multi-value-wrapper",id:this._instancePrefix+"-value"},this.renderValue(t,r),this.renderInput(t,i)),l,this.renderLoading(),this.renderClear(),this.renderArrow()),r?this.renderOuter(s,this.props.multi?null:t,n):null)}}]),t}(o.default.Component);y.propTypes={"aria-describedby":a.default.string,"aria-label":a.default.string,"aria-labelledby":a.default.string,addLabelText:a.default.string,arrowRenderer:a.default.func,autoBlur:a.default.bool,autofocus:a.default.bool,autosize:a.default.bool,backspaceRemoves:a.default.bool,backspaceToRemoveMessage:a.default.string,className:a.default.string,clearAllText:C,clearRenderer:a.default.func,clearValueText:C,clearable:a.default.bool,closeOnSelect:a.default.bool,deleteRemoves:a.default.bool,delimiter:a.default.string,disabled:a.default.bool,escapeClearsValue:a.default.bool,filterOption:a.default.func,filterOptions:a.default.any,ignoreAccents:a.default.bool,ignoreCase:a.default.bool,inputProps:a.default.object,inputRenderer:a.default.func,instanceId:a.default.string,isLoading:a.default.bool,joinValues:a.default.bool,labelKey:a.default.string,matchPos:a.default.string,matchProp:a.default.string,menuBuffer:a.default.number,menuContainerStyle:a.default.object,menuRenderer:a.default.func,menuStyle:a.default.object,multi:a.default.bool,name:a.default.string,noResultsText:C,onBlur:a.default.func,onBlurResetsInput:a.default.bool,onChange:a.default.func,onClose:a.default.func,onCloseResetsInput:a.default.bool,onFocus:a.default.func,onInputChange:a.default.func,onInputKeyDown:a.default.func,onMenuScrollToBottom:a.default.func,onOpen:a.default.func,onSelectResetsInput:a.default.bool,onValueClick:a.default.func,openOnClick:a.default.bool,openOnFocus:a.default.bool,optionClassName:a.default.string,optionComponent:a.default.func,optionRenderer:a.default.func,options:a.default.array,pageSize:a.default.number,placeholder:C,required:a.default.bool,resetValue:a.default.any,scrollMenuIntoView:a.default.bool,searchable:a.default.bool,simpleValue:a.default.bool,style:a.default.object,tabIndex:a.default.string,tabSelectsValue:a.default.bool,value:a.default.any,valueComponent:a.default.func,valueKey:a.default.string,valueRenderer:a.default.func,wrapperStyle:a.default.object},y.defaultProps={addLabelText:'Add "{label}"?',arrowRenderer:c.default,autosize:!0,backspaceRemoves:!0,backspaceToRemoveMessage:"Press backspace to remove {label}",clearable:!0,clearAllText:"Clear all",clearRenderer:g.default,clearValueText:"Clear value",closeOnSelect:!0,deleteRemoves:!0,delimiter:",",disabled:!1,escapeClearsValue:!0,filterOptions:p.default,ignoreAccents:!0,ignoreCase:!0,inputProps:{},isLoading:!1,joinValues:!1,labelKey:"label",matchPos:"any",matchProp:"any",menuBuffer:0,menuRenderer:h.default,multi:!1,noResultsText:"No results found",onBlurResetsInput:!0,onSelectResetsInput:!0,onCloseResetsInput:!0,openOnClick:!0,optionComponent:m.default,pageSize:5,placeholder:"Select...",required:!1,scrollMenuIntoView:!0,searchable:!0,simpleValue:!1,tabSelectsValue:!0,valueComponent:_.default,valueKey:"value"},t.default=y},"./node_modules/react-select/lib/Value.js":(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}(),i=a(s("./node_modules/react/index.js")),n=a(s("./node_modules/prop-types/index.js")),o=a(s("./node_modules/classnames/index.js"));function a(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.handleMouseDown=s.handleMouseDown.bind(s),s.onRemove=s.onRemove.bind(s),s.handleTouchEndRemove=s.handleTouchEndRemove.bind(s),s.handleTouchMove=s.handleTouchMove.bind(s),s.handleTouchStart=s.handleTouchStart.bind(s),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"handleMouseDown",value:function(e){if("mousedown"!==e.type||0===e.button)return this.props.onClick?(e.stopPropagation(),void this.props.onClick(this.props.value,e)):void(this.props.value.href&&e.stopPropagation())}},{key:"onRemove",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.onRemove(this.props.value)}},{key:"handleTouchEndRemove",value:function(e){this.dragging||this.onRemove(e)}},{key:"handleTouchMove",value:function(e){this.dragging=!0}},{key:"handleTouchStart",value:function(e){this.dragging=!1}},{key:"renderRemoveIcon",value:function(){if(!this.props.disabled&&this.props.onRemove)return i.default.createElement("span",{className:"Select-value-icon","aria-hidden":"true",onMouseDown:this.onRemove,onTouchEnd:this.handleTouchEndRemove,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove},"×")}},{key:"renderLabel",value:function(){var e="Select-value-label";return this.props.onClick||this.props.value.href?i.default.createElement("a",{className:e,href:this.props.value.href,target:this.props.value.target,onMouseDown:this.handleMouseDown,onTouchEnd:this.handleMouseDown},this.props.children):i.default.createElement("span",{className:e,role:"option","aria-selected":"true",id:this.props.id},this.props.children)}},{key:"render",value:function(){return i.default.createElement("div",{className:(0,o.default)("Select-value",this.props.value.className),style:this.props.value.style,title:this.props.value.title},this.renderRemoveIcon(),this.renderLabel())}}]),t}(i.default.Component);l.propTypes={children:n.default.node,disabled:n.default.bool,id:n.default.string,onClick:n.default.func,onRemove:n.default.func,value:n.default.object.isRequired},t.default=l},"./node_modules/react-select/lib/index.js":(e,t,s)=>{"use strict";var r=l(s("./node_modules/react-select/lib/Select.js")),i=l(s("./node_modules/react-select/lib/Async.js")),n=l(s("./node_modules/react-select/lib/AsyncCreatable.js")),o=l(s("./node_modules/react-select/lib/Creatable.js")),a=l(s("./node_modules/react-select/lib/Value.js"));function l(e){return e&&e.__esModule?e:{default:e}}r.default.Async=i.default,r.default.AsyncCreatable=n.default,r.default.Creatable=o.default,r.default.Value=a.default,t.ZP=r.default,i.default,n.default,o.default,a.default},"./node_modules/react-select/lib/utils/defaultArrowRenderer.js":(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=n(s("./node_modules/react/index.js")),i=n(s("./node_modules/prop-types/index.js"));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.onMouseDown;return r.default.createElement("span",{className:"Select-arrow",onMouseDown:t})}o.propTypes={onMouseDown:i.default.func}},"./node_modules/react-select/lib/utils/defaultClearRenderer.js":(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return n.default.createElement("span",{className:"Select-clear",dangerouslySetInnerHTML:{__html:"&times;"}})};var r,i=s("./node_modules/react/index.js"),n=(r=i)&&r.__esModule?r:{default:r}},"./node_modules/react-select/lib/utils/defaultFilterOptions.js":(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=s("./node_modules/react-select/lib/utils/stripDiacritics.js"),n=(r=i)&&r.__esModule?r:{default:r};t.default=function(e,t,s,r){var i=this;return r.ignoreAccents&&(t=(0,n.default)(t)),r.ignoreCase&&(t=t.toLowerCase()),s&&(s=s.map((function(e){return e[r.valueKey]}))),e.filter((function(e){if(s&&s.indexOf(e[r.valueKey])>-1)return!1;if(r.filterOption)return r.filterOption.call(i,e,t);if(!t)return!0;var o=String(e[r.valueKey]),a=String(e[r.labelKey]);return r.ignoreAccents&&("label"!==r.matchProp&&(o=(0,n.default)(o)),"value"!==r.matchProp&&(a=(0,n.default)(a))),r.ignoreCase&&("label"!==r.matchProp&&(o=o.toLowerCase()),"value"!==r.matchProp&&(a=a.toLowerCase())),"start"===r.matchPos?"label"!==r.matchProp&&o.substr(0,t.length)===t||"value"!==r.matchProp&&a.substr(0,t.length)===t:"label"!==r.matchProp&&o.indexOf(t)>=0||"value"!==r.matchProp&&a.indexOf(t)>=0}))}},"./node_modules/react-select/lib/utils/defaultMenuRenderer.js":(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(s("./node_modules/classnames/index.js")),i=n(s("./node_modules/react/index.js"));function n(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.focusedOption,s=e.instancePrefix,n=(e.labelKey,e.onFocus),o=e.onSelect,a=e.optionClassName,l=e.optionComponent,d=e.optionRenderer,u=e.options,c=e.valueArray,p=e.valueKey,h=e.onOptionRef,g=l;return u.map((function(e,l){var u=c&&c.indexOf(e)>-1,m=e===t,_=(0,r.default)(a,{"Select-option":!0,"is-selected":u,"is-focused":m,"is-disabled":e.disabled});return i.default.createElement(g,{className:_,instancePrefix:s,isDisabled:e.disabled,isFocused:m,isSelected:u,key:"option-"+l+"-"+e[p],onFocus:n,onSelect:o,option:e,optionIndex:l,ref:function(e){h(e,m)}},d(e,l))}))}},"./node_modules/react-select/lib/utils/stripDiacritics.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=0;t<s.length;t++)e=e.replace(s[t].letters,s[t].base);return e};var s=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}]},"./node_modules/react-themeable/dist/index.js":(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var s=[],r=!0,i=!1,n=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done)&&(s.push(o.value),!t||s.length!==t);r=!0);}catch(l){i=!0,n=l}finally{try{!r&&a.return&&a.return()}finally{if(i)throw n}}return s}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function i(e){if(Array.isArray(e)){for(var t=0,s=Array(e.length);t<e.length;t++)s[t]=e[t];return s}return Array.from(e)}var n,o=s("./node_modules/react-themeable/node_modules/object-assign/index.js"),a=(n=o)&&n.__esModule?n:{default:n},l=function(e){return e};t.default=function(e){var t=Array.isArray(e)&&2===e.length?e:[e,null],s=r(t,2),n=s[0],o=s[1];return function(e){for(var t=arguments.length,s=Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];var d=s.map((function(e){return n[e]})).filter(l);return"string"==typeof d[0]||"function"==typeof o?{key:e,className:o?o.apply(void 0,i(d)):d.join(" ")}:{key:e,style:a.default.apply(void 0,[{}].concat(i(d)))}}},e.exports=t.default},"./node_modules/react-themeable/node_modules/object-assign/index.js":e=>{"use strict";var t=Object.prototype.propertyIsEnumerable;function s(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function r(e){var s=Object.getOwnPropertyNames(e);return Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(e))),s.filter((function(s){return t.call(e,s)}))}e.exports=Object.assign||function(e,t){for(var i,n,o=s(e),a=1;a<arguments.length;a++){i=arguments[a],n=r(Object(i));for(var l=0;l<n.length;l++)o[n[l]]=i[n[l]]}return o}},"./node_modules/rope-sequence/dist/index.js":e=>{var t=200,s=function(){};s.prototype.append=function(e){return e.length?(e=s.from(e),!this.length&&e||e.length<t&&this.leafAppend(e)||this.length<t&&e.leafPrepend(this)||this.appendInner(e)):this},s.prototype.prepend=function(e){return e.length?s.from(e).append(this):this},s.prototype.appendInner=function(e){return new i(this,e)},s.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?s.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},s.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},s.prototype.forEach=function(e,t,s){void 0===t&&(t=0),void 0===s&&(s=this.length),t<=s?this.forEachInner(e,t,s,0):this.forEachInvertedInner(e,t,s,0)},s.prototype.map=function(e,t,s){void 0===t&&(t=0),void 0===s&&(s=this.length);var r=[];return this.forEach((function(t,s){return r.push(e(t,s))}),t,s),r},s.from=function(e){return e instanceof s?e:e&&e.length?new r(e):s.empty};var r=function(e){function s(t){e.call(this),this.values=t}e&&(s.__proto__=e),s.prototype=Object.create(e&&e.prototype),s.prototype.constructor=s;var r={length:{},depth:{}};return s.prototype.flatten=function(){return this.values},s.prototype.sliceInner=function(e,t){return 0==e&&t==this.length?this:new s(this.values.slice(e,t))},s.prototype.getInner=function(e){return this.values[e]},s.prototype.forEachInner=function(e,t,s,r){for(var i=t;i<s;i++)if(!1===e(this.values[i],r+i))return!1},s.prototype.forEachInvertedInner=function(e,t,s,r){for(var i=t-1;i>=s;i--)if(!1===e(this.values[i],r+i))return!1},s.prototype.leafAppend=function(e){if(this.length+e.length<=t)return new s(this.values.concat(e.flatten()))},s.prototype.leafPrepend=function(e){if(this.length+e.length<=t)return new s(e.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(s.prototype,r),s}(s);s.empty=new r([]);var i=function(e){function t(t,s){e.call(this),this.left=t,this.right=s,this.length=t.length+s.length,this.depth=Math.max(t.depth,s.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,s,r){var i=this.left.length;return!(t<i&&!1===this.left.forEachInner(e,t,Math.min(s,i),r))&&(!(s>i&&!1===this.right.forEachInner(e,Math.max(t-i,0),Math.min(this.length,s)-i,r+i))&&void 0)},t.prototype.forEachInvertedInner=function(e,t,s,r){var i=this.left.length;return!(t>i&&!1===this.right.forEachInvertedInner(e,t-i,Math.max(s,i)-i,r+i))&&(!(s<i&&!1===this.left.forEachInvertedInner(e,Math.min(t,i),s,r))&&void 0)},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var s=this.left.length;return t<=s?this.left.slice(e,t):e>=s?this.right.slice(e-s,t-s):this.left.slice(e,s).append(this.right.slice(0,t-s))},t.prototype.leafAppend=function(e){var s=this.right.leafAppend(e);if(s)return new t(this.left,s)},t.prototype.leafPrepend=function(e){var s=this.left.leafPrepend(e);if(s)return new t(s,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(s);e.exports=s},"./node_modules/section-iterator/dist/index.js":e=>{"use strict";var t=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var s=[],r=!0,i=!1,n=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done)&&(s.push(o.value),!t||s.length!==t);r=!0);}catch(l){i=!0,n=l}finally{try{!r&&a.return&&a.return()}finally{if(i)throw n}}return s}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};e.exports=function(e){var s=e.data,r=e.multiSection;function i(e){var i=t(e,2),n=i[0],o=i[1];return r?null===o||o===s[n]-1?null===(n=function(e){for(null===e?e=0:e++;e<s.length&&0===s[e];)e++;return e===s.length?null:e}(n))?[null,null]:[n,0]:[n,o+1]:0===s||o===s-1?[null,null]:null===o?[null,0]:[null,o+1]}return{next:i,prev:function(e){var i=t(e,2),n=i[0],o=i[1];return r?null===o||0===o?null===(n=function(e){for(null===e?e=s.length-1:e--;e>=0&&0===s[e];)e--;return-1===e?null:e}(n))?[null,null]:[n,s[n]-1]:[n,o-1]:0===s||0===o?[null,null]:null===o?[null,s-1]:[null,o-1]},isLast:function(e){return null===i(e)[1]}}}},"./node_modules/shallow-equal/arrays/index.js":e=>{"use strict";e.exports=function(e,t){if(e===t)return!0;if(!e||!t)return!1;var s=e.length;if(t.length!==s)return!1;for(var r=0;r<s;r++)if(e[r]!==t[r])return!1;return!0}},"./node_modules/w3c-keyname/index.cjs":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});for(var s={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},r={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},i="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),n="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),o="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),a="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),l="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),d=i&&(a||+i[1]<57)||o&&a,u=0;u<10;u++)s[48+u]=s[96+u]=String(u);for(u=1;u<=24;u++)s[u+111]="F"+u;for(u=65;u<=90;u++)s[u]=String.fromCharCode(u+32),r[u]=String.fromCharCode(u);for(var c in s)r.hasOwnProperty(c)||(r[c]=s[c]);t.base=s,t.keyName=function(e){var t=!(d&&(e.ctrlKey||e.altKey||e.metaKey)||(n||l)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?r:s)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t},t.shift=r}},e=>{var t=t=>e(e.s=t);e.O(0,["react","immutable","redux","quizlet_shared_kotlin","rich_text_rendering","pinyin_converter","leaflet","rich_text_editing","common"],(()=>(t("./app/c/create_set/index.styl"),t("./app/j/create_set/create-set.entry.tsx"))));e.O()}]);